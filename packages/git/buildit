#!/bin/sh

BUILDDIR=$1
INSTALLDIR=$2
EXTRAARGS=$3
echo $BUILDDIR
echo $INSTALLDIR
echo $EXTRAARGS
CC=$DIDBS_CC
CPPFLAGS="-I. -I$INSTALLDIR/include"
CFLAGS="$DIDBS_ARCH_CFLAGS -O1"
LDFLAGS="$DIDBS_ARCH_LDFLAGS -L$INSTALLDIR/lib"
LD_LIBRARYN32_PATH="$INSTALLDIR/lib"
PKG_CONFIG_PATH="$INSTALLDIR/lib/pkgconfig"
SHELL="$INSTALLDIR/bin/bash"
CONFIG_SHELL="$INSTALLDIR/bin/bash"
SHELL_PATH="$INSTALLDIR/bin/bash"
PERL="$INSTALLDIR/bin/perl"
PERL_PATH="$INSTALLDIR/bin/perl"
TCLTK_PATH="$INSTALLDIR/bin/wish"
export CC CPPFLAGS CFLAGS LDFLAGS LD_LIBRARYN32_PATH PKG_CONFIG_PATH SHELL CONFIG_SHELL SHELL_PATH PERL PERL_PATH TCLTK_PATH
cd $BUILDDIR || exit -1
# V=1 for verbose compilation output
#make V=1 -j $DIDBS_JOBS || exit -1
make -j $DIDBS_JOBS || exit -1
exit 0

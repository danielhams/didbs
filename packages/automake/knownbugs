===========================================
   GNU Automake 1.16.1: ./test-suite.log
===========================================

# TOTAL: 2644
# PASS:  2377
# SKIP:  214
# XFAIL: 39
# FAIL:  14
# XPASS: 0
# ERROR: 0

.. contents:: :depth: 2

SKIP: t/get-sysconf
===================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/get-sysconf.dir
+ st=0
+ test -d /builds/dan/bootstrapbuilds/automake/automake-1.16.1/.git
+ test -f /builds/dan/bootstrapbuilds/automake/automake-1.16.1/ChangeLog
+ awk '
    BEGIN { first = 1 }
    (first == 1) { print; first = 0; next; }
    /^[^\t]/ { exit(0); }
    { print }
  ' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/ChangeLog
2018-03-11  Mathieu Lirzin  <mthl@gnu.org>

	version 1.16.1

	* configure.ac (AC_INIT): Bump version number to 1.16.1.
	* m4/amversion.m4: Likewise (auto-updated by "make bootstrap").
	* NEWS: Record release version.

+ /builds/dan/bootstrapinstall/bin/perl -V
Summary of my perl5 (revision 5 version 26 subversion 2) configuration:
   
  Platform:
    osname=irix
    osvers=6.5
    archname=IP30-irix-thread-multi
    uname='irix64 leafy 6.5 07202013 ip30 mips irix '
    config_args='-des -Dprefix=/builds/dan/bootstrapinstall -Dusethreads'
    hint=recommended
    useposix=true
    d_sigaction=define
    useithreads=define
    usemultiplicity=define
    use64bitint=undef
    use64bitall=undef
    uselongdouble=undef
    usemymalloc=n
    default_inc_excludes_dot=define
    bincompat5005=undef
  Compiler:
    cc='cc -n32'
    ccflags ='-DPTHREAD_H_FIRST -D_BSD_TYPES -D_BSD_TIME -woff 1184,1552 -c99 -DLANGUAGE_C'
    optimize='-O3 -OPT:Olimit=0:space=ON'
    cppflags='-DPTHREAD_H_FIRST -D_BSD_TYPES -D_BSD_TIME -woff 1184,1552 -c99 -DLANGUAGE_C'
    ccversion='MIPSpro Compilers: Version 7.4.4m'
    gccversion=''
    gccosandvers=''
    intsize=4
    longsize=4
    ptrsize=4
    doublesize=8
    byteorder=4321
    doublekind=4
    d_longlong=define
    longlongsize=8
    d_longdbl=define
    longdblsize=16
    longdblkind=6
    ivtype='long'
    ivsize=4
    nvtype='double'
    nvsize=8
    Off_t='off_t'
    lseeksize=8
    alignbytes=8
    prototype=define
  Linker and Libraries:
    ld='cc -n32'
    ldflags =' -Wl,-woff,84'
    libpth=/usr/lib32 /lib32 /lib /usr/lib /lib64 /usr/lib64
    libs=-lcl -lpthread -ldb -lm
    perllibs=-lcl -lpthread -lm
    libc=/usr/lib32/libc.so
    so=so
    useshrplib=false
    libperl=libperl.a
    gnulibc_version=''
  Dynamic Linking:
    dlsrc=dl_dlopen.xs
    dlext=so
    d_dlsymun=undef
    ccdlflags=' '
    cccdlflags=' '
    lddlflags='-n32 -shared'


Characteristics of this binary (from libperl): 
  Compile-time options:
    HAS_TIMES
    MULTIPLICITY
    PERLIO_LAYERS
    PERL_COPY_ON_WRITE
    PERL_DONT_CREATE_GVSV
    PERL_HASH_FUNC_ONE_AT_A_TIME_HARD
    PERL_IMPLICIT_CONTEXT
    PERL_OP_PARENT
    PERL_PRESERVE_IVUV
    USE_ITHREADS
    USE_LARGE_FILES
    USE_LOCALE
    USE_LOCALE_COLLATE
    USE_LOCALE_CTYPE
    USE_LOCALE_NUMERIC
    USE_LOCALE_TIME
    USE_PERLIO
    USE_PERL_ATOF
    USE_REENTRANT_API
  Built under irix
  Compiled at Jul  3 2018 18:30:44
  %ENV:
    PERL5LIB="/builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/"
  @INC:
    /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/
    /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/
    /builds/dan/bootstrapinstall/lib/perl5/site_perl/5.26.2/IP30-irix-thread-multi
    /builds/dan/bootstrapinstall/lib/perl5/site_perl/5.26.2
    /builds/dan/bootstrapinstall/lib/perl5/5.26.2/IP30-irix-thread-multi
    /builds/dan/bootstrapinstall/lib/perl5/5.26.2
+ /builds/dan/bootstrapinstall/bin/perl -e 'use TAP::Parser; print $TAP::Parser::VERSION, "\n"'
3.38
+ lex --version
Illegal option -- -
Usage: lex [-ctvnV] [-Q(y/n)] [files...]
+ :
+ lex --help
Illegal option -- -
Usage: lex [-ctvnV] [-Q(y/n)] [files...]
+ :
+ yacc --version
Illegal option -- -
Usage: yacc [-vVdlt] [-Q(y/n)] [-p driver_file] [-P driver_file] [-b file_prefix] file
+ :
+ yacc --help
Illegal option -- -
Usage: yacc [-vVdlt] [-Q(y/n)] [-p driver_file] [-P driver_file] [-b file_prefix] file
+ :
+ cat /builds/dan/bootstrapbuilds/automake/automake-1.16.1/config.log
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by GNU Automake configure 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  $ ./configure --prefix=/builds/dan/bootstrapinstall --disable-silent-rules

## --------- ##
## Platform. ##
## --------- ##

hostname = leafy.modular-audio.co.uk
uname -m = IP30
uname -r = 6.5
uname -s = IRIX64
uname -v = 07202013

/usr/bin/uname -p = mips
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /builds/dan/bootstrapinstall/bin
PATH: /builds/dan/bootstrapinstall/bin
PATH: /usr/sbin
PATH: /usr/bsd
PATH: /usr/bin
PATH: /usr/bin/X11


## ----------- ##
## Core tests. ##
## ----------- ##

configure:2031: checking whether make supports nested variables
configure:2048: result: yes
configure:2064: checking build system type
configure:2078: result: mips-sgi-irix6.5
configure:2098: checking host system type
configure:2111: result: mips-sgi-irix6.5
configure:2164: checking for a BSD-compatible install
configure:2232: result: /builds/dan/bootstrapinstall/bin/install -c
configure:2243: checking whether build environment is sane
configure:2298: result: yes
configure:2449: checking for a thread-safe mkdir -p
configure:2488: result: /builds/dan/bootstrapinstall/bin/mkdir -p
configure:2495: checking for gawk
configure:2511: found /builds/dan/bootstrapinstall/bin/gawk
configure:2522: result: gawk
configure:2533: checking whether make sets $(MAKE)
configure:2555: result: yes
configure:2708: checking whether ln -s works
configure:2712: result: yes
configure:2722: checking for perl
configure:2740: found /builds/dan/bootstrapinstall/bin/perl
configure:2752: result: /builds/dan/bootstrapinstall/bin/perl
configure:2764: /builds/dan/bootstrapinstall/bin/perl --version

This is perl 5, version 26, subversion 2 (v5.26.2) built for IP30-irix-thread-multi

Copyright 1987-2018, Larry Wall

Perl may be copied only under the terms of either the Artistic License or the
GNU General Public License, which may be found in the Perl 5 source kit.

Complete documentation for Perl, including FAQ lists, should be found on
this system using "man perl" or "perldoc perl".  If you have access to the
Internet, point your browser at http://www.perl.org/, the Perl Home Page.

configure:2767: $? = 0
configure:2779: checking for tex
configure:2809: result: no
configure:2817:  --version </dev/null
./configure[2818]: --version:  not found
configure:2820: $? = 127
configure:2838: checking for yacc
configure:2854: found /usr/bin/yacc
configure:2865: result: yacc
configure:2881: checking for lex
configure:2897: found /usr/bin/lex
configure:2908: result: lex
configure:2929: checking whether autoconf is installed
configure:2934: autoconf --version
autoconf (GNU Autoconf) 2.69
Copyright (C) 2012 Free Software Foundation, Inc.
License GPLv3+/Autoconf: GNU GPL version 3 or later
<http://gnu.org/licenses/gpl.html>, <http://gnu.org/licenses/exceptions.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David J. MacKenzie and Akim Demaille.
configure:2937: $? = 0
configure:2945: result: yes
configure:2952: checking whether autoconf works
configure:2959: cd conftest && autoconf -o /dev/null conftest.ac
configure:2962: $? = 0
configure:2971: result: yes
configure:2978: checking whether autoconf is recent enough
configure:2985: cd conftest && autoconf -o /dev/null conftest.ac
configure:2988: $? = 0
configure:2997: result: yes
configure:3004: checking whether ln works
configure:3024: result: yes
configure:3042: checking for grep that handles long lines and -e
configure:3100: result: /builds/dan/bootstrapinstall/bin/grep
configure:3105: checking for egrep
configure:3167: result: /builds/dan/bootstrapinstall/bin/grep -E
configure:3172: checking for fgrep
configure:3234: result: /builds/dan/bootstrapinstall/bin/grep -F
configure:3277: will now look for a sturdy POSIX shell, for our testsuite
configure:3313: checking for sh
configure:3331: found /builds/dan/bootstrapinstall/bin/sh
configure:3343: result: /builds/dan/bootstrapinstall/bin/sh
configure:3313: checking for sh5
configure:3346: result: no
configure:3313: checking for dash
configure:3346: result: no
configure:3313: checking for ash
configure:3346: result: no
configure:3313: checking for bash
configure:3331: found /builds/dan/bootstrapinstall/bin/bash
configure:3343: result: /builds/dan/bootstrapinstall/bin/bash
configure:3313: checking for zsh
configure:3346: result: no
configure:3313: checking for ksh
configure:3331: found /usr/bin/ksh
configure:3343: result: /usr/bin/ksh
configure:3313: checking for pdksh
configure:3346: result: no
configure:3367: checking whether /bin/ksh supports $(cmd)
configure:3377: result: yes
configure:3387: checking whether /bin/ksh supports $((expr))
configure:3397: result: yes
configure:3407: checking whether /bin/ksh supports ${#var}
configure:3420: result: yes
configure:3430: checking whether /bin/ksh supports ${var#glob} and ${var%glob}
configure:3444: result: yes
configure:3454: checking whether /bin/ksh preserves exit traps with "set -e"
configure:3464: result: yes
configure:3474: checking whether /bin/ksh can define exit traps in a shell function
configure:3488: result: no
configure:3367: checking whether /builds/dan/bootstrapinstall/bin/sh supports $(cmd)
configure:3377: result: yes
configure:3387: checking whether /builds/dan/bootstrapinstall/bin/sh supports $((expr))
configure:3397: result: yes
configure:3407: checking whether /builds/dan/bootstrapinstall/bin/sh supports ${#var}
configure:3420: result: yes
configure:3430: checking whether /builds/dan/bootstrapinstall/bin/sh supports ${var#glob} and ${var%glob}
configure:3444: result: yes
configure:3454: checking whether /builds/dan/bootstrapinstall/bin/sh preserves exit traps with "set -e"
configure:3464: result: yes
configure:3474: checking whether /builds/dan/bootstrapinstall/bin/sh can define exit traps in a shell function
configure:3484: result: yes
configure:3494: checking whether /builds/dan/bootstrapinstall/bin/sh corrupts stderr with "set -x"
configure:3508: result: no
configure:3516: checking whether /builds/dan/bootstrapinstall/bin/sh can return early from "dot-sourced" files
configure:3526: result: yes
configure:3538: checking whether /builds/dan/bootstrapinstall/bin/sh supports alias named like shell builtins

configure:3548: result: yes
configure:3558: checking whether /builds/dan/bootstrapinstall/bin/sh supports "test -e"
configure:3568: result: yes
configure:3586: shell /builds/dan/bootstrapinstall/bin/sh is good enough, stop looking
configure:3603: will use /builds/dan/bootstrapinstall/bin/sh as the testsuite shell
configure:3627: will now look for generic compilers
configure:3750: checking for C compiler version
configure:3759: c99 --version >&5
c99 ERROR:  -- not allowed in non XPG4 environment
c99 ERROR parsing --version:  unknown flag
MIPSpro Compilers: Version 7.4.4m
configure:3770: $? = 0
configure:3759: c99 -v >&5
MIPSpro Compilers: Version 7.4.4m
configure:3770: $? = 0
configure:3759: c99 -V >&5
c99 WARNING:  -V is ignored
c99 ERROR:  no source or object file given
configure:3770: $? = 2
configure:3759: c99 -qversion >&5
c99 ERROR parsing -qversion:  unknown flag
c99 ERROR:  no source or object file given
configure:3770: $? = 2
configure:3790: checking whether the C compiler works
configure:3812: c99 -mips4 -O1  -mips4 conftest.c  >&5
configure:3816: $? = 0
configure:3866: result: yes
configure:3869: checking for C compiler default output file name
configure:3871: result: a.out
configure:3877: checking for suffix of executables
configure:3884: c99 -o conftest -mips4 -O1  -mips4 conftest.c  >&5
configure:3888: $? = 0
configure:3912: result: 
configure:3934: checking whether we are cross compiling
configure:3942: c99 -o conftest -mips4 -O1  -mips4 conftest.c  >&5
configure:3946: $? = 0
configure:3953: ./conftest
configure:3957: $? = 0
configure:3975: result: no
configure:3980: checking for suffix of object files
configure:4002: c99 -c -mips4 -O1  conftest.c >&5
configure:4006: $? = 0
configure:4029: result: o
configure:4033: checking whether we are using the GNU C compiler
configure:4052: c99 -c -mips4 -O1  conftest.c >&5
cc-1020 c99: ERROR File = conftest.c, Line = 14
  The identifier "choke" is undefined.

         choke me
         ^

cc-1174 c99: WARNING File = conftest.c, Line = 14
  The variable "me" was declared but never referenced.

         choke me
               ^

1 error detected in the compilation of "conftest.c".
configure:4052: $? = 2
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "GNU Automake"
| #define PACKAGE_TARNAME "automake"
| #define PACKAGE_VERSION "1.16.1"
| #define PACKAGE_STRING "GNU Automake 1.16.1"
| #define PACKAGE_BUGREPORT "bug-automake@gnu.org"
| #define PACKAGE_URL "http://www.gnu.org/software/automake/"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| #ifndef __GNUC__
|        choke me
| #endif
| 
|   ;
|   return 0;
| }
configure:4061: result: no
configure:4070: checking whether c99 accepts -g
configure:4090: c99 -c -g  conftest.c >&5
configure:4090: $? = 0
configure:4131: result: yes
configure:4148: checking for c99 option to accept ISO C89
configure:4211: c99  -c -mips4 -O1  conftest.c >&5
cc-3970 c99: WARNING File = conftest.c, Line = 26
  conversion from pointer to same-sized integral type (potential portability
          problem)

    s = g (p, va_arg (v,int));
              ^

configure:4211: $? = 0
configure:4224: result: none needed
configure:4249: checking whether c99 understands -c and -o together
configure:4271: c99 -c conftest.c -o conftest2.o
configure:4274: $? = 0
configure:4271: c99 -c conftest.c -o conftest2.o
configure:4274: $? = 0
configure:4286: result: yes
configure:4408: checking for aCC
configure:4438: result: no
configure:4408: checking for CC
configure:4424: found /usr/bin/CC
configure:4435: result: CC
configure:4462: checking for C++ compiler version
configure:4471: CC --version >&5
CC ERROR:  -- not allowed in non XPG4 environment
CC ERROR parsing --version:  unknown flag
MIPSpro Compilers: Version 7.4.4m
configure:4482: $? = 0
configure:4471: CC -v >&5
MIPSpro Compilers: Version 7.4.4m
configure:4482: $? = 0
configure:4471: CC -V >&5
CC WARNING:  -V is ignored
CC ERROR:  no source or object file given
configure:4482: $? = 2
configure:4471: CC -qversion >&5
CC ERROR parsing -qversion:  unknown flag
CC ERROR:  no source or object file given
configure:4482: $? = 2
configure:4502: checking whether the C++ compiler works
configure:4524: CC   -mips4 conftest.cpp  >&5
configure:4528: $? = 0
configure:4578: result: yes
configure:4581: checking for C++ compiler default output file name
configure:4583: result: a.out
configure:4589: checking for suffix of executables
configure:4596: CC -o conftest   -mips4 conftest.cpp  >&5
configure:4600: $? = 0
configure:4624: result: 
configure:4646: checking whether we are cross compiling
configure:4654: CC -o conftest   -mips4 conftest.cpp  >&5
configure:4658: $? = 0
configure:4665: ./conftest
configure:4669: $? = 0
configure:4687: result: no
configure:4692: checking for suffix of object files
configure:4714: CC -c   conftest.cpp >&5
configure:4718: $? = 0
configure:4741: result: o
configure:4745: checking whether we are using the GNU C++ compiler
configure:4764: CC -c   conftest.cpp >&5
cc-1020 CC: ERROR File = conftest.cpp, Line = 14
  The identifier "choke" is undefined.

         choke me
         ^

cc-1174 CC: WARNING File = conftest.cpp, Line = 14
  The variable "me" was declared but never referenced.

         choke me
               ^

1 error detected in the compilation of "conftest.cpp".
configure:4764: $? = 2
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "GNU Automake"
| #define PACKAGE_TARNAME "automake"
| #define PACKAGE_VERSION "1.16.1"
| #define PACKAGE_STRING "GNU Automake 1.16.1"
| #define PACKAGE_BUGREPORT "bug-automake@gnu.org"
| #define PACKAGE_URL "http://www.gnu.org/software/automake/"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| #ifndef __GNUC__
|        choke me
| #endif
| 
|   ;
|   return 0;
| }
configure:4773: result: no
configure:4782: checking whether CC accepts -g
configure:4802: CC -c -g  conftest.cpp >&5
configure:4802: $? = 0
configure:4843: result: yes
configure:4954: checking for xlf95
configure:4984: result: no
configure:4954: checking for f95
configure:4984: result: no
configure:4954: checking for fort
configure:4984: result: no
configure:4954: checking for ifort
configure:4984: result: no
configure:4954: checking for ifc
configure:4984: result: no
configure:4954: checking for efc
configure:4984: result: no
configure:4954: checking for pgfortran
configure:4984: result: no
configure:4954: checking for pgf95
configure:4984: result: no
configure:4954: checking for lf95
configure:4984: result: no
configure:4954: checking for ftn
configure:4984: result: no
configure:4954: checking for nagfor
configure:4984: result: no
configure:4954: checking for xlf90
configure:4984: result: no
configure:4954: checking for f90
configure:4970: found /usr/bin/f90
configure:4981: result: f90
configure:5007: checking for Fortran compiler version
configure:5016: f90 --version >&5
f90 ERROR:  -- not allowed in non XPG4 environment
f90 ERROR parsing --version:  unknown flag
MIPSpro Compilers: Version 7.4.4m
configure:5027: $? = 0
configure:5016: f90 -v >&5
MIPSpro Compilers: Version 7.4.4m
configure:5027: $? = 0
configure:5016: f90 -V >&5
f90 WARNING:  -V is ignored
f90 ERROR:  no source or object file given
configure:5027: $? = 2
configure:5016: f90 -qversion >&5
f90 ERROR parsing -qversion:  unknown flag
f90 ERROR:  no source or object file given
configure:5027: $? = 2
configure:5042: checking whether the Fortran compiler works
configure:5064: f90  -mips4  conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5068: $? = 0
configure:5118: result: yes
configure:5121: checking for Fortran compiler default output file name
configure:5123: result: a.out
configure:5129: checking for suffix of executables
configure:5136: f90 -o conftest  -mips4  conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5140: $? = 0
configure:5164: result: 
configure:5180: checking whether we are cross compiling
configure:5188: f90 -o conftest  -mips4  conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5192: $? = 0
configure:5199: ./conftest
configure:5203: $? = 0
configure:5221: result: no
configure:5226: checking for suffix of object files
configure:5242: f90 -c   conftest.f >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5246: $? = 0
configure:5269: result: o
configure:5277: checking whether we are using the GNU Fortran compiler
configure:5290: f90 -c   conftest.F >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 


       choke me
               ^
f90-724 f90: ERROR MAIN, File = conftest.F, Line = 3, Column = 16 
  Unknown statement.  Expected assignment statement but found "EOS" instead of "=" or "=>".

f90: SGI MIPSpro Fortran 90 Version 7.44 (f14) Fri Jul  6, 2018  22:27:10
f90: 6 source lines
f90: 1 Error(s), 0 Warning(s), 0 Other message(s), 0 ANSI(s)
cf90: "explain cf90-message number" gives more information about each message
configure:5290: $? = 2
configure: failed program was:
|       program main
| #ifndef __GNUC__
|        choke me
| #endif
| 
|       end
configure:5299: result: no
configure:5305: checking whether f90 accepts -g
configure:5316: f90 -c -g  conftest.f >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5316: $? = 0
configure:5324: result: yes
configure:5436: checking for xlf
configure:5466: result: no
configure:5436: checking for f77
configure:5452: found /usr/bin/f77
configure:5463: result: f77
configure:5489: checking for Fortran 77 compiler version
configure:5498: f77 --version >&5
f77 ERROR:  -- not allowed in non XPG4 environment
f77 ERROR parsing --version:  unknown flag
MIPSpro Compilers: Version 7.4.4m
configure:5509: $? = 0
configure:5498: f77 -v >&5
MIPSpro Compilers: Version 7.4.4m
configure:5509: $? = 0
configure:5498: f77 -V >&5
f77 WARNING:  -V is ignored
f77 ERROR:  no source or object file given
configure:5509: $? = 2
configure:5498: f77 -qversion >&5
f77 ERROR parsing -qversion:  unknown flag
f77 ERROR:  no source or object file given
configure:5509: $? = 2
configure:5524: checking whether the Fortran 77 compiler works
configure:5546: f77  -mips4 conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5550: $? = 0
configure:5600: result: yes
configure:5603: checking for Fortran 77 compiler default output file name
configure:5605: result: a.out
configure:5611: checking for suffix of executables
configure:5618: f77 -o conftest  -mips4 conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5622: $? = 0
configure:5646: result: 
configure:5662: checking whether we are cross compiling
configure:5670: f77 -o conftest  -mips4 conftest.f  >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5674: $? = 0
configure:5681: ./conftest
configure:5685: $? = 0
configure:5703: result: no
configure:5708: checking for suffix of object files
configure:5724: f77 -c  conftest.f >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5728: $? = 0
configure:5751: result: o
configure:5759: checking whether we are using the GNU Fortran 77 compiler
configure:5772: f77 -c  conftest.F >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

"conftest.F", line 3: error(2043): unrecognized statement
         choke me                                                         
         ^

1 error detected in the compilation of "conftest.F".
configure:5772: $? = 2
configure: failed program was:
|       program main
| #ifndef __GNUC__
|        choke me
| #endif
| 
|       end
configure:5781: result: no
configure:5787: checking whether f77 accepts -g
configure:5798: f77 -c -g conftest.f >&5
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

configure:5798: $? = 0
configure:5806: result: yes
configure:5870: will now look for GNU compilers
configure:5930: checking for gcc
configure:5960: result: no
configure:6055: checking for g++
configure:6085: result: no
configure:6055: checking for gpp
configure:6085: result: no
configure:6180: checking for gfortran
configure:6210: result: no
configure:6305: checking for g77
configure:6335: result: no
configure:6305: checking for gfortran
configure:6335: result: no
configure:6424: checking for gcj
configure:6454: result: no
configure:6654: checking that generated files are newer than configure
configure:6660: result: done
configure:6675: creating ./config.status

## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status 

on leafy.modular-audio.co.uk

config.status:817: creating Makefile
config.status:817: creating pre-inst-env

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_AM_TEST_RUNNER_SHELL=/builds/dan/bootstrapinstall/bin/sh
ac_cv_build=mips-sgi-irix6.5
ac_cv_c_compiler_gnu=no
ac_cv_cxx_compiler_gnu=no
ac_cv_env_AM_TEST_RUNNER_SHELL_set=''
ac_cv_env_AM_TEST_RUNNER_SHELL_value=''
ac_cv_env_CCC_set=''
ac_cv_env_CCC_value=''
ac_cv_env_CC_set=set
ac_cv_env_CC_value=c99
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value='-mips4 -O1'
ac_cv_env_CPPFLAGS_set=''
ac_cv_env_CPPFLAGS_value=''
ac_cv_env_CXXFLAGS_set=''
ac_cv_env_CXXFLAGS_value=''
ac_cv_env_CXX_set=''
ac_cv_env_CXX_value=''
ac_cv_env_F77_set=''
ac_cv_env_F77_value=''
ac_cv_env_FCFLAGS_set=''
ac_cv_env_FCFLAGS_value=''
ac_cv_env_FC_set=''
ac_cv_env_FC_value=''
ac_cv_env_FFLAGS_set=''
ac_cv_env_FFLAGS_value=''
ac_cv_env_GNU_CC_set=''
ac_cv_env_GNU_CC_value=''
ac_cv_env_GNU_CFLAGS_set=''
ac_cv_env_GNU_CFLAGS_value=''
ac_cv_env_GNU_CXXFLAGS_set=''
ac_cv_env_GNU_CXXFLAGS_value=''
ac_cv_env_GNU_CXX_set=''
ac_cv_env_GNU_CXX_value=''
ac_cv_env_GNU_F77_set=''
ac_cv_env_GNU_F77_value=''
ac_cv_env_GNU_FCFLAGS_set=''
ac_cv_env_GNU_FCFLAGS_value=''
ac_cv_env_GNU_FC_set=''
ac_cv_env_GNU_FC_value=''
ac_cv_env_GNU_FFLAGS_set=''
ac_cv_env_GNU_FFLAGS_value=''
ac_cv_env_GNU_GCJFLAGS_set=''
ac_cv_env_GNU_GCJFLAGS_value=''
ac_cv_env_GNU_GCJ_set=''
ac_cv_env_GNU_GCJ_value=''
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value=-mips4
ac_cv_env_LIBS_set=''
ac_cv_env_LIBS_value=''
ac_cv_env_build_alias_set=''
ac_cv_env_build_alias_value=''
ac_cv_env_host_alias_set=''
ac_cv_env_host_alias_value=''
ac_cv_env_target_alias_set=''
ac_cv_env_target_alias_value=''
ac_cv_f77_compiler_gnu=no
ac_cv_fc_compiler_gnu=no
ac_cv_host=mips-sgi-irix6.5
ac_cv_path_EGREP='/builds/dan/bootstrapinstall/bin/grep -E'
ac_cv_path_FGREP='/builds/dan/bootstrapinstall/bin/grep -F'
ac_cv_path_GREP=/builds/dan/bootstrapinstall/bin/grep
ac_cv_path_PERL=/builds/dan/bootstrapinstall/bin/perl
ac_cv_path_install='/builds/dan/bootstrapinstall/bin/install -c'
ac_cv_path_mkdir=/builds/dan/bootstrapinstall/bin/mkdir
ac_cv_prog_AWK=gawk
ac_cv_prog_LEX=lex
ac_cv_prog_YACC=yacc
ac_cv_prog_ac_ct_CXX=CC
ac_cv_prog_ac_ct_F77=f77
ac_cv_prog_ac_ct_FC=f90
ac_cv_prog_cc_c89=''
ac_cv_prog_cc_g=yes
ac_cv_prog_cxx_g=yes
ac_cv_prog_f77_g=yes
ac_cv_prog_fc_g=yes
ac_cv_prog_make_make_set=yes
am_cv_autoconf_installed=yes
am_cv_autoconf_version=yes
am_cv_autoconf_works=yes
am_cv_make_support_nested_variables=yes
am_cv_prog_cc_c_o=yes
am_cv_prog_ln=ln

## ----------------- ##
## Output variables. ##
## ----------------- ##

ACLOCAL='"/builds/dan/bootstrapbuilds/automake/automake-1.16.1/pre-inst-env" aclocal-1.16'
AMTAR='$${TAR-tar}'
AM_BACKSLASH='\'
AM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'
AM_DEFAULT_VERBOSITY='1'
AM_TEST_RUNNER_SHELL='/builds/dan/bootstrapinstall/bin/sh'
AM_V='$(V)'
APIVERSION='1.16'
AUTOCONF='${SHELL} /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing autoconf'
AUTOHEADER='${SHELL} /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing autoheader'
AUTOMAKE='"/builds/dan/bootstrapbuilds/automake/automake-1.16.1/pre-inst-env" automake-1.16'
AWK='gawk'
CC='c99'
CFLAGS='-mips4 -O1'
CPPFLAGS=''
CXX='CC'
CXXFLAGS='-g'
CYGPATH_W='echo'
DEFS='-DPACKAGE_NAME=\"GNU\ Automake\" -DPACKAGE_TARNAME=\"automake\" -DPACKAGE_VERSION=\"1.16.1\" -DPACKAGE_STRING=\"GNU\ Automake\ 1.16.1\" -DPACKAGE_BUGREPORT=\"bug-automake@gnu.org\" -DPACKAGE_URL=\"http://www.gnu.org/software/automake/\"'
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP='/builds/dan/bootstrapinstall/bin/grep -E'
EXEEXT='UNKNOWN'
F77='f77'
FC='f90'
FCFLAGS='-g'
FFLAGS='-g'
FGREP='/builds/dan/bootstrapinstall/bin/grep -F'
GNU_CC='false'
GNU_CFLAGS=''
GNU_CXX='false'
GNU_CXXFLAGS=''
GNU_F77='false'
GNU_FC='false'
GNU_FCFLAGS=''
GNU_FFLAGS=''
GNU_GCJ='false'
GNU_GCJFLAGS=''
GREP='/builds/dan/bootstrapinstall/bin/grep'
INSTALL_DATA='${INSTALL} -m 644'
INSTALL_PROGRAM='${INSTALL}'
INSTALL_SCRIPT='${INSTALL}'
INSTALL_STRIP_PROGRAM='$(install_sh) -c -s'
LDFLAGS='-mips4'
LEX='lex'
LIBOBJS=''
LIBS=''
LN='ln'
LN_S='ln -s'
LTLIBOBJS=''
MAKEINFO='${SHELL} /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing makeinfo'
MKDIR_P='/builds/dan/bootstrapinstall/bin/mkdir -p'
MODIFICATION_DELAY='2'
OBJEXT='UNKNOWN'
PACKAGE='automake'
PACKAGE_BUGREPORT='bug-automake@gnu.org'
PACKAGE_NAME='GNU Automake'
PACKAGE_STRING='GNU Automake 1.16.1'
PACKAGE_TARNAME='automake'
PACKAGE_URL='http://www.gnu.org/software/automake/'
PACKAGE_VERSION='1.16.1'
PATH_SEPARATOR=':'
PERL='/builds/dan/bootstrapinstall/bin/perl'
RELEASE_YEAR='2018'
SET_MAKE=''
SHELL='/bin/ksh'
STRIP=''
TEX=''
VERSION='1.16.1'
YACC='yacc'
ac_ct_CC=''
ac_ct_CXX='CC'
ac_ct_F77='f77'
ac_ct_FC='f90'
ac_ct_GNU_CC=''
ac_ct_GNU_CXX=''
ac_ct_GNU_F77=''
ac_ct_GNU_FC=''
ac_ct_GNU_GCJ=''
am_AUTOCONF='autoconf'
am_AUTOHEADER='autoheader'
am_AUTOM4TE='autom4te'
am_AUTORECONF='autoreconf'
am_AUTOUPDATE='autoupdate'
am__EXEEXT_FALSE='#'
am__EXEEXT_TRUE=''
am__isrc=''
am__leading_dot='.'
am__tar='$${TAR-tar} chof - "$$tardir"'
am__untar='$${TAR-tar} xf -'
am_candidate_sh=''
amdir='${pkgvdatadir}/am'
automake_acdir='${datadir}/aclocal-1.16'
bindir='${exec_prefix}/bin'
build='mips-sgi-irix6.5'
build_alias=''
build_cpu='mips'
build_os='irix6.5'
build_vendor='sgi'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='${prefix}'
host='mips-sgi-irix6.5'
host_alias=''
host_cpu='mips'
host_os='irix6.5'
host_vendor='sgi'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
install_sh='${SHELL} /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
mandir='${datarootdir}/man'
mkdir_p='$(MKDIR_P)'
oldincludedir='/usr/include'
pdfdir='${docdir}'
pkgvdatadir='${datadir}/automake-1.16'
prefix='/builds/dan/bootstrapinstall'
program_transform_name='s,x,x,'
psdir='${docdir}'
required_autoconf_version='2.65'
sbindir='${exec_prefix}/sbin'
scriptdir='${pkgvdatadir}'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
system_acdir='${datadir}/aclocal'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

/* confdefs.h */
#define PACKAGE_NAME "GNU Automake"
#define PACKAGE_TARNAME "automake"
#define PACKAGE_VERSION "1.16.1"
#define PACKAGE_STRING "GNU Automake 1.16.1"
#define PACKAGE_BUGREPORT "bug-automake@gnu.org"
#define PACKAGE_URL "http://www.gnu.org/software/automake/"

configure: exit 0


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk

## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk


## ---------------------- ##
## Running config.status. ##
## ---------------------- ##

This file was extended by GNU Automake config.status 1.16.1, which was
generated by GNU Autoconf 2.69.  Invocation command line was

  CONFIG_FILES    = 
  CONFIG_HEADERS  = 
  CONFIG_LINKS    = 
  CONFIG_COMMANDS = 
  $ ./config.status --file=-

on leafy.modular-audio.co.uk

+ cat /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin/aclocal-1.16
#!/builds/dan/bootstrapinstall/bin/perl -w
# -*- perl -*-
# Generated from bin/aclocal.in; do not edit by hand.

eval 'case $# in 0) exec /builds/dan/bootstrapinstall/bin/perl -S "$0";; *) exec /builds/dan/bootstrapinstall/bin/perl -S "$0" "$@";; esac'
    if 0;

# aclocal - create aclocal.m4 by scanning configure.ac

# Copyright (C) 1996-2018 Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Written by Tom Tromey <tromey@redhat.com>, and
# Alexandre Duret-Lutz <adl@gnu.org>.

BEGIN
{
  unshift (@INC, '/builds/dan/bootstrapinstall/share/automake-1.16')
    unless $ENV{AUTOMAKE_UNINSTALLED};
}

use strict;

use Automake::Config;
use Automake::General;
use Automake::Configure_ac;
use Automake::Channels;
use Automake::ChannelDefs;
use Automake::XFile;
use Automake::FileUtils;
use File::Basename;
use File::Path ();

# Some globals.

# Support AC_CONFIG_MACRO_DIRS also with older autoconf.
# FIXME: To be removed in Automake 2.0, once we can assume autoconf
#        2.70 or later.
# FIXME: keep in sync with 'internal/ac-config-macro-dirs.m4'.
my $ac_config_macro_dirs_fallback =
  'm4_ifndef([AC_CONFIG_MACRO_DIRS], [' .
    'm4_defun([_AM_CONFIG_MACRO_DIRS], [])' .
    'm4_defun([AC_CONFIG_MACRO_DIRS], [_AM_CONFIG_MACRO_DIRS($@)])' .
  '])';

# We do not operate in threaded mode.
$perl_threads = 0;

# Include paths for searching macros.  We search macros in this order:
# user-supplied directories first, then the directory containing the
# automake macros, and finally the system-wide directories for
# third-party macros.
# @user_includes can be augmented with -I or AC_CONFIG_MACRO_DIRS.
# @automake_includes can be reset with the '--automake-acdir' option.
# @system_includes can be augmented with the 'dirlist' file or the
# ACLOCAL_PATH environment variable, and reset with the '--system-acdir'
# option.
my @user_includes = ();
my @automake_includes = ('/builds/dan/bootstrapinstall/share/aclocal-' . $APIVERSION);
my @system_includes = ('/builds/dan/bootstrapinstall/share/aclocal');

# Whether we should copy M4 file in $user_includes[0].
my $install = 0;

# --diff
my @diff_command;

# --dry-run
my $dry_run = 0;

# configure.ac or configure.in.
my $configure_ac;

# Output file name.
my $output_file = 'aclocal.m4';

# Option --force.
my $force_output = 0;

# Modification time of the youngest dependency.
my $greatest_mtime = 0;

# Which macros have been seen.
my %macro_seen = ();

# Remember the order into which we scanned the files.
# It's important to output the contents of aclocal.m4 in the opposite order.
# (Definitions in first files we have scanned should override those from
# later files.  So they must appear last in the output.)
my @file_order = ();

# Map macro names to file names.
my %map = ();

# Ditto, but records the last definition of each macro as returned by --trace.
my %map_traced_defs = ();

# Map basenames to macro names.
my %invmap = ();

# Map file names to file contents.
my %file_contents = ();

# Map file names to file types.
my %file_type = ();
use constant FT_USER => 1;
use constant FT_AUTOMAKE => 2;
use constant FT_SYSTEM => 3;

# Map file names to included files (transitively closed).
my %file_includes = ();

# Files which have already been added.
my %file_added = ();

# Files that have already been scanned.
my %scanned_configure_dep = ();

# Serial numbers, for files that have one.
# The key is the basename of the file,
# the value is the serial number represented as a list.
my %serial = ();

# Matches a macro definition.
#   AC_DEFUN([macroname], ...)
# or
#   AC_DEFUN(macroname, ...)
# When macroname is '['-quoted , we accept any character in the name,
# except ']'.  Otherwise macroname stops on the first ']', ',', ')',
# or '\n' encountered.
my $ac_defun_rx =
  "(?:AU_ALIAS|A[CU]_DEFUN|AC_DEFUN_ONCE)\\((?:\\[([^]]+)\\]|([^],)\n]+))";

# Matches an AC_REQUIRE line.
my $ac_require_rx = "AC_REQUIRE\\((?:\\[([^]]+)\\]|([^],)\n]+))\\)";

# Matches an m4_include line.
my $m4_include_rx = "(m4_|m4_s|s)include\\((?:\\[([^]]+)\\]|([^],)\n]+))\\)";

# Match a serial number.
my $serial_line_rx = '^#\s*serial\s+(\S*)';
my $serial_number_rx = '^\d+(?:\.\d+)*$';

# Autoconf version.  This variable is set by 'trace_used_macros'.
my $ac_version;

# User directory containing extra m4 files for macros definition,
# as extracted from calls to the macro AC_CONFIG_MACRO_DIRS.
# This variable is updated by 'trace_used_macros'.
my @ac_config_macro_dirs;

# If set, names a temporary file that must be erased on abnormal exit.
my $erase_me;

# Constants for the $ERR_LEVEL parameter of the 'scan_m4_dirs' function.
use constant SCAN_M4_DIRS_SILENT => 0;
use constant SCAN_M4_DIRS_WARN => 1;
use constant SCAN_M4_DIRS_ERROR => 2;

################################################################

# Prototypes for all subroutines.

sub add_file ($);
sub add_macro ($);
sub check_acinclude ();
sub install_file ($$);
sub list_compare (\@\@);
sub parse_ACLOCAL_PATH ();
sub parse_arguments ();
sub reset_maps ();
sub scan_configure ();
sub scan_configure_dep ($);
sub scan_file ($$$);
sub scan_m4_dirs ($$@);
sub scan_m4_files ();
sub strip_redundant_includes (%);
sub trace_used_macros ();
sub unlink_tmp (;$);
sub usage ($);
sub version ();
sub write_aclocal ($@);
sub xmkdir_p ($);

################################################################

# Erase temporary file ERASE_ME.  Handle signals.
sub unlink_tmp (;$)
{
  my ($sig) = @_;

  if ($sig)
    {
      verb "caught SIG$sig, bailing out";
    }
  if (defined $erase_me && -e $erase_me && !unlink ($erase_me))
    {
      fatal "could not remove '$erase_me': $!";
    }
  undef $erase_me;

  # reraise default handler.
  if ($sig)
    {
      $SIG{$sig} = 'DEFAULT';
      kill $sig => $$;
    }
}

$SIG{'INT'} = $SIG{'TERM'} = $SIG{'QUIT'} = $SIG{'HUP'} = 'unlink_tmp';
END { unlink_tmp }

sub xmkdir_p ($)
{
  my $dir = shift;
  local $@ = undef;
  return
    if -d $dir or eval { File::Path::mkpath $dir };
  chomp $@;
  $@ =~ s/\s+at\s.*\bline\s\d+.*$//;
  fatal "could not create directory '$dir': $@";
}

# Check macros in acinclude.m4.  If one is not used, warn.
sub check_acinclude ()
{
  foreach my $key (keys %map)
    {
      # FIXME: should print line number of acinclude.m4.
      msg ('syntax', "macro '$key' defined in acinclude.m4 but never used")
	if $map{$key} eq 'acinclude.m4' && ! exists $macro_seen{$key};
    }
}

sub reset_maps ()
{
  $greatest_mtime = 0;
  %macro_seen = ();
  @file_order = ();
  %map = ();
  %map_traced_defs = ();
  %file_contents = ();
  %file_type = ();
  %file_includes = ();
  %file_added = ();
  %scanned_configure_dep = ();
  %invmap = ();
  %serial = ();
  undef &search;
}

# install_file ($SRC, $DESTDIR)
sub install_file ($$)
{
  my ($src, $destdir) = @_;
  my $dest = $destdir . "/" . basename ($src);
  my $diff_dest;

  verb "installing $src to $dest";

  if ($force_output
      || !exists $file_contents{$dest}
      || $file_contents{$src} ne $file_contents{$dest})
    {
      if (-e $dest)
	{
	  msg 'note', "overwriting '$dest' with '$src'";
	  $diff_dest = $dest;
	}
      else
	{
	  msg 'note', "installing '$dest' from '$src'";
	}

      if (@diff_command)
	{
	  if (! defined $diff_dest)
	    {
	      # $dest does not exist.  We create an empty one just to
	      # run diff, and we erase it afterward.  Using the real
	      # the destination file (rather than a temporary file) is
	      # good when diff is run with options that display the
	      # file name.
	      #
	      # If creating $dest fails, fall back to /dev/null.  At
	      # least one diff implementation (Tru64's) cannot deal
	      # with /dev/null.  However working around this is not
	      # worth the trouble since nobody run aclocal on a
	      # read-only tree anyway.
	      $erase_me = $dest;
	      my $f = new IO::File "> $dest";
	      if (! defined $f)
		{
		  undef $erase_me;
		  $diff_dest = '/dev/null';
		}
	      else
		{
		  $diff_dest = $dest;
		  $f->close;
		}
	    }
	  my @cmd = (@diff_command, $diff_dest, $src);
	  $! = 0;
	  verb "running: @cmd";
	  my $res = system (@cmd);
	  Automake::FileUtils::handle_exec_errors "@cmd", 1
	    if $res;
	  unlink_tmp;
	}
      elsif (!$dry_run)
	{
          xmkdir_p ($destdir);
	  xsystem ('cp', $src, $dest);
	}
    }
}

# Compare two lists of numbers.
sub list_compare (\@\@)
{
  my @l = @{$_[0]};
  my @r = @{$_[1]};
  while (1)
    {
      if (0 == @l)
	{
	  return (0 == @r) ? 0 : -1;
	}
      elsif (0 == @r)
	{
	  return 1;
	}
      elsif ($l[0] < $r[0])
	{
	  return -1;
	}
      elsif ($l[0] > $r[0])
	{
	  return 1;
	}
      shift @l;
      shift @r;
    }
}

################################################################

# scan_m4_dirs($TYPE, $ERR_LEVEL, @DIRS)
# -----------------------------------------------
# Scan all M4 files installed in @DIRS for new macro definitions.
# Register each file as of type $TYPE (one of the FT_* constants).
# If a directory in @DIRS cannot be read:
#  - fail hard                if $ERR_LEVEL == SCAN_M4_DIRS_ERROR
#  - just print a warning     if $ERR_LEVEL == SCAN_M4_DIRS_WA
#  - continue silently        if $ERR_LEVEL == SCAN_M4_DIRS_SILENT
sub scan_m4_dirs ($$@)
{
  my ($type, $err_level, @dirlist) = @_;

  foreach my $m4dir (@dirlist)
    {
      if (! opendir (DIR, $m4dir))
	{
	  # TODO: maybe avoid complaining only if errno == ENONENT?
          my $message = "couldn't open directory '$m4dir': $!";

          if ($err_level == SCAN_M4_DIRS_ERROR)
            {
              fatal $message;
            }
          elsif ($err_level == SCAN_M4_DIRS_WARN)
            {
              msg ('unsupported', $message);
              next;
            }
          elsif ($err_level == SCAN_M4_DIRS_SILENT)
            {
              next; # Silently ignore.
            }
          else
            {
               prog_error "invalid \$err_level value '$err_level'";
            }
	}

      # We reverse the directory contents so that foo2.m4 gets
      # used in preference to foo1.m4.
      foreach my $file (reverse sort grep (! /^\./, readdir (DIR)))
	{
	  # Only examine .m4 files.
	  next unless $file =~ /\.m4$/;

	  # Skip some files when running out of srcdir.
	  next if $file eq 'aclocal.m4';

	  my $fullfile = File::Spec->canonpath ("$m4dir/$file");
	  scan_file ($type, $fullfile, 'aclocal');
	}
      closedir (DIR);
    }
}

# Scan all the installed m4 files and construct a map.
sub scan_m4_files ()
{
  # First, scan configure.ac.  It may contain macro definitions,
  # or may include other files that define macros.
  scan_file (FT_USER, $configure_ac, 'aclocal');

  # Then, scan acinclude.m4 if it exists.
  if (-f 'acinclude.m4')
    {
      scan_file (FT_USER, 'acinclude.m4', 'aclocal');
    }

  # Finally, scan all files in our search paths.

  if (@user_includes)
    {
      # Don't explore the same directory multiple times.  This is here not
      # only for speedup purposes.  We need this when the user has e.g.
      # specified 'ACLOCAL_AMFLAGS = -I m4' and has also set
      # AC_CONFIG_MACRO_DIR[S]([m4]) in configure.ac.  This makes the 'm4'
      # directory to occur twice here and fail on the second call to
      # scan_m4_dirs([m4]) when the 'm4' directory doesn't exist.
      # TODO: Shouldn't there be rather a check in scan_m4_dirs for
      #       @user_includes[0]?
      @user_includes = uniq @user_includes;

      # Don't complain if the first user directory doesn't exist, in case
      # we need to create it later (can happen if '--install' was given).
      scan_m4_dirs (FT_USER,
                    $install ? SCAN_M4_DIRS_SILENT : SCAN_M4_DIRS_WARN,
                    $user_includes[0]);
      scan_m4_dirs (FT_USER,
                    SCAN_M4_DIRS_ERROR,
		    @user_includes[1..$#user_includes]);
    }
  scan_m4_dirs (FT_AUTOMAKE, SCAN_M4_DIRS_ERROR, @automake_includes);
  scan_m4_dirs (FT_SYSTEM, SCAN_M4_DIRS_ERROR, @system_includes);

  # Construct a new function that does the searching.  We use a
  # function (instead of just evaluating $search in the loop) so that
  # "die" is correctly and easily propagated if run.
  my $search = "sub search {\nmy \$found = 0;\n";
  foreach my $key (reverse sort keys %map)
    {
      $search .= ('if (/\b\Q' . $key . '\E(?!\w)/) { add_macro ("' . $key
		  . '"); $found = 1; }' . "\n");
    }
  $search .= "return \$found;\n};\n";
  eval $search;
  prog_error "$@\n search is $search" if $@;
}

################################################################

# Add a macro to the output.
sub add_macro ($)
{
  my ($macro) = @_;

  # Ignore unknown required macros.  Either they are not really
  # needed (e.g., a conditional AC_REQUIRE), in which case aclocal
  # should be quiet, or they are needed and Autoconf itself will
  # complain when we trace for macro usage later.
  return unless defined $map{$macro};

  verb "saw macro $macro";
  $macro_seen{$macro} = 1;
  add_file ($map{$macro});
}

# scan_configure_dep ($file)
# --------------------------
# Scan a configure dependency (configure.ac, or separate m4 files)
# for uses of known macros and AC_REQUIREs of possibly unknown macros.
# Recursively scan m4_included files.
sub scan_configure_dep ($)
{
  my ($file) = @_;
  # Do not scan a file twice.
  return ()
    if exists $scanned_configure_dep{$file};
  $scanned_configure_dep{$file} = 1;

  my $mtime = mtime $file;
  $greatest_mtime = $mtime if $greatest_mtime < $mtime;

  my $contents = exists $file_contents{$file} ?
    $file_contents{$file} : contents $file;

  my $line = 0;
  my @rlist = ();
  my @ilist = ();
  foreach (split ("\n", $contents))
    {
      ++$line;
      # Remove comments from current line.
      s/\bdnl\b.*$//;
      s/\#.*$//;
      # Avoid running all the following regexes on white lines.
      next if /^\s*$/;

      while (/$m4_include_rx/go)
	{
	  my $ifile = $2 || $3;
	  # Skip missing 'sinclude'd files.
	  next if $1 ne 'm4_' && ! -f $ifile;
	  push @ilist, $ifile;
	}

      while (/$ac_require_rx/go)
	{
	  push (@rlist, $1 || $2);
	}

      # The search function is constructed dynamically by
      # scan_m4_files.  The last parenthetical match makes sure we
      # don't match things that look like macro assignments or
      # AC_SUBSTs.
      if (! &search && /(^|\s+)(AM_[A-Z0-9_]+)($|[^\]\)=A-Z0-9_])/)
	{
	  # Macro not found, but AM_ prefix found.
	  # Make this just a warning, because we do not know whether
	  # the macro is actually used (it could be called conditionally).
	  msg ('unsupported', "$file:$line",
	       "macro '$2' not found in library");
	}
    }

  add_macro ($_) foreach (@rlist);
  scan_configure_dep ($_) foreach @ilist;
}

# add_file ($FILE)
# ----------------
# Add $FILE to output.
sub add_file ($)
{
  my ($file) = @_;

  # Only add a file once.
  return if ($file_added{$file});
  $file_added{$file} = 1;

  scan_configure_dep $file;
}

# Point to the documentation for underquoted AC_DEFUN only once.
my $underquoted_manual_once = 0;

# scan_file ($TYPE, $FILE, $WHERE)
# --------------------------------
# Scan a single M4 file ($FILE), and all files it includes.
# Return the list of included files.
# $TYPE is one of FT_USER, FT_AUTOMAKE, or FT_SYSTEM, depending
# on where the file comes from.
# $WHERE is the location to use in the diagnostic if the file
# does not exist.
sub scan_file ($$$)
{
  my ($type, $file, $where) = @_;
  my $basename = basename $file;

  # Do not scan the same file twice.
  return @{$file_includes{$file}} if exists $file_includes{$file};
  # Prevent potential infinite recursion (if two files include each other).
  return () if exists $file_contents{$file};

  unshift @file_order, $file;

  $file_type{$file} = $type;

  fatal "$where: file '$file' does not exist" if ! -e $file;

  my $fh = new Automake::XFile $file;
  my $contents = '';
  my @inc_files = ();
  my %inc_lines = ();

  my $defun_seen = 0;
  my $serial_seen = 0;
  my $serial_older = 0;

  while ($_ = $fh->getline)
    {
      # Ignore '##' lines.
      next if /^##/;

      $contents .= $_;
      my $line = $_;

      if ($line =~ /$serial_line_rx/go)
	{
	  my $number = $1;
	  if ($number !~ /$serial_number_rx/go)
	    {
	      msg ('syntax', "$file:$.",
		   "ill-formed serial number '$number', "
		   . "expecting a version string with only digits and dots");
	    }
	  elsif ($defun_seen)
	    {
	      # aclocal removes all definitions from M4 file with the
	      # same basename if a greater serial number is found.
	      # Encountering a serial after some macros will undefine
	      # these macros...
	      msg ('syntax', "$file:$.",
		   'the serial number must appear before any macro definition');
	    }
	  # We really care about serials only for non-automake macros
	  # and when --install is used.  But the above diagnostics are
	  # made regardless of this, because not using --install is
	  # not a reason not the fix macro files.
	  elsif ($install && $type != FT_AUTOMAKE)
	    {
	      $serial_seen = 1;
	      my @new = split (/\./, $number);

	      verb "$file:$.: serial $number";

	      if (!exists $serial{$basename}
		  || list_compare (@new, @{$serial{$basename}}) > 0)
		{
		  # Delete any definition we knew from the old macro.
		  foreach my $def (@{$invmap{$basename}})
		    {
		      verb "$file:$.: ignoring previous definition of $def";
		      delete $map{$def};
		    }
		  $invmap{$basename} = [];
		  $serial{$basename} = \@new;
		}
	      else
		{
		  $serial_older = 1;
		}
	    }
	}

      # Remove comments from current line.
      # Do not do it earlier, because the serial line is a comment.
      $line =~ s/\bdnl\b.*$//;
      $line =~ s/\#.*$//;

      while ($line =~ /$ac_defun_rx/go)
	{
	  $defun_seen = 1;
	  if (! defined $1)
	    {
	      msg ('syntax', "$file:$.", "underquoted definition of $2"
		   . "\n  run info Automake 'Extending aclocal'\n"
		   . "  or see https://www.gnu.org/software/automake/manual/"
		   . "automake.html#Extending-aclocal")
		unless $underquoted_manual_once;
	      $underquoted_manual_once = 1;
	    }

	  # If this macro does not have a serial and we have already
	  # seen a macro with the same basename earlier, we should
	  # ignore the macro (don't exit immediately so we can still
	  # diagnose later #serial numbers and underquoted macros).
	  $serial_older ||= ($type != FT_AUTOMAKE
			     && !$serial_seen && exists $serial{$basename});

	  my $macro = $1 || $2;
	  if (!$serial_older && !defined $map{$macro})
	    {
	      verb "found macro $macro in $file: $.";
	      $map{$macro} = $file;
	      push @{$invmap{$basename}}, $macro;
	    }
	  else
	    {
	      # Note: we used to give an error here if we saw a
	      # duplicated macro.  However, this turns out to be
	      # extremely unpopular.  It causes actual problems which
	      # are hard to work around, especially when you must
	      # mix-and-match tool versions.
	      verb "ignoring macro $macro in $file: $.";
	    }
	}

      while ($line =~ /$m4_include_rx/go)
	{
	  my $ifile = $2 || $3;
	  # Skip missing 'sinclude'd files.
	  next if $1 ne 'm4_' && ! -f $ifile;
	  push (@inc_files, $ifile);
	  $inc_lines{$ifile} = $.;
	}
    }

  # Ignore any file that has an old serial (or no serial if we know
  # another one with a serial).
  return ()
    if ($serial_older ||
	($type != FT_AUTOMAKE && !$serial_seen && exists $serial{$basename}));

  $file_contents{$file} = $contents;

  # For some reason I don't understand, it does not work
  # to do "map { scan_file ($_, ...) } @inc_files" below.
  # With Perl 5.8.2 it undefines @inc_files.
  my @copy = @inc_files;
  my @all_inc_files = (@inc_files,
		       map { scan_file ($type, $_,
					"$file:$inc_lines{$_}") } @copy);
  $file_includes{$file} = \@all_inc_files;
  return @all_inc_files;
}

# strip_redundant_includes (%FILES)
# ---------------------------------
# Each key in %FILES is a file that must be present in the output.
# However some of these files might already include other files in %FILES,
# so there is no point in including them another time.
# This removes items of %FILES which are already included by another file.
sub strip_redundant_includes (%)
{
  my %files = @_;

  # Always include acinclude.m4, even if it does not appear to be used.
  $files{'acinclude.m4'} = 1 if -f 'acinclude.m4';
  # File included by $configure_ac are redundant.
  $files{$configure_ac} = 1;

  # Files at the end of @file_order should override those at the beginning,
  # so it is important to preserve these trailing files.  We can remove
  # a file A if it is going to be output before a file B that includes
  # file A, not the converse.
  foreach my $file (reverse @file_order)
    {
      next unless exists $files{$file};
      foreach my $ifile (@{$file_includes{$file}})
	{
	  next unless exists $files{$ifile};
	  delete $files{$ifile};
	  verb "$ifile is already included by $file";
	}
    }

  # configure.ac is implicitly included.
  delete $files{$configure_ac};

  return %files;
}

sub trace_used_macros ()
{
  my %files = map { $map{$_} => 1 } keys %macro_seen;
  %files = strip_redundant_includes %files;

  # When AC_CONFIG_MACRO_DIRS is used, avoid possible spurious warnings
  # from autom4te about macros being "m4_require'd but not m4_defun'd";
  # for more background, see:
  # https://lists.gnu.org/archive/html/autoconf-patches/2012-11/msg00004.html
  # as well as autoconf commit 'v2.69-44-g1ed0548', "warn: allow aclocal
  # to silence m4_require warnings".
  my $early_m4_code .= "m4_define([m4_require_silent_probe], [-])";

  my $traces = ($ENV{AUTOM4TE} || 'autom4te');
  $traces .= " --language Autoconf-without-aclocal-m4 ";
  $traces = "echo '$early_m4_code' | $traces - ";

  # Support AC_CONFIG_MACRO_DIRS also with older autoconf.
  # Note that we can't use '$ac_config_macro_dirs_fallback' here, because
  # a bug in option parsing code of autom4te 2.68 and earlier will cause
  # it to read standard input last, even if the "-" argument is specified
  # early.
  # FIXME: To be removed in Automake 2.0, once we can assume autoconf
  #        2.70 or later.
  $traces .= "$automake_includes[0]/internal/ac-config-macro-dirs.m4 ";

  # All candidate files.
  $traces .= join (' ',
		   (map { "'$_'" }
		    (grep { exists $files{$_} } @file_order))) . " ";

  # All candidate macros.
  $traces .= join (' ',
		   (map { "--trace='$_:\$f::\$n::\${::}%'" }
		    ('AC_DEFUN',
		     'AC_DEFUN_ONCE',
		     'AU_DEFUN',
		     '_AM_AUTOCONF_VERSION',
		     'AC_CONFIG_MACRO_DIR_TRACE',
                     # FIXME: Tracing the next two macros is a hack for
                     # compatibility with older autoconf.  Remove this in
                     # Automake 2.0, when we can assume Autoconf 2.70 or
                     # later.
		     'AC_CONFIG_MACRO_DIR',
		     '_AM_CONFIG_MACRO_DIRS')),
		   # Do not trace $1 for all other macros as we do
		   # not need it and it might contains harmful
		   # characters (like newlines).
		   (map { "--trace='$_:\$f::\$n'" } (keys %macro_seen)));

  verb "running $traces $configure_ac";

  my $tracefh = new Automake::XFile ("$traces $configure_ac |");

  @ac_config_macro_dirs = ();

  my %traced = ();

  while ($_ = $tracefh->getline)
    {
      chomp;
      my ($file, $macro, $arg1) = split (/::/);

      $traced{$macro} = 1 if exists $macro_seen{$macro};

      if ($macro eq 'AC_DEFUN' || $macro eq 'AC_DEFUN_ONCE'
            || $macro eq 'AU_DEFUN')
        {
          $map_traced_defs{$arg1} = $file;
        }
      elsif ($macro eq '_AM_AUTOCONF_VERSION')
        {
          $ac_version = $arg1;
        }
      elsif ($macro eq 'AC_CONFIG_MACRO_DIR_TRACE')
        {
          push @ac_config_macro_dirs, $arg1;
        }
      # FIXME: We still need to trace AC_CONFIG_MACRO_DIR
      # for compatibility with older autoconf.  Remove this
      # once we can assume Autoconf 2.70 or later.
      elsif ($macro eq 'AC_CONFIG_MACRO_DIR')
        {
          @ac_config_macro_dirs = ($arg1);
        }
      # FIXME:This is an hack for compatibility with older autoconf.
      # Remove this once we can assume Autoconf 2.70 or later.
      elsif ($macro eq '_AM_CONFIG_MACRO_DIRS')
        {
           # Empty leading/trailing fields might be produced by split,
           # hence the grep is really needed.
           push @ac_config_macro_dirs, grep (/./, (split /\s+/, $arg1));
        }
    }

  # FIXME: in Autoconf >= 2.70, AC_CONFIG_MACRO_DIR calls
  # AC_CONFIG_MACRO_DIR_TRACE behind the scenes, which could
  # leave unwanted duplicates in @ac_config_macro_dirs.
  # Remove this in Automake 2.0, when we'll stop tracing
  # AC_CONFIG_MACRO_DIR explicitly.
  @ac_config_macro_dirs = uniq @ac_config_macro_dirs;

  $tracefh->close;

  return %traced;
}

sub scan_configure ()
{
  # Make sure we include acinclude.m4 if it exists.
  if (-f 'acinclude.m4')
    {
      add_file ('acinclude.m4');
    }
  scan_configure_dep ($configure_ac);
}

################################################################

# Write output.
# Return 0 iff some files were installed locally.
sub write_aclocal ($@)
{
  my ($output_file, @macros) = @_;
  my $output = '';

  my %files = ();
  # Get the list of files containing definitions for the macros used.
  # (Filter out unused macro definitions with $map_traced_defs.  This
  # can happen when an Autoconf macro is conditionally defined:
  # aclocal sees the potential definition, but this definition is
  # actually never processed and the Autoconf implementation is used
  # instead.)
  for my $m (@macros)
    {
      $files{$map{$m}} = 1
	if (exists $map_traced_defs{$m}
	    && $map{$m} eq $map_traced_defs{$m});
    }
  # Do not explicitly include a file that is already indirectly included.
  %files = strip_redundant_includes %files;

  my $installed = 0;

  for my $file (grep { exists $files{$_} } @file_order)
    {
      # Check the time stamp of this file, and of all files it includes.
      for my $ifile ($file, @{$file_includes{$file}})
	{
	  my $mtime = mtime $ifile;
	  $greatest_mtime = $mtime if $greatest_mtime < $mtime;
	}

      # If the file to add looks like outside the project, copy it
      # to the output.  The regex catches filenames starting with
      # things like '/', '\', or 'c:\'.
      if ($file_type{$file} != FT_USER
	  || $file =~ m,^(?:\w:)?[\\/],)
	{
	  if (!$install || $file_type{$file} != FT_SYSTEM)
	    {
	      # Copy the file into aclocal.m4.
	      $output .= $file_contents{$file} . "\n";
	    }
	  else
	    {
	      # Install the file (and any file it includes).
	      my $dest;
	      for my $ifile (@{$file_includes{$file}}, $file)
		{
		  install_file ($ifile, $user_includes[0]);
		}
	      $installed = 1;
	    }
	}
      else
	{
	  # Otherwise, simply include the file.
	  $output .= "m4_include([$file])\n";
	}
    }

  if ($installed)
    {
      verb "running aclocal anew, because some files were installed locally";
      return 0;
    }

  # Nothing to output?!
  # FIXME: Shouldn't we diagnose this?
  return 1 if ! length ($output);

  if ($ac_version)
    {
      # Do not use "$output_file" here for the same reason we do not
      # use it in the header below.  autom4te will output the name of
      # the file in the diagnostic anyway.
      $output = "m4_ifndef([AC_AUTOCONF_VERSION],
  [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
m4_if(m4_defn([AC_AUTOCONF_VERSION]), [$ac_version],,
[m4_warning([this file was generated for autoconf $ac_version.
You have another version of autoconf.  It may work, but is not guaranteed to.
If you have problems, you may need to regenerate the build system entirely.
To do so, use the procedure documented by the package, typically 'autoreconf'.])])

$output";
    }

  # We used to print "# $output_file generated automatically etc."  But
  # this creates spurious differences when using autoreconf.  Autoreconf
  # creates aclocal.m4t and then rename it to aclocal.m4, but the
  # rebuild rules generated by Automake create aclocal.m4 directly --
  # this would gives two ways to get the same file, with a different
  # name in the header.
  $output = "# generated automatically by aclocal $VERSION -*- Autoconf -*-

# Copyright (C) 1996-$RELEASE_YEAR Free Software Foundation, Inc.

# This file is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.

$ac_config_macro_dirs_fallback
$output";

  # We try not to update $output_file unless necessary, because
  # doing so invalidate Autom4te's cache and therefore slows down
  # tools called after aclocal.
  #
  # We need to overwrite $output_file in the following situations.
  #   * The --force option is in use.
  #   * One of the dependencies is younger.
  #     (Not updating $output_file in this situation would cause
  #     make to call aclocal in loop.)
  #   * The contents of the current file are different from what
  #     we have computed.
  if (!$force_output
      && $greatest_mtime < mtime ($output_file)
      && $output eq contents ($output_file))
    {
      verb "$output_file unchanged";
      return 1;
    }

  verb "writing $output_file";

  if (!$dry_run)
    {
      if (-e $output_file && !unlink $output_file)
        {
	  fatal "could not remove '$output_file': $!";
	}
      my $out = new Automake::XFile "> $output_file";
      print $out $output;
    }
  return 1;
}

################################################################

# Print usage and exit.
sub usage ($)
{
  my ($status) = @_;

  print <<'EOF';
Usage: aclocal [OPTION]...

Generate 'aclocal.m4' by scanning 'configure.ac' or 'configure.in'

Options:
      --automake-acdir=DIR  directory holding automake-provided m4 files
      --system-acdir=DIR    directory holding third-party system-wide files
      --diff[=COMMAND]      run COMMAND [diff -u] on M4 files that would be
                            changed (implies --install and --dry-run)
      --dry-run             pretend to, but do not actually update any file
      --force               always update output file
      --help                print this help, then exit
  -I DIR                    add directory to search list for .m4 files
      --install             copy third-party files to the first -I directory
      --output=FILE         put output in FILE (default aclocal.m4)
      --print-ac-dir        print name of directory holding system-wide
                              third-party m4 files, then exit
      --verbose             don't be silent
      --version             print version number, then exit
  -W, --warnings=CATEGORY   report the warnings falling in CATEGORY

Warning categories include:
  syntax        dubious syntactic constructs (default)
  unsupported   unknown macros (default)
  all           all the warnings (default)
  no-CATEGORY   turn off warnings in CATEGORY
  none          turn off all the warnings
  error         treat warnings as errors

Report bugs to <bug-automake@gnu.org>.
GNU Automake home page: <http://www.gnu.org/software/automake/>.
General help using GNU software: <https://www.gnu.org/gethelp/>.
EOF
  exit $status;
}

# Print version and exit.
sub version ()
{
  print <<EOF;
aclocal (GNU $PACKAGE) $VERSION
Copyright (C) $RELEASE_YEAR Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <https://gnu.org/licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey\@redhat.com>
       and Alexandre Duret-Lutz <adl\@gnu.org>.
EOF
  exit 0;
}

# Parse command line.
sub parse_arguments ()
{
  my $print_and_exit = 0;
  my $diff_command;

  my %cli_options =
    (
     'help'		=> sub { usage(0); },
     'version'		=> \&version,
     'system-acdir=s'	=> sub { shift; @system_includes = @_; },
     'automake-acdir=s'	=> sub { shift; @automake_includes = @_; },
     'diff:s'		=> \$diff_command,
     'dry-run'		=> \$dry_run,
     'force'		=> \$force_output,
     'I=s'		=> \@user_includes,
     'install'          => \$install,
     'output=s'		=> \$output_file,
     'print-ac-dir'     => \$print_and_exit,
     'verbose'		=> sub { setup_channel 'verb', silent => 0; },
     'W|warnings=s'     => \&parse_warnings,
     );

  use Automake::Getopt ();
  Automake::Getopt::parse_options %cli_options;

  if (@ARGV > 0)
    {
      fatal ("non-option arguments are not accepted: '$ARGV[0]'.\n"
             . "Try '$0 --help' for more information.");
    }

  if ($print_and_exit)
    {
      print "@system_includes\n";
      exit 0;
    }

  if (defined $diff_command)
    {
      $diff_command = 'diff -u' if $diff_command eq '';
      @diff_command = split (' ', $diff_command);
      $install = 1;
      $dry_run = 1;
    }

  # Finally, adds any directory listed in the 'dirlist' file.
  if (@system_includes && open (DIRLIST, "$system_includes[0]/dirlist"))
    {
      while (<DIRLIST>)
        {
          # Ignore '#' lines.
          next if /^#/;
          # strip off newlines and end-of-line comments
          s/\s*\#.*$//;
          chomp;
          foreach my $dir (glob)
            {
              push (@system_includes, $dir) if -d $dir;
            }
        }
      close (DIRLIST);
    }
}

# Add any directory listed in the 'ACLOCAL_PATH' environment variable
# to the list of system include directories.
sub parse_ACLOCAL_PATH ()
{
  return if not defined $ENV{"ACLOCAL_PATH"};
  # Directories in ACLOCAL_PATH should take precedence over system
  # directories, so we use unshift.  However, directories that
  # come first in ACLOCAL_PATH take precedence over directories
  # coming later, which is why the result of split is reversed.
  foreach my $dir (reverse split /:/, $ENV{"ACLOCAL_PATH"})
    {
      unshift (@system_includes, $dir) if $dir ne '' && -d $dir;
    }
}

################################################################

# Don't refer to installation directories from the build environment
if (exists $ENV{"AUTOMAKE_UNINSTALLED"})
  {
    @automake_includes = ();
    @system_includes = ();
  }

@automake_includes = ($ENV{"ACLOCAL_AUTOMAKE_DIR"})
  if (exists $ENV{"ACLOCAL_AUTOMAKE_DIR"});

parse_WARNINGS;		    # Parse the WARNINGS environment variable.
parse_arguments;
parse_ACLOCAL_PATH;
$configure_ac = require_configure_ac;

# We may have to rerun aclocal if some file have been installed, but
# it should not happen more than once.  The reason we must run again
# is that once the file has been moved from /usr/share/aclocal/ to the
# local m4/ directory it appears at a new place in the search path,
# hence it should be output at a different position in aclocal.m4.  If
# we did not rerun aclocal, the next run of aclocal would produce a
# different aclocal.m4.
my $loop = 0;
my $rerun_due_to_macrodir = 0;
while (1)
  {
    ++$loop;
    prog_error "too many loops" if $loop > 2 + $rerun_due_to_macrodir;

    reset_maps;
    scan_m4_files;
    scan_configure;
    last if $exit_code;
    my %macro_traced = trace_used_macros;

    if (!$rerun_due_to_macrodir && @ac_config_macro_dirs)
      {
        # The directory specified in calls to the AC_CONFIG_MACRO_DIRS
        # m4 macro (if any) must go after the user includes specified
        # explicitly with the '-I' option.
        push @user_includes, @ac_config_macro_dirs;
        # We might have to scan some new directory of .m4 files.
        $rerun_due_to_macrodir++;
        next;
      }

    if ($install && !@user_includes)
      {
        fatal "installation of third-party macros impossible without " .
              "-I options nor AC_CONFIG_MACRO_DIR{,S} m4 macro(s)";
      }

    last if write_aclocal ($output_file, keys %macro_traced);
    last if $dry_run;
  }
check_acinclude;

exit $exit_code;
+ cat /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin/automake-1.16
#!/builds/dan/bootstrapinstall/bin/perl -w
# -*- perl -*-
# Generated from bin/automake.in; do not edit by hand.

eval 'case $# in 0) exec /builds/dan/bootstrapinstall/bin/perl -S "$0";; *) exec /builds/dan/bootstrapinstall/bin/perl -S "$0" "$@";; esac'
    if 0;

# automake - create Makefile.in from Makefile.am
# Copyright (C) 1994-2018 Free Software Foundation, Inc.

# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Originally written by David Mackenzie <djm@gnu.ai.mit.edu>.
# Perl reimplementation by Tom Tromey <tromey@redhat.com>, and
# Alexandre Duret-Lutz <adl@gnu.org>.

package Automake;

use strict;

BEGIN
{
  unshift (@INC, '/builds/dan/bootstrapinstall/share/automake-1.16')
    unless $ENV{AUTOMAKE_UNINSTALLED};

  # Override SHELL.  This is required on DJGPP so that system() uses
  # bash, not COMMAND.COM which doesn't quote arguments properly.
  # Other systems aren't expected to use $SHELL when Automake
  # runs, but it should be safe to drop the "if DJGPP" guard if
  # it turns up other systems need the same thing.  After all,
  # if SHELL is used, ./configure's SHELL is always better than
  # the user's SHELL (which may be something like tcsh).
  $ENV{'SHELL'} = '/bin/ksh' if exists $ENV{'DJDIR'};
}

use Automake::Config;
BEGIN
{
  if ($perl_threads)
    {
      require threads;
      import threads;
      require Thread::Queue;
      import Thread::Queue;
    }
}
use Automake::General;
use Automake::XFile;
use Automake::Channels;
use Automake::ChannelDefs;
use Automake::Configure_ac;
use Automake::FileUtils;
use Automake::Location;
use Automake::Condition qw/TRUE FALSE/;
use Automake::DisjConditions;
use Automake::Options;
use Automake::Variable;
use Automake::VarDef;
use Automake::Rule;
use Automake::RuleDef;
use Automake::Wrap 'makefile_wrap';
use Automake::Language;
use File::Basename;
use File::Spec;
use Carp;

## ----------------------- ##
## Subroutine prototypes.  ##
## ----------------------- ##

sub append_exeext (&$);
sub check_gnits_standards ();
sub check_gnu_standards ();
sub check_trailing_slash ($\$);
sub check_typos ();
sub define_files_variable ($\@$$);
sub define_standard_variables ();
sub define_verbose_libtool ();
sub define_verbose_texinfo ();
sub do_check_merge_target ();
sub get_number_of_threads ();
sub handle_compile ();
sub handle_data ();
sub handle_dist ();
sub handle_emacs_lisp ();
sub handle_factored_dependencies ();
sub handle_footer ();
sub handle_gettext ();
sub handle_headers ();
sub handle_install ();
sub handle_java ();
sub handle_languages ();
sub handle_libraries ();
sub handle_libtool ();
sub handle_ltlibraries ();
sub handle_makefiles_serial ();
sub handle_man_pages ();
sub handle_minor_options ();
sub handle_options ();
sub handle_programs ();
sub handle_python ();
sub handle_scripts ();
sub handle_silent ();
sub handle_subdirs ();
sub handle_tags ();
sub handle_targets ();
sub handle_tests ();
sub handle_tests_dejagnu ();
sub handle_texinfo ();
sub handle_user_recursion ();
sub initialize_per_input ();
sub lang_lex_finish ();
sub lang_sub_obj ();
sub lang_vala_finish ();
sub lang_yacc_finish ();
sub locate_aux_dir ();
sub parse_arguments ();
sub scan_aclocal_m4 ();
sub scan_autoconf_files ();
sub silent_flag ();
sub transform ($\%);
sub transform_token ($\%$);
sub usage ();
sub version ();
sub yacc_lex_finish_helper ();

## ----------- ##
## Constants.  ##
## ----------- ##

# Some regular expressions.  One reason to put them here is that it
# makes indentation work better in Emacs.

# Writing singled-quoted-$-terminated regexes is a pain because
# perl-mode thinks of $' as the ${'} variable (instead of a $ followed
# by a closing quote.  Letting perl-mode think the quote is not closed
# leads to all sort of misindentations.  On the other hand, defining
# regexes as double-quoted strings is far less readable.  So usually
# we will write:
#
#  $REGEX = '^regex_value' . "\$";

my $IGNORE_PATTERN = '^\s*##([^#\n].*)?\n';
my $WHITE_PATTERN = '^\s*' . "\$";
my $COMMENT_PATTERN = '^#';
my $TARGET_PATTERN='[$a-zA-Z0-9_.@%][-.a-zA-Z0-9_(){}/$+@%]*';
# A rule has three parts: a list of targets, a list of dependencies,
# and optionally actions.
my $RULE_PATTERN =
  "^($TARGET_PATTERN(?:(?:\\\\\n|\\s)+$TARGET_PATTERN)*) *:([^=].*|)\$";

# Only recognize leading spaces, not leading tabs.  If we recognize
# leading tabs here then we need to make the reader smarter, because
# otherwise it will think rules like 'foo=bar; \' are errors.
my $ASSIGNMENT_PATTERN = '^ *([^ \t=:+]*)\s*([:+]?)=\s*(.*)' . "\$";
# This pattern recognizes a Gnits version id and sets $1 if the
# release is an alpha release.  We also allow a suffix which can be
# used to extend the version number with a "fork" identifier.
my $GNITS_VERSION_PATTERN = '\d+\.\d+([a-z]|\.\d+)?(-[A-Za-z0-9]+)?';

my $IF_PATTERN = '^if\s+(!?)\s*([A-Za-z][A-Za-z0-9_]*)\s*(?:#.*)?' . "\$";
my $ELSE_PATTERN =
  '^else(?:\s+(!?)\s*([A-Za-z][A-Za-z0-9_]*))?\s*(?:#.*)?' . "\$";
my $ENDIF_PATTERN =
  '^endif(?:\s+(!?)\s*([A-Za-z][A-Za-z0-9_]*))?\s*(?:#.*)?' . "\$";
my $PATH_PATTERN = '(\w|[+/.-])+';
# This will pass through anything not of the prescribed form.
my $INCLUDE_PATTERN = ('^include\s+'
		       . '((\$\(top_srcdir\)/' . $PATH_PATTERN . ')'
		       . '|(\$\(srcdir\)/' . $PATH_PATTERN . ')'
		       . '|([^/\$]' . $PATH_PATTERN . '))\s*(#.*)?' . "\$");

# Directories installed during 'install-exec' phase.
my $EXEC_DIR_PATTERN =
  '^(?:bin|sbin|libexec|sysconf|localstate|lib|pkglib|.*exec.*)' . "\$";

# Values for AC_CANONICAL_*
use constant AC_CANONICAL_BUILD  => 1;
use constant AC_CANONICAL_HOST   => 2;
use constant AC_CANONICAL_TARGET => 3;

# Values indicating when something should be cleaned.
use constant MOSTLY_CLEAN     => 0;
use constant CLEAN            => 1;
use constant DIST_CLEAN       => 2;
use constant MAINTAINER_CLEAN => 3;

# Libtool files.
my @libtool_files = qw(ltmain.sh config.guess config.sub);
# ltconfig appears here for compatibility with old versions of libtool.
my @libtool_sometimes = qw(ltconfig ltcf-c.sh ltcf-cxx.sh ltcf-gcj.sh);

# Commonly found files we look for and automatically include in
# DISTFILES.
my @common_files =
    (qw(ABOUT-GNU ABOUT-NLS AUTHORS BACKLOG COPYING COPYING.DOC COPYING.LIB
	COPYING.LESSER ChangeLog INSTALL NEWS README THANKS TODO
	ar-lib compile config.guess config.rpath
	config.sub depcomp install-sh libversion.in mdate-sh
	missing mkinstalldirs py-compile texinfo.tex ylwrap),
     @libtool_files, @libtool_sometimes);

# Commonly used files we auto-include, but only sometimes.  This list
# is used for the --help output only.
my @common_sometimes =
  qw(aclocal.m4 acconfig.h config.h.top config.h.bot configure
     configure.ac configure.in stamp-vti);

# Standard directories from the GNU Coding Standards, and additional
# pkg* directories from Automake.  Stored in a hash for fast member check.
my %standard_prefix =
    map { $_ => 1 } (qw(bin data dataroot doc dvi exec html include info
			lib libexec lisp locale localstate man man1 man2
			man3 man4 man5 man6 man7 man8 man9 oldinclude pdf
			pkgdata pkginclude pkglib pkglibexec ps sbin
			sharedstate sysconf));

# Copyright on generated Makefile.ins.
my $gen_copyright = "\
# Copyright (C) 1994-$RELEASE_YEAR Free Software Foundation, Inc.

# This Makefile.in is free software; the Free Software Foundation
# gives unlimited permission to copy and/or distribute it,
# with or without modifications, as long as this notice is preserved.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY, to the extent permitted by law; without
# even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.
";

# These constants are returned by the lang_*_rewrite functions.
# LANG_SUBDIR means that the resulting object file should be in a
# subdir if the source file is.  In this case the file name cannot
# have '..' components.
use constant LANG_IGNORE  => 0;
use constant LANG_PROCESS => 1;
use constant LANG_SUBDIR  => 2;

# These are used when keeping track of whether an object can be built
# by two different paths.
use constant COMPILE_LIBTOOL  => 1;
use constant COMPILE_ORDINARY => 2;

# We can't always associate a location to a variable or a rule,
# when it's defined by Automake.  We use INTERNAL in this case.
use constant INTERNAL => new Automake::Location;

# Serialization keys for message queues.
use constant QUEUE_MESSAGE   => "msg";
use constant QUEUE_CONF_FILE => "conf file";
use constant QUEUE_LOCATION  => "location";
use constant QUEUE_STRING    => "string";

## ---------------------------------- ##
## Variables related to the options.  ##
## ---------------------------------- ##

# TRUE if we should always generate Makefile.in.
my $force_generation = 1;

# From the Perl manual.
my $symlink_exists = (eval 'symlink ("", "");', $@ eq '');

# TRUE if missing standard files should be installed.
my $add_missing = 0;

# TRUE if we should copy missing files; otherwise symlink if possible.
my $copy_missing = 0;

# TRUE if we should always update files that we know about.
my $force_missing = 0;


## ---------------------------------------- ##
## Variables filled during files scanning.  ##
## ---------------------------------------- ##

# Name of the configure.ac file.
my $configure_ac;

# Files found by scanning configure.ac for LIBOBJS.
my %libsources = ();

# Names used in AC_CONFIG_HEADERS call.
my @config_headers = ();

# Names used in AC_CONFIG_LINKS call.
my @config_links = ();

# List of Makefile.am's to process, and their corresponding outputs.
my @input_files = ();
my %output_files = ();

# Complete list of Makefile.am's that exist.
my @configure_input_files = ();

# List of files in AC_CONFIG_FILES/AC_OUTPUT without Makefile.am's,
# and their outputs.
my @other_input_files = ();
# Where each AC_CONFIG_FILES/AC_OUTPUT/AC_CONFIG_LINK/AC_CONFIG_HEADERS
# appears.  The keys are the files created by these macros.
my %ac_config_files_location = ();
# The condition under which AC_CONFIG_FOOS appears.
my %ac_config_files_condition = ();

# Directory to search for configure-required files.  This
# will be computed by locate_aux_dir() and can be set using
# AC_CONFIG_AUX_DIR in configure.ac.
# $CONFIG_AUX_DIR is the 'raw' directory, valid only in the source-tree.
my $config_aux_dir = '';
my $config_aux_dir_set_in_configure_ac = 0;
# $AM_CONFIG_AUX_DIR is prefixed with $(top_srcdir), so it can be used
# in Makefiles.
my $am_config_aux_dir = '';

# Directory to search for AC_LIBSOURCE files, as set by AC_CONFIG_LIBOBJ_DIR
# in configure.ac.
my $config_libobj_dir = '';

# Whether AM_GNU_GETTEXT has been seen in configure.ac.
my $seen_gettext = 0;
# Whether AM_GNU_GETTEXT([external]) is used.
my $seen_gettext_external = 0;
# Where AM_GNU_GETTEXT appears.
my $ac_gettext_location;
# Whether AM_GNU_GETTEXT_INTL_SUBDIR has been seen.
my $seen_gettext_intl = 0;

# The arguments of the AM_EXTRA_RECURSIVE_TARGETS call (if any).
my @extra_recursive_targets = ();

# Lists of tags supported by Libtool.
my %libtool_tags = ();
# 1 if Libtool uses LT_SUPPORTED_TAG.  If it does, then it also
# uses AC_REQUIRE_AUX_FILE.
my $libtool_new_api = 0;

# Most important AC_CANONICAL_* macro seen so far.
my $seen_canonical = 0;

# Where AM_MAINTAINER_MODE appears.
my $seen_maint_mode;

# Actual version we've seen.
my $package_version = '';

# Where version is defined.
my $package_version_location;

# TRUE if we've seen AM_PROG_AR
my $seen_ar = 0;

# Location of AC_REQUIRE_AUX_FILE calls, indexed by their argument.
my %required_aux_file = ();

# Where AM_INIT_AUTOMAKE is called.
my $seen_init_automake = 0;

# TRUE if we've seen AM_AUTOMAKE_VERSION.
my $seen_automake_version = 0;

# Hash table of discovered configure substitutions.  Keys are names,
# values are 'FILE:LINE' strings which are used by error message
# generation.
my %configure_vars = ();

# Ignored configure substitutions (i.e., variables not to be output in
# Makefile.in)
my %ignored_configure_vars = ();

# Files included by $configure_ac.
my @configure_deps = ();

# Greatest timestamp of configure's dependencies.
my $configure_deps_greatest_timestamp = 0;

# Hash table of AM_CONDITIONAL variables seen in configure.
my %configure_cond = ();

# This maps extensions onto language names.
my %extension_map = ();

# List of the DIST_COMMON files we discovered while reading
# configure.ac.
my @configure_dist_common = ();

# This maps languages names onto objects.
my %languages = ();
# Maps each linker variable onto a language object.
my %link_languages = ();

# maps extensions to needed source flags.
my %sourceflags = ();

# List of targets we must always output.
# FIXME: Complete, and remove falsely required targets.
my %required_targets =
  (
   'all'          => 1,
   'dvi'	  => 1,
   'pdf'	  => 1,
   'ps'		  => 1,
   'info'	  => 1,
   'install-info' => 1,
   'install'      => 1,
   'install-data' => 1,
   'install-exec' => 1,
   'uninstall'    => 1,

   # FIXME: Not required, temporary hacks.
   # Well, actually they are sort of required: the -recursive
   # targets will run them anyway...
   'html-am'         => 1,
   'dvi-am'          => 1,
   'pdf-am'          => 1,
   'ps-am'           => 1,
   'info-am'         => 1,
   'install-data-am' => 1,
   'install-exec-am' => 1,
   'install-html-am' => 1,
   'install-dvi-am'  => 1,
   'install-pdf-am'  => 1,
   'install-ps-am'   => 1,
   'install-info-am' => 1,
   'installcheck-am' => 1,
   'uninstall-am'    => 1,
   'tags-am'         => 1,
   'ctags-am'        => 1,
   'cscopelist-am'   => 1,
   'install-man'     => 1,
  );

# Queue to push require_conf_file requirements to.
my $required_conf_file_queue;

# The name of the Makefile currently being processed.
my $am_file = 'BUG';

################################################################

## ------------------------------------------ ##
## Variables reset by &initialize_per_input.  ##
## ------------------------------------------ ##

# Relative dir of the output makefile.
my $relative_dir;

# Greatest timestamp of the output's dependencies (excluding
# configure's dependencies).
my $output_deps_greatest_timestamp;

# These variables are used when generating each Makefile.in.
# They hold the Makefile.in until it is ready to be printed.
my $output_vars;
my $output_all;
my $output_header;
my $output_rules;
my $output_trailer;

# This is the conditional stack, updated on if/else/endif, and
# used to build Condition objects.
my @cond_stack;

# This holds the set of included files.
my @include_stack;

# List of dependencies for the obvious targets.
my @all;
my @check;
my @check_tests;

# Keys in this hash table are files to delete.  The associated
# value tells when this should happen (MOSTLY_CLEAN, DIST_CLEAN, etc.)
my %clean_files;

# Keys in this hash table are object files or other files in
# subdirectories which need to be removed.  This only holds files
# which are created by compilations.  The value in the hash indicates
# when the file should be removed.
my %compile_clean_files;

# Keys in this hash table are directories where we expect to build a
# libtool object.  We use this information to decide what directories
# to delete.
my %libtool_clean_directories;

# Value of $(SOURCES), used by tags.am.
my @sources;
# Sources which go in the distribution.
my @dist_sources;

# This hash maps object file names onto their corresponding source
# file names.  This is used to ensure that each object is created
# by a single source file.
my %object_map;

# This hash maps object file names onto an integer value representing
# whether this object has been built via ordinary compilation or
# libtool compilation (the COMPILE_* constants).
my %object_compilation_map;


# This keeps track of the directories for which we've already
# created dirstamp code.  Keys are directories, values are stamp files.
# Several keys can share the same stamp files if they are equivalent
# (as are './/foo' and 'foo').
my %directory_map;

# All .P files.
my %dep_files;

# This is a list of all targets to run during "make dist".
my @dist_targets;

# List of all programs, libraries and ltlibraries as returned
# by am_install_var
my @proglist;
my @liblist;
my @ltliblist;
# Blacklist of targets (as canonical base name) for which object file names
# may not be automatically shortened
my @dup_shortnames;

# Keep track of all programs declared in this Makefile, without
# $(EXEEXT).  @substitutions@ are not listed.
my %known_programs;
my %known_libraries;

# This keeps track of which extensions we've seen (that we care
# about).
my %extension_seen;

# This is random scratch space for the language finish functions.
# Don't randomly overwrite it; examine other uses of keys first.
my %language_scratch;

# We keep track of which objects need special (per-executable)
# handling on a per-language basis.
my %lang_specific_files;

# List of distributed files to be put in DIST_COMMON.
my @dist_common;

# This is set when 'handle_dist' has finished.  Once this happens,
# we should no longer push on dist_common.
my $handle_dist_run;

# Used to store a set of linkers needed to generate the sources currently
# under consideration.
my %linkers_used;

# True if we need 'LINK' defined.  This is a hack.
my $need_link;

# Does the generated Makefile have to build some compiled object
# (for binary programs, or plain or libtool libraries)?
my $must_handle_compiled_objects;

# Record each file processed by make_paragraphs.
my %transformed_files;

################################################################

## ---------------------------------------------- ##
## Variables not reset by &initialize_per_input.  ##
## ---------------------------------------------- ##

# Cache each file processed by make_paragraphs.
# (This is different from %transformed_files because
# %transformed_files is reset for each file while %am_file_cache
# it global to the run.)
my %am_file_cache;

################################################################

# var_SUFFIXES_trigger ($TYPE, $VALUE)
# ------------------------------------
# This is called by Automake::Variable::define() when SUFFIXES
# is defined ($TYPE eq '') or appended ($TYPE eq '+').
# The work here needs to be performed as a side-effect of the
# macro_define() call because SUFFIXES definitions impact
# on $KNOWN_EXTENSIONS_PATTERN which is used used when parsing
# the input am file.
sub var_SUFFIXES_trigger
{
    my ($type, $value) = @_;
    accept_extensions (split (' ', $value));
}
Automake::Variable::hook ('SUFFIXES', \&var_SUFFIXES_trigger);

################################################################


# initialize_per_input ()
# -----------------------
# (Re)-Initialize per-Makefile.am variables.
sub initialize_per_input ()
{
    reset_local_duplicates ();

    $relative_dir = undef;

    $output_deps_greatest_timestamp = 0;

    $output_vars = '';
    $output_all = '';
    $output_header = '';
    $output_rules = '';
    $output_trailer = '';

    Automake::Options::reset;
    Automake::Variable::reset;
    Automake::Rule::reset;

    @cond_stack = ();

    @include_stack = ();

    @all = ();
    @check = ();
    @check_tests = ();

    %clean_files = ();
    %compile_clean_files = ();

    # We always include '.'.  This isn't strictly correct.
    %libtool_clean_directories = ('.' => 1);

    @sources = ();
    @dist_sources = ();

    %object_map = ();
    %object_compilation_map = ();

    %directory_map = ();

    %dep_files = ();

    @dist_targets = ();

    @dist_common = ();
    $handle_dist_run = 0;

    @proglist = ();
    @liblist = ();
    @ltliblist = ();
    @dup_shortnames = ();

    %known_programs = ();
    %known_libraries = ();

    %extension_seen = ();

    %language_scratch = ();

    %lang_specific_files = ();

    $need_link = 0;

    $must_handle_compiled_objects = 0;

    %transformed_files = ();
}


################################################################

# Initialize our list of languages that are internally supported.

my @cpplike_flags =
  qw{
    $(DEFS)
    $(DEFAULT_INCLUDES)
    $(INCLUDES)
    $(AM_CPPFLAGS)
    $(CPPFLAGS)
  };

# C.
register_language ('name' => 'c',
		   'Name' => 'C',
		   'config_vars' => ['CC'],
		   'autodep' => '',
		   'flags' => ['CFLAGS', 'CPPFLAGS'],
		   'ccer' => 'CC',
		   'compiler' => 'COMPILE',
		   'compile' => "\$(CC) @cpplike_flags \$(AM_CFLAGS) \$(CFLAGS)",
		   'lder' => 'CCLD',
		   'ld' => '$(CC)',
		   'linker' => 'LINK',
		   'link' => '$(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'CC',
		   'extensions' => ['.c']);

# C++.
register_language ('name' => 'cxx',
		   'Name' => 'C++',
		   'config_vars' => ['CXX'],
		   'linker' => 'CXXLINK',
		   'link' => '$(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'autodep' => 'CXX',
		   'flags' => ['CXXFLAGS', 'CPPFLAGS'],
		   'compile' => "\$(CXX) @cpplike_flags \$(AM_CXXFLAGS) \$(CXXFLAGS)",
		   'ccer' => 'CXX',
		   'compiler' => 'CXXCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'CXX',
		   'lder' => 'CXXLD',
		   'ld' => '$(CXX)',
		   'pure' => 1,
		   'extensions' => ['.c++', '.cc', '.cpp', '.cxx', '.C']);

# Objective C.
register_language ('name' => 'objc',
		   'Name' => 'Objective C',
		   'config_vars' => ['OBJC'],
		   'linker' => 'OBJCLINK',
		   'link' => '$(OBJCLD) $(AM_OBJCFLAGS) $(OBJCFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'autodep' => 'OBJC',
		   'flags' => ['OBJCFLAGS', 'CPPFLAGS'],
		   'compile' => "\$(OBJC) @cpplike_flags \$(AM_OBJCFLAGS) \$(OBJCFLAGS)",
		   'ccer' => 'OBJC',
		   'compiler' => 'OBJCCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'lder' => 'OBJCLD',
		   'ld' => '$(OBJC)',
		   'pure' => 1,
		   'extensions' => ['.m']);

# Objective C++.
register_language ('name' => 'objcxx',
		   'Name' => 'Objective C++',
		   'config_vars' => ['OBJCXX'],
		   'linker' => 'OBJCXXLINK',
		   'link' => '$(OBJCXXLD) $(AM_OBJCXXFLAGS) $(OBJCXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'autodep' => 'OBJCXX',
		   'flags' => ['OBJCXXFLAGS', 'CPPFLAGS'],
		   'compile' => "\$(OBJCXX) @cpplike_flags \$(AM_OBJCXXFLAGS) \$(OBJCXXFLAGS)",
		   'ccer' => 'OBJCXX',
		   'compiler' => 'OBJCXXCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'lder' => 'OBJCXXLD',
		   'ld' => '$(OBJCXX)',
		   'pure' => 1,
		   'extensions' => ['.mm']);

# Unified Parallel C.
register_language ('name' => 'upc',
		   'Name' => 'Unified Parallel C',
		   'config_vars' => ['UPC'],
		   'linker' => 'UPCLINK',
		   'link' => '$(UPCLD) $(AM_UPCFLAGS) $(UPCFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'autodep' => 'UPC',
		   'flags' => ['UPCFLAGS', 'CPPFLAGS'],
		   'compile' => "\$(UPC) @cpplike_flags \$(AM_UPCFLAGS) \$(UPCFLAGS)",
		   'ccer' => 'UPC',
		   'compiler' => 'UPCCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'lder' => 'UPCLD',
		   'ld' => '$(UPC)',
		   'pure' => 1,
		   'extensions' => ['.upc']);

# Headers.
register_language ('name' => 'header',
		   'Name' => 'Header',
		   'extensions' => ['.h', '.H', '.hxx', '.h++', '.hh',
				    '.hpp', '.inc'],
		   # No output.
		   'output_extensions' => sub { return () },
		   # Nothing to do.
		   '_finish' => sub { });

# Vala
register_language ('name' => 'vala',
		   'Name' => 'Vala',
		   'config_vars' => ['VALAC'],
		   'flags' => [],
		   'compile' => '$(VALAC) $(AM_VALAFLAGS) $(VALAFLAGS)',
		   'ccer' => 'VALAC',
		   'compiler' => 'VALACOMPILE',
		   'extensions' => ['.vala'],
		   'output_extensions' => sub { (my $ext = $_[0]) =~ s/vala$/c/;
						return ($ext,) },
		   'rule_file' => 'vala',
		   '_finish' => \&lang_vala_finish,
		   '_target_hook' => \&lang_vala_target_hook,
		   'nodist_specific' => 1);

# Yacc (C & C++).
register_language ('name' => 'yacc',
		   'Name' => 'Yacc',
		   'config_vars' => ['YACC'],
		   'flags' => ['YFLAGS'],
		   'compile' => '$(YACC) $(AM_YFLAGS) $(YFLAGS)',
		   'ccer' => 'YACC',
		   'compiler' => 'YACCCOMPILE',
		   'extensions' => ['.y'],
		   'output_extensions' => sub { (my $ext = $_[0]) =~ tr/y/c/;
						return ($ext,) },
		   'rule_file' => 'yacc',
		   '_finish' => \&lang_yacc_finish,
		   '_target_hook' => \&lang_yacc_target_hook,
		   'nodist_specific' => 1);
register_language ('name' => 'yaccxx',
		   'Name' => 'Yacc (C++)',
		   'config_vars' => ['YACC'],
		   'rule_file' => 'yacc',
		   'flags' => ['YFLAGS'],
		   'ccer' => 'YACC',
		   'compiler' => 'YACCCOMPILE',
		   'compile' => '$(YACC) $(AM_YFLAGS) $(YFLAGS)',
		   'extensions' => ['.y++', '.yy', '.yxx', '.ypp'],
		   'output_extensions' => sub { (my $ext = $_[0]) =~ tr/y/c/;
						return ($ext,) },
		   '_finish' => \&lang_yacc_finish,
		   '_target_hook' => \&lang_yacc_target_hook,
		   'nodist_specific' => 1);

# Lex (C & C++).
register_language ('name' => 'lex',
		   'Name' => 'Lex',
		   'config_vars' => ['LEX'],
		   'rule_file' => 'lex',
		   'flags' => ['LFLAGS'],
		   'compile' => '$(LEX) $(AM_LFLAGS) $(LFLAGS)',
		   'ccer' => 'LEX',
		   'compiler' => 'LEXCOMPILE',
		   'extensions' => ['.l'],
		   'output_extensions' => sub { (my $ext = $_[0]) =~ tr/l/c/;
						return ($ext,) },
		   '_finish' => \&lang_lex_finish,
		   '_target_hook' => \&lang_lex_target_hook,
		   'nodist_specific' => 1);
register_language ('name' => 'lexxx',
		   'Name' => 'Lex (C++)',
		   'config_vars' => ['LEX'],
		   'rule_file' => 'lex',
		   'flags' => ['LFLAGS'],
		   'compile' => '$(LEX) $(AM_LFLAGS) $(LFLAGS)',
		   'ccer' => 'LEX',
		   'compiler' => 'LEXCOMPILE',
		   'extensions' => ['.l++', '.ll', '.lxx', '.lpp'],
		   'output_extensions' => sub { (my $ext = $_[0]) =~ tr/l/c/;
						return ($ext,) },
		   '_finish' => \&lang_lex_finish,
		   '_target_hook' => \&lang_lex_target_hook,
		   'nodist_specific' => 1);

# Assembler.
register_language ('name' => 'asm',
		   'Name' => 'Assembler',
		   'config_vars' => ['CCAS', 'CCASFLAGS'],

		   'flags' => ['CCASFLAGS'],
		   # Users can set AM_CCASFLAGS to include DEFS, INCLUDES,
		   # or anything else required.  They can also set CCAS.
		   # Or simply use Preprocessed Assembler.
		   'compile' => '$(CCAS) $(AM_CCASFLAGS) $(CCASFLAGS)',
		   'ccer' => 'CCAS',
		   'compiler' => 'CCASCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'extensions' => ['.s']);

# Preprocessed Assembler.
register_language ('name' => 'cppasm',
		   'Name' => 'Preprocessed Assembler',
		   'config_vars' => ['CCAS', 'CCASFLAGS'],

		   'autodep' => 'CCAS',
		   'flags' => ['CCASFLAGS', 'CPPFLAGS'],
		   'compile' => "\$(CCAS) @cpplike_flags \$(AM_CCASFLAGS) \$(CCASFLAGS)",
		   'ccer' => 'CPPAS',
		   'compiler' => 'CPPASCOMPILE',
                   'libtool_tag' => 'CC',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'extensions' => ['.S', '.sx']);

# Fortran 77
register_language ('name' => 'f77',
		   'Name' => 'Fortran 77',
		   'config_vars' => ['F77'],
		   'linker' => 'F77LINK',
		   'link' => '$(F77LD) $(AM_FFLAGS) $(FFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'flags' => ['FFLAGS'],
		   'compile' => '$(F77) $(AM_FFLAGS) $(FFLAGS)',
		   'ccer' => 'F77',
		   'compiler' => 'F77COMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'F77',
		   'lder' => 'F77LD',
		   'ld' => '$(F77)',
		   'pure' => 1,
		   'extensions' => ['.f', '.for']);

# Fortran
register_language ('name' => 'fc',
		   'Name' => 'Fortran',
		   'config_vars' => ['FC'],
		   'linker' => 'FCLINK',
		   'link' => '$(FCLD) $(AM_FCFLAGS) $(FCFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'flags' => ['FCFLAGS'],
		   'compile' => '$(FC) $(AM_FCFLAGS) $(FCFLAGS)',
		   'ccer' => 'FC',
		   'compiler' => 'FCCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'FC',
		   'lder' => 'FCLD',
		   'ld' => '$(FC)',
		   'pure' => 1,
		   'extensions' => ['.f90', '.f95', '.f03', '.f08']);

# Preprocessed Fortran
register_language ('name' => 'ppfc',
		   'Name' => 'Preprocessed Fortran',
		   'config_vars' => ['FC'],
		   'linker' => 'FCLINK',
		   'link' => '$(FCLD) $(AM_FCFLAGS) $(FCFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'lder' => 'FCLD',
		   'ld' => '$(FC)',
		   'flags' => ['FCFLAGS', 'CPPFLAGS'],
		   'ccer' => 'PPFC',
		   'compiler' => 'PPFCCOMPILE',
		   'compile' => "\$(FC) @cpplike_flags \$(AM_FCFLAGS) \$(FCFLAGS)",
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'FC',
		   'pure' => 1,
		   'extensions' => ['.F90','.F95', '.F03', '.F08']);

# Preprocessed Fortran 77
#
# The current support for preprocessing Fortran 77 just involves
# passing "$(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS)
# $(CPPFLAGS)" as additional flags to the Fortran 77 compiler, since
# this is how GNU Make does it; see the "GNU Make Manual, Edition 0.51
# for 'make' Version 3.76 Beta" (specifically, from info file
# '(make)Catalogue of Rules').
#
# A better approach would be to write an Autoconf test
# (i.e. AC_PROG_FPP) for a Fortran 77 preprocessor, because not all
# Fortran 77 compilers know how to do preprocessing.  The Autoconf
# macro AC_PROG_FPP should test the Fortran 77 compiler first for
# preprocessing capabilities, and then fall back on cpp (if cpp were
# available).
register_language ('name' => 'ppf77',
		   'Name' => 'Preprocessed Fortran 77',
		   'config_vars' => ['F77'],
		   'linker' => 'F77LINK',
		   'link' => '$(F77LD) $(AM_FFLAGS) $(FFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'lder' => 'F77LD',
		   'ld' => '$(F77)',
		   'flags' => ['FFLAGS', 'CPPFLAGS'],
		   'ccer' => 'PPF77',
		   'compiler' => 'PPF77COMPILE',
		   'compile' => "\$(F77) @cpplike_flags \$(AM_FFLAGS) \$(FFLAGS)",
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'F77',
		   'pure' => 1,
		   'extensions' => ['.F']);

# Ratfor.
register_language ('name' => 'ratfor',
		   'Name' => 'Ratfor',
		   'config_vars' => ['F77'],
		   'linker' => 'F77LINK',
		   'link' => '$(F77LD) $(AM_FFLAGS) $(FFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'lder' => 'F77LD',
		   'ld' => '$(F77)',
		   'flags' => ['RFLAGS', 'FFLAGS'],
		   # FIXME also FFLAGS.
		   'compile' => '$(F77) $(AM_FFLAGS) $(FFLAGS) $(AM_RFLAGS) $(RFLAGS)',
		   'ccer' => 'F77',
		   'compiler' => 'RCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'F77',
		   'pure' => 1,
		   'extensions' => ['.r']);

# Java via gcj.
register_language ('name' => 'java',
		   'Name' => 'Java',
		   'config_vars' => ['GCJ'],
		   'linker' => 'GCJLINK',
		   'link' => '$(GCJLD) $(AM_GCJFLAGS) $(GCJFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@',
		   'autodep' => 'GCJ',
		   'flags' => ['GCJFLAGS'],
		   'compile' => '$(GCJ) $(AM_GCJFLAGS) $(GCJFLAGS)',
		   'ccer' => 'GCJ',
		   'compiler' => 'GCJCOMPILE',
		   'compile_flag' => '-c',
		   'output_flag' => '-o',
		   'libtool_tag' => 'GCJ',
		   'lder' => 'GCJLD',
		   'ld' => '$(GCJ)',
		   'pure' => 1,
		   'extensions' => ['.java', '.class', '.zip', '.jar']);

################################################################

# Error reporting functions.

# err_am ($MESSAGE, [%OPTIONS])
# -----------------------------
# Uncategorized errors about the current Makefile.am.
sub err_am
{
  msg_am ('error', @_);
}

# err_ac ($MESSAGE, [%OPTIONS])
# -----------------------------
# Uncategorized errors about configure.ac.
sub err_ac
{
  msg_ac ('error', @_);
}

# msg_am ($CHANNEL, $MESSAGE, [%OPTIONS])
# ---------------------------------------
# Messages about about the current Makefile.am.
sub msg_am
{
  my ($channel, $msg, %opts) = @_;
  msg $channel, "${am_file}.am", $msg, %opts;
}

# msg_ac ($CHANNEL, $MESSAGE, [%OPTIONS])
# ---------------------------------------
# Messages about about configure.ac.
sub msg_ac
{
  my ($channel, $msg, %opts) = @_;
  msg $channel, $configure_ac, $msg, %opts;
}

################################################################

# subst ($TEXT)
# -------------
# Return a configure-style substitution using the indicated text.
# We do this to avoid having the substitutions directly in automake.in;
# when we do that they are sometimes removed and this causes confusion
# and bugs.
sub subst
{
    my ($text) = @_;
    return '@' . $text . '@';
}

################################################################


# $BACKPATH
# backname ($RELDIR)
# -------------------
# If I "cd $RELDIR", then to come back, I should "cd $BACKPATH".
# For instance 'src/foo' => '../..'.
# Works with non strictly increasing paths, i.e., 'src/../lib' => '..'.
sub backname
{
    my ($file) = @_;
    my @res;
    foreach (split (/\//, $file))
    {
	next if $_ eq '.' || $_ eq '';
	if ($_ eq '..')
	{
	    pop @res
	      or prog_error ("trying to reverse path '$file' pointing outside tree");
	}
	else
	{
	    push (@res, '..');
	}
    }
    return join ('/', @res) || '.';
}

################################################################

# Silent rules handling functions.

# verbose_var (NAME)
# ------------------
# The public variable stem used to implement silent rules.
sub verbose_var
{
    my ($name) = @_;
    return 'AM_V_' . $name;
}

# verbose_private_var (NAME)
# --------------------------
# The naming policy for the private variables for silent rules.
sub verbose_private_var
{
    my ($name) = @_;
    return 'am__v_' . $name;
}

# define_verbose_var (NAME, VAL-IF-SILENT, [VAL-IF-VERBOSE])
# ----------------------------------------------------------
# For  silent rules, setup VAR and dispatcher, to expand to
# VAL-IF-SILENT if silent, to VAL-IF-VERBOSE (defaulting to
# empty) if not.
sub define_verbose_var
{
    my ($name, $silent_val, $verbose_val) = @_;
    $verbose_val = '' unless defined $verbose_val;
    my $var = verbose_var ($name);
    my $pvar = verbose_private_var ($name);
    my $silent_var = $pvar . '_0';
    my $verbose_var = $pvar . '_1';
    # For typical 'make's, 'configure' replaces AM_V (inside @@) with $(V)
    # and AM_DEFAULT_V (inside @@) with $(AM_DEFAULT_VERBOSITY).
    # For strict POSIX 2008 'make's, it replaces them with 0 or 1 instead.
    # See AM_SILENT_RULES in m4/silent.m4.
    define_variable ($var, '$(' . $pvar . '_@'.'AM_V'.'@)', INTERNAL);
    define_variable ($pvar . '_', '$(' . $pvar . '_@'.'AM_DEFAULT_V'.'@)',
                     INTERNAL);
    Automake::Variable::define ($silent_var, VAR_AUTOMAKE, '', TRUE,
                                $silent_val, '', INTERNAL, VAR_ASIS)
      if (! vardef ($silent_var, TRUE));
    Automake::Variable::define ($verbose_var, VAR_AUTOMAKE, '', TRUE,
                                $verbose_val, '', INTERNAL, VAR_ASIS)
      if (! vardef ($verbose_var, TRUE));
}

# verbose_flag (NAME)
# -------------------
# Contents of '%VERBOSE%' variable to expand before rule command.
sub verbose_flag
{
    my ($name) = @_;
    return '$(' . verbose_var ($name) . ')';
}

sub verbose_nodep_flag
{
    my ($name) = @_;
    return '$(' . verbose_var ($name) . subst ('am__nodep') . ')';
}

# silent_flag
# -----------
# Contents of %SILENT%: variable to expand to '@' when silent.
sub silent_flag ()
{
    return verbose_flag ('at');
}

# define_verbose_tagvar (NAME)
# ----------------------------
# Engage the needed silent rules machinery for tag NAME.
sub define_verbose_tagvar
{
    my ($name) = @_;
    define_verbose_var ($name, '@echo "  '. $name . ' ' x (8 - length ($name)) . '" $@;');
}

# Engage the needed silent rules machinery for assorted texinfo commands.
sub define_verbose_texinfo ()
{
  my @tagvars = ('DVIPS', 'MAKEINFO', 'INFOHTML', 'TEXI2DVI', 'TEXI2PDF');
  foreach my $tag (@tagvars)
    {
      define_verbose_tagvar($tag);
    }
  define_verbose_var('texinfo', '-q');
  define_verbose_var('texidevnull', '> /dev/null');
}

# Engage the needed silent rules machinery for 'libtool --silent'.
sub define_verbose_libtool ()
{
    define_verbose_var ('lt', '--silent');
    return verbose_flag ('lt');
}

sub handle_silent ()
{
    # Define "$(AM_V_P)", expanding to a shell conditional that can be
    # used in make recipes to determine whether we are being run in
    # silent mode or not.  The choice of the name derives from the LISP
    # convention of appending the letter 'P' to denote a predicate (see
    # also "the '-P' convention" in the Jargon File); we do so for lack
    # of a better convention.
    define_verbose_var ('P', 'false', ':');
    # *Always* provide the user with '$(AM_V_GEN)', unconditionally.
    define_verbose_tagvar ('GEN');
    define_verbose_var ('at', '@');
}


################################################################


# Handle AUTOMAKE_OPTIONS variable.  Return 0 on error, 1 otherwise.
sub handle_options ()
{
  my $var = var ('AUTOMAKE_OPTIONS');
  if ($var)
    {
      if ($var->has_conditional_contents)
	{
	  msg_var ('unsupported', $var,
		   "'AUTOMAKE_OPTIONS' cannot have conditional contents");
	}
      my @options = map { { option => $_->[1], where => $_->[0] } }
			$var->value_as_list_recursive (cond_filter => TRUE,
						       location => 1);
      return 0 unless process_option_list (@options);
    }

  if ($strictness == GNITS)
    {
      set_option ('readme-alpha', INTERNAL);
      set_option ('std-options', INTERNAL);
      set_option ('check-news', INTERNAL);
    }

  return 1;
}

# shadow_unconditionally ($varname, $where)
# -----------------------------------------
# Return a $(variable) that contains all possible values
# $varname can take.
# If the VAR wasn't defined conditionally, return $(VAR).
# Otherwise we create an am__VAR_DIST variable which contains
# all possible values, and return $(am__VAR_DIST).
sub shadow_unconditionally
{
  my ($varname, $where) = @_;
  my $var = var $varname;
  if ($var->has_conditional_contents)
    {
      $varname = "am__${varname}_DIST";
      my @files = uniq ($var->value_as_list_recursive);
      define_pretty_variable ($varname, TRUE, $where, @files);
    }
  return "\$($varname)"
}

# check_user_variables (@LIST)
# ----------------------------
# Make sure each variable VAR in @LIST does not exist, suggest using AM_VAR
# otherwise.
sub check_user_variables
{
  my @dont_override = @_;
  foreach my $flag (@dont_override)
    {
      my $var = var $flag;
      if ($var)
	{
	  for my $cond ($var->conditions->conds)
	    {
	      if ($var->rdef ($cond)->owner == VAR_MAKEFILE)
		{
		  msg_cond_var ('gnu', $cond, $flag,
				"'$flag' is a user variable, "
				. "you should not override it;\n"
				. "use 'AM_$flag' instead");
		}
	    }
	}
    }
}

# Call finish function for each language that was used.
sub handle_languages ()
{
    if (! option 'no-dependencies')
      {
        # Include auto-dep code.  Don't include it if DEP_FILES would
        # be empty.
        if (keys %extension_seen && keys %dep_files)
          {
            my @dep_files = sort keys %dep_files;
            # Set location of depcomp.
            define_variable ('depcomp',
                             "\$(SHELL) $am_config_aux_dir/depcomp",
                             INTERNAL);
            define_variable ('am__maybe_remake_depfiles', 'depfiles', INTERNAL);
            define_variable ('am__depfiles_remade', "@dep_files", INTERNAL);
            $output_rules .= "\n";
            my @dist_rms;
            foreach my $depfile (@dep_files)
              {
                push @dist_rms, "\t-rm -f $depfile";
                # Generate each 'include' directive individually.  Several
                # make implementations (IRIX 6, Solaris 10, FreeBSD 8) will
                # fail to properly include several files resulting from a
                # variable expansion. Just Generating many separate includes
                # seems thus safest.
                $output_rules .= subst ('AMDEP_TRUE') .
                                 subst ('am__include') .
                                 " " .
                                 subst('am__quote') .
                                 $depfile .
                                 subst('am__quote') .
                                 " " .
                                 "# am--include-marker\n";
              }

            require_conf_file ("$am_file.am", FOREIGN, 'depcomp');

            $output_rules .= file_contents (
                'depend', new Automake::Location,
                'DISTRMS' => join ("\n", @dist_rms));
          }
      }
    else
      {
        define_variable ('depcomp', '', INTERNAL);
        define_variable ('am__maybe_remake_depfiles', '', INTERNAL);
      }

    my %done;

    # Is the C linker needed?
    my $needs_c = 0;
    foreach my $ext (sort keys %extension_seen)
    {
	next unless $extension_map{$ext};

	my $lang = $languages{$extension_map{$ext}};

	my $rule_file = $lang->rule_file || 'depend2';

	# Get information on $LANG.
	my $pfx = $lang->autodep;
	my $fpfx = ($pfx eq '') ? 'CC' : $pfx;

	my ($AMDEP, $FASTDEP) =
	  (option 'no-dependencies' || $lang->autodep eq 'no')
	  ? ('FALSE', 'FALSE') : ('AMDEP', "am__fastdep$fpfx");

	my $verbose = verbose_flag ($lang->ccer || 'GEN');
	my $verbose_nodep = ($AMDEP eq 'FALSE')
	  ? $verbose : verbose_nodep_flag ($lang->ccer || 'GEN');
	my $silent = silent_flag ();

	my %transform = ('EXT'     => $ext,
			 'PFX'     => $pfx,
			 'FPFX'    => $fpfx,
			 'AMDEP'   => $AMDEP,
			 'FASTDEP' => $FASTDEP,
			 '-c'      => $lang->compile_flag || '',
			 # These are not used, but they need to be defined
			 # so transform() do not complain.
			 SUBDIROBJ     => 0,
			 'DERIVED-EXT' => 'BUG',
			 DIST_SOURCE   => 1,
			 VERBOSE   => $verbose,
			 'VERBOSE-NODEP' => $verbose_nodep,
			 SILENT    => $silent,
			);

	# Generate the appropriate rules for this extension.
	if (((! option 'no-dependencies') && $lang->autodep ne 'no')
	    || defined $lang->compile)
	{
	    # Compute a possible derived extension.
	    # This is not used by depend2.am.
	    my $der_ext = ($lang->output_extensions->($ext))[0];

	    # When we output an inference rule like '.c.o:' we
	    # have two cases to consider: either subdir-objects
	    # is used, or it is not.
	    #
	    # In the latter case the rule is used to build objects
	    # in the current directory, and dependencies always
	    # go into './$(DEPDIR)/'.  We can hard-code this value.
	    #
	    # In the former case the rule can be used to build
	    # objects in sub-directories too.  Dependencies should
	    # go into the appropriate sub-directories, e.g.,
	    # 'sub/$(DEPDIR)/'.  The value of this directory
	    # needs to be computed on-the-fly.
	    #
	    # DEPBASE holds the name of this directory, plus the
	    # basename part of the object file (extensions Po, TPo,
	    # Plo, TPlo will be added later as appropriate).  It is
	    # either hardcoded, or a shell variable ('$depbase') that
	    # will be computed by the rule.
	    my $depbase =
	      option ('subdir-objects') ? '$$depbase' : '$(DEPDIR)/$*';
	    $output_rules .=
	      file_contents ($rule_file,
			     new Automake::Location,
			     %transform,
			     GENERIC   => 1,

			     'DERIVED-EXT' => $der_ext,

			     DEPBASE   => $depbase,
			     BASE      => '$*',
			     SOURCE    => '$<',
			     SOURCEFLAG => $sourceflags{$ext} || '',
			     OBJ       => '$@',
			     OBJOBJ    => '$@',
			     LTOBJ     => '$@',

			     COMPILE   => '$(' . $lang->compiler . ')',
			     LTCOMPILE => '$(LT' . $lang->compiler . ')',
			     -o        => $lang->output_flag,
			     SUBDIROBJ => !! option 'subdir-objects');
	}

	# Now include code for each specially handled object with this
	# language.
	my %seen_files = ();
	foreach my $file (@{$lang_specific_files{$lang->name}})
	{
	    my ($derived, $source, $obj, $myext, $srcext, %file_transform) = @$file;

	    # We might see a given object twice, for instance if it is
	    # used under different conditions.
	    next if defined $seen_files{$obj};
	    $seen_files{$obj} = 1;

	    prog_error ("found " . $lang->name .
			" in handle_languages, but compiler not defined")
	      unless defined $lang->compile;

	    my $obj_compile = $lang->compile;

	    # Rewrite each occurrence of 'AM_$flag' in the compile
	    # rule into '${derived}_$flag' if it exists.
	    for my $flag (@{$lang->flags})
	      {
		my $val = "${derived}_$flag";
		$obj_compile =~ s/\(AM_$flag\)/\($val\)/
		  if set_seen ($val);
	      }

	    my $libtool_tag = '';
	    if ($lang->libtool_tag && exists $libtool_tags{$lang->libtool_tag})
	      {
		$libtool_tag = '--tag=' . $lang->libtool_tag . ' '
	      }

	    my $ptltflags = "${derived}_LIBTOOLFLAGS";
	    $ptltflags = 'AM_LIBTOOLFLAGS' unless set_seen $ptltflags;

	    my $ltverbose = define_verbose_libtool ();
	    my $obj_ltcompile =
	      "\$(LIBTOOL) $ltverbose $libtool_tag\$($ptltflags) \$(LIBTOOLFLAGS) "
	      . "--mode=compile $obj_compile";

	    # We _need_ '-o' for per object rules.
	    my $output_flag = $lang->output_flag || '-o';

	    my $depbase = dirname ($obj);
	    $depbase = ''
		if $depbase eq '.';
	    $depbase .= '/'
		unless $depbase eq '';
	    $depbase .= '$(DEPDIR)/' . basename ($obj);

	    $output_rules .=
	      file_contents ($rule_file,
			     new Automake::Location,
			     %transform,
			     GENERIC   => 0,

			     DEPBASE   => $depbase,
			     BASE      => $obj,
			     SOURCE    => $source,
			     SOURCEFLAG => $sourceflags{$srcext} || '',
			     # Use $myext and not '.o' here, in case
			     # we are actually building a new source
			     # file -- e.g. via yacc.
			     OBJ       => "$obj$myext",
			     OBJOBJ    => "$obj.obj",
			     LTOBJ     => "$obj.lo",

			     VERBOSE   => $verbose,
			     'VERBOSE-NODEP'  => $verbose_nodep,
			     SILENT    => $silent,
			     COMPILE   => $obj_compile,
			     LTCOMPILE => $obj_ltcompile,
			     -o        => $output_flag,
			     %file_transform);
	}

	# The rest of the loop is done once per language.
	next if defined $done{$lang};
	$done{$lang} = 1;

	# Load the language dependent Makefile chunks.
	my %lang = map { uc ($_) => 0 } keys %languages;
	$lang{uc ($lang->name)} = 1;
	$output_rules .= file_contents ('lang-compile',
					new Automake::Location,
					%transform, %lang);

	# If the source to a program consists entirely of code from a
	# 'pure' language, for instance C++ or Fortran 77, then we
	# don't need the C compiler code.  However if we run into
	# something unusual then we do generate the C code.  There are
	# probably corner cases here that do not work properly.
	# People linking Java code to Fortran code deserve pain.
	$needs_c ||= ! $lang->pure;

	define_compiler_variable ($lang)
	  if ($lang->compile);

	define_linker_variable ($lang)
	  if ($lang->link);

	require_variables ("$am_file.am", $lang->Name . " source seen",
			   TRUE, @{$lang->config_vars});

	# Call the finisher.
	$lang->finish;

	# Flags listed in '->flags' are user variables (per GNU Standards),
	# they should not be overridden in the Makefile...
	my @dont_override = @{$lang->flags};
	# ... and so is LDFLAGS.
	push @dont_override, 'LDFLAGS' if $lang->link;

	check_user_variables @dont_override;
    }

    # If the project is entirely C++ or entirely Fortran 77 (i.e., 1
    # suffix rule was learned), don't bother with the C stuff.  But if
    # anything else creeps in, then use it.
    my @languages_seen = map { $languages{$extension_map{$_}}->name }
                             (keys %extension_seen);
    @languages_seen = uniq (@languages_seen);
    $needs_c = 1 if @languages_seen > 1;
    if ($need_link || $needs_c)
      {
	define_compiler_variable ($languages{'c'})
	  unless defined $done{$languages{'c'}};
	define_linker_variable ($languages{'c'});
      }
}


# append_exeext { PREDICATE } $MACRO
# ----------------------------------
# Append $(EXEEXT) to each filename in $F appearing in the Makefile
# variable $MACRO if &PREDICATE($F) is true.  @substitutions@ are
# ignored.
#
# This is typically used on all filenames of *_PROGRAMS, and filenames
# of TESTS that are programs.
sub append_exeext (&$)
{
  my ($pred, $macro) = @_;

  transform_variable_recursively
    ($macro, $macro, 'am__EXEEXT', 0, INTERNAL,
     sub {
       my ($subvar, $val, $cond, $full_cond) = @_;
       # Append $(EXEEXT) unless the user did it already, or it's a
       # @substitution@.
       $val .= '$(EXEEXT)'
	 if $val !~ /(?:\$\(EXEEXT\)$|^[@]\w+[@]$)/ && &$pred ($val);
       return $val;
     });
}


# Check to make sure a source defined in LIBOBJS is not explicitly
# mentioned.  This is a separate function (as opposed to being inlined
# in handle_source_transform) because it isn't always appropriate to
# do this check.
sub check_libobjs_sources
{
  my ($one_file, $unxformed) = @_;

  foreach my $prefix ('', 'EXTRA_', 'dist_', 'nodist_',
		      'dist_EXTRA_', 'nodist_EXTRA_')
    {
      my @files;
      my $varname = $prefix . $one_file . '_SOURCES';
      my $var = var ($varname);
      if ($var)
	{
	  @files = $var->value_as_list_recursive;
	}
      elsif ($prefix eq '')
	{
	  @files = ($unxformed . '.c');
	}
      else
	{
	  next;
	}

      foreach my $file (@files)
	{
	  err_var ($prefix . $one_file . '_SOURCES',
		   "automatically discovered file '$file' should not" .
		   " be explicitly mentioned")
	    if defined $libsources{$file};
	}
    }
}


# @OBJECTS
# handle_single_transform ($VAR, $TOPPARENT, $DERIVED, $OBJ, $FILE, %TRANSFORM)
# -----------------------------------------------------------------------------
# Does much of the actual work for handle_source_transform.
# Arguments are:
#   $VAR is the name of the variable that the source filenames come from
#   $TOPPARENT is the name of the _SOURCES variable which is being processed
#   $DERIVED is the name of resulting executable or library
#   $OBJ is the object extension (e.g., '.lo')
#   $FILE the source file to transform
#   %TRANSFORM contains extras arguments to pass to file_contents
#     when producing explicit rules
# Result is a list of the names of objects
# %linkers_used will be updated with any linkers needed
sub handle_single_transform
{
    my ($var, $topparent, $derived, $obj, $_file, %transform) = @_;
    my @files = ($_file);
    my @result = ();

    # Turn sources into objects.  We use a while loop like this
    # because we might add to @files in the loop.
    while (scalar @files > 0)
    {
	$_ = shift @files;

	# Configure substitutions in _SOURCES variables are errors.
	if (/^\@.*\@$/)
	{
	  my $parent_msg = '';
	  $parent_msg = "\nand is referred to from '$topparent'"
	    if $topparent ne $var->name;
	  err_var ($var,
		   "'" . $var->name . "' includes configure substitution '$_'"
		   . $parent_msg . ";\nconfigure " .
		   "substitutions are not allowed in _SOURCES variables");
	  next;
	}

	# If the source file is in a subdirectory then the '.o' is put
	# into the current directory, unless the subdir-objects option
	# is in effect.

	# Split file name into base and extension.
	next if ! /^(?:(.*)\/)?([^\/]*)($KNOWN_EXTENSIONS_PATTERN)$/;
	my $full = $_;
	my $directory = $1 || '';
	my $base = $2;
	my $extension = $3;

	# We must generate a rule for the object if it requires its own flags.
	my $renamed = 0;
	my ($linker, $object);

        # This records whether we've seen a derived source file (e.g., yacc
        # or lex output).
        my $derived_source;

	# This holds the 'aggregate context' of the file we are
	# currently examining.  If the file is compiled with
	# per-object flags, then it will be the name of the object.
	# Otherwise it will be 'AM'.  This is used by the target hook
	# language function.
	my $aggregate = 'AM';

	$extension = derive_suffix ($extension, $obj);
	my $lang;
	if ($extension_map{$extension} &&
	    ($lang = $languages{$extension_map{$extension}}))
	{
	    # Found the language, so see what it says.
	    saw_extension ($extension);

	    # Do we have per-executable flags for this executable?
	    my $have_per_exec_flags = 0;
	    my @peflags = @{$lang->flags};
	    push @peflags, 'LIBTOOLFLAGS' if $obj eq '.lo';
	    foreach my $flag (@peflags)
	      {
		if (set_seen ("${derived}_$flag"))
		  {
		    $have_per_exec_flags = 1;
		    last;
		  }
	      }

	    # Note: computed subr call.  The language rewrite function
	    # should return one of the LANG_* constants.  It could
	    # also return a list whose first value is such a constant
	    # and whose second value is a new source extension which
	    # should be applied.  This means this particular language
	    # generates another source file which we must then process
	    # further.
	    my $subr = \&{'lang_' . $lang->name . '_rewrite'};
	    defined &$subr or $subr = \&lang_sub_obj;
	    my ($r, $source_extension)
		= &$subr ($directory, $base, $extension,
			  $obj, $have_per_exec_flags, $var);
	    # Skip this entry if we were asked not to process it.
	    next if $r == LANG_IGNORE;

	    # Now extract linker and other info.
	    $linker = $lang->linker;

            my $this_obj_ext;
            if (defined $source_extension)
              {
                $this_obj_ext = $source_extension;
                $derived_source = 1;
              }
            else
              {
                $this_obj_ext = $obj;
                $derived_source = 0;
                # Don't ever place built object files in $(srcdir),
                # even when sources are specified explicitly as (say)
                # '$(srcdir)/foo.c' or '$(top_srcdir)/foo.c'.
                # See automake bug#13928.
                my @d = split '/', $directory;
                if (@d > 0 && option 'subdir-objects')
                  {
                    my $d = $d[0];
                    if ($d eq '$(srcdir)' or $d eq '${srcdir}')
                      {
                        shift @d;
                      }
                    elsif ($d eq '$(top_srcdir)' or $d eq '${top_srcdir}')
                      {
                        $d[0] = '$(top_builddir)';
                      }
                    $directory = join '/', @d;
                  }
              }
            $object = $base . $this_obj_ext;

	    if ($have_per_exec_flags)
	    {
		# We have a per-executable flag in effect for this
		# object.  In this case we rewrite the object's
		# name to ensure it is unique.

                # We choose the name 'DERIVED_OBJECT' to ensure (1) uniqueness,
                # and (2) continuity between invocations.  However, this will
                # result in a name that is too long for losing systems, in some
                # situations.  So we attempt to shorten automatically under
                # subdir-objects, and provide _SHORTNAME to override as a last
                # resort.  If subdir-object is in effect, it's usually
                # unnecessary to use the complete 'DERIVED_OBJECT' (that is
                # often the result from %canon_reldir%/%C% usage) since objects
                # are placed next to their source file.  Generally, this means
                # it is already unique within that directory (see below for an
                # exception).  Thus, we try to avoid unnecessarily long file
                # names by stripping the directory components of
                # 'DERIVED_OBJECT'.  This allows avoiding explicit _SHORTNAME
                # usage in many cases.  EXCEPTION: If two (or more) targets in
                # different directories but with the same base name (after
                # canonicalization), using target-specific FLAGS, link the same
                # object, then this logic clashes.  Thus, we don't strip if
                # this is detected.
                my $dname = $derived;
                if ($directory ne ''
                    && option 'subdir-objects'
                    && none { $dname =~ /$_[0]$/ } @dup_shortnames)
                  {
                    # At this point, we don't clear information about what
                    # parts of $derived are truly file name components.  We can
                    # determine that by comparing against the canonicalization
                    # of $directory.
                    my $dir = $directory . "/";
                    my $cdir = canonicalize ($dir);
                    my $dir_len = length ($dir);
                    # Make sure we only strip full file name components.  This
                    # is done by repeatedly trying to find cdir at the
                    # beginning.  Each iteration removes one file name
                    # component from the end of cdir.
                    while ($dir_len > 0 && index ($derived, $cdir) != 0)
                      {
                        # Eventually $dir_len becomes 0.
                        $dir_len = rindex ($dir, "/", $dir_len - 2) + 1;
                        $cdir = substr ($cdir, 0, $dir_len);
                      }
                    $dname = substr ($derived, $dir_len);
                  }
		my $var = var ($derived . '_SHORTNAME');
		if ($var)
		{
		    # FIXME: should use the same Condition as
		    # the _SOURCES variable.  But this is really
		    # silly overkill -- nobody should have
		    # conditional shortnames.
		    $dname = $var->variable_value;
		}
		$object = $dname . '-' . $object;

		prog_error ($lang->name . " flags defined without compiler")
		  if ! defined $lang->compile;

		$renamed = 1;
	    }

	    # If rewrite said it was ok, put the object into a subdir.
	    if ($directory ne '')
	    {
              if ($r == LANG_SUBDIR)
                {
                  $object = $directory . '/' . $object;
                }
              else
                {
                  # Since the next major version of automake (2.0) will
                  # make the behaviour so far only activated with the
                  # 'subdir-object' option mandatory, it's better if we
                  # start warning users not using that option.
                  # As suggested by Peter Johansson, we strive to avoid
                  # the warning when it would be irrelevant, i.e., if
                  # all source files sit in "current" directory.
                  msg_var 'unsupported', $var,
                          "source file '$full' is in a subdirectory,"
                          . "\nbut option 'subdir-objects' is disabled";
                  msg 'unsupported', INTERNAL, <<'EOF', uniq_scope => US_GLOBAL;
possible forward-incompatibility.
At least a source file is in a subdirectory, but the 'subdir-objects'
automake option hasn't been enabled.  For now, the corresponding output
object file(s) will be placed in the top-level directory.  However,
this behaviour will change in future Automake versions: they will
unconditionally cause object files to be placed in the same subdirectory
of the corresponding sources.
You are advised to start using 'subdir-objects' option throughout your
project, to avoid future incompatibilities.
EOF
                }
	    }

	    # If the object file has been renamed (because per-target
	    # flags are used) we cannot compile the file with an
	    # inference rule: we need an explicit rule.
	    #
	    # If the source is in a subdirectory and the object is in
	    # the current directory, we also need an explicit rule.
	    #
	    # If both source and object files are in a subdirectory
	    # (this happens when the subdir-objects option is used),
	    # then the inference will work.
	    #
	    # The latter case deserves a historical note.  When the
	    # subdir-objects option was added on 1999-04-11 it was
	    # thought that inferences rules would work for
	    # subdirectory objects too.  Later, on 1999-11-22,
	    # automake was changed to output explicit rules even for
	    # subdir-objects.  Nobody remembers why, but this occurred
	    # soon after the merge of the user-dep-gen-branch so it
	    # might be related.  In late 2003 people complained about
	    # the size of the generated Makefile.ins (libgcj, with
	    # 2200+ subdir objects was reported to have a 9MB
	    # Makefile), so we now rely on inference rules again.
	    # Maybe we'll run across the same issue as in the past,
	    # but at least this time we can document it.  However since
	    # dependency tracking has evolved it is possible that
	    # our old problem no longer exists.
	    # Using inference rules for subdir-objects has been tested
	    # with GNU make, Solaris make, Ultrix make, BSD make,
	    # HP-UX make, and OSF1 make successfully.
	    if ($renamed
		|| ($directory ne '' && ! option 'subdir-objects')
		# We must also use specific rules for a nodist_ source
		# if its language requests it.
		|| ($lang->nodist_specific && ! $transform{'DIST_SOURCE'}))
	    {
		my $obj_sans_ext = substr ($object, 0,
					   - length ($this_obj_ext));
		my $full_ansi;
		if ($directory ne '')
	          {
			$full_ansi = $directory . '/' . $base . $extension;
	          }
		else
	          {
			$full_ansi = $base . $extension;
	          }

		my @specifics = ($full_ansi, $obj_sans_ext,
				 # Only use $this_obj_ext in the derived
				 # source case because in the other case we
				 # *don't* want $(OBJEXT) to appear here.
				 ($derived_source ? $this_obj_ext : '.o'),
				 $extension);

		# If we renamed the object then we want to use the
		# per-executable flag name.  But if this is simply a
		# subdir build then we still want to use the AM_ flag
		# name.
		if ($renamed)
		  {
		    unshift @specifics, $derived;
		    $aggregate = $derived;
		  }
		else
		  {
		    unshift @specifics, 'AM';
		  }

		# Each item on this list is a reference to a list consisting
		# of four values followed by additional transform flags for
		# file_contents.  The four values are the derived flag prefix
		# (e.g. for 'foo_CFLAGS', it is 'foo'), the name of the
		# source file, the base name of the output file, and
		# the extension for the object file.
		push (@{$lang_specific_files{$lang->name}},
		      [@specifics, %transform]);
	    }
	}
	elsif ($extension eq $obj)
	{
	    # This is probably the result of a direct suffix rule.
	    # In this case we just accept the rewrite.
	    $object = "$base$extension";
	    $object = "$directory/$object" if $directory ne '';
	    $linker = '';
	}
	else
	{
	    # No error message here.  Used to have one, but it was
	    # very unpopular.
	    # FIXME: we could potentially do more processing here,
	    # perhaps treating the new extension as though it were a
	    # new source extension (as above).  This would require
	    # more restructuring than is appropriate right now.
	    next;
	}

	err_am "object '$object' created by '$full' and '$object_map{$object}'"
	  if (defined $object_map{$object}
	      && $object_map{$object} ne $full);

	my $comp_val = (($object =~ /\.lo$/)
			? COMPILE_LIBTOOL : COMPILE_ORDINARY);
	(my $comp_obj = $object) =~ s/\.lo$/.\$(OBJEXT)/;
	if (defined $object_compilation_map{$comp_obj}
	    && $object_compilation_map{$comp_obj} != 0
	    # Only see the error once.
	    && ($object_compilation_map{$comp_obj}
		!= (COMPILE_LIBTOOL | COMPILE_ORDINARY))
	    && $object_compilation_map{$comp_obj} != $comp_val)
	  {
	    err_am "object '$comp_obj' created both with libtool and without";
	  }
	$object_compilation_map{$comp_obj} |= $comp_val;

	if (defined $lang)
	{
	    # Let the language do some special magic if required.
	    $lang->target_hook ($aggregate, $object, $full, %transform);
	}

	if ($derived_source)
	  {
	    prog_error ($lang->name . " has automatic dependency tracking")
	      if $lang->autodep ne 'no';
	    # Make sure this new source file is handled next.  That will
	    # make it appear to be at the right place in the list.
	    unshift (@files, $object);
	    # Distribute derived sources unless the source they are
	    # derived from is not.
	    push_dist_common ($object)
	      unless ($topparent =~ /^(?:nobase_)?nodist_/);
	    next;
	  }

	$linkers_used{$linker} = 1;

	push (@result, $object);

	if (! defined $object_map{$object})
	{
	    my @dep_list = ();
	    $object_map{$object} = $full;

	    # If resulting object is in subdir, we need to make
	    # sure the subdir exists at build time.
	    if ($object =~ /\//)
	    {
		# FIXME: check that $DIRECTORY is somewhere in the
		# project

		# For Java, the way we're handling it right now, a
		# '..' component doesn't make sense.
		if ($lang && $lang->name eq 'java' && $object =~ /(\/|^)\.\.\//)
		  {
		    err_am "'$full' should not contain a '..' component";
		  }

                # Make sure *all* objects files in the subdirectory are
                # removed by "make mostlyclean".  Not only this is more
                # efficient than listing the object files to be removed
                # individually (which would cause an 'rm' invocation for
                # each of them -- very inefficient, see bug#10697), it
                # would also leave stale object files in the subdirectory
                # whenever a source file there is removed or renamed.
                $compile_clean_files{"$directory/*.\$(OBJEXT)"} = MOSTLY_CLEAN;
                if ($object =~ /\.lo$/)
                  {
                    # If we have a libtool object, then we also must remove
                    # any '.lo' objects in its same subdirectory.
                    $compile_clean_files{"$directory/*.lo"} = MOSTLY_CLEAN;
                    # Remember to cleanup .libs/ in this directory.
                    $libtool_clean_directories{$directory} = 1;
                  }

		push (@dep_list, require_build_directory ($directory));

		# If we're generating dependencies, we also want
		# to make sure that the appropriate subdir of the
		# .deps directory is created.
		push (@dep_list,
		      require_build_directory ($directory . '/$(DEPDIR)'))
		  unless option 'no-dependencies';
	    }

	    pretty_print_rule ($object . ':', "\t", @dep_list)
		if scalar @dep_list > 0;
	}

	# Transform .o or $o file into .P file (for automatic
	# dependency code).
        # Properly flatten multiple adjacent slashes, as Solaris 10 make
        # might fail over them in an include statement.
        # Leading double slashes may be special, as per Posix, so deal
        # with them carefully.
        if ($lang && $lang->autodep ne 'no')
        {
            my $depfile = $object;
            $depfile =~ s/\.([^.]*)$/.P$1/;
            $depfile =~ s/\$\(OBJEXT\)$/o/;
            my $maybe_extra_leading_slash = '';
            $maybe_extra_leading_slash = '/' if $depfile =~ m,^//[^/],;
            $depfile =~ s,/+,/,g;
            my $basename = basename ($depfile);
            # This might make $dirname empty, but we account for that below.
            (my $dirname = dirname ($depfile)) =~ s/\/*$//;
            $dirname = $maybe_extra_leading_slash . $dirname;
            $dep_files{$dirname . '/$(DEPDIR)/' . $basename} = 1;
        }
    }

    return @result;
}


# $LINKER
# define_objects_from_sources ($VAR, $OBJVAR, $NODEFINE, $ONE_FILE,
#                              $OBJ, $PARENT, $TOPPARENT, $WHERE, %TRANSFORM)
# ---------------------------------------------------------------------------
# Define an _OBJECTS variable for a _SOURCES variable (or subvariable)
#
# Arguments are:
#   $VAR is the name of the _SOURCES variable
#   $OBJVAR is the name of the _OBJECTS variable if known (otherwise
#     it will be generated and returned).
#   $NODEFINE is a boolean: if true, $OBJVAR will not be defined (but
#     work done to determine the linker will be).
#   $ONE_FILE is the canonical (transformed) name of object to build
#   $OBJ is the object extension (i.e. either '.o' or '.lo').
#   $TOPPARENT is the _SOURCES variable being processed.
#   $WHERE context into which this definition is done
#   %TRANSFORM extra arguments to pass to file_contents when producing
#     rules
#
# Result is a pair ($LINKER, $OBJVAR):
#    $LINKER is a boolean, true if a linker is needed to deal with the objects
sub define_objects_from_sources
{
  my ($var, $objvar, $nodefine, $one_file,
      $obj, $topparent, $where, %transform) = @_;

  my $needlinker = "";

  transform_variable_recursively
    ($var, $objvar, 'am__objects', $nodefine, $where,
     # The transform code to run on each filename.
     sub {
       my ($subvar, $val, $cond, $full_cond) = @_;
       my @trans = handle_single_transform ($subvar, $topparent,
					    $one_file, $obj, $val,
					    %transform);
       $needlinker = "true" if @trans;
       return @trans;
     });

  return $needlinker;
}


# handle_source_transform ($CANON_TARGET, $TARGET, $OBJEXT, $WHERE, %TRANSFORM)
# -----------------------------------------------------------------------------
# Handle SOURCE->OBJECT transform for one program or library.
# Arguments are:
#   canonical (transformed) name of target to build
#   actual target of object to build
#   object extension (i.e., either '.o' or '$o')
#   location of the source variable
#   extra arguments to pass to file_contents when producing rules
# Return the name of the linker variable that must be used.
# Empty return means just use 'LINK'.
sub handle_source_transform
{
    # one_file is canonical name.  unxformed is given name.  obj is
    # object extension.
    my ($one_file, $unxformed, $obj, $where, %transform) = @_;

    my $linker = '';

    # No point in continuing if _OBJECTS is defined.
    return if reject_var ($one_file . '_OBJECTS',
			  $one_file . '_OBJECTS should not be defined');

    my %used_pfx = ();
    my $needlinker;
    %linkers_used = ();
    foreach my $prefix ('', 'EXTRA_', 'dist_', 'nodist_',
			'dist_EXTRA_', 'nodist_EXTRA_')
    {
	my $varname = $prefix . $one_file . "_SOURCES";
	my $var = var $varname;
	next unless $var;

	# We are going to define _OBJECTS variables using the prefix.
	# Then we glom them all together.  So we can't use the null
	# prefix here as we need it later.
	my $xpfx = ($prefix eq '') ? 'am_' : $prefix;

	# Keep track of which prefixes we saw.
	$used_pfx{$xpfx} = 1
	  unless $prefix =~ /EXTRA_/;

	push @sources, "\$($varname)";
	push @dist_sources, shadow_unconditionally ($varname, $where)
	  unless (option ('no-dist') || $prefix =~ /^nodist_/);

	$needlinker |=
	    define_objects_from_sources ($varname,
					 $xpfx . $one_file . '_OBJECTS',
					 !!($prefix =~ /EXTRA_/),
					 $one_file, $obj, $varname, $where,
					 DIST_SOURCE => ($prefix !~ /^nodist_/),
					 %transform);
    }
    if ($needlinker)
    {
	$linker ||= resolve_linker (%linkers_used);
    }

    my @keys = sort keys %used_pfx;
    if (scalar @keys == 0)
    {
	# The default source for libfoo.la is libfoo.c, but for
	# backward compatibility we first look at libfoo_la.c,
	# if no default source suffix is given.
	my $old_default_source = "$one_file.c";
	my $ext_var = var ('AM_DEFAULT_SOURCE_EXT');
	my $default_source_ext = $ext_var ? variable_value ($ext_var) : '.c';
	msg_var ('unsupported', $ext_var, $ext_var->name . " can assume at most one value")
	  if $default_source_ext =~ /[\t ]/;
	(my $default_source = $unxformed) =~ s,(\.[^./\\]*)?$,$default_source_ext,;
	# TODO: Remove this backward-compatibility hack in Automake 2.0.
	if ($old_default_source ne $default_source
	    && !$ext_var
	    && (rule $old_default_source
		|| rule '$(srcdir)/' . $old_default_source
		|| rule '${srcdir}/' . $old_default_source
		|| -f $old_default_source))
	  {
	    my $loc = $where->clone;
	    $loc->pop_context;
	    msg ('obsolete', $loc,
		 "the default source for '$unxformed' has been changed "
		 . "to '$default_source'.\n(Using '$old_default_source' for "
		 . "backward compatibility.)");
	    $default_source = $old_default_source;
	  }
	# If a rule exists to build this source with a $(srcdir)
	# prefix, use that prefix in our variables too.  This is for
	# the sake of BSD Make.
	if (rule '$(srcdir)/' . $default_source
	    || rule '${srcdir}/' . $default_source)
	  {
	    $default_source = '$(srcdir)/' . $default_source;
	  }

	define_variable ($one_file . "_SOURCES", $default_source, $where);
	push (@sources, $default_source);
	push (@dist_sources, $default_source);

	%linkers_used = ();
	my (@result) =
	  handle_single_transform ($one_file . '_SOURCES',
				   $one_file . '_SOURCES',
				   $one_file, $obj,
				   $default_source, %transform);
	$linker ||= resolve_linker (%linkers_used);
	define_pretty_variable ($one_file . '_OBJECTS', TRUE, $where, @result);
    }
    else
    {
	@keys = map { '$(' . $_ . $one_file . '_OBJECTS)' } @keys;
	define_pretty_variable ($one_file . '_OBJECTS', TRUE, $where, @keys);
    }

    # If we want to use 'LINK' we must make sure it is defined.
    if ($linker eq '')
    {
	$need_link = 1;
    }

    return $linker;
}


# handle_lib_objects ($XNAME, $VAR)
# ---------------------------------
# Special-case ALLOCA and LIBOBJS substitutions in _LDADD or _LIBADD variables.
# Also, generate _DEPENDENCIES variable if appropriate.
# Arguments are:
#   transformed name of object being built, or empty string if no object
#   name of _LDADD/_LIBADD-type variable to examine
# Returns 1 if LIBOBJS seen, 0 otherwise.
sub handle_lib_objects
{
  my ($xname, $varname) = @_;

  my $var = var ($varname);
  prog_error "'$varname' undefined"
    unless $var;
  prog_error "unexpected variable name '$varname'"
    unless $varname =~ /^(.*)(?:LIB|LD)ADD$/;
  my $prefix = $1 || 'AM_';

  my $seen_libobjs = 0;
  my $flagvar = 0;

  transform_variable_recursively
    ($varname, $xname . '_DEPENDENCIES', 'am__DEPENDENCIES',
     ! $xname, INTERNAL,
     # Transformation function, run on each filename.
     sub {
       my ($subvar, $val, $cond, $full_cond) = @_;

       if ($val =~ /^-/)
	 {
	   # Skip -lfoo and -Ldir silently; these are explicitly allowed.
	   if ($val !~ /^-[lL]/ &&
	       # Skip -dlopen and -dlpreopen; these are explicitly allowed
	       # for Libtool libraries or programs.  (Actually we are a bit
	       # lax here since this code also applies to non-libtool
	       # libraries or programs, for which -dlopen and -dlopreopen
	       # are pure nonsense.  Diagnosing this doesn't seem very
	       # important: the developer will quickly get complaints from
	       # the linker.)
	       $val !~ /^-dl(?:pre)?open$/ &&
	       # Only get this error once.
	       ! $flagvar)
	     {
	       $flagvar = 1;
	       # FIXME: should display a stack of nested variables
	       # as context when $var != $subvar.
	       err_var ($var, "linker flags such as '$val' belong in "
			. "'${prefix}LDFLAGS'");
	     }
	   return ();
	 }
       elsif ($val !~ /^\@.*\@$/)
	 {
	   # Assume we have a file of some sort, and output it into the
	   # dependency variable.  Autoconf substitutions are not output;
	   # rarely is a new dependency substituted into e.g. foo_LDADD
	   # -- but bad things (e.g. -lX11) are routinely substituted.
	   # Note that LIBOBJS and ALLOCA are exceptions to this rule,
	   # and handled specially below.
	   return $val;
	 }
       elsif ($val =~ /^\@(LT)?LIBOBJS\@$/)
	 {
	   handle_LIBOBJS ($subvar, $cond, $1);
	   $seen_libobjs = 1;
	   return $val;
	 }
       elsif ($val =~ /^\@(LT)?ALLOCA\@$/)
	 {
	   handle_ALLOCA ($subvar, $cond, $1);
	   return $val;
	 }
       else
	 {
	   return ();
	 }
     });

  return $seen_libobjs;
}

# handle_LIBOBJS_or_ALLOCA ($VAR, $BASE)
# --------------------------------------
# Definitions common to LIBOBJS and ALLOCA.
# VAR should be one of LIBOBJS, LTLIBOBJS, ALLOCA, or LTALLOCA.
# BASE should be one base file name from AC_LIBSOURCE, or alloca.
sub handle_LIBOBJS_or_ALLOCA
{
  my ($var, $base) = @_;

  my $dir = '';

  # If LIBOBJS files must be built in another directory we have
  # to define LIBOBJDIR and ensure the files get cleaned.
  # Otherwise LIBOBJDIR can be left undefined, and the cleaning
  # is achieved by 'rm -f *.$(OBJEXT)' in compile.am.
  if ($config_libobj_dir
      && $relative_dir ne $config_libobj_dir)
    {
      if (option 'subdir-objects')
	{
	  # In the top-level Makefile we do not use $(top_builddir), because
	  # we are already there, and since the targets are built without
	  # a $(top_builddir), it helps BSD Make to match them with
	  # dependencies.
	  $dir = "$config_libobj_dir/"
	    if $config_libobj_dir ne '.';
	  $dir = backname ($relative_dir) . "/$dir"
	    if $relative_dir ne '.';
	  define_variable ('LIBOBJDIR', "$dir", INTERNAL);
	  if ($dir && !defined $clean_files{"$dir$base.\$(OBJEXT)"})
	    {
	      my $dirstamp = require_build_directory ($dir);
	      $output_rules .= "$dir$base.\$(OBJEXT): $dirstamp\n";
	      $output_rules .= "$dir$base.lo: $dirstamp\n"
		if ($var =~ /^LT/);
	    }
	  # libtool might create .$(OBJEXT) as a side-effect of using
	  # LTLIBOBJS or LTALLOCA.
	  $clean_files{"$dir$base.\$(OBJEXT)"} = MOSTLY_CLEAN;
	  $clean_files{"$dir$base.lo"} = MOSTLY_CLEAN
	    if ($var =~ /^LT/);
	}
      else
	{
	  error ("'\$($var)' cannot be used outside '$config_libobj_dir' if"
		 . " 'subdir-objects' is not set");
	}
    }

  return $dir;
}

sub handle_LIBOBJS
{
  my ($var, $cond, $lt) = @_;
  my $myobjext = $lt ? 'lo' : 'o';
  $lt ||= '';

  $var->requires_variables ("\@${lt}LIBOBJS\@ used", $lt . 'LIBOBJS')
    if ! keys %libsources;

  foreach my $iter (keys %libsources)
    {
      my $dir = '';
      if ($iter =~ /^(.*)(\.[cly])$/)
	{
	  saw_extension ($2);
	  saw_extension ('.c');
	  $dir = handle_LIBOBJS_or_ALLOCA ("${lt}LIBOBJS", $1);
	}

      if ($iter =~ /\.h$/)
	{
	  require_libsource_with_macro ($cond, $var, FOREIGN, $iter);
	}
      elsif ($iter ne 'alloca.c')
	{
	  my $rewrite = $iter;
	  $rewrite =~ s/\.c$/.P$myobjext/;
	  $dep_files{$dir . '$(DEPDIR)/' . $rewrite} = 1;
	  $rewrite = "^" . quotemeta ($iter) . "\$";
	  # Only require the file if it is not a built source.
	  my $bs = var ('BUILT_SOURCES');
	  if (! $bs || ! grep (/$rewrite/, $bs->value_as_list_recursive))
	    {
	      require_libsource_with_macro ($cond, $var, FOREIGN, $iter);
	    }
	}
    }
}

sub handle_ALLOCA
{
  my ($var, $cond, $lt) = @_;
  my $myobjext = $lt ? 'lo' : 'o';
  $lt ||= '';
  my $dir = handle_LIBOBJS_or_ALLOCA ("${lt}ALLOCA", "alloca");

  $dir eq '' and $dir = './';
  $var->requires_variables ("\@${lt}ALLOCA\@ used", $lt . 'ALLOCA');
  $dep_files{$dir . '$(DEPDIR)/alloca.P' . $myobjext} = 1;
  require_libsource_with_macro ($cond, $var, FOREIGN, 'alloca.c');
  saw_extension ('.c');
}

# Canonicalize the input parameter.
sub canonicalize
{
    my ($string) = @_;
    $string =~ tr/A-Za-z0-9_\@/_/c;
    return $string;
}

# Canonicalize a name, and check to make sure the non-canonical name
# is never used.  Returns canonical name.  Arguments are name and a
# list of suffixes to check for.
sub check_canonical_spelling
{
  my ($name, @suffixes) = @_;

  my $xname = canonicalize ($name);
  if ($xname ne $name)
    {
      foreach my $xt (@suffixes)
	{
	  reject_var ("$name$xt", "use '$xname$xt', not '$name$xt'");
	}
    }

  return $xname;
}

# Set up the compile suite.
sub handle_compile ()
{
   return if ! $must_handle_compiled_objects;

    # Boilerplate.
    my $default_includes = '';
    if (! option 'nostdinc')
      {
	my @incs = ('-I.', subst ('am__isrc'));

	my $var = var 'CONFIG_HEADER';
	if ($var)
	  {
	    foreach my $hdr (split (' ', $var->variable_value))
	      {
		push @incs, '-I' . dirname ($hdr);
	      }
	  }
	# We want '-I. -I$(srcdir)', but the latter -I is redundant
	# and unaesthetic in non-VPATH builds.  We use `-I.@am__isrc@`
	# instead.  It will be replaced by '-I.' or '-I. -I$(srcdir)'.
	# Items in CONFIG_HEADER are never in $(srcdir) so it is safe
	# to just put @am__isrc@ right after '-I.', without a space.
	($default_includes = ' ' . uniq (@incs)) =~ s/ @/@/;
      }

    my (@mostly_rms, @dist_rms);
    foreach my $item (sort keys %compile_clean_files)
    {
	if ($compile_clean_files{$item} == MOSTLY_CLEAN)
	{
	    push (@mostly_rms, "\t-rm -f $item");
	}
	elsif ($compile_clean_files{$item} == DIST_CLEAN)
	{
	    push (@dist_rms, "\t-rm -f $item");
	}
	else
	{
	  prog_error 'invalid entry in %compile_clean_files';
	}
    }

    my ($coms, $vars, $rules) =
      file_contents_internal (1, "$libdir/am/compile.am",
			      new Automake::Location,
			      'DEFAULT_INCLUDES' => $default_includes,
			      'MOSTLYRMS' => join ("\n", @mostly_rms),
			      'DISTRMS' => join ("\n", @dist_rms));
    $output_vars .= $vars;
    $output_rules .= "$coms$rules";
}

# Handle libtool rules.
sub handle_libtool ()
{
  return unless var ('LIBTOOL');

  # Libtool requires some files, but only at top level.
  # (Starting with Libtool 2.0 we do not have to bother.  These
  # requirements are done with AC_REQUIRE_AUX_FILE.)
  require_conf_file_with_macro (TRUE, 'LIBTOOL', FOREIGN, @libtool_files)
    if $relative_dir eq '.' && ! $libtool_new_api;

  my @libtool_rms;
  foreach my $item (sort keys %libtool_clean_directories)
    {
      my $dir = ($item eq '.') ? '' : "$item/";
      # .libs is for Unix, _libs for DOS.
      push (@libtool_rms, "\t-rm -rf ${dir}.libs ${dir}_libs");
    }

  check_user_variables 'LIBTOOLFLAGS';

  # Output the libtool compilation rules.
  $output_rules .= file_contents ('libtool',
				  new Automake::Location,
				   LTRMS => join ("\n", @libtool_rms));
}

# Check for duplicate targets
sub handle_targets ()
{
  my %seen = ();
  my @dups = ();
  @proglist = am_install_var ('progs', 'PROGRAMS',
                              'bin', 'sbin', 'libexec', 'pkglibexec',
                              'noinst', 'check');
  @liblist = am_install_var ('libs', 'LIBRARIES',
                             'lib', 'pkglib', 'noinst', 'check');
  @ltliblist = am_install_var ('ltlib', 'LTLIBRARIES',
			       'noinst', 'lib', 'pkglib', 'check');

  # Record duplications that may arise after canonicalization of the
  # base names, in order to prevent object file clashes in the presence
  # of target-specific *FLAGS
  my @targetlist = (@proglist, @liblist, @ltliblist);
  foreach my $pair (@targetlist)
    {
      my $base = canonicalize (basename (@$pair[1]));
      push (@dup_shortnames, $base) if ($seen{$base});
      $seen{$base} = $base;
    }
}

sub handle_programs ()
{
  return if ! @proglist;
  $must_handle_compiled_objects = 1;

  my $seen_global_libobjs =
    var ('LDADD') && handle_lib_objects ('', 'LDADD');

  foreach my $pair (@proglist)
    {
      my ($where, $one_file) = @$pair;

      my $seen_libobjs = 0;
      my $obj = '.$(OBJEXT)';

      $known_programs{$one_file} = $where;

      # Canonicalize names and check for misspellings.
      my $xname = check_canonical_spelling ($one_file, '_LDADD', '_LDFLAGS',
                                            '_SOURCES', '_OBJECTS',
                                            '_DEPENDENCIES');

      $where->push_context ("while processing program '$one_file'");
      $where->set (INTERNAL->get);

      my $linker = handle_source_transform ($xname, $one_file, $obj, $where,
                                            NONLIBTOOL => 1, LIBTOOL => 0);

      if (var ($xname . "_LDADD"))
	{
	  $seen_libobjs = handle_lib_objects ($xname, $xname . '_LDADD');
	}
      else
	{
	  # User didn't define prog_LDADD override.  So do it.
	  define_variable ($xname . '_LDADD', '$(LDADD)', $where);

	  # This does a bit too much work.  But we need it to
	  # generate _DEPENDENCIES when appropriate.
	  if (var ('LDADD'))
	    {
	      $seen_libobjs = handle_lib_objects ($xname, 'LDADD');
	    }
	}

      reject_var ($xname . '_LIBADD',
		  "use '${xname}_LDADD', not '${xname}_LIBADD'");

      set_seen ($xname . '_DEPENDENCIES');
      set_seen ('EXTRA_' . $xname . '_DEPENDENCIES');
      set_seen ($xname . '_LDFLAGS');

      # Determine program to use for link.
      my($xlink, $vlink) = define_per_target_linker_variable ($linker, $xname);
      $vlink = verbose_flag ($vlink || 'GEN');

      # If the resulting program lies in a subdirectory,
      # ensure that the directory exists before we need it.
      my $dirstamp = require_build_directory_maybe ($one_file);

      $libtool_clean_directories{dirname ($one_file)} = 1;

      $output_rules .= file_contents ('program',
                                      $where,
                                      PROGRAM  => $one_file,
                                      XPROGRAM => $xname,
                                      XLINK    => $xlink,
                                      VERBOSE  => $vlink,
                                      DIRSTAMP => $dirstamp,
                                      EXEEXT   => '$(EXEEXT)');

      if ($seen_libobjs || $seen_global_libobjs)
	{
	  if (var ($xname . '_LDADD'))
	    {
	      check_libobjs_sources ($xname, $xname . '_LDADD');
	    }
	  elsif (var ('LDADD'))
	    {
	      check_libobjs_sources ($xname, 'LDADD');
	    }
	}
    }
}


sub handle_libraries ()
{
  return if ! @liblist;
  $must_handle_compiled_objects = 1;

  my @prefix = am_primary_prefixes ('LIBRARIES', 0, 'lib', 'pkglib',
				    'noinst', 'check');

  if (@prefix)
    {
      my $var = rvar ($prefix[0] . '_LIBRARIES');
      $var->requires_variables ('library used', 'RANLIB');
    }

  define_variable ('AR', 'ar', INTERNAL);
  define_variable ('ARFLAGS', 'cru', INTERNAL);
  define_verbose_tagvar ('AR');

  foreach my $pair (@liblist)
    {
      my ($where, $onelib) = @$pair;

      my $seen_libobjs = 0;
      # Check that the library fits the standard naming convention.
      my $bn = basename ($onelib);
      if ($bn !~ /^lib.*\.a$/)
	{
	  $bn =~ s/^(?:lib)?(.*?)(?:\.[^.]*)?$/lib$1.a/;
	  my $suggestion = dirname ($onelib) . "/$bn";
	  $suggestion =~ s|^\./||g;
	  msg ('error-gnu/warn', $where,
	       "'$onelib' is not a standard library name\n"
	       . "did you mean '$suggestion'?")
	}

      ($known_libraries{$onelib} = $bn) =~ s/\.a$//;

      $where->push_context ("while processing library '$onelib'");
      $where->set (INTERNAL->get);

      my $obj = '.$(OBJEXT)';

      # Canonicalize names and check for misspellings.
      my $xlib = check_canonical_spelling ($onelib, '_LIBADD', '_SOURCES',
                                           '_OBJECTS', '_DEPENDENCIES',
                                           '_AR');

      if (! var ($xlib . '_AR'))
	{
	  define_variable ($xlib . '_AR', '$(AR) $(ARFLAGS)', $where);
	}

      # Generate support for conditional object inclusion in
      # libraries.
      if (var ($xlib . '_LIBADD'))
	{
	  if (handle_lib_objects ($xlib, $xlib . '_LIBADD'))
	    {
	      $seen_libobjs = 1;
	    }
	}
      else
	{
	  define_variable ($xlib . "_LIBADD", '', $where);
	}

      reject_var ($xlib . '_LDADD',
		  "use '${xlib}_LIBADD', not '${xlib}_LDADD'");

      # Make sure we at look at this.
      set_seen ($xlib . '_DEPENDENCIES');
      set_seen ('EXTRA_' . $xlib . '_DEPENDENCIES');

      handle_source_transform ($xlib, $onelib, $obj, $where,
                               NONLIBTOOL => 1, LIBTOOL => 0);

      # If the resulting library lies in a subdirectory,
      # make sure this directory will exist.
      my $dirstamp = require_build_directory_maybe ($onelib);
      my $verbose = verbose_flag ('AR');
      my $silent = silent_flag ();

      $output_rules .= file_contents ('library',
                                       $where,
                                       VERBOSE  => $verbose,
                                       SILENT   => $silent,
                                       LIBRARY  => $onelib,
                                       XLIBRARY => $xlib,
                                       DIRSTAMP => $dirstamp);

      if ($seen_libobjs)
	{
	  if (var ($xlib . '_LIBADD'))
	    {
	      check_libobjs_sources ($xlib, $xlib . '_LIBADD');
	    }
	}

      if (! $seen_ar)
	{
	  msg ('extra-portability', $where,
	       "'$onelib': linking libraries using a non-POSIX\n"
	       . "archiver requires 'AM_PROG_AR' in '$configure_ac'")
	}
    }
}


sub handle_ltlibraries ()
{
  return if ! @ltliblist;
  $must_handle_compiled_objects = 1;

  my @prefix = am_primary_prefixes ('LTLIBRARIES', 0, 'lib', 'pkglib',
				    'noinst', 'check');

  if (@prefix)
    {
      my $var = rvar ($prefix[0] . '_LTLIBRARIES');
      $var->requires_variables ('Libtool library used', 'LIBTOOL');
    }

  my %instdirs = ();
  my %instsubdirs = ();
  my %instconds = ();
  my %liblocations = ();	# Location (in Makefile.am) of each library.

  foreach my $key (@prefix)
    {
      # Get the installation directory of each library.
      my $dir = $key;
      my $strip_subdir = 1;
      if ($dir =~ /^nobase_/)
        {
	  $dir =~ s/^nobase_//;
	  $strip_subdir = 0;
	}
      my $var = rvar ($key . '_LTLIBRARIES');

      # We reject libraries which are installed in several places
      # in the same condition, because we can only specify one
      # '-rpath' option.
      $var->traverse_recursively
	(sub
	 {
	   my ($var, $val, $cond, $full_cond) = @_;
	   my $hcond = $full_cond->human;
	   my $where = $var->rdef ($cond)->location;
	   my $ldir = '';
	   $ldir = '/' . dirname ($val)
	     if (!$strip_subdir);
	   # A library cannot be installed in different directories
	   # in overlapping conditions.
	   if (exists $instconds{$val})
	     {
	       my ($msg, $acond) =
		 $instconds{$val}->ambiguous_p ($val, $full_cond);

	       if ($msg)
		 {
		   error ($where, $msg, partial => 1);
		   my $dirtxt = "installed " . ($strip_subdir ? "in" : "below") . " '$dir'";
		   $dirtxt = "built for '$dir'"
		     if $dir eq 'EXTRA' || $dir eq 'noinst' || $dir eq 'check';
		   my $dircond =
		     $full_cond->true ? "" : " in condition $hcond";

		   error ($where, "'$val' should be $dirtxt$dircond ...",
			  partial => 1);

		   my $hacond = $acond->human;
		   my $adir = $instdirs{$val}{$acond};
		   my $adirtxt = "installed in '$adir'";
		   $adirtxt = "built for '$adir'"
		     if ($adir eq 'EXTRA' || $adir eq 'noinst'
			 || $adir eq 'check');
		   my $adircond = $acond->true ? "" : " in condition $hacond";

		   my $onlyone = ($dir ne $adir) ?
		     ("\nLibtool libraries can be built for only one "
		      . "destination") : "";

		   error ($liblocations{$val}{$acond},
			  "... and should also be $adirtxt$adircond.$onlyone");
		   return;
		 }
	     }
	   else
	     {
	       $instconds{$val} = new Automake::DisjConditions;
	     }
	   $instdirs{$val}{$full_cond} = $dir;
	   $instsubdirs{$val}{$full_cond} = $ldir;
	   $liblocations{$val}{$full_cond} = $where;
	   $instconds{$val} = $instconds{$val}->merge ($full_cond);
	 },
	 sub
	 {
	   return ();
	 },
	 skip_ac_subst => 1);
    }

  foreach my $pair (@ltliblist)
    {
      my ($where, $onelib) = @$pair;

      my $seen_libobjs = 0;
      my $obj = '.lo';

      # Canonicalize names and check for misspellings.
      my $xlib = check_canonical_spelling ($onelib, '_LIBADD', '_LDFLAGS',
                                           '_SOURCES', '_OBJECTS',
                                           '_DEPENDENCIES');

      # Check that the library fits the standard naming convention.
      my $libname_rx = '^lib.*\.la';
      my $ldvar = var ("${xlib}_LDFLAGS") || var ('AM_LDFLAGS');
      my $ldvar2 = var ('LDFLAGS');
      if (($ldvar && grep (/-module/, $ldvar->value_as_list_recursive))
	  || ($ldvar2 && grep (/-module/, $ldvar2->value_as_list_recursive)))
	{
	  # Relax name checking for libtool modules.
	  $libname_rx = '\.la';
	}

      my $bn = basename ($onelib);
      if ($bn !~ /$libname_rx$/)
	{
	  my $type = 'library';
	  if ($libname_rx eq '\.la')
	    {
	      $bn =~ s/^(lib|)(.*?)(?:\.[^.]*)?$/$1$2.la/;
	      $type = 'module';
	    }
	  else
	    {
	      $bn =~ s/^(?:lib)?(.*?)(?:\.[^.]*)?$/lib$1.la/;
	    }
	  my $suggestion = dirname ($onelib) . "/$bn";
	  $suggestion =~ s|^\./||g;
	  msg ('error-gnu/warn', $where,
	       "'$onelib' is not a standard libtool $type name\n"
	       . "did you mean '$suggestion'?")
	}

      ($known_libraries{$onelib} = $bn) =~ s/\.la$//;

      $where->push_context ("while processing Libtool library '$onelib'");
      $where->set (INTERNAL->get);

      # Make sure we look at these.
      set_seen ($xlib . '_LDFLAGS');
      set_seen ($xlib . '_DEPENDENCIES');
      set_seen ('EXTRA_' . $xlib . '_DEPENDENCIES');

      # Generate support for conditional object inclusion in
      # libraries.
      if (var ($xlib . '_LIBADD'))
	{
	  if (handle_lib_objects ($xlib, $xlib . '_LIBADD'))
	    {
	      $seen_libobjs = 1;
	    }
	}
      else
	{
	  define_variable ($xlib . "_LIBADD", '', $where);
	}

      reject_var ("${xlib}_LDADD",
		  "use '${xlib}_LIBADD', not '${xlib}_LDADD'");


      my $linker = handle_source_transform ($xlib, $onelib, $obj, $where,
                                            NONLIBTOOL => 0, LIBTOOL => 1);

      # Determine program to use for link.
      my($xlink, $vlink) = define_per_target_linker_variable ($linker, $xlib);
      $vlink = verbose_flag ($vlink || 'GEN');

      my $rpathvar = "am_${xlib}_rpath";
      my $rpath = "\$($rpathvar)";
      foreach my $rcond ($instconds{$onelib}->conds)
	{
	  my $val;
	  if ($instdirs{$onelib}{$rcond} eq 'EXTRA'
	      || $instdirs{$onelib}{$rcond} eq 'noinst'
	      || $instdirs{$onelib}{$rcond} eq 'check')
	    {
	      # It's an EXTRA_ library, so we can't specify -rpath,
	      # because we don't know where the library will end up.
	      # The user probably knows, but generally speaking automake
	      # doesn't -- and in fact configure could decide
	      # dynamically between two different locations.
	      $val = '';
	    }
	  else
	    {
	      $val = ('-rpath $(' . $instdirs{$onelib}{$rcond} . 'dir)');
	      $val .= $instsubdirs{$onelib}{$rcond}
	        if defined $instsubdirs{$onelib}{$rcond};
	    }
	  if ($rcond->true)
	    {
	      # If $rcond is true there is only one condition and
	      # there is no point defining an helper variable.
	      $rpath = $val;
	    }
	  else
	    {
	      define_pretty_variable ($rpathvar, $rcond, INTERNAL, $val);
	    }
	}

      # If the resulting library lies in a subdirectory,
      # make sure this directory will exist.
      my $dirstamp = require_build_directory_maybe ($onelib);

      # Remember to cleanup .libs/ in this directory.
      my $dirname = dirname $onelib;
      $libtool_clean_directories{$dirname} = 1;

      $output_rules .= file_contents ('ltlibrary',
                                      $where,
                                      LTLIBRARY  => $onelib,
                                      XLTLIBRARY => $xlib,
                                      RPATH      => $rpath,
                                      XLINK      => $xlink,
                                      VERBOSE    => $vlink,
                                      DIRSTAMP   => $dirstamp);
      if ($seen_libobjs)
	{
	  if (var ($xlib . '_LIBADD'))
	    {
	      check_libobjs_sources ($xlib, $xlib . '_LIBADD');
	    }
	}

      if (! $seen_ar)
	{
	  msg ('extra-portability', $where,
	       "'$onelib': linking libtool libraries using a non-POSIX\n"
	       . "archiver requires 'AM_PROG_AR' in '$configure_ac'")
	}
    }
}

# See if any _SOURCES variable were misspelled.
sub check_typos ()
{
  # It is ok if the user sets this particular variable.
  set_seen 'AM_LDFLAGS';

  foreach my $primary ('SOURCES', 'LIBADD', 'LDADD', 'LDFLAGS', 'DEPENDENCIES')
    {
      foreach my $var (variables $primary)
	{
	  my $varname = $var->name;
	  # A configure variable is always legitimate.
	  next if exists $configure_vars{$varname};

	  for my $cond ($var->conditions->conds)
	    {
	      $varname =~ /^(?:EXTRA_)?(?:nobase_)?(?:dist_|nodist_)?(.*)_[[:alnum:]]+$/;
	      msg_var ('syntax', $var, "variable '$varname' is defined but no"
		       . " program or\nlibrary has '$1' as canonical name"
		       . " (possible typo)")
		unless $var->rdef ($cond)->seen;
	    }
	}
    }
}


sub handle_scripts ()
{
    # NOTE we no longer automatically clean SCRIPTS, because it is
    # useful to sometimes distribute scripts verbatim.  This happens
    # e.g. in Automake itself.
    am_install_var ('-candist', 'scripts', 'SCRIPTS',
                    'bin', 'sbin', 'libexec', 'pkglibexec', 'pkgdata',
                    'noinst', 'check');
}


## ------------------------ ##
## Handling Texinfo files.  ##
## ------------------------ ##

# ($OUTFILE, $VFILE)
# scan_texinfo_file ($FILENAME)
# -----------------------------
# $OUTFILE     - name of the info file produced by $FILENAME.
# $VFILE       - name of the version.texi file used (undef if none).
sub scan_texinfo_file
{
  my ($filename) = @_;

  my $texi = new Automake::XFile "< $filename";
  verb "reading $filename";

  my ($outfile, $vfile);
  while ($_ = $texi->getline)
    {
      if (/^\@setfilename +(\S+)/)
	{
	  # Honor only the first @setfilename.  (It's possible to have
	  # more occurrences later if the manual shows examples of how
	  # to use @setfilename...)
	  next if $outfile;

	  $outfile = $1;
	  if (index ($outfile, '.') < 0)
	    {
	      msg 'obsolete', "$filename:$.",
	          "use of suffix-less info files is discouraged"
	    }
	  elsif ($outfile !~ /\.info$/)
	    {
	      error ("$filename:$.",
		     "output '$outfile' has unrecognized extension");
	      return;
	    }
	}
      # A "version.texi" file is actually any file whose name matches
      # "vers*.texi".
      elsif (/^\@include\s+(vers[^.]*\.texi)\s*$/)
	{
	  $vfile = $1;
	}
    }

  if (! $outfile)
    {
      err_am "'$filename' missing \@setfilename";
      return;
    }

  return ($outfile, $vfile);
}


# ($DIRSTAMP, @CLEAN_FILES)
# output_texinfo_build_rules ($SOURCE, $DEST, $INSRC, @DEPENDENCIES)
# ------------------------------------------------------------------
# SOURCE - the source Texinfo file
# DEST - the destination Info file
# INSRC - whether DEST should be built in the source tree
# DEPENDENCIES - known dependencies
sub output_texinfo_build_rules
{
  my ($source, $dest, $insrc, @deps) = @_;

  # Split 'a.texi' into 'a' and '.texi'.
  my ($spfx, $ssfx) = ($source =~ /^(.*?)(\.[^.]*)?$/);
  my ($dpfx, $dsfx) = ($dest =~ /^(.*?)(\.[^.]*)?$/);

  $ssfx ||= "";
  $dsfx ||= "";

  # We can output two kinds of rules: the "generic" rules use Make
  # suffix rules and are appropriate when $source and $dest do not lie
  # in a sub-directory; the "specific" rules are needed in the other
  # case.
  #
  # The former are output only once (this is not really apparent here,
  # but just remember that some logic deeper in Automake will not
  # output the same rule twice); while the later need to be output for
  # each Texinfo source.
  my $generic;
  my $makeinfoflags;
  my $sdir = dirname $source;
  if ($sdir eq '.' && dirname ($dest) eq '.')
    {
      $generic = 1;
      $makeinfoflags = '-I $(srcdir)';
    }
  else
    {
      $generic = 0;
      $makeinfoflags = "-I $sdir -I \$(srcdir)/$sdir";
    }

  # A directory can contain two kinds of info files: some built in the
  # source tree, and some built in the build tree.  The rules are
  # different in each case.  However we cannot output two different
  # set of generic rules.  Because in-source builds are more usual, we
  # use generic rules in this case and fall back to "specific" rules
  # for build-dir builds.  (It should not be a problem to invert this
  # if needed.)
  $generic = 0 unless $insrc;

  # We cannot use a suffix rule to build info files with an empty
  # extension.  Otherwise we would output a single suffix inference
  # rule, with separate dependencies, as in
  #
  #    .texi:
  #             $(MAKEINFO) ...
  #    foo.info: foo.texi
  #
  # which confuse Solaris make.  (See the Autoconf manual for
  # details.)  Therefore we use a specific rule in this case.  This
  # applies to info files only (dvi and pdf files always have an
  # extension).
  my $generic_info = ($generic && $dsfx) ? 1 : 0;

  # If the resulting file lies in a subdirectory,
  # make sure this directory will exist.
  my $dirstamp = require_build_directory_maybe ($dest);

  my $dipfx = ($insrc ? '$(srcdir)/' : '') . $dpfx;

  $output_rules .= file_contents ('texibuild',
				  new Automake::Location,
                                  AM_V_MAKEINFO    => verbose_flag('MAKEINFO'),
                                  AM_V_TEXI2DVI    => verbose_flag('TEXI2DVI'),
                                  AM_V_TEXI2PDF    => verbose_flag('TEXI2PDF'),
				  DEPS             => "@deps",
				  DEST_PREFIX      => $dpfx,
				  DEST_INFO_PREFIX => $dipfx,
				  DEST_SUFFIX      => $dsfx,
				  DIRSTAMP         => $dirstamp,
				  GENERIC          => $generic,
				  GENERIC_INFO     => $generic_info,
				  INSRC		   => $insrc,
				  MAKEINFOFLAGS    => $makeinfoflags,
                                  SILENT           => silent_flag(),
				  SOURCE           => ($generic
						       ? '$<' : $source),
				  SOURCE_INFO      => ($generic_info
						       ? '$<' : $source),
				  SOURCE_REAL      => $source,
				  SOURCE_SUFFIX    => $ssfx,
                                  TEXIQUIET        => verbose_flag('texinfo'),
                                  TEXIDEVNULL      => verbose_flag('texidevnull'),
				  );
  return ($dirstamp, "$dpfx.dvi", "$dpfx.pdf", "$dpfx.ps", "$dpfx.html");
}


# ($MOSTLYCLEAN, $TEXICLEAN, $MAINTCLEAN)
# handle_texinfo_helper ($info_texinfos)
# --------------------------------------
# Handle all Texinfo source; helper for 'handle_texinfo'.
sub handle_texinfo_helper
{
  my ($info_texinfos) = @_;
  my (@infobase, @info_deps_list, @texi_deps);
  my %versions;
  my $done = 0;
  my (@mostly_cleans, @texi_cleans, @maint_cleans) = ('', '', '');

  # Build a regex matching user-cleaned files.
  my $d = var 'DISTCLEANFILES';
  my $c = var 'CLEANFILES';
  my @f = ();
  push @f, $d->value_as_list_recursive (inner_expand => 1) if $d;
  push @f, $c->value_as_list_recursive (inner_expand => 1) if $c;
  @f = map { s|[^A-Za-z_0-9*\[\]\-]|\\$&|g; s|\*|[^/]*|g; $_; } @f;
  my $user_cleaned_files = '^(?:' . join ('|', @f) . ')$';

  foreach my $texi
      ($info_texinfos->value_as_list_recursive (inner_expand => 1))
    {
      my $infobase = $texi;
      if ($infobase =~ s/\.texi$//)
        {
          1; # Nothing more to do.
        }
      elsif ($infobase =~ s/\.(txi|texinfo)$//)
        {
	  msg_var 'obsolete', $info_texinfos,
	          "suffix '.$1' for Texinfo files is discouraged;" .
                  " use '.texi' instead";
        }
      else
	{
	  # FIXME: report line number.
	  err_am "texinfo file '$texi' has unrecognized extension";
	  next;
	}

      push @infobase, $infobase;

      # If 'version.texi' is referenced by input file, then include
      # automatic versioning capability.
      my ($out_file, $vtexi) =
	scan_texinfo_file ("$relative_dir/$texi")
	or next;
      # Directory of auxiliary files and build by-products used by texi2dvi
      # and texi2pdf.
      push @mostly_cleans, "$infobase.t2d";
      push @mostly_cleans, "$infobase.t2p";

      # If the Texinfo source is in a subdirectory, create the
      # resulting info in this subdirectory.  If it is in the current
      # directory, try hard to not prefix "./" because it breaks the
      # generic rules.
      my $outdir = dirname ($texi) . '/';
      $outdir = "" if $outdir eq './';
      $out_file =  $outdir . $out_file;

      # Until Automake 1.6.3, .info files were built in the
      # source tree.  This was an obstacle to the support of
      # non-distributed .info files, and non-distributed .texi
      # files.
      #
      # * Non-distributed .texi files is important in some packages
      #   where .texi files are built at make time, probably using
      #   other binaries built in the package itself, maybe using
      #   tools or information found on the build host.  Because
      #   these files are not distributed they are always rebuilt
      #   at make time; they should therefore not lie in the source
      #   directory.  One plan was to support this using
      #   nodist_info_TEXINFOS or something similar.  (Doing this
      #   requires some sanity checks.  For instance Automake should
      #   not allow:
      #      dist_info_TEXINFOS = foo.texi
      #      nodist_foo_TEXINFOS = included.texi
      #   because a distributed file should never depend on a
      #   non-distributed file.)
      #
      # * If .texi files are not distributed, then .info files should
      #   not be distributed either.  There are also cases where one
      #   wants to distribute .texi files, but does not want to
      #   distribute the .info files.  For instance the Texinfo package
      #   distributes the tool used to build these files; it would
      #   be a waste of space to distribute them.  It's not clear
      #   which syntax we should use to indicate that .info files should
      #   not be distributed.  Akim Demaille suggested that eventually
      #   we switch to a new syntax:
      #   |  Maybe we should take some inspiration from what's already
      #   |  done in the rest of Automake.  Maybe there is too much
      #   |  syntactic sugar here, and you want
      #   |     nodist_INFO = bar.info
      #   |     dist_bar_info_SOURCES = bar.texi
      #   |     bar_texi_DEPENDENCIES = foo.texi
      #   |  with a bit of magic to have bar.info represent the whole
      #   |  bar*info set.  That's a lot more verbose that the current
      #   |  situation, but it is # not new, hence the user has less
      #   |  to learn.
      #	  |
      #   |  But there is still too much room for meaningless specs:
      #   |     nodist_INFO = bar.info
      #   |     dist_bar_info_SOURCES = bar.texi
      #   |     dist_PS = bar.ps something-written-by-hand.ps
      #   |     nodist_bar_ps_SOURCES = bar.texi
      #   |     bar_texi_DEPENDENCIES = foo.texi
      #   |  here bar.texi is dist_ in line 2, and nodist_ in 4.
      #
      # Back to the point, it should be clear that in order to support
      # non-distributed .info files, we need to build them in the
      # build tree, not in the source tree (non-distributed .texi
      # files are less of a problem, because we do not output build
      # rules for them).  In Automake 1.7 .info build rules have been
      # largely cleaned up so that .info files get always build in the
      # build tree, even when distributed.  The idea was that
      #   (1) if during a VPATH build the .info file was found to be
      #       absent or out-of-date (in the source tree or in the
      #       build tree), Make would rebuild it in the build tree.
      #       If an up-to-date source-tree of the .info file existed,
      #       make would not rebuild it in the build tree.
      #   (2) having two copies of .info files, one in the source tree
      #       and one (newer) in the build tree is not a problem
      #       because 'make dist' always pick files in the build tree
      #       first.
      # However it turned out the be a bad idea for several reasons:
      #   * Tru64, OpenBSD, and FreeBSD (not NetBSD) Make do not behave
      #     like GNU Make on point (1) above.  These implementations
      #     of Make would always rebuild .info files in the build
      #     tree, even if such files were up to date in the source
      #     tree.  Consequently, it was impossible to perform a VPATH
      #     build of a package containing Texinfo files using these
      #     Make implementations.
      #     (Refer to the Autoconf Manual, section "Limitation of
      #     Make", paragraph "VPATH", item "target lookup", for
      #     an account of the differences between these
      #     implementations.)
      #   * The GNU Coding Standards require these files to be built
      #     in the source-tree (when they are distributed, that is).
      #   * Keeping a fresher copy of distributed files in the
      #     build tree can be annoying during development because
      #     - if the files is kept under CVS, you really want it
      #       to be updated in the source tree
      #     - it is confusing that 'make distclean' does not erase
      #       all files in the build tree.
      #
      # Consequently, starting with Automake 1.8, .info files are
      # built in the source tree again.  Because we still plan to
      # support non-distributed .info files at some point, we
      # have a single variable ($INSRC) that controls whether
      # the current .info file must be built in the source tree
      # or in the build tree.  Actually this variable is switched
      # off in two cases:
      #  (1) For '.info' files that appear to be cleaned; this is for
      #      backward compatibility with package such as Texinfo,
      #      which do things like
      #        info_TEXINFOS = texinfo.txi info-stnd.texi info.texi
      #        DISTCLEANFILES = texinfo texinfo-* info*.info*
      #        # Do not create info files for distribution.
      #        dist-info:
      #      in order not to distribute .info files.
      #  (2) When the undocumented option 'info-in-builddir' is given.
      #      This is done to allow the developers of GCC, GDB, GNU
      #      binutils and the GNU bfd library to force the '.info' files
      #      to be generated in the builddir rather than the srcdir, as
      #      was once done when the (now removed) 'cygnus' option was
      #      given.  See automake bug#11034 for more discussion.
      my $insrc = 1;
      my $soutdir = '$(srcdir)/' . $outdir;

      if (option 'info-in-builddir')
        {
          $insrc = 0;
        }
      elsif ($out_file =~ $user_cleaned_files)
        {
          $insrc = 0;
          msg 'obsolete', "$am_file.am", <<EOF;
Oops!
    It appears this file (or files included by it) are triggering
    an undocumented, soon-to-be-removed automake hack.
    Future automake versions will no longer place in the builddir
    (rather than in the srcdir) the generated '.info' files that
    appear to be cleaned, by e.g. being listed in CLEANFILES or
    DISTCLEANFILES.
    If you want your '.info' files to be placed in the builddir
    rather than in the srcdir, you have to use the shiny new
    'info-in-builddir' automake option.
EOF
        }

      $outdir = $soutdir if $insrc;

      # If user specified file_TEXINFOS, then use that as explicit
      # dependency list.
      @texi_deps = ();
      push (@texi_deps, "${soutdir}${vtexi}") if $vtexi;

      my $canonical = canonicalize ($infobase);
      if (var ($canonical . "_TEXINFOS"))
	{
	  push (@texi_deps, '$(' . $canonical . '_TEXINFOS)');
	  push_dist_common ('$(' . $canonical . '_TEXINFOS)');
	}

      my ($dirstamp, @cfiles) =
	output_texinfo_build_rules ($texi, $out_file, $insrc, @texi_deps);
      push (@texi_cleans, @cfiles);

      push (@info_deps_list, $out_file);

      # If a vers*.texi file is needed, emit the rule.
      if ($vtexi)
	{
	  err_am ("'$vtexi', included in '$texi', "
		  . "also included in '$versions{$vtexi}'")
	    if defined $versions{$vtexi};
	  $versions{$vtexi} = $texi;

	  # We number the stamp-vti files.  This is doable since the
	  # actual names don't matter much.  We only number starting
	  # with the second one, so that the common case looks nice.
	  my $vti = ($done ? $done : 'vti');
	  ++$done;

	  # This is ugly, but it is our historical practice.
	  if ($config_aux_dir_set_in_configure_ac)
	    {
	      require_conf_file_with_macro (TRUE, 'info_TEXINFOS', FOREIGN,
					    'mdate-sh');
	    }
	  else
	    {
	      require_file_with_macro (TRUE, 'info_TEXINFOS',
				       FOREIGN, 'mdate-sh');
	    }

	  my $conf_dir;
	  if ($config_aux_dir_set_in_configure_ac)
	    {
	      $conf_dir = "$am_config_aux_dir/";
	    }
	  else
	    {
	      $conf_dir = '$(srcdir)/';
	    }
	  $output_rules .= file_contents ('texi-vers',
					  new Automake::Location,
					  TEXI     => $texi,
					  VTI      => $vti,
					  STAMPVTI => "${soutdir}stamp-$vti",
					  VTEXI    => "$soutdir$vtexi",
					  MDDIR    => $conf_dir,
					  DIRSTAMP => $dirstamp);
	}
    }

  # Handle location of texinfo.tex.
  my $need_texi_file = 0;
  my $texinfodir;
  if (var ('TEXINFO_TEX'))
    {
      # The user defined TEXINFO_TEX so assume he knows what he is
      # doing.
      $texinfodir = ('$(srcdir)/'
		     . dirname (variable_value ('TEXINFO_TEX')));
    }
  elsif ($config_aux_dir_set_in_configure_ac)
    {
      $texinfodir = $am_config_aux_dir;
      define_variable ('TEXINFO_TEX', "$texinfodir/texinfo.tex", INTERNAL);
      $need_texi_file = 2; # so that we require_conf_file later
    }
  else
    {
      $texinfodir = '$(srcdir)';
      $need_texi_file = 1;
    }
  define_variable ('am__TEXINFO_TEX_DIR', $texinfodir, INTERNAL);

  push (@dist_targets, 'dist-info');

  if (! option 'no-installinfo')
    {
      # Make sure documentation is made and installed first.  Use
      # $(INFO_DEPS), not 'info', because otherwise recursive makes
      # get run twice during "make all".
      unshift (@all, '$(INFO_DEPS)');
    }

  define_files_variable ("DVIS", @infobase, 'dvi', INTERNAL);
  define_files_variable ("PDFS", @infobase, 'pdf', INTERNAL);
  define_files_variable ("PSS", @infobase, 'ps', INTERNAL);
  define_files_variable ("HTMLS", @infobase, 'html', INTERNAL);

  # This next isn't strictly needed now -- the places that look here
  # could easily be changed to look in info_TEXINFOS.  But this is
  # probably better, in case noinst_TEXINFOS is ever supported.
  define_variable ("TEXINFOS", variable_value ('info_TEXINFOS'), INTERNAL);

  # Do some error checking.  Note that this file is not required
  # when in Cygnus mode; instead we defined TEXINFO_TEX explicitly
  # up above.
  if ($need_texi_file && ! option 'no-texinfo.tex')
    {
      if ($need_texi_file > 1)
	{
	  require_conf_file_with_macro (TRUE, 'info_TEXINFOS', FOREIGN,
					'texinfo.tex');
	}
      else
	{
	  require_file_with_macro (TRUE, 'info_TEXINFOS', FOREIGN,
				   'texinfo.tex');
	}
    }

  return (makefile_wrap ("", "\t  ", @mostly_cleans),
	  makefile_wrap ("", "\t  ", @texi_cleans),
	  makefile_wrap ("", "\t  ", @maint_cleans));
}


sub handle_texinfo ()
{
  reject_var 'TEXINFOS', "'TEXINFOS' is an anachronism; use 'info_TEXINFOS'";
  # FIXME: I think this is an obsolete future feature name.
  reject_var 'html_TEXINFOS', "HTML generation not yet supported";

  my $info_texinfos = var ('info_TEXINFOS');
  my ($mostlyclean, $clean, $maintclean) = ('', '', '');
  if ($info_texinfos)
    {
      define_verbose_texinfo;
      ($mostlyclean, $clean, $maintclean) = handle_texinfo_helper ($info_texinfos);
      chomp $mostlyclean;
      chomp $clean;
      chomp $maintclean;
    }

  $output_rules .=  file_contents ('texinfos',
				   new Automake::Location,
                                   AM_V_DVIPS    => verbose_flag('DVIPS'),
				   MOSTLYCLEAN   => $mostlyclean,
				   TEXICLEAN     => $clean,
				   MAINTCLEAN    => $maintclean,
				   'LOCAL-TEXIS' => !!$info_texinfos,
                                   TEXIQUIET     => verbose_flag('texinfo'));
}


sub handle_man_pages ()
{
  reject_var 'MANS', "'MANS' is an anachronism; use 'man_MANS'";

  # Find all the sections in use.  We do this by first looking for
  # "standard" sections, and then looking for any additional
  # sections used in man_MANS.
  my (%sections, %notrans_sections, %trans_sections,
      %notrans_vars, %trans_vars, %notrans_sect_vars, %trans_sect_vars);
  # We handle nodist_ for uniformity.  man pages aren't distributed
  # by default so it isn't actually very important.
  foreach my $npfx ('', 'notrans_')
    {
      foreach my $pfx ('', 'dist_', 'nodist_')
	{
	  # Add more sections as needed.
	  foreach my $section ('0'..'9', 'n', 'l')
	    {
	      my $varname = $npfx . $pfx . 'man' . $section . '_MANS';
	      if (var ($varname))
		{
		  $sections{$section} = 1;
		  $varname = '$(' . $varname . ')';
		  if ($npfx eq 'notrans_')
		    {
		      $notrans_sections{$section} = 1;
		      $notrans_sect_vars{$varname} = 1;
		    }
		  else
		    {
		      $trans_sections{$section} = 1;
		      $trans_sect_vars{$varname} = 1;
		    }

		  push_dist_common ($varname)
		    if $pfx eq 'dist_';
		}
	    }

	  my $varname = $npfx . $pfx . 'man_MANS';
	  my $var = var ($varname);
	  if ($var)
	    {
	      foreach ($var->value_as_list_recursive)
		{
		  # A page like 'foo.1c' goes into man1dir.
		  if (/\.([0-9a-z])([a-z]*)$/)
		    {
		      $sections{$1} = 1;
		      if ($npfx eq 'notrans_')
			{
			  $notrans_sections{$1} = 1;
			}
		      else
			{
			  $trans_sections{$1} = 1;
			}
		    }
		}

	      $varname = '$(' . $varname . ')';
	      if ($npfx eq 'notrans_')
		{
		  $notrans_vars{$varname} = 1;
		}
	      else
		{
		  $trans_vars{$varname} = 1;
		}
	      push_dist_common ($varname)
		if $pfx eq 'dist_';
	    }
	}
    }

  return unless %sections;

  my @unsorted_deps;

  # Build section independent variables.
  my $have_notrans = %notrans_vars;
  my @notrans_list = sort keys %notrans_vars;
  my $have_trans = %trans_vars;
  my @trans_list = sort keys %trans_vars;

  # Now for each section, generate an install and uninstall rule.
  # Sort sections so output is deterministic.
  foreach my $section (sort keys %sections)
    {
      # Build section dependent variables.
      my $notrans_mans = $have_notrans || exists $notrans_sections{$section};
      my $trans_mans = $have_trans || exists $trans_sections{$section};
      my (%notrans_this_sect, %trans_this_sect);
      my $expr = 'man' . $section . '_MANS';
      foreach my $varname (keys %notrans_sect_vars)
	{
	  if ($varname =~ /$expr/)
	    {
	      $notrans_this_sect{$varname} = 1;
	    }
	}
      foreach my $varname (keys %trans_sect_vars)
	{
	  if ($varname =~ /$expr/)
	    {
	      $trans_this_sect{$varname} = 1;
	    }
	}
      my @notrans_sect_list = sort keys %notrans_this_sect;
      my @trans_sect_list = sort keys %trans_this_sect;
      @unsorted_deps = (keys %notrans_vars, keys %trans_vars,
                        keys %notrans_this_sect, keys %trans_this_sect);
      my @deps = sort @unsorted_deps;
      $output_rules .= file_contents ('mans',
                                      new Automake::Location,
                                      SECTION           => $section,
                                      DEPS              => "@deps",
                                      NOTRANS_MANS      => $notrans_mans,
                                      NOTRANS_SECT_LIST => "@notrans_sect_list",
                                      HAVE_NOTRANS      => $have_notrans,
                                      NOTRANS_LIST      => "@notrans_list",
                                      TRANS_MANS        => $trans_mans,
                                      TRANS_SECT_LIST   => "@trans_sect_list",
                                      HAVE_TRANS        => $have_trans,
                                      TRANS_LIST        => "@trans_list");
    }

  @unsorted_deps  = (keys %notrans_vars, keys %trans_vars,
                     keys %notrans_sect_vars, keys %trans_sect_vars);
  my @mans = sort @unsorted_deps;
  $output_vars .= file_contents ('mans-vars',
				 new Automake::Location,
				 MANS => "@mans");

  push (@all, '$(MANS)')
    unless option 'no-installman';
}


sub handle_data ()
{
    am_install_var ('-noextra', '-candist', 'data', 'DATA',
                    'data', 'dataroot', 'doc', 'dvi', 'html', 'pdf',
                    'ps', 'sysconf', 'sharedstate', 'localstate',
                    'pkgdata', 'lisp', 'noinst', 'check');
}


sub handle_tags ()
{
    my @config;
    foreach my $spec (@config_headers)
      {
        my ($out, @ins) = split_config_file_spec ($spec);
	foreach my $in (@ins)
	  {
            # If the config header source is in this directory,
	    # require it.
	    push @config, basename ($in)
              if $relative_dir eq dirname ($in);
	   }
      }

    define_variable ('am__tagged_files',
                     '$(HEADERS) $(SOURCES) $(TAGS_FILES) $(LISP)'
                     . "@config", INTERNAL);

    if (rvar('am__tagged_files')->value_as_list_recursive
          || var ('ETAGS_ARGS') || var ('SUBDIRS'))
      {
	$output_rules .= file_contents ('tags', new Automake::Location);
	set_seen 'TAGS_DEPENDENCIES';
      }
    else
      {
        reject_var ('TAGS_DEPENDENCIES',
		    "it doesn't make sense to define 'TAGS_DEPENDENCIES'"
		    . " without\nsources or 'ETAGS_ARGS'");
	# Every Makefile must define some sort of TAGS rule.
	# Otherwise, it would be possible for a top-level "make TAGS"
	# to fail because some subdirectory failed.  Ditto ctags and
        # cscope.
        $output_rules .=
          "tags TAGS:\n\n" .
          "ctags CTAGS:\n\n" .
          "cscope cscopelist:\n\n";
      }
}


# user_phony_rule ($NAME)
# -----------------------
# Return false if rule $NAME does not exist.  Otherwise,
# declare it as phony, complete its definition (in case it is
# conditional), and return its Automake::Rule instance.
sub user_phony_rule
{
  my ($name) = @_;
  my $rule = rule $name;
  if ($rule)
    {
      depend ('.PHONY', $name);
      # Define $NAME in all condition where it is not already defined,
      # so that it is always OK to depend on $NAME.
      for my $c ($rule->not_always_defined_in_cond (TRUE)->conds)
	{
	  Automake::Rule::define ($name, 'internal', RULE_AUTOMAKE,
				  $c, INTERNAL);
	  $output_rules .= $c->subst_string . "$name:\n";
	}
    }
  return $rule;
}


# Handle 'dist' target.
sub handle_dist ()
{
  # Substitutions for distdir.am
  my %transform;

  # Define DIST_SUBDIRS.  This must always be done, regardless of the
  # no-dist setting: target like 'distclean' or 'maintainer-clean' use it.
  my $subdirs = var ('SUBDIRS');
  if ($subdirs)
    {
      # If SUBDIRS is conditionally defined, then set DIST_SUBDIRS
      # to all possible directories, and use it.  If DIST_SUBDIRS is
      # defined, just use it.

      # Note that we check DIST_SUBDIRS first on purpose, so that
      # we don't call has_conditional_contents for now reason.
      # (In the past one project used so many conditional subdirectories
      # that calling has_conditional_contents on SUBDIRS caused
      # automake to grow to 150Mb -- this should not happen with
      # the current implementation of has_conditional_contents,
      # but it's more efficient to avoid the call anyway.)
      if (var ('DIST_SUBDIRS'))
	{
	}
      elsif ($subdirs->has_conditional_contents)
	{
	  define_pretty_variable
	    ('DIST_SUBDIRS', TRUE, INTERNAL,
	     uniq ($subdirs->value_as_list_recursive));
	}
      else
	{
	  # We always define this because that is what 'distclean'
	  # wants.
	  define_pretty_variable ('DIST_SUBDIRS', TRUE, INTERNAL,
				  '$(SUBDIRS)');
	}
    }

  # The remaining definitions are only required when a dist target is used.
  return if option 'no-dist';

  # At least one of the archive formats must be enabled.
  if ($relative_dir eq '.')
    {
      my $archive_defined = option 'no-dist-gzip' ? 0 : 1;
      $archive_defined ||=
	grep { option "dist-$_" } qw(shar zip tarZ bzip2 lzip xz);
      error (option 'no-dist-gzip',
	     "no-dist-gzip specified but no dist-* specified,\n"
	     . "at least one archive format must be enabled")
	unless $archive_defined;
    }

  # Look for common files that should be included in distribution.
  # If the aux dir is set, and it does not have a Makefile.am, then
  # we check for these files there as well.
  my $check_aux = 0;
  if ($relative_dir eq '.'
      && $config_aux_dir_set_in_configure_ac)
    {
      if (! is_make_dir ($config_aux_dir))
	{
	  $check_aux = 1;
	}
    }
  foreach my $cfile (@common_files)
    {
      if (dir_has_case_matching_file ($relative_dir, $cfile)
	  # The file might be absent, but if it can be built it's ok.
	  || rule $cfile)
	{
	  push_dist_common ($cfile);
	}

      # Don't use 'elsif' here because a file might meaningfully
      # appear in both directories.
      if ($check_aux && dir_has_case_matching_file ($config_aux_dir, $cfile))
	{
	  push_dist_common ("$config_aux_dir/$cfile")
	}
    }

  # We might copy elements from @configure_dist_common to
  # @dist_common if we think we need to.  If the file appears in our
  # directory, we would have discovered it already, so we don't
  # check that.  But if the file is in a subdir without a Makefile,
  # we want to distribute it here if we are doing '.'.  Ugly!
  # Also, in some corner cases, it's possible that the following code
  # will cause the same file to appear in the $(DIST_COMMON) variables
  # of two distinct Makefiles; but this is not a problem, since the
  # 'distdir' target in 'lib/am/distdir.am' can deal with the same
  # file being distributed multiple times.
  # See also automake bug#9651.
  if ($relative_dir eq '.')
    {
      foreach my $file (@configure_dist_common)
	{
	  my $dir = dirname ($file);
	  push_dist_common ($file)
	    if ($dir eq '.' || ! is_make_dir ($dir));
	}
      @configure_dist_common = ();
    }

  # $(am__DIST_COMMON): files to be distributed automatically.  Will be
  # appended to $(DIST_COMMON) in the generated Makefile.
  # Use 'sort' so that the expansion of $(DIST_COMMON) in the generated
  # Makefile is deterministic, in face of m4 and/or perl randomizations
  # (see automake bug#17908).
  define_pretty_variable ('am__DIST_COMMON', TRUE, INTERNAL,
                          uniq (sort @dist_common));

  # Now that we've processed @dist_common, disallow further attempts
  # to modify it.
  $handle_dist_run = 1;

  $transform{'DISTCHECK-HOOK'} = !! rule 'distcheck-hook';
  $transform{'GETTEXT'} = $seen_gettext && !$seen_gettext_external;

  # If the target 'dist-hook' exists, make sure it is run.  This
  # allows users to do random weird things to the distribution
  # before it is packaged up.
  push (@dist_targets, 'dist-hook')
    if user_phony_rule 'dist-hook';
  $transform{'DIST-TARGETS'} = join (' ', @dist_targets);

  my $flm = option ('filename-length-max');
  my $filename_filter = $flm ? '.' x $flm->[1] : '';

  $output_rules .= file_contents ('distdir',
				  new Automake::Location,
				  %transform,
				  FILENAME_FILTER => $filename_filter);
}


# check_directory ($NAME, $WHERE [, $RELATIVE_DIR = "."])
# -------------------------------------------------------
# Ensure $NAME is a directory (in $RELATIVE_DIR), and that it uses a sane
# name.  Use $WHERE as a location in the diagnostic, if any.
sub check_directory
{
  my ($dir, $where, $reldir) = @_;
  $reldir = '.' unless defined $reldir;

  error $where, "required directory $reldir/$dir does not exist"
    unless -d "$reldir/$dir";

  # If an 'obj/' directory exists, BSD make will enter it before
  # reading 'Makefile'.  Hence the 'Makefile' in the current directory
  # will not be read.
  #
  #  % cat Makefile
  #  all:
  #          echo Hello
  #  % cat obj/Makefile
  #  all:
  #          echo World
  #  % make      # GNU make
  #  echo Hello
  #  Hello
  #  % pmake     # BSD make
  #  echo World
  #  World
  msg ('portability', $where,
       "naming a subdirectory 'obj' causes troubles with BSD make")
    if $dir eq 'obj';

  # 'aux' is probably the most important of the following forbidden name,
  # since it's tempting to use it as an AC_CONFIG_AUX_DIR.
  msg ('portability', $where,
       "name '$dir' is reserved on W32 and DOS platforms")
    if grep (/^\Q$dir\E$/i, qw/aux lpt1 lpt2 lpt3 com1 com2 com3 com4 con prn/);
}

# check_directories_in_var ($VARIABLE)
# ------------------------------------
# Recursively check all items in variables $VARIABLE as directories
sub check_directories_in_var
{
  my ($var) = @_;
  $var->traverse_recursively
    (sub
     {
       my ($var, $val, $cond, $full_cond) = @_;
       check_directory ($val, $var->rdef ($cond)->location, $relative_dir);
       return ();
     },
     undef,
     skip_ac_subst => 1);
}


sub handle_subdirs ()
{
  my $subdirs = var ('SUBDIRS');
  return
    unless $subdirs;

  check_directories_in_var $subdirs;

  my $dsubdirs = var ('DIST_SUBDIRS');
  check_directories_in_var $dsubdirs
    if $dsubdirs;

  $output_rules .= file_contents ('subdirs', new Automake::Location);
  rvar ('RECURSIVE_TARGETS')->rdef (TRUE)->{'pretty'} = VAR_SORTED; # Gross!
}


# ($REGEN, @DEPENDENCIES)
# scan_aclocal_m4
# ---------------
# If aclocal.m4 creation is automated, return the list of its dependencies.
sub scan_aclocal_m4 ()
{
  my $regen_aclocal = 0;

  set_seen 'CONFIG_STATUS_DEPENDENCIES';
  set_seen 'CONFIGURE_DEPENDENCIES';

  if (-f 'aclocal.m4')
    {
      define_variable ("ACLOCAL_M4", '$(top_srcdir)/aclocal.m4', INTERNAL);

      my $aclocal = new Automake::XFile "< aclocal.m4";
      my $line = $aclocal->getline;
      $regen_aclocal = $line =~ 'generated automatically by aclocal';
    }

  my @ac_deps = ();

  if (set_seen ('ACLOCAL_M4_SOURCES'))
    {
      push (@ac_deps, '$(ACLOCAL_M4_SOURCES)');
      msg_var ('obsolete', 'ACLOCAL_M4_SOURCES',
	       "'ACLOCAL_M4_SOURCES' is obsolete.\n"
	       . "It should be safe to simply remove it");
    }

  # Note that it might be possible that aclocal.m4 doesn't exist but
  # should be auto-generated.  This case probably isn't very
  # important.

  return ($regen_aclocal, @ac_deps);
}


# Helper function for 'substitute_ac_subst_variables'.
sub substitute_ac_subst_variables_worker
{
  my ($token) = @_;
  return "\@$token\@" if var $token;
  return "\${$token\}";
}

# substitute_ac_subst_variables ($TEXT)
# -------------------------------------
# Replace any occurrence of ${FOO} in $TEXT by @FOO@ if FOO is an AC_SUBST
# variable.
sub substitute_ac_subst_variables
{
  my ($text) = @_;
  $text =~ s/\$[{]([^ \t=:+{}]+)}/substitute_ac_subst_variables_worker ($1)/ge;
  return $text;
}

# @DEPENDENCIES
# prepend_srcdir (@INPUTS)
# ------------------------
# Prepend $(srcdir) or $(top_srcdir) to all @INPUTS.  The idea is that
# if an input file has a directory part the same as the current
# directory, then the directory part is simply replaced by $(srcdir).
# But if the directory part is different, then $(top_srcdir) is
# prepended.
sub prepend_srcdir
{
  my (@inputs) = @_;
  my @newinputs;

  foreach my $single (@inputs)
    {
      if (dirname ($single) eq $relative_dir)
	{
	  push (@newinputs, '$(srcdir)/' . basename ($single));
	}
      else
	{
	  push (@newinputs, '$(top_srcdir)/' . $single);
	}
    }
  return @newinputs;
}

# @DEPENDENCIES
# rewrite_inputs_into_dependencies ($OUTPUT, @INPUTS)
# ---------------------------------------------------
# Compute a list of dependencies appropriate for the rebuild
# rule of
#   AC_CONFIG_FILES($OUTPUT:$INPUT[0]:$INPUTS[1]:...)
# Also distribute $INPUTs which are not built by another AC_CONFIG_FOOs.
sub rewrite_inputs_into_dependencies
{
  my ($file, @inputs) = @_;
  my @res = ();

  for my $i (@inputs)
    {
      # We cannot create dependencies on shell variables.
      next if (substitute_ac_subst_variables $i) =~ /\$/;

      if (exists $ac_config_files_location{$i} && $i ne $file)
	{
	  my $di = dirname $i;
	  if ($di eq $relative_dir)
	    {
	      $i = basename $i;
	    }
	  # In the top-level Makefile we do not use $(top_builddir), because
	  # we are already there, and since the targets are built without
	  # a $(top_builddir), it helps BSD Make to match them with
	  # dependencies.
	  elsif ($relative_dir ne '.')
	    {
	      $i = '$(top_builddir)/' . $i;
	    }
	}
      else
	{
	  msg ('error', $ac_config_files_location{$file},
	       "required file '$i' not found")
	    unless $i =~ /\$/ || exists $output_files{$i} || -f $i;
	  ($i) = prepend_srcdir ($i);
	  push_dist_common ($i);
	}
      push @res, $i;
    }
  return @res;
}



# handle_configure ($MAKEFILE_AM, $MAKEFILE_IN, $MAKEFILE, @INPUTS)
# -----------------------------------------------------------------
# Handle remaking and configure stuff.
# We need the name of the input file, to do proper remaking rules.
sub handle_configure
{
  my ($makefile_am, $makefile_in, $makefile, @inputs) = @_;

  prog_error 'empty @inputs'
    unless @inputs;

  my ($rel_makefile_am, $rel_makefile_in) = prepend_srcdir ($makefile_am,
							    $makefile_in);
  my $rel_makefile = basename $makefile;

  my $colon_infile = ':' . join (':', @inputs);
  $colon_infile = '' if $colon_infile eq ":$makefile.in";
  my @rewritten = rewrite_inputs_into_dependencies ($makefile, @inputs);
  my ($regen_aclocal_m4, @aclocal_m4_deps) = scan_aclocal_m4;
  define_pretty_variable ('am__aclocal_m4_deps', TRUE, INTERNAL,
			  @configure_deps, @aclocal_m4_deps,
			  '$(top_srcdir)/' . $configure_ac);
  my @configuredeps = ('$(am__aclocal_m4_deps)', '$(CONFIGURE_DEPENDENCIES)');
  push @configuredeps, '$(ACLOCAL_M4)' if -f 'aclocal.m4';
  define_pretty_variable ('am__configure_deps', TRUE, INTERNAL,
			  @configuredeps);

  my $automake_options = '--' . $strictness_name .
			 (global_option 'no-dependencies' ? ' --ignore-deps' : '');

  $output_rules .= file_contents
    ('configure',
     new Automake::Location,
     MAKEFILE              => $rel_makefile,
     'MAKEFILE-DEPS'       => "@rewritten",
     'CONFIG-MAKEFILE'     => ($relative_dir eq '.') ? '$@' : '$(subdir)/$@',
     'MAKEFILE-IN'         => $rel_makefile_in,
     'HAVE-MAKEFILE-IN-DEPS' => (@include_stack > 0),
     'MAKEFILE-IN-DEPS'    => "@include_stack",
     'MAKEFILE-AM'         => $rel_makefile_am,
     'AUTOMAKE-OPTIONS'    => $automake_options,
     'MAKEFILE-AM-SOURCES' => "$makefile$colon_infile",
     'REGEN-ACLOCAL-M4'    => $regen_aclocal_m4,
     VERBOSE               => verbose_flag ('GEN'));

  if ($relative_dir eq '.')
    {
      push_dist_common ('acconfig.h')
	if -f 'acconfig.h';
    }

  # If we have a configure header, require it.
  my $hdr_index = 0;
  my @distclean_config;
  foreach my $spec (@config_headers)
    {
      $hdr_index += 1;
      # $CONFIG_H_PATH: config.h from top level.
      my ($config_h_path, @ins) = split_config_file_spec ($spec);
      my $config_h_dir = dirname ($config_h_path);

      # If the header is in the current directory we want to build
      # the header here.  Otherwise, if we're at the topmost
      # directory and the header's directory doesn't have a
      # Makefile, then we also want to build the header.
      if ($relative_dir eq $config_h_dir
	  || ($relative_dir eq '.' && ! is_make_dir ($config_h_dir)))
	{
	  my ($cn_sans_dir, $stamp_dir);
	  if ($relative_dir eq $config_h_dir)
	    {
	      $cn_sans_dir = basename ($config_h_path);
	      $stamp_dir = '';
	    }
	  else
	    {
	      $cn_sans_dir = $config_h_path;
	      if ($config_h_dir eq '.')
		{
		  $stamp_dir = '';
		}
	      else
		{
		  $stamp_dir = $config_h_dir . '/';
		}
	    }

	  # This will also distribute all inputs.
	  @ins = rewrite_inputs_into_dependencies ($config_h_path, @ins);

	  # Cannot define rebuild rules for filenames with shell variables.
	  next if (substitute_ac_subst_variables $config_h_path) =~ /\$/;

	  # Header defined in this directory.
	  my @files;
	  if (-f $config_h_path . '.top')
	    {
	      push (@files, "$cn_sans_dir.top");
	    }
	  if (-f $config_h_path . '.bot')
	    {
	      push (@files, "$cn_sans_dir.bot");
	    }

	  push_dist_common (@files);

	  # For now, acconfig.h can only appear in the top srcdir.
	  if (-f 'acconfig.h')
	    {
	      push (@files, '$(top_srcdir)/acconfig.h');
	    }

	  my $stamp = "${stamp_dir}stamp-h${hdr_index}";
	  $output_rules .=
	    file_contents ('remake-hdr',
			   new Automake::Location,
			   FILES            => "@files",
			   'FIRST-HDR'      => ($hdr_index == 1),
			   CONFIG_H         => $cn_sans_dir,
			   CONFIG_HIN       => $ins[0],
			   CONFIG_H_DEPS    => "@ins",
			   CONFIG_H_PATH    => $config_h_path,
			   STAMP            => "$stamp");

	  push @distclean_config, $cn_sans_dir, $stamp;
	}
    }

  $output_rules .= file_contents ('clean-hdr',
				  new Automake::Location,
				  FILES => "@distclean_config")
    if @distclean_config;

  # Distribute and define mkinstalldirs only if it is already present
  # in the package, for backward compatibility (some people may still
  # use $(mkinstalldirs)).
  # TODO: start warning about this in Automake 1.14, and have
  # TODO: Automake 2.0 drop it (and the mkinstalldirs script
  # TODO: as well).
  my $mkidpath = "$config_aux_dir/mkinstalldirs";
  if (-f $mkidpath)
    {
      # Use require_file so that any existing script gets updated
      # by --force-missing.
      require_conf_file ($mkidpath, FOREIGN, 'mkinstalldirs');
      define_variable ('mkinstalldirs',
		       "\$(SHELL) $am_config_aux_dir/mkinstalldirs", INTERNAL);
    }
  else
    {
      # Use $(install_sh), not $(MKDIR_P) because the latter requires
      # at least one argument, and $(mkinstalldirs) used to work
      # even without arguments (e.g. $(mkinstalldirs) $(conditional_dir)).
      define_variable ('mkinstalldirs', '$(install_sh) -d', INTERNAL);
    }

  reject_var ('CONFIG_HEADER',
	      "'CONFIG_HEADER' is an anachronism; now determined "
	      . "automatically\nfrom '$configure_ac'");

  my @config_h;
  foreach my $spec (@config_headers)
    {
      my ($out, @ins) = split_config_file_spec ($spec);
      # Generate CONFIG_HEADER define.
      if ($relative_dir eq dirname ($out))
	{
	  push @config_h, basename ($out);
	}
      else
	{
	  push @config_h, "\$(top_builddir)/$out";
	}
    }
  define_variable ("CONFIG_HEADER", "@config_h", INTERNAL)
    if @config_h;

  # Now look for other files in this directory which must be remade
  # by config.status, and generate rules for them.
  my @actual_other_files = ();
  # These get cleaned only in a VPATH build.
  my @actual_other_vpath_files = ();
  foreach my $lfile (@other_input_files)
    {
      my $file;
      my @inputs;
      if ($lfile =~ /^([^:]*):(.*)$/)
	{
	  # This is the ":" syntax of AC_OUTPUT.
	  $file = $1;
	  @inputs = split (':', $2);
	}
      else
	{
	  # Normal usage.
	  $file = $lfile;
	  @inputs = $file . '.in';
	}

      # Automake files should not be stored in here, but in %MAKE_LIST.
      prog_error ("$lfile in \@other_input_files\n"
		  . "\@other_input_files = (@other_input_files)")
	if -f $file . '.am';

      my $local = basename ($file);

      # We skip files that aren't in this directory.  However, if
      # the file's directory does not have a Makefile, and we are
      # currently doing '.', then we create a rule to rebuild the
      # file in the subdir.
      my $fd = dirname ($file);
      if ($fd ne $relative_dir)
	{
	  if ($relative_dir eq '.' && ! is_make_dir ($fd))
	    {
	      $local = $file;
	    }
	  else
	    {
	      next;
	    }
	}

      my @rewritten_inputs = rewrite_inputs_into_dependencies ($file, @inputs);

      # Cannot output rules for shell variables.
      next if (substitute_ac_subst_variables $local) =~ /\$/;

      my $condstr = '';
      my $cond = $ac_config_files_condition{$lfile};
      if (defined $cond)
        {
	  $condstr = $cond->subst_string;
	  Automake::Rule::define ($local, $configure_ac, RULE_AUTOMAKE, $cond,
				  $ac_config_files_location{$file});
        }
      $output_rules .= ($condstr . $local . ': '
			. '$(top_builddir)/config.status '
			. "@rewritten_inputs\n"
			. $condstr . "\t"
			. 'cd $(top_builddir) && '
			. '$(SHELL) ./config.status '
			. ($relative_dir eq '.' ? '' : '$(subdir)/')
			. '$@'
			. "\n");
      push (@actual_other_files, $local);
    }

  # For links we should clean destinations and distribute sources.
  foreach my $spec (@config_links)
    {
      my ($link, $file) = split /:/, $spec;
      # Some people do AC_CONFIG_LINKS($computed).  We only handle
      # the DEST:SRC form.
      next unless $file;
      my $where = $ac_config_files_location{$link};

      # Skip destinations that contain shell variables.
      if ((substitute_ac_subst_variables $link) !~ /\$/)
	{
	  # We skip links that aren't in this directory.  However, if
	  # the link's directory does not have a Makefile, and we are
	  # currently doing '.', then we add the link to CONFIG_CLEAN_FILES
	  # in '.'s Makefile.in.
	  my $local = basename ($link);
	  my $fd = dirname ($link);
	  if ($fd ne $relative_dir)
	    {
	      if ($relative_dir eq '.' && ! is_make_dir ($fd))
		{
		  $local = $link;
		}
	      else
		{
		  $local = undef;
		}
	    }
	  if ($file ne $link)
	    {
	      push @actual_other_files, $local if $local;
	    }
	  else
	    {
	      push @actual_other_vpath_files, $local if $local;
	    }
	}

      # Do not process sources that contain shell variables.
      if ((substitute_ac_subst_variables $file) !~ /\$/)
	{
	  my $fd = dirname ($file);

	  # We distribute files that are in this directory.
	  # At the top-level ('.') we also distribute files whose
	  # directory does not have a Makefile.
	  if (($fd eq $relative_dir)
	      || ($relative_dir eq '.' && ! is_make_dir ($fd)))
	    {
	      # The following will distribute $file as a side-effect when
	      # it is appropriate (i.e., when $file is not already an output).
	      # We do not need the result, just the side-effect.
	      rewrite_inputs_into_dependencies ($link, $file);
	    }
	}
    }

  # These files get removed by "make distclean".
  define_pretty_variable ('CONFIG_CLEAN_FILES', TRUE, INTERNAL,
			  @actual_other_files);
  define_pretty_variable ('CONFIG_CLEAN_VPATH_FILES', TRUE, INTERNAL,
			  @actual_other_vpath_files);
}

sub handle_headers ()
{
    my @r = am_install_var ('-defaultdist', 'header', 'HEADERS', 'include',
			    'oldinclude', 'pkginclude',
			    'noinst', 'check');
    foreach (@r)
    {
      next unless $_->[1] =~ /\..*$/;
      saw_extension ($&);
    }
}

sub handle_gettext ()
{
  return if ! $seen_gettext || $relative_dir ne '.';

  my $subdirs = var 'SUBDIRS';

  if (! $subdirs)
    {
      err_ac "AM_GNU_GETTEXT used but SUBDIRS not defined";
      return;
    }

  # Perform some sanity checks to help users get the right setup.
  # We disable these tests when po/ doesn't exist in order not to disallow
  # unusual gettext setups.
  #
  # Bruno Haible:
  # | The idea is:
  # |
  # |  1) If a package doesn't have a directory po/ at top level, it
  # |     will likely have multiple po/ directories in subpackages.
  # |
  # |  2) It is useful to warn for the absence of intl/ if AM_GNU_GETTEXT
  # |     is used without 'external'. It is also useful to warn for the
  # |     presence of intl/ if AM_GNU_GETTEXT([external]) is used. Both
  # |     warnings apply only to the usual layout of packages, therefore
  # |     they should both be disabled if no po/ directory is found at
  # |     top level.

  if (-d 'po')
    {
      my @subdirs = $subdirs->value_as_list_recursive;

      msg_var ('syntax', $subdirs,
	       "AM_GNU_GETTEXT used but 'po' not in SUBDIRS")
	if ! grep ($_ eq 'po', @subdirs);

      # intl/ is not required when AM_GNU_GETTEXT is called with the
      # 'external' option and AM_GNU_GETTEXT_INTL_SUBDIR is not called.
      msg_var ('syntax', $subdirs,
	       "AM_GNU_GETTEXT used but 'intl' not in SUBDIRS")
	if (! ($seen_gettext_external && ! $seen_gettext_intl)
	    && ! grep ($_ eq 'intl', @subdirs));

      # intl/ should not be used with AM_GNU_GETTEXT([external]), except
      # if AM_GNU_GETTEXT_INTL_SUBDIR is called.
      msg_var ('syntax', $subdirs,
	       "'intl' should not be in SUBDIRS when "
	       . "AM_GNU_GETTEXT([external]) is used")
	if ($seen_gettext_external && ! $seen_gettext_intl
	    && grep ($_ eq 'intl', @subdirs));
    }

  require_file ($ac_gettext_location, GNU, 'ABOUT-NLS');
}

# Emit makefile footer.
sub handle_footer ()
{
    reject_rule ('.SUFFIXES',
		 "use variable 'SUFFIXES', not target '.SUFFIXES'");

    # Note: AIX 4.1 /bin/make will fail if any suffix rule appears
    # before .SUFFIXES.  So we make sure that .SUFFIXES appears before
    # anything else, by sticking it right after the default: target.
    $output_header .= ".SUFFIXES:\n";
    my $suffixes = var 'SUFFIXES';
    my @suffixes = Automake::Rule::suffixes;
    if (@suffixes || $suffixes)
    {
	# Make sure SUFFIXES has unique elements.  Sort them to ensure
	# the output remains consistent.  However, $(SUFFIXES) is
	# always at the start of the list, unsorted.  This is done
	# because make will choose rules depending on the ordering of
	# suffixes, and this lets the user have some control.  Push
	# actual suffixes, and not $(SUFFIXES).  Some versions of make
	# do not like variable substitutions on the .SUFFIXES line.
	my @user_suffixes = ($suffixes
			     ? $suffixes->value_as_list_recursive : ());

	my %suffixes = map { $_ => 1 } @suffixes;
	delete @suffixes{@user_suffixes};

	$output_header .= (".SUFFIXES: "
			   . join (' ', @user_suffixes, sort keys %suffixes)
			   . "\n");
    }

    $output_trailer .= file_contents ('footer', new Automake::Location);
}


# Generate 'make install' rules.
sub handle_install ()
{
  $output_rules .= file_contents
    ('install',
     new Automake::Location,
     maybe_BUILT_SOURCES => (set_seen ('BUILT_SOURCES')
			     ? (" \$(BUILT_SOURCES)\n"
				. "\t\$(MAKE) \$(AM_MAKEFLAGS)")
			     : ''),
     'installdirs-local' => (user_phony_rule ('installdirs-local')
			     ? ' installdirs-local' : ''),
     am__installdirs => variable_value ('am__installdirs') || '');
}


# handle_all ($MAKEFILE)
#-----------------------
# Deal with 'all' and 'all-am'.
sub handle_all
{
    my ($makefile) = @_;

    # Output 'all-am'.

    # Put this at the beginning for the sake of non-GNU makes.  This
    # is still wrong if these makes can run parallel jobs.  But it is
    # right enough.
    unshift (@all, basename ($makefile));

    foreach my $spec (@config_headers)
      {
	my ($out, @ins) = split_config_file_spec ($spec);
	push (@all, basename ($out))
	  if dirname ($out) eq $relative_dir;
      }

    # Install 'all' hooks.
    push (@all, "all-local")
      if user_phony_rule "all-local";

    pretty_print_rule ("all-am:", "\t\t", @all);
    depend ('.PHONY', 'all-am', 'all');


    # Output 'all'.

    my @local_headers = ();
    push @local_headers, '$(BUILT_SOURCES)'
      if var ('BUILT_SOURCES');
    foreach my $spec (@config_headers)
      {
	my ($out, @ins) = split_config_file_spec ($spec);
	push @local_headers, basename ($out)
	  if dirname ($out) eq $relative_dir;
      }

    if (@local_headers)
      {
	# We need to make sure config.h is built before we recurse.
	# We also want to make sure that built sources are built
	# before any ordinary 'all' targets are run.  We can't do this
	# by changing the order of dependencies to the "all" because
	# that breaks when using parallel makes.  Instead we handle
	# things explicitly.
	$output_all .= ("all: @local_headers"
			. "\n\t"
			. '$(MAKE) $(AM_MAKEFLAGS) '
			. (var ('SUBDIRS') ? 'all-recursive' : 'all-am')
			. "\n\n");
        depend ('.MAKE', 'all');
      }
    else
      {
	$output_all .= "all: " . (var ('SUBDIRS')
				  ? 'all-recursive' : 'all-am') . "\n\n";
      }
}

# Generate helper targets for user-defined recursive targets, where needed.
sub handle_user_recursion ()
{
  return unless @extra_recursive_targets;

  define_pretty_variable ('am__extra_recursive_targets', TRUE, INTERNAL,
                          map { "$_-recursive" } @extra_recursive_targets);
  my $aux = var ('SUBDIRS') ? 'recursive' : 'am';
  foreach my $target (@extra_recursive_targets)
    {
      # This allows the default target's rules to be overridden in
      # Makefile.am.
      user_phony_rule ($target);
      depend ("$target", "$target-$aux");
      depend ("$target-am", "$target-local");
      # Every user-defined recursive target 'foo' *must* have a valid
      # associated 'foo-local' rule; we define it as an empty rule by
      # default, so that the user can transparently extend it in his
      # own Makefile.am.
      pretty_print_rule ("$target-local:", '', '');
      # $target-recursive might as well be undefined, so do not add
      # it here; it's taken care of in subdirs.am anyway.
      depend (".PHONY", "$target-am", "$target-local");
    }
}


# Handle check merge target specially.
sub do_check_merge_target ()
{
  # Include user-defined local form of target.
  push @check_tests, 'check-local'
    if user_phony_rule 'check-local';

  # The check target must depend on the local equivalent of
  # 'all', to ensure all the primary targets are built.  Then it
  # must build the local check rules.
  $output_rules .= "check-am: all-am\n";
  if (@check)
    {
      pretty_print_rule ("\t\$(MAKE) \$(AM_MAKEFLAGS)", "\t  ", @check);
      depend ('.MAKE', 'check-am');
    }

  if (@check_tests)
    {
      pretty_print_rule ("\t\$(MAKE) \$(AM_MAKEFLAGS)", "\t  ",
			 @check_tests);
      depend ('.MAKE', 'check-am');
    }

  depend '.PHONY', 'check', 'check-am';
  # Handle recursion.  We have to honor BUILT_SOURCES like for 'all:'.
  $output_rules .= ("check: "
		    . (var ('BUILT_SOURCES')
		       ? "\$(BUILT_SOURCES)\n\t\$(MAKE) \$(AM_MAKEFLAGS) "
		       : '')
		    . (var ('SUBDIRS') ? 'check-recursive' : 'check-am')
		    . "\n");
  depend ('.MAKE', 'check')
    if var ('BUILT_SOURCES');
}

# Handle all 'clean' targets.
sub handle_clean
{
  my ($makefile) = @_;

  # Clean the files listed in user variables if they exist.
  $clean_files{'$(MOSTLYCLEANFILES)'} = MOSTLY_CLEAN
    if var ('MOSTLYCLEANFILES');
  $clean_files{'$(CLEANFILES)'} = CLEAN
    if var ('CLEANFILES');
  $clean_files{'$(DISTCLEANFILES)'} = DIST_CLEAN
    if var ('DISTCLEANFILES');
  $clean_files{'$(MAINTAINERCLEANFILES)'} = MAINTAINER_CLEAN
    if var ('MAINTAINERCLEANFILES');

  # Built sources are automatically removed by maintainer-clean.
  $clean_files{'$(BUILT_SOURCES)'} = MAINTAINER_CLEAN
    if var ('BUILT_SOURCES');

  # Compute a list of "rm"s to run for each target.
  my %rms = (MOSTLY_CLEAN, [],
	     CLEAN, [],
	     DIST_CLEAN, [],
	     MAINTAINER_CLEAN, []);

  foreach my $file (keys %clean_files)
    {
      my $when = $clean_files{$file};
      prog_error 'invalid entry in %clean_files'
	unless exists $rms{$when};

      my $rm = "rm -f $file";
      # If file is a variable, make sure when don't call 'rm -f' without args.
      $rm ="test -z \"$file\" || $rm"
	if ($file =~ /^\s*\$(\(.*\)|\{.*\})\s*$/);

      push @{$rms{$when}}, "\t-$rm\n";
    }

  $output_rules .= file_contents
    ('clean',
     new Automake::Location,
     MOSTLYCLEAN_RMS      => join ('', sort @{$rms{&MOSTLY_CLEAN}}),
     CLEAN_RMS            => join ('', sort @{$rms{&CLEAN}}),
     DISTCLEAN_RMS        => join ('', sort @{$rms{&DIST_CLEAN}}),
     MAINTAINER_CLEAN_RMS => join ('', sort @{$rms{&MAINTAINER_CLEAN}}),
     MAKEFILE             => basename $makefile,
     );
}


# Subroutine for handle_factored_dependencies() to let '.PHONY' and
# other '.TARGETS' be last.  This is meant to be used as a comparison
# subroutine passed to the sort built-int.
sub target_cmp
{
  return 0 if $a eq $b;

  my $a1 = substr ($a, 0, 1);
  my $b1 = substr ($b, 0, 1);
  if ($a1 ne $b1)
    {
      return -1 if $b1 eq '.';
      return 1 if $a1 eq '.';
    }
  return $a cmp $b;
}


# Handle everything related to gathered targets.
sub handle_factored_dependencies ()
{
  # Reject bad hooks.
  foreach my $utarg ('uninstall-data-local', 'uninstall-data-hook',
		     'uninstall-exec-local', 'uninstall-exec-hook',
		     'uninstall-dvi-local',
		     'uninstall-html-local',
		     'uninstall-info-local',
		     'uninstall-pdf-local',
		     'uninstall-ps-local')
    {
      my $x = $utarg;
      $x =~ s/-.*-/-/;
      reject_rule ($utarg, "use '$x', not '$utarg'");
    }

  reject_rule ('install-local',
	       "use 'install-data-local' or 'install-exec-local', "
	       . "not 'install-local'");

  reject_rule ('install-hook',
	       "use 'install-data-hook' or 'install-exec-hook', "
	       . "not 'install-hook'");

  # Install the -local hooks.
  foreach (keys %dependencies)
    {
      # Hooks are installed on the -am targets.
      s/-am$// or next;
      depend ("$_-am", "$_-local")
	if user_phony_rule "$_-local";
    }

  # Install the -hook hooks.
  # FIXME: Why not be as liberal as we are with -local hooks?
  foreach ('install-exec', 'install-data', 'uninstall')
    {
      if (user_phony_rule "$_-hook")
	{
	  depend ('.MAKE', "$_-am");
	  register_action("$_-am",
			  ("\t\@\$(NORMAL_INSTALL)\n"
			   . "\t\$(MAKE) \$(AM_MAKEFLAGS) $_-hook"));
	}
    }

  # All the required targets are phony.
  depend ('.PHONY', keys %required_targets);

  # Actually output gathered targets.
  foreach (sort target_cmp keys %dependencies)
    {
      # If there is nothing about this guy, skip it.
      next
	unless (@{$dependencies{$_}}
		|| $actions{$_}
		|| $required_targets{$_});

      # Define gathered targets in undefined conditions.
      # FIXME: Right now we must handle .PHONY as an exception,
      # because people write things like
      #    .PHONY: myphonytarget
      # to append dependencies.  This would not work if Automake
      # refrained from defining its own .PHONY target as it does
      # with other overridden targets.
      # Likewise for '.MAKE' and '.PRECIOUS'.
      my @undefined_conds = (TRUE,);
      if ($_ ne '.PHONY' && $_ ne '.MAKE' && $_ ne '.PRECIOUS')
	{
	  @undefined_conds =
	    Automake::Rule::define ($_, 'internal',
				    RULE_AUTOMAKE, TRUE, INTERNAL);
	}
      my @uniq_deps = uniq (sort @{$dependencies{$_}});
      foreach my $cond (@undefined_conds)
	{
	  my $condstr = $cond->subst_string;
	  pretty_print_rule ("$condstr$_:", "$condstr\t", @uniq_deps);
	  $output_rules .= $actions{$_} if defined $actions{$_};
	  $output_rules .= "\n";
	}
    }
}


sub handle_tests_dejagnu ()
{
    push (@check_tests, 'check-DEJAGNU');
    $output_rules .= file_contents ('dejagnu', new Automake::Location);
}

# handle_per_suffix_test ($TEST_SUFFIX, [%TRANSFORM])
#----------------------------------------------------
sub handle_per_suffix_test
{
  my ($test_suffix, %transform) = @_;
  my ($pfx, $generic, $am_exeext);
  if ($test_suffix eq '')
    {
      $pfx = '';
      $generic = 0;
      $am_exeext = 'FALSE';
    }
  else
    {
      prog_error ("test suffix '$test_suffix' lacks leading dot")
        unless $test_suffix =~ m/^\.(.*)/;
      $pfx = uc ($1) . '_';
      $generic = 1;
      $am_exeext = exists $configure_vars{'EXEEXT'} ? 'am__EXEEXT'
                                                    : 'FALSE';
    }
  # The "test driver" program, deputed to handle tests protocol used by
  # test scripts.  By default, it's assumed that no protocol is used, so
  # we fall back to the old behaviour, implemented by the 'test-driver'
  # auxiliary script.
  if (! var "${pfx}LOG_DRIVER")
    {
      require_conf_file ("parallel-tests", FOREIGN, 'test-driver');
      define_variable ("${pfx}LOG_DRIVER",
                       "\$(SHELL) $am_config_aux_dir/test-driver",
                       INTERNAL);
    }
  my $driver = '$(' . $pfx . 'LOG_DRIVER)';
  my $driver_flags = '$(AM_' . $pfx . 'LOG_DRIVER_FLAGS)'
                       . ' $(' . $pfx . 'LOG_DRIVER_FLAGS)';
  my $compile = "${pfx}LOG_COMPILE";
  define_variable ($compile,
                   '$(' . $pfx . 'LOG_COMPILER)'
                      . ' $(AM_' .  $pfx . 'LOG_FLAGS)'
                      . ' $(' . $pfx . 'LOG_FLAGS)',
                     INTERNAL);
  $output_rules .= file_contents ('check2', new Automake::Location,
                                   GENERIC => $generic,
                                   DRIVER => $driver,
                                   DRIVER_FLAGS => $driver_flags,
                                   COMPILE => '$(' . $compile . ')',
                                   EXT => $test_suffix,
                                   am__EXEEXT => $am_exeext,
                                   %transform);
}

# is_valid_test_extension ($EXT)
# ------------------------------
# Return true if $EXT can appear in $(TEST_EXTENSIONS), return false
# otherwise.
sub is_valid_test_extension
{
  my $ext = shift;
  return 1
    if ($ext =~ /^\.[a-zA-Z_][a-zA-Z0-9_]*$/);
  return 1
    if (exists $configure_vars{'EXEEXT'} && $ext eq subst ('EXEEXT'));
  return 0;
}


sub handle_tests ()
{
  if (option 'dejagnu')
    {
      handle_tests_dejagnu;
    }
  else
    {
      foreach my $c ('DEJATOOL', 'RUNTEST', 'RUNTESTFLAGS')
	{
	  reject_var ($c, "'$c' defined but 'dejagnu' not in "
		      . "'AUTOMAKE_OPTIONS'");
	}
    }

  if (var ('TESTS'))
    {
      push (@check_tests, 'check-TESTS');
      my $check_deps = "@check";
      $output_rules .= file_contents ('check', new Automake::Location,
                                      SERIAL_TESTS => !! option 'serial-tests',
                                      CHECK_DEPS => $check_deps);

      # Tests that are known programs should have $(EXEEXT) appended.
      # For matching purposes, we need to adjust XFAIL_TESTS as well.
      append_exeext { exists $known_programs{$_[0]} } 'TESTS';
      append_exeext { exists $known_programs{$_[0]} } 'XFAIL_TESTS'
	if (var ('XFAIL_TESTS'));

      if (! option 'serial-tests')
        {
	  define_variable ('TEST_SUITE_LOG', 'test-suite.log', INTERNAL);
	  my $suff = '.test';
	  my $at_exeext = '';
	  my $handle_exeext = exists $configure_vars{'EXEEXT'};
	  if ($handle_exeext)
	    {
	      $at_exeext = subst ('EXEEXT');
	      $suff = $at_exeext  . ' ' . $suff;
	    }
          if (! var 'TEST_EXTENSIONS')
            {
	      define_variable ('TEST_EXTENSIONS', $suff, INTERNAL);
            }
          my $var = var 'TEST_EXTENSIONS';
          # Currently, we are not able to deal with conditional contents
          # in TEST_EXTENSIONS.
          if ($var->has_conditional_contents)
           {
	     msg_var 'unsupported', $var,
                     "'TEST_EXTENSIONS' cannot have conditional contents";
           }
	  my @test_suffixes = $var->value_as_list_recursive;
          if ((my @invalid_test_suffixes =
                  grep { !is_valid_test_extension $_ } @test_suffixes) > 0)
            {
              error $var->rdef (TRUE)->location,
                    "invalid test extensions: @invalid_test_suffixes";
            }
          @test_suffixes = grep { is_valid_test_extension $_ } @test_suffixes;
	  if ($handle_exeext)
	    {
	      unshift (@test_suffixes, $at_exeext)
	        unless $test_suffixes[0] eq $at_exeext;
	    }
	  unshift (@test_suffixes, '');

	  transform_variable_recursively
	    ('TESTS', 'TEST_LOGS', 'am__testlogs', 1, INTERNAL,
	      sub {
	        my ($subvar, $val, $cond, $full_cond) = @_;
		my $obj = $val;
		return $obj
		  if $val =~ /^\@.*\@$/;
		$obj =~ s/\$\(EXEEXT\)$//o;

		if ($val =~ /(\$\((top_)?srcdir\))\//o)
		  {
		    msg ('error', $subvar->rdef ($cond)->location,
			 "using '$1' in TESTS is currently broken: '$val'");
		  }

		foreach my $test_suffix (@test_suffixes)
		  {
		    next
		      if $test_suffix eq $at_exeext || $test_suffix eq '';
		    return substr ($obj, 0, length ($obj) - length ($test_suffix)) . '.log'
		      if substr ($obj, - length ($test_suffix)) eq $test_suffix;
		  }
		my $base = $obj;
		$obj .= '.log';
                handle_per_suffix_test ('',
                                        OBJ => $obj,
                                        BASE => $base,
                                        SOURCE => $val);
	        return $obj;
	      });

	  my $nhelper=1;
	  my $prev = 'TESTS';
	  my $post = '';
	  my $last_suffix = $test_suffixes[$#test_suffixes];
	  my $cur = '';
	  foreach my $test_suffix (@test_suffixes)
	    {
	      if ($test_suffix eq $last_suffix)
	        {
		  $cur = 'TEST_LOGS';
		}
	      else
	        {
		  $cur = 'am__test_logs' . $nhelper;
		}
	      define_variable ($cur,
		'$(' . $prev . ':' . $test_suffix . $post . '=.log)', INTERNAL);
	      $post = '.log';
	      $prev = $cur;
	      $nhelper++;
	      if ($test_suffix ne $at_exeext && $test_suffix ne '')
	        {
                  handle_per_suffix_test ($test_suffix,
                                          OBJ => '',
                                          BASE => '$*',
                                          SOURCE => '$<');
	        }
	    }
	  $clean_files{'$(TEST_LOGS)'} = MOSTLY_CLEAN;
	  $clean_files{'$(TEST_LOGS:.log=.trs)'} = MOSTLY_CLEAN;
	  $clean_files{'$(TEST_SUITE_LOG)'} = MOSTLY_CLEAN;
	}
    }
}

sub handle_emacs_lisp ()
{
  my @elfiles = am_install_var ('-candist', 'lisp', 'LISP',
                                'lisp', 'noinst');

  return if ! @elfiles;

  define_pretty_variable ('am__ELFILES', TRUE, INTERNAL,
			  map { $_->[1] } @elfiles);
  define_pretty_variable ('am__ELCFILES', TRUE, INTERNAL,
			  '$(am__ELFILES:.el=.elc)');
  # This one can be overridden by users.
  define_pretty_variable ('ELCFILES', TRUE, INTERNAL, '$(LISP:.el=.elc)');

  push @all, '$(ELCFILES)';

  require_variables ($elfiles[0][0], "Emacs Lisp sources seen", TRUE,
		     'EMACS', 'lispdir');
}

sub handle_python ()
{
  my @pyfiles = am_install_var ('-defaultdist', 'python', 'PYTHON',
                                'noinst');
  return if ! @pyfiles;

  require_variables ($pyfiles[0][0], "Python sources seen", TRUE, 'PYTHON');
  require_conf_file ($pyfiles[0][0], FOREIGN, 'py-compile');
  define_variable ('py_compile', "$am_config_aux_dir/py-compile", INTERNAL);
}

sub handle_java ()
{
    my @sourcelist = am_install_var ('-candist',
                                     'java', 'JAVA',
                                     'noinst', 'check');
    return if ! @sourcelist;

    my @prefixes = am_primary_prefixes ('JAVA', 1,
				        'noinst', 'check');

    my $dir;
    my @java_sources = ();
    foreach my $prefix (@prefixes)
      {
        (my $curs = $prefix) =~ s/^(?:nobase_)?(?:dist_|nodist_)?//;

	next
	  if $curs eq 'EXTRA';

        push @java_sources, '$(' . $prefix . '_JAVA' . ')';

	if (defined $dir)
	  {
	    err_var "${curs}_JAVA", "multiple _JAVA primaries in use"
	     unless $curs eq $dir;
	  }

	$dir = $curs;
      }

    define_pretty_variable ('am__java_sources', TRUE, INTERNAL,
                            "@java_sources");

    if ($dir eq 'check')
      {
        push (@check, "class$dir.stamp");
      }
    else
      {
        push (@all, "class$dir.stamp");
      }
}


sub handle_minor_options ()
{
  if (option 'readme-alpha')
    {
      if ($relative_dir eq '.')
	{
	  if ($package_version !~ /^$GNITS_VERSION_PATTERN$/)
	    {
	      msg ('error-gnits', $package_version_location,
		   "version '$package_version' doesn't follow " .
		   "Gnits standards");
	    }
	  if (defined $1 && -f 'README-alpha')
	    {
	      # This means we have an alpha release.  See
	      # GNITS_VERSION_PATTERN for details.
	      push_dist_common ('README-alpha');
	    }
	}
    }
}

################################################################

# ($OUTPUT, @INPUTS)
# split_config_file_spec ($SPEC)
# ------------------------------
# Decode the Autoconf syntax for config files (files, headers, links
# etc.).
sub split_config_file_spec
{
  my ($spec) = @_;
  my ($output, @inputs) = split (/:/, $spec);

  push @inputs, "$output.in"
    unless @inputs;

  return ($output, @inputs);
}

# $input
# locate_am (@POSSIBLE_SOURCES)
# -----------------------------
# AC_CONFIG_FILES allow specifications such as Makefile:top.in:mid.in:bot.in
# This functions returns the first *.in file for which a *.am exists.
# It returns undef otherwise.
sub locate_am
{
  my (@rest) = @_;
  my $input;
  foreach my $file (@rest)
    {
      if (($file =~ /^(.*)\.in$/) && -f "$1.am")
	{
	  $input = $file;
	  last;
	}
    }
  return $input;
}

my %make_list;

# scan_autoconf_config_files ($WHERE, $CONFIG-FILES)
# --------------------------------------------------
# Study $CONFIG-FILES which is the first argument to AC_CONFIG_FILES
# (or AC_OUTPUT).
sub scan_autoconf_config_files
{
  my ($where, $config_files) = @_;

  # Look at potential Makefile.am's.
  foreach (split ' ', $config_files)
    {
      # Must skip empty string for Perl 4.
      next if $_ eq "\\" || $_ eq '';

      # Handle $local:$input syntax.
      my ($local, @rest) = split (/:/);
      @rest = ("$local.in",) unless @rest;
      # Keep in sync with test 'conffile-leading-dot.sh'.
      msg ('unsupported', $where,
           "omit leading './' from config file names such as '$local';"
           . "\nremake rules might be subtly broken otherwise")
        if ($local =~ /^\.\//);
      my $input = locate_am @rest;
      if ($input)
	{
	  # We have a file that automake should generate.
	  $make_list{$input} = join (':', ($local, @rest));
	}
      else
	{
	  # We have a file that automake should cause to be
	  # rebuilt, but shouldn't generate itself.
	  push (@other_input_files, $_);
	}
      $ac_config_files_location{$local} = $where;
      $ac_config_files_condition{$local} =
        new Automake::Condition (@cond_stack)
          if (@cond_stack);
    }
}


sub scan_autoconf_traces
{
  my ($filename) = @_;

  # Macros to trace, with their minimal number of arguments.
  #
  # IMPORTANT: If you add a macro here, you should also add this macro
  # =========  to Automake-preselection in autoconf/lib/autom4te.in.
  my %traced = (
		AC_CANONICAL_BUILD => 0,
		AC_CANONICAL_HOST => 0,
		AC_CANONICAL_TARGET => 0,
		AC_CONFIG_AUX_DIR => 1,
		AC_CONFIG_FILES => 1,
		AC_CONFIG_HEADERS => 1,
		AC_CONFIG_LIBOBJ_DIR => 1,
		AC_CONFIG_LINKS => 1,
		AC_FC_SRCEXT => 1,
		AC_INIT => 0,
		AC_LIBSOURCE => 1,
		AC_REQUIRE_AUX_FILE => 1,
		AC_SUBST_TRACE => 1,
		AM_AUTOMAKE_VERSION => 1,
                AM_PROG_MKDIR_P => 0,
		AM_CONDITIONAL => 2,
		AM_EXTRA_RECURSIVE_TARGETS => 1,
		AM_GNU_GETTEXT => 0,
		AM_GNU_GETTEXT_INTL_SUBDIR => 0,
		AM_INIT_AUTOMAKE => 0,
		AM_MAINTAINER_MODE => 0,
		AM_PROG_AR => 0,
		_AM_SUBST_NOTMAKE => 1,
		_AM_COND_IF => 1,
		_AM_COND_ELSE => 1,
		_AM_COND_ENDIF => 1,
		LT_SUPPORTED_TAG => 1,
		_LT_AC_TAGCONFIG => 0,
		m4_include => 1,
		m4_sinclude => 1,
		sinclude => 1,
	      );

  my $traces = ($ENV{AUTOCONF} || 'autoconf') . " ";

  # Use a separator unlikely to be used, not ':', the default, which
  # has a precise meaning for AC_CONFIG_FILES and so on.
  $traces .= join (' ',
		   map { "--trace=$_" . ':\$f:\$l::\$d::\$n::\${::}%' }
		   (keys %traced));

  my $tracefh = new Automake::XFile ("$traces $filename |");
  verb "reading $traces";

  @cond_stack = ();
  my $where;

  while ($_ = $tracefh->getline)
    {
      chomp;
      my ($here, $depth, @args) = split (/::/);
      $where = new Automake::Location $here;
      my $macro = $args[0];

      prog_error ("unrequested trace '$macro'")
	unless exists $traced{$macro};

      # Skip and diagnose malformed calls.
      if ($#args < $traced{$macro})
	{
	  msg ('syntax', $where, "not enough arguments for $macro");
	  next;
	}

      # Alphabetical ordering please.
      if ($macro eq 'AC_CANONICAL_BUILD')
	{
	  if ($seen_canonical <= AC_CANONICAL_BUILD)
	    {
	      $seen_canonical = AC_CANONICAL_BUILD;
	    }
	}
      elsif ($macro eq 'AC_CANONICAL_HOST')
	{
	  if ($seen_canonical <= AC_CANONICAL_HOST)
	    {
	      $seen_canonical = AC_CANONICAL_HOST;
	    }
	}
      elsif ($macro eq 'AC_CANONICAL_TARGET')
	{
	  $seen_canonical = AC_CANONICAL_TARGET;
	}
      elsif ($macro eq 'AC_CONFIG_AUX_DIR')
	{
	  if ($seen_init_automake)
	    {
	      error ($where, "AC_CONFIG_AUX_DIR must be called before "
		     . "AM_INIT_AUTOMAKE ...", partial => 1);
	      error ($seen_init_automake, "... AM_INIT_AUTOMAKE called here");
	    }
	  $config_aux_dir = $args[1];
	  $config_aux_dir_set_in_configure_ac = 1;
	  check_directory ($config_aux_dir, $where);
	}
      elsif ($macro eq 'AC_CONFIG_FILES')
	{
	  # Look at potential Makefile.am's.
	  scan_autoconf_config_files ($where, $args[1]);
	}
      elsif ($macro eq 'AC_CONFIG_HEADERS')
	{
	  foreach my $spec (split (' ', $args[1]))
	    {
	      my ($dest, @src) = split (':', $spec);
	      $ac_config_files_location{$dest} = $where;
	      push @config_headers, $spec;
	    }
	}
      elsif ($macro eq 'AC_CONFIG_LIBOBJ_DIR')
	{
	  $config_libobj_dir = $args[1];
	  check_directory ($config_libobj_dir, $where);
	}
      elsif ($macro eq 'AC_CONFIG_LINKS')
	{
	  foreach my $spec (split (' ', $args[1]))
	    {
	      my ($dest, $src) = split (':', $spec);
	      $ac_config_files_location{$dest} = $where;
	      push @config_links, $spec;
	    }
	}
      elsif ($macro eq 'AC_FC_SRCEXT')
	{
	  my $suffix = $args[1];
	  # These flags are used as %SOURCEFLAG% in depend2.am,
	  # where the trailing space is important.
	  $sourceflags{'.' . $suffix} = '$(FCFLAGS_' . $suffix . ') '
	    if ($suffix eq 'f90' || $suffix eq 'f95' || $suffix eq 'f03' || $suffix eq 'f08');
	}
      elsif ($macro eq 'AC_INIT')
	{
	  if (defined $args[2])
	    {
	      $package_version = $args[2];
	      $package_version_location = $where;
	    }
	}
      elsif ($macro eq 'AC_LIBSOURCE')
	{
	  $libsources{$args[1]} = $here;
	}
      elsif ($macro eq 'AC_REQUIRE_AUX_FILE')
	{
	  # Only remember the first time a file is required.
	  $required_aux_file{$args[1]} = $where
	    unless exists $required_aux_file{$args[1]};
	}
      elsif ($macro eq 'AC_SUBST_TRACE')
	{
	  # Just check for alphanumeric in AC_SUBST_TRACE.  If you do
	  # AC_SUBST(5), then too bad.
	  $configure_vars{$args[1]} = $where
	    if $args[1] =~ /^\w+$/;
	}
      elsif ($macro eq 'AM_AUTOMAKE_VERSION')
	{
	  error ($where,
		 "version mismatch.  This is Automake $VERSION,\n" .
		 "but the definition used by this AM_INIT_AUTOMAKE\n" .
		 "comes from Automake $args[1].  You should recreate\n" .
		 "aclocal.m4 with aclocal and run automake again.\n",
		 # $? = 63 is used to indicate version mismatch to missing.
		 exit_code => 63)
	    if $VERSION ne $args[1];

	  $seen_automake_version = 1;
	}
      elsif ($macro eq 'AM_PROG_MKDIR_P')
	{
	  msg 'obsolete', $where, <<'EOF';
The 'AM_PROG_MKDIR_P' macro is deprecated, and its use is discouraged.
You should use the Autoconf-provided 'AC_PROG_MKDIR_P' macro instead,
and use '$(MKDIR_P)' instead of '$(mkdir_p)'in your Makefile.am files.
EOF
	}
      elsif ($macro eq 'AM_CONDITIONAL')
	{
	  $configure_cond{$args[1]} = $where;
	}
      elsif ($macro eq 'AM_EXTRA_RECURSIVE_TARGETS')
	{
          # Empty leading/trailing fields might be produced by split,
          # hence the grep is really needed.
          push @extra_recursive_targets,
               grep (/./, (split /\s+/, $args[1]));
	}
      elsif ($macro eq 'AM_GNU_GETTEXT')
	{
	  $seen_gettext = $where;
	  $ac_gettext_location = $where;
	  $seen_gettext_external = grep ($_ eq 'external', @args);
	}
      elsif ($macro eq 'AM_GNU_GETTEXT_INTL_SUBDIR')
	{
	  $seen_gettext_intl = $where;
	}
      elsif ($macro eq 'AM_INIT_AUTOMAKE')
	{
	  $seen_init_automake = $where;
	  if (defined $args[2])
	    {
              msg 'obsolete', $where, <<'EOF';
AM_INIT_AUTOMAKE: two- and three-arguments forms are deprecated.  For more info, see:
https://www.gnu.org/software/automake/manual/automake.html#Modernize-AM_005fINIT_005fAUTOMAKE-invocation
EOF
	      $package_version = $args[2];
	      $package_version_location = $where;
	    }
	  elsif (defined $args[1])
	    {
	      my @opts = split (' ', $args[1]);
	      @opts = map { { option => $_, where => $where } } @opts;
	      exit $exit_code unless process_global_option_list (@opts);
	    }
	}
      elsif ($macro eq 'AM_MAINTAINER_MODE')
	{
	  $seen_maint_mode = $where;
	}
      elsif ($macro eq 'AM_PROG_AR')
	{
	  $seen_ar = $where;
	}
      elsif ($macro eq '_AM_COND_IF')
        {
	  cond_stack_if ('', $args[1], $where);
	  error ($where, "missing m4 quoting, macro depth $depth")
	    if ($depth != 1);
	}
      elsif ($macro eq '_AM_COND_ELSE')
        {
	  cond_stack_else ('!', $args[1], $where);
	  error ($where, "missing m4 quoting, macro depth $depth")
	    if ($depth != 1);
	}
      elsif ($macro eq '_AM_COND_ENDIF')
        {
	  cond_stack_endif (undef, undef, $where);
	  error ($where, "missing m4 quoting, macro depth $depth")
	    if ($depth != 1);
	}
      elsif ($macro eq '_AM_SUBST_NOTMAKE')
	{
	  $ignored_configure_vars{$args[1]} = $where;
	}
      elsif ($macro eq 'm4_include'
	     || $macro eq 'm4_sinclude'
	     || $macro eq 'sinclude')
	{
	  # Skip missing 'sinclude'd files.
	  next if $macro ne 'm4_include' && ! -f $args[1];

	  # Some modified versions of Autoconf don't use
	  # frozen files.  Consequently it's possible that we see all
	  # m4_include's performed during Autoconf's startup.
	  # Obviously we don't want to distribute Autoconf's files
	  # so we skip absolute filenames here.
	  push @configure_deps, '$(top_srcdir)/' . $args[1]
	    unless $here =~ m,^(?:\w:)?[\\/],;
	  # Keep track of the greatest timestamp.
	  if (-e $args[1])
	    {
	      my $mtime = mtime $args[1];
	      $configure_deps_greatest_timestamp = $mtime
		if $mtime > $configure_deps_greatest_timestamp;
	    }
	}
      elsif ($macro eq 'LT_SUPPORTED_TAG')
	{
	  $libtool_tags{$args[1]} = 1;
	  $libtool_new_api = 1;
	}
      elsif ($macro eq '_LT_AC_TAGCONFIG')
	{
	  # _LT_AC_TAGCONFIG is an old macro present in Libtool 1.5.
	  # We use it to detect whether tags are supported.  Our
	  # preferred interface is LT_SUPPORTED_TAG, but it was
	  # introduced in Libtool 1.6.
	  if (0 == keys %libtool_tags)
	    {
	      # Hardcode the tags supported by Libtool 1.5.
	      %libtool_tags = (CC => 1, CXX => 1, GCJ => 1, F77 => 1);
	    }
	}
    }

  error ($where, "condition stack not properly closed")
    if (@cond_stack);

  $tracefh->close;
}


# Check whether we use 'configure.ac' or 'configure.in'.
# Scan it (and possibly 'aclocal.m4') for interesting things.
# We must scan aclocal.m4 because there might be AC_SUBSTs and such there.
sub scan_autoconf_files ()
{
  # Reinitialize libsources here.  This isn't really necessary,
  # since we currently assume there is only one configure.ac.  But
  # that won't always be the case.
  %libsources = ();

  # Keep track of the youngest configure dependency.
  $configure_deps_greatest_timestamp = mtime $configure_ac;
  if (-e 'aclocal.m4')
    {
      my $mtime = mtime 'aclocal.m4';
      $configure_deps_greatest_timestamp = $mtime
	if $mtime > $configure_deps_greatest_timestamp;
    }

  scan_autoconf_traces ($configure_ac);

  @configure_input_files = sort keys %make_list;
  # Set input and output files if not specified by user.
  if (! @input_files)
    {
      @input_files = @configure_input_files;
      %output_files = %make_list;
    }


  if (! $seen_init_automake)
    {
      err_ac ("no proper invocation of AM_INIT_AUTOMAKE was found.\nYou "
	      . "should verify that $configure_ac invokes AM_INIT_AUTOMAKE,"
	      . "\nthat aclocal.m4 is present in the top-level directory,\n"
	      . "and that aclocal.m4 was recently regenerated "
	      . "(using aclocal)");
    }
  else
    {
      if (! $seen_automake_version)
	{
	  if (-f 'aclocal.m4')
	    {
	      error ($seen_init_automake,
		     "your implementation of AM_INIT_AUTOMAKE comes from " .
		     "an\nold Automake version.  You should recreate " .
		     "aclocal.m4\nwith aclocal and run automake again",
		     # $? = 63 is used to indicate version mismatch to missing.
		     exit_code => 63);
	    }
	  else
	    {
	      error ($seen_init_automake,
		     "no proper implementation of AM_INIT_AUTOMAKE was " .
		     "found,\nprobably because aclocal.m4 is missing.\n" .
		     "You should run aclocal to create this file, then\n" .
		     "run automake again");
	    }
	}
    }

  locate_aux_dir ();

  # Look for some files we need.  Always check for these.  This
  # check must be done for every run, even those where we are only
  # looking at a subdir Makefile.  We must set relative_dir for
  # push_required_file to work.
  # Sort the files for stable verbose output.
  $relative_dir = '.';
  foreach my $file (sort keys %required_aux_file)
    {
      require_conf_file ($required_aux_file{$file}->get, FOREIGN, $file)
    }
  err_am "'install.sh' is an anachronism; use 'install-sh' instead"
    if -f $config_aux_dir . '/install.sh';

  # Preserve dist_common for later.
  @configure_dist_common = @dist_common;
}

################################################################

# Do any extra checking for GNU standards.
sub check_gnu_standards ()
{
  if ($relative_dir eq '.')
    {
      # In top level (or only) directory.
      require_file ("$am_file.am", GNU,
		    qw/INSTALL NEWS README AUTHORS ChangeLog/);

      # Accept one of these three licenses; default to COPYING.
      # Make sure we do not overwrite an existing license.
      my $license;
      foreach (qw /COPYING COPYING.LIB COPYING.LESSER/)
	{
	  if (-f $_)
	    {
	      $license = $_;
	      last;
	    }
	}
      require_file ("$am_file.am", GNU, 'COPYING')
	unless $license;
    }

  for my $opt ('no-installman', 'no-installinfo')
    {
      msg ('error-gnu', option $opt,
	   "option '$opt' disallowed by GNU standards")
	if option $opt;
    }
}

# Do any extra checking for GNITS standards.
sub check_gnits_standards ()
{
  if ($relative_dir eq '.')
    {
      # In top level (or only) directory.
      require_file ("$am_file.am", GNITS, 'THANKS');
    }
}

################################################################
#
# Functions to handle files of each language.

# Each 'lang_X_rewrite($DIRECTORY, $BASE, $EXT)' function follows a
# simple formula: Return value is LANG_SUBDIR if the resulting object
# file should be in a subdir if the source file is, LANG_PROCESS if
# file is to be dealt with, LANG_IGNORE otherwise.

# Much of the actual processing is handled in
# handle_single_transform.  These functions exist so that
# auxiliary information can be recorded for a later cleanup pass.
# Note that the calls to these functions are computed, so don't bother
# searching for their precise names in the source.

# This is just a convenience function that can be used to determine
# when a subdir object should be used.
sub lang_sub_obj ()
{
    return option 'subdir-objects' ? LANG_SUBDIR : LANG_PROCESS;
}

# Rewrite a single header file.
sub lang_header_rewrite
{
    # Header files are simply ignored.
    return LANG_IGNORE;
}

# Rewrite a single Vala source file.
sub lang_vala_rewrite
{
    my ($directory, $base, $ext) = @_;

    (my $newext = $ext) =~ s/vala$/c/;
    return (LANG_SUBDIR, $newext);
}

# Rewrite a single yacc/yacc++ file.
sub lang_yacc_rewrite
{
    my ($directory, $base, $ext) = @_;

    my $r = lang_sub_obj;
    (my $newext = $ext) =~ tr/y/c/;
    return ($r, $newext);
}
sub lang_yaccxx_rewrite { lang_yacc_rewrite (@_); };

# Rewrite a single lex/lex++ file.
sub lang_lex_rewrite
{
    my ($directory, $base, $ext) = @_;

    my $r = lang_sub_obj;
    (my $newext = $ext) =~ tr/l/c/;
    return ($r, $newext);
}
sub lang_lexxx_rewrite { lang_lex_rewrite (@_); };

# Rewrite a single Java file.
sub lang_java_rewrite
{
    return LANG_SUBDIR;
}

# The lang_X_finish functions are called after all source file
# processing is done.  Each should handle defining rules for the
# language, etc.  A finish function is only called if a source file of
# the appropriate type has been seen.

sub lang_vala_finish_target
{
  my ($self, $name) = @_;

  my $derived = canonicalize ($name);
  my $var = var "${derived}_SOURCES";
  return unless $var;

  my @vala_sources = grep { /\.(vala|vapi)$/ } ($var->value_as_list_recursive);

  # For automake bug#11229.
  return unless @vala_sources;

  foreach my $vala_file (@vala_sources)
    {
      my $c_file = $vala_file;
      if ($c_file =~ s/(.*)\.vala$/$1.c/)
        {
          $c_file = "\$(srcdir)/$c_file";
          $output_rules .= "$c_file: \$(srcdir)/${derived}_vala.stamp\n"
            . "\t\@if test -f \$@; then :; else rm -f \$(srcdir)/${derived}_vala.stamp; fi\n"
            . "\t\@if test -f \$@; then :; else \\\n"
            . "\t  \$(MAKE) \$(AM_MAKEFLAGS) \$(srcdir)/${derived}_vala.stamp; \\\n"
            . "\tfi\n";
	  $clean_files{$c_file} = MAINTAINER_CLEAN;
        }
    }

  # Add rebuild rules for generated header and vapi files
  my $flags = var ($derived . '_VALAFLAGS');
  if ($flags)
    {
      my $lastflag = '';
      foreach my $flag ($flags->value_as_list_recursive)
	{
	  if (grep (/$lastflag/, ('-H', '-h', '--header', '--internal-header',
	                          '--vapi', '--internal-vapi', '--gir')))
	    {
	      my $headerfile = "\$(srcdir)/$flag";
	      $output_rules .= "$headerfile: \$(srcdir)/${derived}_vala.stamp\n"
		. "\t\@if test -f \$@; then :; else rm -f \$(srcdir)/${derived}_vala.stamp; fi\n"
		. "\t\@if test -f \$@; then :; else \\\n"
		. "\t  \$(MAKE) \$(AM_MAKEFLAGS) \$(srcdir)/${derived}_vala.stamp; \\\n"
		. "\tfi\n";

	      # valac is not used when building from dist tarballs
	      # distribute the generated files
	      push_dist_common ($headerfile);
	      $clean_files{$headerfile} = MAINTAINER_CLEAN;
	    }
	  $lastflag = $flag;
	}
    }

  my $compile = $self->compile;

  # Rewrite each occurrence of 'AM_VALAFLAGS' in the compile
  # rule into '${derived}_VALAFLAGS' if it exists.
  my $val = "${derived}_VALAFLAGS";
  $compile =~ s/\(AM_VALAFLAGS\)/\($val\)/
    if set_seen ($val);

  # VALAFLAGS is a user variable (per GNU Standards),
  # it should not be overridden in the Makefile...
  check_user_variables 'VALAFLAGS';

  my $dirname = dirname ($name);

  # Only generate C code, do not run C compiler
  $compile .= " -C";

  my $verbose = verbose_flag ('VALAC');
  my $silent = silent_flag ();
  my $stampfile = "\$(srcdir)/${derived}_vala.stamp";

  $output_rules .=
    "\$(srcdir)/${derived}_vala.stamp: @vala_sources\n".
# Since the C files generated from the vala sources depend on the
# ${derived}_vala.stamp file, we must ensure its timestamp is older than
# those of the C files generated by the valac invocation below (this is
# especially important on systems with sub-second timestamp resolution).
# Thus we need to create the stamp file *before* invoking valac, and to
# move it to its final location only after valac has been invoked.
    "\t${silent}rm -f \$\@ && echo stamp > \$\@-t\n".
    "\t${verbose}\$(am__cd) \$(srcdir) && $compile @vala_sources\n".
    "\t${silent}mv -f \$\@-t \$\@\n";

  push_dist_common ($stampfile);

  $clean_files{$stampfile} = MAINTAINER_CLEAN;
}

# Add output rules to invoke valac and create stamp file as a witness
# to handle multiple outputs. This function is called after all source
# file processing is done.
sub lang_vala_finish ()
{
  my ($self) = @_;

  foreach my $prog (keys %known_programs)
    {
      lang_vala_finish_target ($self, $prog);
    }

  while (my ($name) = each %known_libraries)
    {
      lang_vala_finish_target ($self, $name);
    }
}

# The built .c files should be cleaned only on maintainer-clean
# as the .c files are distributed. This function is called for each
# .vala source file.
sub lang_vala_target_hook
{
  my ($self, $aggregate, $output, $input, %transform) = @_;

  $clean_files{$output} = MAINTAINER_CLEAN;
}

# This is a yacc helper which is called whenever we have decided to
# compile a yacc file.
sub lang_yacc_target_hook
{
    my ($self, $aggregate, $output, $input, %transform) = @_;

    # If some relevant *YFLAGS variable contains the '-d' flag, we'll
    # have to to generate special code.
    my $yflags_contains_minus_d = 0;

    foreach my $pfx ("", "${aggregate}_")
      {
	my $yflagsvar = var ("${pfx}YFLAGS");
	next unless $yflagsvar;
	# We cannot work reliably with conditionally-defined YFLAGS.
	if ($yflagsvar->has_conditional_contents)
	  {
	    msg_var ('unsupported', $yflagsvar,
	             "'${pfx}YFLAGS' cannot have conditional contents");
	  }
	else
	  {
	    $yflags_contains_minus_d = 1
	      if grep (/^-d$/, $yflagsvar->value_as_list_recursive);
	  }
      }

    if ($yflags_contains_minus_d)
      {
	# Found a '-d' that applies to the compilation of this file.
	# Add a dependency for the generated header file, and arrange
	# for that file to be included in the distribution.

	# The extension of the output file (e.g., '.c' or '.cxx').
	# We'll need it to compute the name of the generated header file.
	(my $output_ext = basename ($output)) =~ s/.*(\.[^.]+)$/$1/;

	# We know that a yacc input should be turned into either a C or
	# C++ output file.  We depend on this fact (here and in yacc.am),
	# so check that it really holds.
	my $lang = $languages{$extension_map{$output_ext}};
	prog_error "invalid output name '$output' for yacc file '$input'"
	  if (!$lang || ($lang->name ne 'c' && $lang->name ne 'cxx'));

	(my $header_ext = $output_ext) =~ s/c/h/g;
        # Quote $output_ext in the regexp, so that dots in it are taken
        # as literal dots, not as metacharacters.
	(my $header = $output) =~ s/\Q$output_ext\E$/$header_ext/;

	foreach my $cond (Automake::Rule::define (${header}, 'internal',
						  RULE_AUTOMAKE, TRUE,
						  INTERNAL))
	  {
	    my $condstr = $cond->subst_string;
	    $output_rules .=
	      "$condstr${header}: $output\n"
	      # Recover from removal of $header
	      . "$condstr\t\@if test ! -f \$@; then rm -f $output; else :; fi\n"
	      . "$condstr\t\@if test ! -f \$@; then \$(MAKE) \$(AM_MAKEFLAGS) $output; else :; fi\n";
	  }
	# Distribute the generated file, unless its .y source was
	# listed in a nodist_ variable.  (handle_source_transform()
	# will set DIST_SOURCE.)
	push_dist_common ($header)
	  if $transform{'DIST_SOURCE'};

	# The GNU rules say that yacc/lex output files should be removed
	# by maintainer-clean.  However, if the files are not distributed,
	# then we want to remove them with "make clean"; otherwise,
	# "make distcheck" will fail.
	$clean_files{$header} = $transform{'DIST_SOURCE'} ? MAINTAINER_CLEAN : CLEAN;
      }
    # See the comment above for $HEADER.
    $clean_files{$output} = $transform{'DIST_SOURCE'} ? MAINTAINER_CLEAN : CLEAN;
}

# This is a lex helper which is called whenever we have decided to
# compile a lex file.
sub lang_lex_target_hook
{
    my ($self, $aggregate, $output, $input, %transform) = @_;
    # The GNU rules say that yacc/lex output files should be removed
    # by maintainer-clean.  However, if the files are not distributed,
    # then we want to remove them with "make clean"; otherwise,
    # "make distcheck" will fail.
    $clean_files{$output} = $transform{'DIST_SOURCE'} ? MAINTAINER_CLEAN : CLEAN;
}

# This is a helper for both lex and yacc.
sub yacc_lex_finish_helper ()
{
  return if defined $language_scratch{'lex-yacc-done'};
  $language_scratch{'lex-yacc-done'} = 1;

  # FIXME: for now, no line number.
  require_conf_file ($configure_ac, FOREIGN, 'ylwrap');
  define_variable ('YLWRAP', "$am_config_aux_dir/ylwrap", INTERNAL);
}

sub lang_yacc_finish ()
{
  return if defined $language_scratch{'yacc-done'};
  $language_scratch{'yacc-done'} = 1;

  reject_var 'YACCFLAGS', "'YACCFLAGS' obsolete; use 'YFLAGS' instead";

  yacc_lex_finish_helper;
}


sub lang_lex_finish ()
{
  return if defined $language_scratch{'lex-done'};
  $language_scratch{'lex-done'} = 1;

  yacc_lex_finish_helper;
}


# Given a hash table of linker names, pick the name that has the most
# precedence.  This is lame, but something has to have global
# knowledge in order to eliminate the conflict.  Add more linkers as
# required.
sub resolve_linker
{
    my (%linkers) = @_;

    foreach my $l (qw(GCJLINK OBJCXXLINK CXXLINK F77LINK FCLINK OBJCLINK UPCLINK))
    {
	return $l if defined $linkers{$l};
    }
    return 'LINK';
}

# Called to indicate that an extension was used.
sub saw_extension
{
    my ($ext) = @_;
    $extension_seen{$ext} = 1;
}

# register_language (%ATTRIBUTE)
# ------------------------------
# Register a single language.
# Each %ATTRIBUTE is of the form ATTRIBUTE => VALUE.
sub register_language
{
  my (%option) = @_;

  # Set the defaults.
  $option{'autodep'} = 'no'
    unless defined $option{'autodep'};
  $option{'linker'} = ''
    unless defined $option{'linker'};
  $option{'flags'} = []
    unless defined $option{'flags'};
  $option{'output_extensions'} = sub { return ( '.$(OBJEXT)', '.lo' ) }
    unless defined $option{'output_extensions'};
  $option{'nodist_specific'} = 0
    unless defined $option{'nodist_specific'};

  my $lang = new Automake::Language (%option);

  # Fill indexes.
  $extension_map{$_} = $lang->name foreach @{$lang->extensions};
  $languages{$lang->name} = $lang;
  my $link = $lang->linker;
  if ($link)
    {
      if (exists $link_languages{$link})
	{
	  prog_error ("'$link' has different definitions in "
		      . $lang->name . " and " . $link_languages{$link}->name)
	    if $lang->link ne $link_languages{$link}->link;
	}
      else
	{
	  $link_languages{$link} = $lang;
	}
    }

  # Update the pattern of known extensions.
  accept_extensions (@{$lang->extensions});

  # Update the suffix rules map.
  foreach my $suffix (@{$lang->extensions})
    {
      foreach my $dest ($lang->output_extensions->($suffix))
	{
	  register_suffix_rule (INTERNAL, $suffix, $dest);
	}
    }
}

# derive_suffix ($EXT, $OBJ)
# --------------------------
# This function is used to find a path from a user-specified suffix $EXT
# to $OBJ or to some other suffix we recognize internally, e.g. 'cc'.
sub derive_suffix
{
  my ($source_ext, $obj) = @_;

  while (!$extension_map{$source_ext} && $source_ext ne $obj)
    {
      my $new_source_ext = next_in_suffix_chain ($source_ext, $obj);
      last if not defined $new_source_ext;
      $source_ext = $new_source_ext;
    }

  return $source_ext;
}


# Pretty-print something and append to '$output_rules'.
sub pretty_print_rule
{
    $output_rules .= makefile_wrap (shift, shift, @_);
}


################################################################


## -------------------------------- ##
## Handling the conditional stack.  ##
## -------------------------------- ##


# $STRING
# make_conditional_string ($NEGATE, $COND)
# ----------------------------------------
sub make_conditional_string
{
  my ($negate, $cond) = @_;
  $cond = "${cond}_TRUE"
    unless $cond =~ /^TRUE|FALSE$/;
  $cond = Automake::Condition::conditional_negate ($cond)
    if $negate;
  return $cond;
}


my %_am_macro_for_cond =
  (
  AMDEP => "one of the compiler tests\n"
	   . "    AC_PROG_CC, AC_PROG_CXX, AC_PROG_OBJC, AC_PROG_OBJCXX,\n"
	   . "    AM_PROG_AS, AM_PROG_GCJ, AM_PROG_UPC",
  am__fastdepCC => 'AC_PROG_CC',
  am__fastdepCCAS => 'AM_PROG_AS',
  am__fastdepCXX => 'AC_PROG_CXX',
  am__fastdepGCJ => 'AM_PROG_GCJ',
  am__fastdepOBJC => 'AC_PROG_OBJC',
  am__fastdepOBJCXX => 'AC_PROG_OBJCXX',
  am__fastdepUPC => 'AM_PROG_UPC'
  );

# $COND
# cond_stack_if ($NEGATE, $COND, $WHERE)
# --------------------------------------
sub cond_stack_if
{
  my ($negate, $cond, $where) = @_;

  if (! $configure_cond{$cond} && $cond !~ /^TRUE|FALSE$/)
    {
      my $text = "$cond does not appear in AM_CONDITIONAL";
      my $scope = US_LOCAL;
      if (exists $_am_macro_for_cond{$cond})
	{
	  my $mac = $_am_macro_for_cond{$cond};
	  $text .= "\n  The usual way to define '$cond' is to add ";
	  $text .= ($mac =~ / /) ? $mac : "'$mac'";
	  $text .= "\n  to '$configure_ac' and run 'aclocal' and 'autoconf' again";
	  # These warnings appear in Automake files (depend2.am),
	  # so there is no need to display them more than once:
	  $scope = US_GLOBAL;
	}
      error $where, $text, uniq_scope => $scope;
    }

  push (@cond_stack, make_conditional_string ($negate, $cond));

  return new Automake::Condition (@cond_stack);
}


# $COND
# cond_stack_else ($NEGATE, $COND, $WHERE)
# ----------------------------------------
sub cond_stack_else
{
  my ($negate, $cond, $where) = @_;

  if (! @cond_stack)
    {
      error $where, "else without if";
      return FALSE;
    }

  $cond_stack[$#cond_stack] =
    Automake::Condition::conditional_negate ($cond_stack[$#cond_stack]);

  # If $COND is given, check against it.
  if (defined $cond)
    {
      $cond = make_conditional_string ($negate, $cond);

      error ($where, "else reminder ($negate$cond) incompatible with "
	     . "current conditional: $cond_stack[$#cond_stack]")
	if $cond_stack[$#cond_stack] ne $cond;
    }

  return new Automake::Condition (@cond_stack);
}


# $COND
# cond_stack_endif ($NEGATE, $COND, $WHERE)
# -----------------------------------------
sub cond_stack_endif
{
  my ($negate, $cond, $where) = @_;
  my $old_cond;

  if (! @cond_stack)
    {
      error $where, "endif without if";
      return TRUE;
    }

  # If $COND is given, check against it.
  if (defined $cond)
    {
      $cond = make_conditional_string ($negate, $cond);

      error ($where, "endif reminder ($negate$cond) incompatible with "
	     . "current conditional: $cond_stack[$#cond_stack]")
	if $cond_stack[$#cond_stack] ne $cond;
    }

  pop @cond_stack;

  return new Automake::Condition (@cond_stack);
}





## ------------------------ ##
## Handling the variables.  ##
## ------------------------ ##


# define_pretty_variable ($VAR, $COND, $WHERE, @VALUE)
# ----------------------------------------------------
# Like define_variable, but the value is a list, and the variable may
# be defined conditionally.  The second argument is the condition
# under which the value should be defined; this should be the empty
# string to define the variable unconditionally.  The third argument
# is a list holding the values to use for the variable.  The value is
# pretty printed in the output file.
sub define_pretty_variable
{
    my ($var, $cond, $where, @value) = @_;

    if (! vardef ($var, $cond))
    {
	Automake::Variable::define ($var, VAR_AUTOMAKE, '', $cond, "@value",
				    '', $where, VAR_PRETTY);
	rvar ($var)->rdef ($cond)->set_seen;
    }
}


# define_variable ($VAR, $VALUE, $WHERE)
# --------------------------------------
# Define a new Automake Makefile variable VAR to VALUE, but only if
# not already defined.
sub define_variable
{
    my ($var, $value, $where) = @_;
    define_pretty_variable ($var, TRUE, $where, $value);
}


# define_files_variable ($VAR, \@BASENAME, $EXTENSION, $WHERE)
# ------------------------------------------------------------
# Define the $VAR which content is the list of file names composed of
# a @BASENAME and the $EXTENSION.
sub define_files_variable ($\@$$)
{
  my ($var, $basename, $extension, $where) = @_;
  define_variable ($var,
		   join (' ', map { "$_.$extension" } @$basename),
		   $where);
}


# Like define_variable, but define a variable to be the configure
# substitution by the same name.
sub define_configure_variable
{
  my ($var) = @_;
  # Some variables we do not want to output.  For instance it
  # would be a bad idea to output `U = @U@` when `@U@` can be
  # substituted as `\`.
  my $pretty = exists $ignored_configure_vars{$var} ? VAR_SILENT : VAR_ASIS;
  Automake::Variable::define ($var, VAR_CONFIGURE, '', TRUE, subst ($var),
			      '', $configure_vars{$var}, $pretty);
}


# define_compiler_variable ($LANG)
# --------------------------------
# Define a compiler variable.  We also handle defining the 'LT'
# version of the command when using libtool.
sub define_compiler_variable
{
    my ($lang) = @_;

    my ($var, $value) = ($lang->compiler, $lang->compile);
    my $libtool_tag = '';
    $libtool_tag = '--tag=' . $lang->libtool_tag . ' '
      if $lang->libtool_tag && exists $libtool_tags{$lang->libtool_tag};
    define_variable ($var, $value, INTERNAL);
    if (var ('LIBTOOL'))
      {
	my $verbose = define_verbose_libtool ();
	define_variable ("LT$var",
                         "\$(LIBTOOL) $verbose $libtool_tag\$(AM_LIBTOOLFLAGS)"
                         . " \$(LIBTOOLFLAGS) --mode=compile $value",
                         INTERNAL);
      }
    define_verbose_tagvar ($lang->ccer || 'GEN');
}


sub define_linker_variable
{
    my ($lang) = @_;

    my $libtool_tag = '';
    $libtool_tag = '--tag=' . $lang->libtool_tag . ' '
      if $lang->libtool_tag && exists $libtool_tags{$lang->libtool_tag};
    # CCLD = $(CC).
    define_variable ($lang->lder, $lang->ld, INTERNAL);
    # CCLINK = $(CCLD) blah blah...
    my $link = '';
    if (var ('LIBTOOL'))
      {
	my $verbose = define_verbose_libtool ();
	$link = "\$(LIBTOOL) $verbose $libtool_tag\$(AM_LIBTOOLFLAGS) "
		. "\$(LIBTOOLFLAGS) --mode=link ";
      }
    define_variable ($lang->linker, $link . $lang->link, INTERNAL);
    define_variable ($lang->compiler, $lang, INTERNAL);
    define_verbose_tagvar ($lang->lder || 'GEN');
}

sub define_per_target_linker_variable
{
  my ($linker, $target) = @_;

  # If the user wrote a custom link command, we don't define ours.
  return "${target}_LINK"
    if set_seen "${target}_LINK";

  my $xlink = $linker ? $linker : 'LINK';

  my $lang = $link_languages{$xlink};
  prog_error "Unknown language for linker variable '$xlink'"
    unless $lang;

  my $link_command = $lang->link;
  if (var 'LIBTOOL')
    {
      my $libtool_tag = '';
      $libtool_tag = '--tag=' . $lang->libtool_tag . ' '
	if $lang->libtool_tag && exists $libtool_tags{$lang->libtool_tag};

      my $verbose = define_verbose_libtool ();
      $link_command =
	"\$(LIBTOOL) $verbose $libtool_tag\$(AM_LIBTOOLFLAGS) \$(LIBTOOLFLAGS) "
	. "--mode=link " . $link_command;
    }

  # Rewrite each occurrence of 'AM_$flag' in the link
  # command into '${derived}_$flag' if it exists.
  my $orig_command = $link_command;
  my @flags = (@{$lang->flags}, 'LDFLAGS');
  push @flags, 'LIBTOOLFLAGS' if var 'LIBTOOL';
  for my $flag (@flags)
    {
      my $val = "${target}_$flag";
      $link_command =~ s/\(AM_$flag\)/\($val\)/
	if set_seen ($val);
    }

  # If the computed command is the same as the generic command, use
  # the command linker variable.
  return ($lang->linker, $lang->lder)
    if $link_command eq $orig_command;

  define_variable ("${target}_LINK", $link_command, INTERNAL);
  return ("${target}_LINK", $lang->lder);
}

################################################################

# check_trailing_slash ($WHERE, $LINE)
# ------------------------------------
# Return 1 iff $LINE ends with a slash.
# Might modify $LINE.
sub check_trailing_slash ($\$)
{
  my ($where, $line) = @_;

  # Ignore '##' lines.
  return 0 if $$line =~ /$IGNORE_PATTERN/o;

  # Catch and fix a common error.
  msg "syntax", $where, "whitespace following trailing backslash"
    if $$line =~ s/\\\s+\n$/\\\n/;

  return $$line =~ /\\$/;
}


# read_am_file ($AMFILE, $WHERE, $RELDIR)
# ---------------------------------------
# Read $AMFILE file name which is located in $RELDIR, and set up
# global variables resetted by '&generate_makefile'.  Simultaneously
# copy lines from $AMFILE into '$output_trailer', or define variables
# as appropriate.
#
# NOTE: We put rules in the trailer section.  We want user rules to
# come after our generated stuff.
sub read_am_file
{
    my ($amfile, $where, $reldir) = @_;
    my $canon_reldir = &canonicalize ($reldir);

    my $am_file = new Automake::XFile ("< $amfile");
    verb "reading $amfile";

    # Keep track of the youngest output dependency.
    my $mtime = mtime $amfile;
    $output_deps_greatest_timestamp = $mtime
      if $mtime > $output_deps_greatest_timestamp;

    my $spacing = '';
    my $comment = '';
    my $blank = 0;
    my $saw_bk = 0;
    my $var_look = VAR_ASIS;

    use constant IN_VAR_DEF => 0;
    use constant IN_RULE_DEF => 1;
    use constant IN_COMMENT => 2;
    my $prev_state = IN_RULE_DEF;

    while ($_ = $am_file->getline)
    {
	$where->set ("$amfile:$.");
	if (/$IGNORE_PATTERN/o)
	{
	    # Merely delete comments beginning with two hashes.
	}
	elsif (/$WHITE_PATTERN/o)
	{
	    error $where, "blank line following trailing backslash"
	      if $saw_bk;
	    # Stick a single white line before the incoming macro or rule.
	    $spacing = "\n";
	    $blank = 1;
	    # Flush all comments seen so far.
	    if ($comment ne '')
	    {
		$output_vars .= $comment;
		$comment = '';
	    }
	}
	elsif (/$COMMENT_PATTERN/o)
	{
	    # Stick comments before the incoming macro or rule.  Make
	    # sure a blank line precedes the first block of comments.
	    $spacing = "\n" unless $blank;
	    $blank = 1;
	    $comment .= $spacing . $_;
	    $spacing = '';
	    $prev_state = IN_COMMENT;
	}
	else
	{
	    last;
	}
	$saw_bk = check_trailing_slash ($where, $_);
    }

    # We save the conditional stack on entry, and then check to make
    # sure it is the same on exit.  This lets us conditionally include
    # other files.
    my @saved_cond_stack = @cond_stack;
    my $cond = new Automake::Condition (@cond_stack);

    my $last_var_name = '';
    my $last_var_type = '';
    my $last_var_value = '';
    my $last_where;
    # FIXME: shouldn't use $_ in this loop; it is too big.
    while ($_)
    {
	$where->set ("$amfile:$.");

	# Make sure the line is \n-terminated.
	chomp;
	$_ .= "\n";

	# Don't look at MAINTAINER_MODE_TRUE here.  That shouldn't be
	# used by users.  @MAINT@ is an anachronism now.
	$_ =~ s/\@MAINT\@//g
	    unless $seen_maint_mode;

	my $new_saw_bk = check_trailing_slash ($where, $_);

	if ($reldir eq '.')
	  {
	    # If present, eat the following '_' or '/', converting
	    # "%reldir%/foo" and "%canon_reldir%_foo" into plain "foo"
	    # when $reldir is '.'.
	    $_ =~ s,%(D|reldir)%/,,g;
	    $_ =~ s,%(C|canon_reldir)%_,,g;
	  }
	$_ =~ s/%(D|reldir)%/${reldir}/g;
	$_ =~ s/%(C|canon_reldir)%/${canon_reldir}/g;

	if (/$IGNORE_PATTERN/o)
	{
	    # Merely delete comments beginning with two hashes.

	    # Keep any backslash from the previous line.
	    $new_saw_bk = $saw_bk;
	}
	elsif (/$WHITE_PATTERN/o)
	{
	    # Stick a single white line before the incoming macro or rule.
	    $spacing = "\n";
	    error $where, "blank line following trailing backslash"
	      if $saw_bk;
	}
	elsif (/$COMMENT_PATTERN/o)
	{
	    error $where, "comment following trailing backslash"
	      if $saw_bk && $prev_state != IN_COMMENT;

	    # Stick comments before the incoming macro or rule.
	    $comment .= $spacing . $_;
	    $spacing = '';
	    $prev_state = IN_COMMENT;
	}
	elsif ($saw_bk)
	{
	    if ($prev_state == IN_RULE_DEF)
	    {
	      my $cond = new Automake::Condition @cond_stack;
	      $output_trailer .= $cond->subst_string;
	      $output_trailer .= $_;
	    }
	    elsif ($prev_state == IN_COMMENT)
	    {
		# If the line doesn't start with a '#', add it.
		# We do this because a continued comment like
		#   # A = foo \
		#         bar \
		#         baz
		# is not portable.  BSD make doesn't honor
		# escaped newlines in comments.
		s/^#?/#/;
		$comment .= $spacing . $_;
	    }
	    else # $prev_state == IN_VAR_DEF
	    {
	      $last_var_value .= ' '
		unless $last_var_value =~ /\s$/;
	      $last_var_value .= $_;

	      if (!/\\$/)
		{
		  Automake::Variable::define ($last_var_name, VAR_MAKEFILE,
					      $last_var_type, $cond,
					      $last_var_value, $comment,
					      $last_where, VAR_ASIS)
		    if $cond != FALSE;
		  $comment = $spacing = '';
		}
	    }
	}

	elsif (/$IF_PATTERN/o)
	  {
	    $cond = cond_stack_if ($1, $2, $where);
	  }
	elsif (/$ELSE_PATTERN/o)
	  {
	    $cond = cond_stack_else ($1, $2, $where);
	  }
	elsif (/$ENDIF_PATTERN/o)
	  {
	    $cond = cond_stack_endif ($1, $2, $where);
	  }

	elsif (/$RULE_PATTERN/o)
	{
	    # Found a rule.
	    $prev_state = IN_RULE_DEF;

	    # For now we have to output all definitions of user rules
	    # and can't diagnose duplicates (see the comment in
	    # Automake::Rule::define). So we go on and ignore the return value.
	    Automake::Rule::define ($1, $amfile, RULE_USER, $cond, $where);

	    check_variable_expansions ($_, $where);

	    $output_trailer .= $comment . $spacing;
	    my $cond = new Automake::Condition @cond_stack;
	    $output_trailer .= $cond->subst_string;
	    $output_trailer .= $_;
	    $comment = $spacing = '';
	}
	elsif (/$ASSIGNMENT_PATTERN/o)
	{
	    # Found a macro definition.
	    $prev_state = IN_VAR_DEF;
	    $last_var_name = $1;
	    $last_var_type = $2;
	    $last_var_value = $3;
	    $last_where = $where->clone;
	    if ($3 ne '' && substr ($3, -1) eq "\\")
	      {
		# We preserve the '\' because otherwise the long lines
		# that are generated will be truncated by broken
		# 'sed's.
		$last_var_value = $3 . "\n";
	      }
	    # Normally we try to output variable definitions in the
	    # same format they were input.  However, POSIX compliant
	    # systems are not required to support lines longer than
	    # 2048 bytes (most notably, some sed implementation are
	    # limited to 4000 bytes, and sed is used by config.status
	    # to rewrite Makefile.in into Makefile).  Moreover nobody
	    # would really write such long lines by hand since it is
	    # hardly maintainable.  So if a line is longer that 1000
	    # bytes (an arbitrary limit), assume it has been
	    # automatically generated by some tools, and flatten the
	    # variable definition.  Otherwise, keep the variable as it
	    # as been input.
	    $var_look = VAR_PRETTY if length ($last_var_value) >= 1000;

	    if (!/\\$/)
	      {
		Automake::Variable::define ($last_var_name, VAR_MAKEFILE,
					    $last_var_type, $cond,
					    $last_var_value, $comment,
					    $last_where, $var_look)
		  if $cond != FALSE;
		$comment = $spacing = '';
		$var_look = VAR_ASIS;
	      }
	}
	elsif (/$INCLUDE_PATTERN/o)
	{
	    my $path = $1;

	    if ($path =~ s/^\$\(top_srcdir\)\///)
	      {
		push (@include_stack, "\$\(top_srcdir\)/$path");
		# Distribute any included file.

		# Always use the $(top_srcdir) prefix in DIST_COMMON,
		# otherwise OSF make will implicitly copy the included
		# file in the build tree during "make distdir" to satisfy
		# the dependency.
		# (subdir-am-cond.sh and subdir-ac-cond.sh will fail)
		push_dist_common ("\$\(top_srcdir\)/$path");
	      }
	    else
	      {
		$path =~ s/\$\(srcdir\)\///;
		push (@include_stack, "\$\(srcdir\)/$path");
		# Always use the $(srcdir) prefix in DIST_COMMON,
		# otherwise OSF make will implicitly copy the included
		# file in the build tree during "make distdir" to satisfy
		# the dependency.
		# (subdir-am-cond.sh and subdir-ac-cond.sh will fail)
		push_dist_common ("\$\(srcdir\)/$path");
		$path = $relative_dir . "/" . $path if $relative_dir ne '.';
	      }
	    my $new_reldir = File::Spec->abs2rel ($path, $relative_dir);
	    $new_reldir = '.' if $new_reldir !~ s,/[^/]*$,,;
	    $where->push_context ("'$path' included from here");
	    read_am_file ($path, $where, $new_reldir);
	    $where->pop_context;
	}
	else
	{
	    # This isn't an error; it is probably a continued rule.
	    # In fact, this is what we assume.
	    $prev_state = IN_RULE_DEF;
	    check_variable_expansions ($_, $where);
	    $output_trailer .= $comment . $spacing;
	    my $cond = new Automake::Condition @cond_stack;
	    $output_trailer .= $cond->subst_string;
	    $output_trailer .= $_;
	    $comment = $spacing = '';
	    error $where, "'#' comment at start of rule is unportable"
	      if $_ =~ /^\t\s*\#/;
	}

	$saw_bk = $new_saw_bk;
	$_ = $am_file->getline;
    }

    $output_trailer .= $comment;

    error ($where, "trailing backslash on last line")
      if $saw_bk;

    error ($where, (@cond_stack ? "unterminated conditionals: @cond_stack"
		    : "too many conditionals closed in include file"))
      if "@saved_cond_stack" ne "@cond_stack";
}


# A helper for read_main_am_file which initializes configure variables
# and variables from header-vars.am.
sub define_standard_variables ()
{
  my $saved_output_vars = $output_vars;
  my ($comments, undef, $rules) =
    file_contents_internal (1, "$libdir/am/header-vars.am",
			    new Automake::Location);

  foreach my $var (sort keys %configure_vars)
    {
      define_configure_variable ($var);
    }

  $output_vars .= $comments . $rules;
}


# read_main_am_file ($MAKEFILE_AM, $MAKEFILE_IN)
# ----------------------------------------------
sub read_main_am_file
{
    my ($amfile, $infile) = @_;

    # This supports the strange variable tricks we are about to play.
    prog_error ("variable defined before read_main_am_file\n" . variables_dump ())
      if (scalar (variables) > 0);

    # Generate copyright header for generated Makefile.in.
    # We do discard the output of predefined variables, handled below.
    $output_vars = ("# " . basename ($infile) . " generated by automake "
		   . $VERSION . " from " . basename ($amfile) . ".\n");
    $output_vars .= '# ' . subst ('configure_input') . "\n";
    $output_vars .= $gen_copyright;

    # We want to predefine as many variables as possible.  This lets
    # the user set them with '+=' in Makefile.am.
    define_standard_variables;

    # Read user file, which might override some of our values.
    read_am_file ($amfile, new Automake::Location, '.');
}



################################################################

# $STRING
# flatten ($ORIGINAL_STRING)
# --------------------------
sub flatten
{
  $_ = shift;

  s/\\\n//somg;
  s/\s+/ /g;
  s/^ //;
  s/ $//;

  return $_;
}


# transform_token ($TOKEN, \%PAIRS, $KEY)
# ---------------------------------------
# Return the value associated to $KEY in %PAIRS, as used on $TOKEN
# (which should be ?KEY? or any of the special %% requests)..
sub transform_token ($\%$)
{
  my ($token, $transform, $key) = @_;
  my $res = $transform->{$key};
  prog_error "Unknown key '$key' in '$token'" unless defined $res;
  return $res;
}


# transform ($TOKEN, \%PAIRS)
# ---------------------------
# If ($TOKEN, $VAL) is in %PAIRS:
#   - replaces %KEY% with $VAL,
#   - enables/disables ?KEY? and ?!KEY?,
#   - replaces %?KEY% with TRUE or FALSE.
sub transform ($\%)
{
  my ($token, $transform) = @_;

  # %KEY%.
  # Must be before the following pattern to exclude the case
  # when there is neither IFTRUE nor IFFALSE.
  if ($token =~ /^%([\w\-]+)%$/)
    {
      return transform_token ($token, %$transform, $1);
    }
  # %?KEY%.
  elsif ($token =~ /^%\?([\w\-]+)%$/)
    {
      return transform_token ($token, %$transform, $1) ? 'TRUE' : 'FALSE';
    }
  # ?KEY? and ?!KEY?.
  elsif ($token =~ /^ \? (!?) ([\w\-]+) \? $/x)
    {
      my $neg = ($1 eq '!') ? 1 : 0;
      my $val = transform_token ($token, %$transform, $2);
      return (!!$val == $neg) ? '##%' : '';
    }
  else
    {
      prog_error "Unknown request format: $token";
    }
}

# $TEXT
# preprocess_file ($MAKEFILE, [%TRANSFORM])
# -----------------------------------------
# Load a $MAKEFILE, apply the %TRANSFORM, and return the result.
# No extra parsing or post-processing is done (i.e., recognition of
# rules declaration or of make variables definitions).
sub preprocess_file
{
  my ($file, %transform) = @_;

  # Complete %transform with global options.
  # Note that %transform goes last, so it overrides global options.
  %transform = ( 'MAINTAINER-MODE'
		 => $seen_maint_mode ? subst ('MAINTAINER_MODE_TRUE') : '',

		 'XZ'          => !! option 'dist-xz',
		 'LZIP'        => !! option 'dist-lzip',
		 'BZIP2'       => !! option 'dist-bzip2',
		 'COMPRESS'    => !! option 'dist-tarZ',
		 'GZIP'        =>  ! option 'no-dist-gzip',
		 'SHAR'        => !! option 'dist-shar',
		 'ZIP'         => !! option 'dist-zip',

		 'INSTALL-INFO' =>  ! option 'no-installinfo',
		 'INSTALL-MAN'  =>  ! option 'no-installman',
		 'CK-NEWS'      => !! option 'check-news',

		 'SUBDIRS'      => !! var ('SUBDIRS'),
		 'TOPDIR_P'     => $relative_dir eq '.',

		 'BUILD'    => ($seen_canonical >= AC_CANONICAL_BUILD),
		 'HOST'     => ($seen_canonical >= AC_CANONICAL_HOST),
		 'TARGET'   => ($seen_canonical >= AC_CANONICAL_TARGET),

		 'LIBTOOL'      => !! var ('LIBTOOL'),
		 'NONLIBTOOL'   => 1,
		%transform);

  if (! defined ($_ = $am_file_cache{$file}))
    {
      verb "reading $file";
      # Swallow the whole file.
      my $fc_file = new Automake::XFile "< $file";
      my $saved_dollar_slash = $/;
      undef $/;
      $_ = $fc_file->getline;
      $/ = $saved_dollar_slash;
      $fc_file->close;
      # Remove ##-comments.
      # Besides we don't need more than two consecutive new-lines.
      s/(?:$IGNORE_PATTERN|(?<=\n\n)\n+)//gom;
      # Remember the contents of the just-read file.
      $am_file_cache{$file} = $_;
    }

  # Substitute Automake template tokens.
  s/(?: % \?? [\w\-]+ %
      | \? !? [\w\-]+ \?
    )/transform($&, %transform)/gex;
  # transform() may have added some ##%-comments to strip.
  # (we use '##%' instead of '##' so we can distinguish ##%##%##% from
  # ####### and do not remove the latter.)
  s/^[ \t]*(?:##%)+.*\n//gm;

  return $_;
}


# @PARAGRAPHS
# make_paragraphs ($MAKEFILE, [%TRANSFORM])
# -----------------------------------------
# Load a $MAKEFILE, apply the %TRANSFORM, and return it as a list of
# paragraphs.
sub make_paragraphs
{
  my ($file, %transform) = @_;
  $transform{FIRST} = !$transformed_files{$file};
  $transformed_files{$file} = 1;

  my @lines = split /(?<!\\)\n/, preprocess_file ($file, %transform);
  my @res;

  while (defined ($_ = shift @lines))
    {
      my $paragraph = $_;
      # If we are a rule, eat as long as we start with a tab.
      if (/$RULE_PATTERN/smo)
	{
	  while (defined ($_ = shift @lines) && $_ =~ /^\t/)
	    {
	      $paragraph .= "\n$_";
	    }
	  unshift (@lines, $_);
	}

      # If we are a comments, eat as much comments as you can.
      elsif (/$COMMENT_PATTERN/smo)
	{
	  while (defined ($_ = shift @lines)
		 && $_ =~ /$COMMENT_PATTERN/smo)
	    {
	      $paragraph .= "\n$_";
	    }
	  unshift (@lines, $_);
	}

      push @res, $paragraph;
    }

  return @res;
}



# ($COMMENT, $VARIABLES, $RULES)
# file_contents_internal ($IS_AM, $FILE, $WHERE, [%TRANSFORM])
# ------------------------------------------------------------
# Return contents of a file from $libdir/am, automatically skipping
# macros or rules which are already known. $IS_AM iff the caller is
# reading an Automake file (as opposed to the user's Makefile.am).
sub file_contents_internal
{
    my ($is_am, $file, $where, %transform) = @_;

    $where->set ($file);

    my $result_vars = '';
    my $result_rules = '';
    my $comment = '';
    my $spacing = '';

    # The following flags are used to track rules spanning across
    # multiple paragraphs.
    my $is_rule = 0;		# 1 if we are processing a rule.
    my $discard_rule = 0;	# 1 if the current rule should not be output.

    # We save the conditional stack on entry, and then check to make
    # sure it is the same on exit.  This lets us conditionally include
    # other files.
    my @saved_cond_stack = @cond_stack;
    my $cond = new Automake::Condition (@cond_stack);

    foreach (make_paragraphs ($file, %transform))
    {
	# FIXME: no line number available.
	$where->set ($file);

	# Sanity checks.
	error $where, "blank line following trailing backslash:\n$_"
	  if /\\$/;
	error $where, "comment following trailing backslash:\n$_"
	  if /\\#/;

	if (/^$/)
	{
	    $is_rule = 0;
	    # Stick empty line before the incoming macro or rule.
	    $spacing = "\n";
	}
	elsif (/$COMMENT_PATTERN/mso)
	{
	    $is_rule = 0;
	    # Stick comments before the incoming macro or rule.
	    $comment = "$_\n";
	}

	# Handle inclusion of other files.
	elsif (/$INCLUDE_PATTERN/o)
	{
	    if ($cond != FALSE)
	      {
		my $file = ($is_am ? "$libdir/am/" : '') . $1;
		$where->push_context ("'$file' included from here");
		# N-ary '.=' fails.
		my ($com, $vars, $rules)
		  = file_contents_internal ($is_am, $file, $where, %transform);
		$where->pop_context;
		$comment .= $com;
		$result_vars .= $vars;
		$result_rules .= $rules;
	      }
	}

	# Handling the conditionals.
	elsif (/$IF_PATTERN/o)
	  {
	    $cond = cond_stack_if ($1, $2, $file);
	  }
	elsif (/$ELSE_PATTERN/o)
	  {
	    $cond = cond_stack_else ($1, $2, $file);
	  }
	elsif (/$ENDIF_PATTERN/o)
	  {
	    $cond = cond_stack_endif ($1, $2, $file);
	  }

	# Handling rules.
	elsif (/$RULE_PATTERN/mso)
	{
	  $is_rule = 1;
	  $discard_rule = 0;
	  # Separate relationship from optional actions: the first
	  # `new-line tab" not preceded by backslash (continuation
	  # line).
	  my $paragraph = $_;
	  /^(.*?)(?:(?<!\\)\n(\t.*))?$/s;
	  my ($relationship, $actions) = ($1, $2 || '');

	  # Separate targets from dependencies: the first colon.
	  $relationship =~ /^([^:]+\S+) *: *(.*)$/som;
	  my ($targets, $dependencies) = ($1, $2);
	  # Remove the escaped new lines.
	  # I don't know why, but I have to use a tmp $flat_deps.
	  my $flat_deps = flatten ($dependencies);
	  my @deps = split (' ', $flat_deps);

	  foreach (split (' ', $targets))
	    {
	      # FIXME: 1. We are not robust to people defining several targets
	      # at once, only some of them being in %dependencies.  The
	      # actions from the targets in %dependencies are usually generated
	      # from the content of %actions, but if some targets in $targets
	      # are not in %dependencies the ELSE branch will output
	      # a rule for all $targets (i.e. the targets which are both
	      # in %dependencies and $targets will have two rules).

	      # FIXME: 2. The logic here is not able to output a
	      # multi-paragraph rule several time (e.g. for each condition
	      # it is defined for) because it only knows the first paragraph.

	      # FIXME: 3. We are not robust to people defining a subset
	      # of a previously defined "multiple-target" rule.  E.g.
	      # 'foo:' after 'foo bar:'.

	      # Output only if not in FALSE.
	      if (defined $dependencies{$_} && $cond != FALSE)
		{
		  depend ($_, @deps);
		  register_action ($_, $actions);
		}
	      else
		{
		  # Free-lance dependency.  Output the rule for all the
		  # targets instead of one by one.
		  my @undefined_conds =
		    Automake::Rule::define ($targets, $file,
					    $is_am ? RULE_AUTOMAKE : RULE_USER,
					    $cond, $where);
		  for my $undefined_cond (@undefined_conds)
		    {
		      my $condparagraph = $paragraph;
		      $condparagraph =~ s/^/$undefined_cond->subst_string/gme;
		      $result_rules .= "$spacing$comment$condparagraph\n";
		    }
		  if (scalar @undefined_conds == 0)
		    {
		      # Remember to discard next paragraphs
		      # if they belong to this rule.
		      # (but see also FIXME: #2 above.)
		      $discard_rule = 1;
		    }
		  $comment = $spacing = '';
		  last;
		}
	    }
	}

	elsif (/$ASSIGNMENT_PATTERN/mso)
	{
	    my ($var, $type, $val) = ($1, $2, $3);
	    error $where, "variable '$var' with trailing backslash"
	      if /\\$/;

	    $is_rule = 0;

	    Automake::Variable::define ($var,
					$is_am ? VAR_AUTOMAKE : VAR_MAKEFILE,
					$type, $cond, $val, $comment, $where,
					VAR_ASIS)
	      if $cond != FALSE;

	    $comment = $spacing = '';
	}
	else
	{
	    # This isn't an error; it is probably some tokens which
	    # configure is supposed to replace, such as '@SET-MAKE@',
	    # or some part of a rule cut by an if/endif.
	    if (! $cond->false && ! ($is_rule && $discard_rule))
	      {
		s/^/$cond->subst_string/gme;
		$result_rules .= "$spacing$comment$_\n";
	      }
	    $comment = $spacing = '';
	}
    }

    error ($where, @cond_stack ?
	   "unterminated conditionals: @cond_stack" :
	   "too many conditionals closed in include file")
      if "@saved_cond_stack" ne "@cond_stack";

    return ($comment, $result_vars, $result_rules);
}


# $CONTENTS
# file_contents ($BASENAME, $WHERE, [%TRANSFORM])
# -----------------------------------------------
# Return contents of a file from $libdir/am, automatically skipping
# macros or rules which are already known.
sub file_contents
{
    my ($basename, $where, %transform) = @_;
    my ($comments, $variables, $rules) =
      file_contents_internal (1, "$libdir/am/$basename.am", $where,
			      %transform);
    return "$comments$variables$rules";
}


# @PREFIX
# am_primary_prefixes ($PRIMARY, $CAN_DIST, @PREFIXES)
# ----------------------------------------------------
# Find all variable prefixes that are used for install directories.  A
# prefix 'zar' qualifies iff:
#
# * 'zardir' is a variable.
# * 'zar_PRIMARY' is a variable.
#
# As a side effect, it looks for misspellings.  It is an error to have
# a variable ending in a "reserved" suffix whose prefix is unknown, e.g.
# "bni_PROGRAMS".  However, unusual prefixes are allowed if a variable
# of the same name (with "dir" appended) exists.  For instance, if the
# variable "zardir" is defined, then "zar_PROGRAMS" becomes valid.
# This is to provide a little extra flexibility in those cases which
# need it.
sub am_primary_prefixes
{
  my ($primary, $can_dist, @prefixes) = @_;

  local $_;
  my %valid = map { $_ => 0 } @prefixes;
  $valid{'EXTRA'} = 0;
  foreach my $var (variables $primary)
    {
      # Automake is allowed to define variables that look like primaries
      # but which aren't.  E.g. INSTALL_sh_DATA.
      # Autoconf can also define variables like INSTALL_DATA, so
      # ignore all configure variables (at least those which are not
      # redefined in Makefile.am).
      # FIXME: We should make sure that these variables are not
      # conditionally defined (or else adjust the condition below).
      my $def = $var->def (TRUE);
      next if $def && $def->owner != VAR_MAKEFILE;

      my $varname = $var->name;

      if ($varname =~ /^(nobase_)?(dist_|nodist_)?(.*)_[[:alnum:]]+$/)
	{
	  my ($base, $dist, $X) = ($1 || '', $2 || '', $3 || '');
	  if ($dist ne '' && ! $can_dist)
	    {
	      err_var ($var,
		       "invalid variable '$varname': 'dist' is forbidden");
	    }
	  # Standard directories must be explicitly allowed.
	  elsif (! defined $valid{$X} && exists $standard_prefix{$X})
	    {
	      err_var ($var,
		       "'${X}dir' is not a legitimate directory " .
		       "for '$primary'");
	    }
	  # A not explicitly valid directory is allowed if Xdir is defined.
	  elsif (! defined $valid{$X} &&
		 $var->requires_variables ("'$varname' is used", "${X}dir"))
	    {
	      # Nothing to do.  Any error message has been output
	      # by $var->requires_variables.
	    }
	  else
	    {
	      # Ensure all extended prefixes are actually used.
	      $valid{"$base$dist$X"} = 1;
	    }
	}
      else
	{
	  prog_error "unexpected variable name: $varname";
	}
    }

  # Return only those which are actually defined.
  return sort grep { var ($_ . '_' . $primary) } keys %valid;
}


# am_install_var (-OPTION..., file, HOW, where...)
# ------------------------------------------------
#
# Handle 'where_HOW' variable magic.  Does all lookups, generates
# install code, and possibly generates code to define the primary
# variable.  The first argument is the name of the .am file to munge,
# the second argument is the primary variable (e.g. HEADERS), and all
# subsequent arguments are possible installation locations.
#
# Returns list of [$location, $value] pairs, where
# $value's are the values in all where_HOW variable, and $location
# there associated location (the place here their parent variables were
# defined).
#
# FIXME: this should be rewritten to be cleaner.  It should be broken
# up into multiple functions.
#
sub am_install_var
{
  my (@args) = @_;

  my $do_require = 1;
  my $can_dist = 0;
  my $default_dist = 0;
  while (@args)
    {
      if ($args[0] eq '-noextra')
	{
	  $do_require = 0;
	}
      elsif ($args[0] eq '-candist')
	{
	  $can_dist = 1;
	}
      elsif ($args[0] eq '-defaultdist')
	{
	  $default_dist = 1;
	  $can_dist = 1;
	}
      elsif ($args[0] !~ /^-/)
	{
	  last;
	}
      shift (@args);
    }

  my ($file, $primary, @prefix) = @args;

  # Now that configure substitutions are allowed in where_HOW
  # variables, it is an error to actually define the primary.  We
  # allow 'JAVA', as it is customarily used to mean the Java
  # interpreter.  This is but one of several Java hacks.  Similarly,
  # 'PYTHON' is customarily used to mean the Python interpreter.
  reject_var $primary, "'$primary' is an anachronism"
    unless $primary eq 'JAVA' || $primary eq 'PYTHON';

  # Get the prefixes which are valid and actually used.
  @prefix = am_primary_prefixes ($primary, $can_dist, @prefix);

  # If a primary includes a configure substitution, then the EXTRA_
  # form is required.  Otherwise we can't properly do our job.
  my $require_extra;

  my @used = ();
  my @result = ();

  foreach my $X (@prefix)
    {
      my $nodir_name = $X;
      my $one_name = $X . '_' . $primary;
      my $one_var = var $one_name;

      my $strip_subdir = 1;
      # If subdir prefix should be preserved, do so.
      if ($nodir_name =~ /^nobase_/)
	{
	  $strip_subdir = 0;
	  $nodir_name =~ s/^nobase_//;
	}

      # If files should be distributed, do so.
      my $dist_p = 0;
      if ($can_dist)
	{
	  $dist_p = (($default_dist && $nodir_name !~ /^nodist_/)
		     || (! $default_dist && $nodir_name =~ /^dist_/));
	  $nodir_name =~ s/^(dist|nodist)_//;
	}


      # Use the location of the currently processed variable.
      # We are not processing a particular condition, so pick the first
      # available.
      my $tmpcond = $one_var->conditions->one_cond;
      my $where = $one_var->rdef ($tmpcond)->location->clone;

      # Append actual contents of where_PRIMARY variable to
      # @result, skipping @substitutions@.
      foreach my $locvals ($one_var->value_as_list_recursive (location => 1))
	{
	  my ($loc, $value) = @$locvals;
	  # Skip configure substitutions.
	  if ($value =~ /^\@.*\@$/)
	    {
	      if ($nodir_name eq 'EXTRA')
		{
		  error ($where,
			 "'$one_name' contains configure substitution, "
			 . "but shouldn't");
		}
	      # Check here to make sure variables defined in
	      # configure.ac do not imply that EXTRA_PRIMARY
	      # must be defined.
	      elsif (! defined $configure_vars{$one_name})
		{
		  $require_extra = $one_name
		    if $do_require;
		}
	    }
	  else
	    {
	      # Strip any $(EXEEXT) suffix the user might have added,
              # or this will confuse handle_source_transform() and
              # check_canonical_spelling().
	      # We'll add $(EXEEXT) back later anyway.
	      # Do it here rather than in handle_programs so the
              # uniquifying at the end of this function works.
	      ${$locvals}[1] =~ s/\$\(EXEEXT\)$//
	        if $primary eq 'PROGRAMS';

	      push (@result, $locvals);
	    }
	}
      # A blatant hack: we rewrite each _PROGRAMS primary to include
      # EXEEXT.
      append_exeext { 1 } $one_name
	if $primary eq 'PROGRAMS';
      # "EXTRA" shouldn't be used when generating clean targets,
      # all, or install targets.  We used to warn if EXTRA_FOO was
      # defined uselessly, but this was annoying.
      next
	if $nodir_name eq 'EXTRA';

      if ($nodir_name eq 'check')
	{
	  push (@check, '$(' . $one_name . ')');
	}
      else
	{
	  push (@used, '$(' . $one_name . ')');
	}

      # Is this to be installed?
      my $install_p = $nodir_name ne 'noinst' && $nodir_name ne 'check';

      # If so, with install-exec? (or install-data?).
      my $exec_p = ($nodir_name =~ /$EXEC_DIR_PATTERN/o);

      my $check_options_p = $install_p && !! option 'std-options';

      # Use the location of the currently processed variable as context.
      $where->push_context ("while processing '$one_name'");

      # The variable containing all files to distribute.
      my $distvar = "\$($one_name)";
      $distvar = shadow_unconditionally ($one_name, $where)
	if ($dist_p && $one_var->has_conditional_contents);

      # Singular form of $PRIMARY.
      (my $one_primary = $primary) =~ s/S$//;
      $output_rules .= file_contents ($file, $where,
                                      PRIMARY     => $primary,
                                      ONE_PRIMARY => $one_primary,
                                      DIR         => $X,
                                      NDIR        => $nodir_name,
                                      BASE        => $strip_subdir,
                                      EXEC        => $exec_p,
                                      INSTALL     => $install_p,
                                      DIST        => $dist_p,
                                      DISTVAR     => $distvar,
                                      'CK-OPTS'   => $check_options_p);
    }

  # The JAVA variable is used as the name of the Java interpreter.
  # The PYTHON variable is used as the name of the Python interpreter.
  if (@used && $primary ne 'JAVA' && $primary ne 'PYTHON')
    {
      # Define it.
      define_pretty_variable ($primary, TRUE, INTERNAL, @used);
      $output_vars .= "\n";
    }

  err_var ($require_extra,
	   "'$require_extra' contains configure substitution,\n"
	   . "but 'EXTRA_$primary' not defined")
    if ($require_extra && ! var ('EXTRA_' . $primary));

  # Push here because PRIMARY might be configure time determined.
  push (@all, '$(' . $primary . ')')
    if @used && $primary ne 'JAVA' && $primary ne 'PYTHON';

  # Make the result unique.  This lets the user use conditionals in
  # a natural way, but still lets us program lazily -- we don't have
  # to worry about handling a particular object more than once.
  # We will keep only one location per object.
  my %result = ();
  for my $pair (@result)
    {
      my ($loc, $val) = @$pair;
      $result{$val} = $loc;
    }
  my @l = sort keys %result;
  return map { [$result{$_}->clone, $_] } @l;
}


################################################################

# Each key in this hash is the name of a directory holding a
# Makefile.in.  These variables are local to 'is_make_dir'.
my %make_dirs = ();
my $make_dirs_set = 0;

# is_make_dir ($DIRECTORY)
# ------------------------
sub is_make_dir
{
    my ($dir) = @_;
    if (! $make_dirs_set)
    {
	foreach my $iter (@configure_input_files)
	{
	    $make_dirs{dirname ($iter)} = 1;
	}
	# We also want to notice Makefile.in's.
	foreach my $iter (@other_input_files)
	{
	    if ($iter =~ /Makefile\.in$/)
	    {
		$make_dirs{dirname ($iter)} = 1;
	    }
	}
	$make_dirs_set = 1;
    }
    return defined $make_dirs{$dir};
}

################################################################

# Find the aux dir.  This should match the algorithm used by
# ./configure. (See the Autoconf documentation for for
# AC_CONFIG_AUX_DIR.)
sub locate_aux_dir ()
{
  if (! $config_aux_dir_set_in_configure_ac)
    {
      # The default auxiliary directory is the first
      # of ., .., or ../.. that contains install-sh.
      # Assume . if install-sh doesn't exist yet.
      for my $dir (qw (. .. ../..))
	{
	  if (-f "$dir/install-sh")
	    {
	      $config_aux_dir = $dir;
	      last;
	    }
	}
      $config_aux_dir = '.' unless $config_aux_dir;
    }
  # Avoid unsightly '/.'s.
  $am_config_aux_dir =
    '$(top_srcdir)' . ($config_aux_dir eq '.' ? "" : "/$config_aux_dir");
  $am_config_aux_dir =~ s,/*$,,;
}


# push_required_file ($DIR, $FILE, $FULLFILE)
# -------------------------------------------
# Push the given file onto DIST_COMMON.
sub push_required_file
{
  my ($dir, $file, $fullfile) = @_;

  # If the file to be distributed is in the same directory of the
  # currently processed Makefile.am, then we want to distribute it
  # from this same Makefile.am.
  if ($dir eq $relative_dir)
    {
      push_dist_common ($file);
    }
  # This is needed to allow a construct in a non-top-level Makefile.am
  # to require a file in the build-aux directory (see at least the test
  # script 'test-driver-is-distributed.sh').  This is related to the
  # automake bug#9546.  Note that the use of $config_aux_dir instead
  # of $am_config_aux_dir here is deliberate and necessary.
  elsif ($dir eq $config_aux_dir)
    {
      push_dist_common ("$am_config_aux_dir/$file");
    }
  # FIXME: another spacial case, for AC_LIBOBJ/AC_LIBSOURCE support.
  # We probably need some refactoring of this function and its callers,
  # to have a more explicit and systematic handling of all the special
  # cases; but, since there are only two of them, this is low-priority
  # ATM.
  elsif ($config_libobj_dir && $dir eq $config_libobj_dir)
    {
      # Avoid unsightly '/.'s.
      my $am_config_libobj_dir =
        '$(top_srcdir)' .
        ($config_libobj_dir eq '.' ? "" : "/$config_libobj_dir");
      $am_config_libobj_dir =~ s|/*$||;
      push_dist_common ("$am_config_libobj_dir/$file");
    }
  elsif ($relative_dir eq '.' && ! is_make_dir ($dir))
    {
      # If we are doing the topmost directory, and the file is in a
      # subdir which does not have a Makefile, then we distribute it
      # here.

      # If a required file is above the source tree, it is important
      # to prefix it with '$(srcdir)' so that no VPATH search is
      # performed.  Otherwise problems occur with Make implementations
      # that rewrite and simplify rules whose dependencies are found in a
      # VPATH location.  Here is an example with OSF1/Tru64 Make.
      #
      #   % cat Makefile
      #   VPATH = sub
      #   distdir: ../a
      #	          echo ../a
      #   % ls
      #   Makefile a
      #   % make
      #   echo a
      #   a
      #
      # Dependency '../a' was found in 'sub/../a', but this make
      # implementation simplified it as 'a'.  (Note that the sub/
      # directory does not even exist.)
      #
      # This kind of VPATH rewriting seems hard to cancel.  The
      # distdir.am hack against VPATH rewriting works only when no
      # simplification is done, i.e., for dependencies which are in
      # subdirectories, not in enclosing directories.  Hence, in
      # the latter case we use a full path to make sure no VPATH
      # search occurs.
      $fullfile = '$(srcdir)/' . $fullfile
	if $dir =~ m,^\.\.(?:$|/),;

      push_dist_common ($fullfile);
    }
  else
    {
      prog_error "a Makefile in relative directory $relative_dir " .
                 "can't add files in directory $dir to DIST_COMMON";
    }
}


# If a file name appears as a key in this hash, then it has already
# been checked for.  This allows us not to report the same error more
# than once.
my %required_file_not_found = ();

# required_file_check_or_copy ($WHERE, $DIRECTORY, $FILE)
# -------------------------------------------------------
# Verify that the file must exist in $DIRECTORY, or install it.
sub required_file_check_or_copy
{
  my ($where, $dir, $file) = @_;

  my $fullfile = "$dir/$file";
  my $found_it = 0;
  my $dangling_sym = 0;

  if (-l $fullfile && ! -f $fullfile)
    {
      $dangling_sym = 1;
    }
  elsif (dir_has_case_matching_file ($dir, $file))
    {
      $found_it = 1;
    }

  # '--force-missing' only has an effect if '--add-missing' is
  # specified.
  return
    if $found_it && (! $add_missing || ! $force_missing);

  # If we've already looked for it, we're done.  You might wonder why we
  # don't do this before searching for the file.  If we do that, then
  # something like AC_OUTPUT([subdir/foo foo]) will fail to put 'foo.in'
  # into $(DIST_COMMON).
  if (! $found_it)
    {
      return if defined $required_file_not_found{$fullfile};
      $required_file_not_found{$fullfile} = 1;
    }
  if ($dangling_sym && $add_missing)
    {
      unlink ($fullfile);
    }

  my $trailer = '';
  my $trailer2 = '';
  my $suppress = 0;

  # Only install missing files according to our desired
  # strictness level.
  my $message = "required file '$fullfile' not found";
  if ($add_missing)
    {
      if (-f "$libdir/$file")
        {
          $suppress = 1;

          # Install the missing file.  Symlink if we
          # can, copy if we must.  Note: delete the file
          # first, in case it is a dangling symlink.
          $message = "installing '$fullfile'";

          # The license file should not be volatile.
          if ($file eq "COPYING")
            {
              $message .= " using GNU General Public License v3 file";
              $trailer2 = "\n    Consider adding the COPYING file"
                        . " to the version control system"
                        . "\n    for your code, to avoid questions"
                        . " about which license your project uses";
            }

          # Windows Perl will hang if we try to delete a
          # file that doesn't exist.
          unlink ($fullfile) if -f $fullfile;
          if ($symlink_exists && ! $copy_missing)
            {
              if (! symlink ("$libdir/$file", $fullfile)
                  || ! -e $fullfile)
                {
                  $suppress = 0;
                  $trailer = "; error while making link: $!";
                }
            }
          elsif (system ('cp', "$libdir/$file", $fullfile))
            {
              $suppress = 0;
              $trailer = "\n    error while copying";
            }
          set_dir_cache_file ($dir, $file);
        }
    }
  else
    {
      $trailer = "\n  'automake --add-missing' can install '$file'"
        if -f "$libdir/$file";
    }

  # If --force-missing was specified, and we have
  # actually found the file, then do nothing.
  return
    if $found_it && $force_missing;

  # If we couldn't install the file, but it is a target in
  # the Makefile, don't print anything.  This allows files
  # like README, AUTHORS, or THANKS to be generated.
  return
    if !$suppress && rule $file;

  msg ($suppress ? 'note' : 'error', $where, "$message$trailer$trailer2");
}


# require_file_internal ($WHERE, $MYSTRICT, $DIRECTORY, $QUEUE, @FILES)
# ---------------------------------------------------------------------
# Verify that the file must exist in $DIRECTORY, or install it.
# $MYSTRICT is the strictness level at which this file becomes required.
# Worker threads may queue up the action to be serialized by the master,
# if $QUEUE is true
sub require_file_internal
{
  my ($where, $mystrict, $dir, $queue, @files) = @_;

  return
    unless $strictness >= $mystrict;

  foreach my $file (@files)
    {
      push_required_file ($dir, $file, "$dir/$file");
      if ($queue)
        {
          queue_required_file_check_or_copy ($required_conf_file_queue,
                                             QUEUE_CONF_FILE, $relative_dir,
                                             $where, $mystrict, @files);
        }
      else
        {
          required_file_check_or_copy ($where, $dir, $file);
        }
    }
}

# require_file ($WHERE, $MYSTRICT, @FILES)
# ----------------------------------------
sub require_file
{
    my ($where, $mystrict, @files) = @_;
    require_file_internal ($where, $mystrict, $relative_dir, 0, @files);
}

# require_file_with_macro ($COND, $MACRO, $MYSTRICT, @FILES)
# ----------------------------------------------------------
sub require_file_with_macro
{
    my ($cond, $macro, $mystrict, @files) = @_;
    $macro = rvar ($macro) unless ref $macro;
    require_file ($macro->rdef ($cond)->location, $mystrict, @files);
}

# require_libsource_with_macro ($COND, $MACRO, $MYSTRICT, @FILES)
# ---------------------------------------------------------------
# Require an AC_LIBSOURCEd file.  If AC_CONFIG_LIBOBJ_DIR was called, it
# must be in that directory.  Otherwise expect it in the current directory.
sub require_libsource_with_macro
{
    my ($cond, $macro, $mystrict, @files) = @_;
    $macro = rvar ($macro) unless ref $macro;
    if ($config_libobj_dir)
      {
	require_file_internal ($macro->rdef ($cond)->location, $mystrict,
			       $config_libobj_dir, 0, @files);
      }
    else
      {
	require_file ($macro->rdef ($cond)->location, $mystrict, @files);
      }
}

# queue_required_file_check_or_copy ($QUEUE, $KEY, $DIR, $WHERE,
#                                    $MYSTRICT, @FILES)
# --------------------------------------------------------------
sub queue_required_file_check_or_copy
{
    my ($queue, $key, $dir, $where, $mystrict, @files) = @_;
    my @serial_loc;
    if (ref $where)
      {
        @serial_loc = (QUEUE_LOCATION, $where->serialize ());
      }
    else
      {
        @serial_loc = (QUEUE_STRING, $where);
      }
    $queue->enqueue ($key, $dir, @serial_loc, $mystrict, 0 + @files, @files);
}

# require_queued_file_check_or_copy ($QUEUE)
# ------------------------------------------
sub require_queued_file_check_or_copy
{
    my ($queue) = @_;
    my $where;
    my $dir = $queue->dequeue ();
    my $loc_key = $queue->dequeue ();
    if ($loc_key eq QUEUE_LOCATION)
      {
	$where = Automake::Location::deserialize ($queue);
      }
    elsif ($loc_key eq QUEUE_STRING)
      {
	$where = $queue->dequeue ();
      }
    else
      {
	prog_error "unexpected key $loc_key";
      }
    my $mystrict = $queue->dequeue ();
    my $nfiles = $queue->dequeue ();
    my @files;
    push @files, $queue->dequeue ()
      foreach (1 .. $nfiles);
    return
      unless $strictness >= $mystrict;
    foreach my $file (@files)
      {
        required_file_check_or_copy ($where, $config_aux_dir, $file);
      }
}

# require_conf_file ($WHERE, $MYSTRICT, @FILES)
# ---------------------------------------------
# Looks in configuration path, as specified by AC_CONFIG_AUX_DIR.
sub require_conf_file
{
    my ($where, $mystrict, @files) = @_;
    my $queue = defined $required_conf_file_queue ? 1 : 0;
    require_file_internal ($where, $mystrict, $config_aux_dir,
                           $queue, @files);
}


# require_conf_file_with_macro ($COND, $MACRO, $MYSTRICT, @FILES)
# ---------------------------------------------------------------
sub require_conf_file_with_macro
{
    my ($cond, $macro, $mystrict, @files) = @_;
    require_conf_file (rvar ($macro)->rdef ($cond)->location,
		       $mystrict, @files);
}

################################################################

# require_build_directory ($DIRECTORY)
# ------------------------------------
# Emit rules to create $DIRECTORY if needed, and return
# the file that any target requiring this directory should be made
# dependent upon.
# We don't want to emit the rule twice, and want to reuse it
# for directories with equivalent names (e.g., 'foo/bar' and './foo//bar').
sub require_build_directory
{
  my $directory = shift;

  return $directory_map{$directory} if exists $directory_map{$directory};

  my $cdir = File::Spec->canonpath ($directory);

  if (exists $directory_map{$cdir})
    {
      my $stamp = $directory_map{$cdir};
      $directory_map{$directory} = $stamp;
      return $stamp;
    }

  my $dirstamp = "$cdir/\$(am__dirstamp)";

  $directory_map{$directory} = $dirstamp;
  $directory_map{$cdir} = $dirstamp;

  # Set a variable for the dirstamp basename.
  define_pretty_variable ('am__dirstamp', TRUE, INTERNAL,
			  '$(am__leading_dot)dirstamp');

  # Directory must be removed by 'make distclean'.
  $clean_files{$dirstamp} = DIST_CLEAN;

  $output_rules .= ("$dirstamp:\n"
		    . "\t\@\$(MKDIR_P) $directory\n"
		    . "\t\@: > $dirstamp\n");

  return $dirstamp;
}

# require_build_directory_maybe ($FILE)
# -------------------------------------
# If $FILE lies in a subdirectory, emit a rule to create this
# directory and return the file that $FILE should be made
# dependent upon.  Otherwise, just return the empty string.
sub require_build_directory_maybe
{
    my $file = shift;
    my $directory = dirname ($file);

    if ($directory ne '.')
    {
	return require_build_directory ($directory);
    }
    else
    {
	return '';
    }
}

################################################################

# Push a list of files onto '@dist_common'.
sub push_dist_common
{
  prog_error "push_dist_common run after handle_dist"
    if $handle_dist_run;
  push @dist_common, @_;
}


################################################################

# generate_makefile ($MAKEFILE_AM, $MAKEFILE_IN)
# ----------------------------------------------
# Generate a Makefile.in given the name of the corresponding Makefile and
# the name of the file output by config.status.
sub generate_makefile
{
  my ($makefile_am, $makefile_in) = @_;

  # Reset all the Makefile.am related variables.
  initialize_per_input;

  # AUTOMAKE_OPTIONS can contains -W flags to disable or enable
  # warnings for this file.  So hold any warning issued before
  # we have processed AUTOMAKE_OPTIONS.
  buffer_messages ('warning');

  # $OUTPUT is encoded.  If it contains a ":" then the first element
  # is the real output file, and all remaining elements are input
  # files.  We don't scan or otherwise deal with these input files,
  # other than to mark them as dependencies.  See the subroutine
  # 'scan_autoconf_files' for details.
  my ($makefile, @inputs) = split (/:/, $output_files{$makefile_in});

  $relative_dir = dirname ($makefile);

  read_main_am_file ($makefile_am, $makefile_in);
  if (not handle_options)
    {
      # Process buffered warnings.
      flush_messages;
      # Fatal error.  Just return, so we can continue with next file.
      return;
    }
  # Process buffered warnings.
  flush_messages;

  # There are a few install-related variables that you should not define.
  foreach my $var ('PRE_INSTALL', 'POST_INSTALL', 'NORMAL_INSTALL')
    {
      my $v = var $var;
      if ($v)
	{
	  my $def = $v->def (TRUE);
	  prog_error "$var not defined in condition TRUE"
	    unless $def;
	  reject_var $var, "'$var' should not be defined"
	    if $def->owner != VAR_AUTOMAKE;
	}
    }

  # Catch some obsolete variables.
  msg_var ('obsolete', 'INCLUDES',
	   "'INCLUDES' is the old name for 'AM_CPPFLAGS' (or '*_CPPFLAGS')")
    if var ('INCLUDES');

  # Must do this after reading .am file.
  define_variable ('subdir', $relative_dir, INTERNAL);

  # If DIST_SUBDIRS is defined, make sure SUBDIRS is, so that
  # recursive rules are enabled.
  define_pretty_variable ('SUBDIRS', TRUE, INTERNAL, '')
    if var 'DIST_SUBDIRS' && ! var 'SUBDIRS';

  # Check first, because we might modify some state.
  check_gnu_standards;
  check_gnits_standards;

  handle_configure ($makefile_am, $makefile_in, $makefile, @inputs);
  handle_gettext;

  handle_targets;
  handle_libraries;
  handle_ltlibraries;
  handle_programs;
  handle_scripts;

  handle_silent;

  # These must be run after all the sources are scanned.  They use
  # variables defined by handle_libraries(), handle_ltlibraries(),
  # or handle_programs().
  handle_compile;
  handle_languages;
  handle_libtool;

  # Variables used by distdir.am and tags.am.
  define_pretty_variable ('SOURCES', TRUE, INTERNAL, @sources);
  if (! option 'no-dist')
    {
      define_pretty_variable ('DIST_SOURCES', TRUE, INTERNAL, @dist_sources);
    }

  handle_texinfo;
  handle_emacs_lisp;
  handle_python;
  handle_java;
  handle_man_pages;
  handle_data;
  handle_headers;
  handle_subdirs;
  handle_user_recursion;
  handle_tags;
  handle_minor_options;
  # Must come after handle_programs so that %known_programs is up-to-date.
  handle_tests;

  # This must come after most other rules.
  handle_dist;

  handle_footer;
  do_check_merge_target;
  handle_all ($makefile);

  # FIXME: Gross!
  if (var ('lib_LTLIBRARIES') && var ('bin_PROGRAMS'))
    {
      $output_rules .= "install-binPROGRAMS: install-libLTLIBRARIES\n\n";
    }
  if (var ('nobase_lib_LTLIBRARIES') && var ('bin_PROGRAMS'))
    {
      $output_rules .= "install-binPROGRAMS: install-nobase_libLTLIBRARIES\n\n";
    }

  handle_install;
  handle_clean ($makefile);
  handle_factored_dependencies;

  # Comes last, because all the above procedures may have
  # defined or overridden variables.
  $output_vars .= output_variables;

  check_typos;

  if ($exit_code != 0)
    {
      verb "not writing $makefile_in because of earlier errors";
      return;
    }

  my $am_relative_dir = dirname ($makefile_am);
  mkdir ($am_relative_dir, 0755) if ! -d $am_relative_dir;

  # We make sure that 'all:' is the first target.
  my $output =
    "$output_vars$output_all$output_header$output_rules$output_trailer";

  # Decide whether we must update the output file or not.
  # We have to update in the following situations.
  #  * $force_generation is set.
  #  * any of the output dependencies is younger than the output
  #  * the contents of the output is different (this can happen
  #    if the project has been populated with a file listed in
  #    @common_files since the last run).
  # Output's dependencies are split in two sets:
  #  * dependencies which are also configure dependencies
  #    These do not change between each Makefile.am
  #  * other dependencies, specific to the Makefile.am being processed
  #    (such as the Makefile.am itself, or any Makefile fragment
  #    it includes).
  my $timestamp = mtime $makefile_in;
  if (! $force_generation
      && $configure_deps_greatest_timestamp < $timestamp
      && $output_deps_greatest_timestamp < $timestamp
      && $output eq contents ($makefile_in))
    {
      verb "$makefile_in unchanged";
      # No need to update.
      return;
    }

  if (-e $makefile_in)
    {
      unlink ($makefile_in)
	or fatal "cannot remove $makefile_in: $!";
    }

  my $gm_file = new Automake::XFile "> $makefile_in";
  verb "creating $makefile_in";
  print $gm_file $output;
}


################################################################


# Helper function for usage().
sub print_autodist_files
{
  my @lcomm = uniq (sort @_);

  my @four;
  format USAGE_FORMAT =
  @<<<<<<<<<<<<<<<<   @<<<<<<<<<<<<<<<<   @<<<<<<<<<<<<<<<<   @<<<<<<<<<<<<<<<<
  $four[0],           $four[1],           $four[2],           $four[3]
.
  local $~ = "USAGE_FORMAT";

  my $cols = 4;
  my $rows = int(@lcomm / $cols);
  my $rest = @lcomm % $cols;

  if ($rest)
    {
      $rows++;
    }
  else
    {
      $rest = $cols;
    }

  for (my $y = 0; $y < $rows; $y++)
    {
      @four = ("", "", "", "");
      for (my $x = 0; $x < $cols; $x++)
        {
          last if $y + 1 == $rows && $x == $rest;

          my $idx = (($x > $rest)
               ?  ($rows * $rest + ($rows - 1) * ($x - $rest))
               : ($rows * $x));

          $idx += $y;
          $four[$x] = $lcomm[$idx];
        }
      write;
    }
}


sub usage ()
{
    print "Usage: $0 [OPTION]... [Makefile]...

Generate Makefile.in for configure from Makefile.am.

Operation modes:
      --help               print this help, then exit
      --version            print version number, then exit
  -v, --verbose            verbosely list files processed
      --no-force           only update Makefile.in's that are out of date
  -W, --warnings=CATEGORY  report the warnings falling in CATEGORY

Dependency tracking:
  -i, --ignore-deps      disable dependency tracking code
      --include-deps     enable dependency tracking code

Flavors:
      --foreign          set strictness to foreign
      --gnits            set strictness to gnits
      --gnu              set strictness to gnu

Library files:
  -a, --add-missing      add missing standard files to package
      --libdir=DIR       set directory storing library files
      --print-libdir     print directory storing library files
  -c, --copy             with -a, copy missing files (default is symlink)
  -f, --force-missing    force update of standard files

";
    Automake::ChannelDefs::usage;

    print "\nFiles automatically distributed if found " .
          "(always):\n";
    print_autodist_files @common_files;
    print "\nFiles automatically distributed if found " .
          "(under certain conditions):\n";
    print_autodist_files @common_sometimes;

    print '
Report bugs to <bug-automake@gnu.org>.
GNU Automake home page: <http://www.gnu.org/software/automake/>.
General help using GNU software: <https://www.gnu.org/gethelp/>.
';

    # --help always returns 0 per GNU standards.
    exit 0;
}


sub version ()
{
  print <<EOF;
automake (GNU $PACKAGE) $VERSION
Copyright (C) $RELEASE_YEAR Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later <https://gnu.org/licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by Tom Tromey <tromey\@redhat.com>
       and Alexandre Duret-Lutz <adl\@gnu.org>.
EOF
  # --version always returns 0 per GNU standards.
  exit 0;
}

################################################################

# Parse command line.
sub parse_arguments ()
{
  my $strict = 'gnu';
  my $ignore_deps = 0;
  my @warnings = ();

  my %cli_options =
    (
     'version' => \&version,
     'help'    => \&usage,
     'libdir=s'	=> \$libdir,
     'print-libdir'     => sub { print "$libdir\n"; exit 0; },
     'gnu'		=> sub { $strict = 'gnu'; },
     'gnits'		=> sub { $strict = 'gnits'; },
     'foreign'		=> sub { $strict = 'foreign'; },
     'include-deps'	=> sub { $ignore_deps = 0; },
     'i|ignore-deps'	=> sub { $ignore_deps = 1; },
     'no-force'	=> sub { $force_generation = 0; },
     'f|force-missing'  => \$force_missing,
     'a|add-missing'	=> \$add_missing,
     'c|copy'		=> \$copy_missing,
     'v|verbose'	=> sub { setup_channel 'verb', silent => 0; },
     'W|warnings=s'     => \@warnings,
     );

  use Automake::Getopt ();
  Automake::Getopt::parse_options %cli_options;

  set_strictness ($strict);
  my $cli_where = new Automake::Location;
  set_global_option ('no-dependencies', $cli_where) if $ignore_deps;
  for my $warning (@warnings)
    {
      parse_warnings ('-W', $warning);
    }

  return unless @ARGV;

  my $errspec = 0;
  foreach my $arg (@ARGV)
    {
      fatal ("empty argument\nTry '$0 --help' for more information")
	if ($arg eq '');

      # Handle $local:$input syntax.
      my ($local, @rest) = split (/:/, $arg);
      @rest = ("$local.in",) unless @rest;
      my $input = locate_am @rest;
      if ($input)
	{
	  push @input_files, $input;
	  $output_files{$input} = join (':', ($local, @rest));
	}
      else
	{
	  error "no Automake input file found for '$arg'";
	  $errspec = 1;
	}
    }
  fatal "no input file found among supplied arguments"
    if $errspec && ! @input_files;
}


# handle_makefile ($MAKEFILE)
# ---------------------------
sub handle_makefile
{
  my ($file) =  @_;
  ($am_file = $file) =~ s/\.in$//;
  if (! -f ($am_file . '.am'))
    {
      error "'$am_file.am' does not exist";
    }
  else
    {
      # Any warning setting now local to this Makefile.am.
      dup_channel_setup;

      generate_makefile ($am_file . '.am', $file);

      # Back out any warning setting.
      drop_channel_setup;
    }
}

# Deal with all makefiles, without threads.
sub handle_makefiles_serial ()
{
  foreach my $file (@input_files)
    {
      handle_makefile ($file);
    }
}

# Logic for deciding how many worker threads to use.
sub get_number_of_threads ()
{
  my $nthreads = $ENV{'AUTOMAKE_JOBS'} || 0;

  $nthreads = 0
    unless $nthreads =~ /^[0-9]+$/;

  # It doesn't make sense to use more threads than makefiles,
  my $max_threads = @input_files;

  if ($nthreads > $max_threads)
    {
      $nthreads = $max_threads;
    }
  return $nthreads;
}

# handle_makefiles_threaded ($NTHREADS)
# -------------------------------------
# Deal with all makefiles, using threads.  The general strategy is to
# spawn NTHREADS worker threads, dispatch makefiles to them, and let the
# worker threads push back everything that needs serialization:
# * warning and (normal) error messages, for stable stderr output
#   order and content (avoiding duplicates, for example),
# * races when installing aux files (and respective messages),
# * races when collecting aux files for distribution.
#
# The latter requires that the makefile that deals with the aux dir
# files be handled last, done by the master thread.
sub handle_makefiles_threaded
{
  my ($nthreads) = @_;

  # The file queue distributes all makefiles, the message queues
  # collect all serializations needed for respective files.
  my $file_queue = Thread::Queue->new;
  my %msg_queues;
  foreach my $file (@input_files)
    {
      $msg_queues{$file} = Thread::Queue->new;
    }

  verb "spawning $nthreads worker threads";
  my @threads = (1 .. $nthreads);
  foreach my $t (@threads)
    {
      $t = threads->new (sub
	{
	  while (my $file = $file_queue->dequeue)
	    {
	      verb "handling $file";
	      my $queue = $msg_queues{$file};
	      setup_channel_queue ($queue, QUEUE_MESSAGE);
	      $required_conf_file_queue = $queue;
	      handle_makefile ($file);
	      $queue->enqueue (undef);
	      setup_channel_queue (undef, undef);
	      $required_conf_file_queue = undef;
	    }
	  return $exit_code;
	});
    }

  # Queue all makefiles.
  verb "queuing " . @input_files . " input files";
  $file_queue->enqueue (@input_files, (undef) x @threads);

  # Collect and process serializations.
  foreach my $file (@input_files)
    {
      verb "dequeuing messages for " . $file;
      reset_local_duplicates ();
      my $queue = $msg_queues{$file};
      while (my $key = $queue->dequeue)
	{
	  if ($key eq QUEUE_MESSAGE)
	    {
	      pop_channel_queue ($queue);
	    }
	  elsif ($key eq QUEUE_CONF_FILE)
	    {
	      require_queued_file_check_or_copy ($queue);
	    }
	  else
	    {
	      prog_error "unexpected key $key";
	    }
	}
    }

  foreach my $t (@threads)
    {
      my @exit_thread = $t->join;
      $exit_code = $exit_thread[0]
	if ($exit_thread[0] > $exit_code);
    }
}

################################################################

# Parse the WARNINGS environment variable.
parse_WARNINGS;

# Parse command line.
parse_arguments;

$configure_ac = require_configure_ac;

# Do configure.ac scan only once.
scan_autoconf_files;

if (! @input_files)
  {
    my $msg = '';
    $msg = "\nDid you forget AC_CONFIG_FILES([Makefile]) in $configure_ac?"
      if -f 'Makefile.am';
    fatal ("no 'Makefile.am' found for any configure output$msg");
  }

my $nthreads = get_number_of_threads ();

if ($perl_threads && $nthreads >= 1)
  {
    handle_makefiles_threaded ($nthreads);
  }
else
  {
    handle_makefiles_serial ();
  }

exit $exit_code;
+ test 0 -eq 0
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/get-sysconf.sh (exit status: 77)

XFAIL: t/pm/Cond2
=================

'Automake::Condition=HASH(0x102a32f0)' is a reference, expected a string at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Condition.pm line 188.
	Automake::Condition::new("Automake::Condition", Automake::Condition=HASH(0x102a32f0)) called at ./t/pm/Cond2.pl line 22
XFAIL t/pm/Cond2.pl (exit status: 255)

XFAIL: t/pm/Cond3
=================

'Automake::Condition=HASH(0x101ed1f8)' does not look like a condition at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Condition.pm line 190.
	Automake::Condition::new("Automake::Condition", "Automake::Condition=HASH(0x101ed1f8)") called at ./t/pm/Cond3.pl line 22
XFAIL t/pm/Cond3.pl (exit status: 255)

XFAIL: t/pm/DisjCon2
====================

'Automake::DisjConditions=HASH(0x101ec6c8)' isn't an Automake::Condition at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/DisjConditions.pm line 151.
	Automake::DisjConditions::new("Automake::DisjConditions", Automake::DisjConditions=HASH(0x101ec6c8)) called at ./t/pm/DisjCon2.pl line 24
XFAIL t/pm/DisjCon2.pl (exit status: 255)

XFAIL: t/pm/DisjCon3
====================

'Automake::Condition=HASH(0x101ed1f8)' isn't a reference at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/DisjConditions.pm line 150.
	Automake::DisjConditions::new("Automake::DisjConditions", "Automake::Condition=HASH(0x101ed1f8)") called at ./t/pm/DisjCon3.pl line 23
XFAIL t/pm/DisjCon3.pl (exit status: 255)

XFAIL: t/pm/Version2
====================

Version2.pl: error: version is incorrect: 
Version2.pl: Please contact <bug-automake@gnu.org>.
 at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Channels.pm line 662.
	Automake::Channels::msg("automake", "", "version is incorrect: ") called at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/ChannelDefs.pm line 212
	Automake::ChannelDefs::prog_error("version is incorrect: ") called at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Version.pm line 126
	Automake::Version::check("", "1.2.3") called at ./t/pm/Version2.pl line 20
XFAIL t/pm/Version2.pl (exit status: 255)

XFAIL: t/pm/Version3
====================

Version3.pl: error: required version is incorrect: 
Version3.pl: Please contact <bug-automake@gnu.org>.
 at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Channels.pm line 662.
	Automake::Channels::msg("automake", "", "required version is incorrect: ") called at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/ChannelDefs.pm line 212
	Automake::ChannelDefs::prog_error("required version is incorrect: ") called at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/Automake/Version.pm line 131
	Automake::Version::check("1.2.3", "") called at ./t/pm/Version3.pl line 20
XFAIL t/pm/Version3.pl (exit status: 255)

PASS: t/instspc
===============

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ all_test_names_list=
+ builddir_xfails=
+ destdir_xfails=
+ bs=$'\b'
+ cr=$'\r'
+ ff=$'\f'
+ ht='	'
+ lf='
'
+ def=define_problematic_string
+ define_problematic_string squote \' fail-builddir fail-destdir
+ tst=squote
+ shift
+ eval 'instspc__squote=$1'
++ instspc__squote=\'
+ shift
+ all_test_names_list=' squote'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote'
+ define_problematic_string dquote '"' fail-builddir fail-destdir
+ tst=dquote
+ shift
+ eval 'instspc__dquote=$1'
++ instspc__dquote='"'
+ shift
+ all_test_names_list=' squote dquote'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote'
+ define_problematic_string bquote '`' fail-builddir fail-destdir
+ tst=bquote
+ shift
+ eval 'instspc__bquote=$1'
++ instspc__bquote='`'
+ shift
+ all_test_names_list=' squote dquote bquote'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote bquote'
+ define_problematic_string sharp '#' fail-builddir fail-destdir
+ tst=sharp
+ shift
+ eval 'instspc__sharp=$1'
++ instspc__sharp='#'
+ shift
+ all_test_names_list=' squote dquote bquote sharp'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote bquote sharp'
+ define_problematic_string dollar '$' fail-builddir fail-destdir
+ tst=dollar
+ shift
+ eval 'instspc__dollar=$1'
++ instspc__dollar='$'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote bquote sharp dollar'
+ define_problematic_string bang '!'
+ tst=bang
+ shift
+ eval 'instspc__bang=$1'
++ instspc__bang='!'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string bslash '\' fail-builddir
+ tst=bslash
+ shift
+ eval 'instspc__bslash=$1'
++ instspc__bslash='\'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash'
+ is_in_list fail-builddir fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar bslash'
+ is_in_list fail-destdir fail-builddir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string ampersand '&' fail-builddir
+ tst=ampersand
+ shift
+ eval 'instspc__ampersand=$1'
++ instspc__ampersand='&'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand'
+ is_in_list fail-builddir fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar bslash ampersand'
+ is_in_list fail-destdir fail-builddir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string percent %
+ tst=percent
+ shift
+ eval 'instspc__percent=$1'
++ instspc__percent=%
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string leftpar '('
+ tst=leftpar
+ shift
+ eval 'instspc__leftpar=$1'
++ instspc__leftpar='('
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string rightpar ')'
+ tst=rightpar
+ shift
+ eval 'instspc__rightpar=$1'
++ instspc__rightpar=')'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string pipe '|'
+ tst=pipe
+ shift
+ eval 'instspc__pipe=$1'
++ instspc__pipe='|'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string caret '^'
+ tst=caret
+ shift
+ eval 'instspc__caret=$1'
++ instspc__caret='^'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string tilde '~'
+ tst=tilde
+ shift
+ eval 'instspc__tilde=$1'
++ instspc__tilde='~'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string qmark '?'
+ tst=qmark
+ shift
+ eval 'instspc__qmark=$1'
++ instspc__qmark='?'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string star '*'
+ tst=star
+ shift
+ eval 'instspc__star=$1'
++ instspc__star='*'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string plus +
+ tst=plus
+ shift
+ eval 'instspc__plus=$1'
++ instspc__plus=+
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string minus -
+ tst=minus
+ shift
+ eval 'instspc__minus=$1'
++ instspc__minus=-
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string comma ,
+ tst=comma
+ shift
+ eval 'instspc__comma=$1'
++ instspc__comma=,
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string colon :
+ tst=colon
+ shift
+ eval 'instspc__colon=$1'
++ instspc__colon=:
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string semicol ';'
+ tst=semicol
+ shift
+ eval 'instspc__semicol=$1'
++ instspc__semicol=';'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string equal =
+ tst=equal
+ shift
+ eval 'instspc__equal=$1'
++ instspc__equal==
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string less '<'
+ tst=less
+ shift
+ eval 'instspc__less=$1'
++ instspc__less='<'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string more '>'
+ tst=more
+ shift
+ eval 'instspc__more=$1'
++ instspc__more='>'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string at @
+ tst=at
+ shift
+ eval 'instspc__at=$1'
++ instspc__at=@
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string lqbrack '['
+ tst=lqbrack
+ shift
+ eval 'instspc__lqbrack=$1'
++ instspc__lqbrack='['
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string rqbrack ']'
+ tst=rqbrack
+ shift
+ eval 'instspc__rqbrack=$1'
++ instspc__rqbrack=']'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string lcbrack '{'
+ tst=lcbrack
+ shift
+ eval 'instspc__lcbrack=$1'
++ instspc__lcbrack='{'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string rcbrack '}'
+ tst=rcbrack
+ shift
+ eval 'instspc__rcbrack=$1'
++ instspc__rcbrack='}'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string space ' '
+ tst=space
+ shift
+ eval 'instspc__space=$1'
++ instspc__space=' '
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string tab '	'
+ tst=tab
+ shift
+ eval 'instspc__tab=$1'
++ instspc__tab='	'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string linefeed '
' fail-builddir fail-destdir
+ tst=linefeed
+ shift
+ eval 'instspc__linefeed=$1'
++ instspc__linefeed='
'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar bslash ampersand linefeed'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote bquote sharp dollar linefeed'
+ define_problematic_string backspace $'\b'
+ tst=backspace
+ shift
+ eval 'instspc__backspace=$1'
++ instspc__backspace=$'\b'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string formfeed $'\f'
+ tst=formfeed
+ shift
+ eval 'instspc__formfeed=$1'
++ instspc__formfeed=$'\f'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string carriageret $'\r'
+ tst=carriageret
+ shift
+ eval 'instspc__carriageret=$1'
++ instspc__carriageret=$'\r'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string quadrigraph0 '@&t@' fail-builddir
+ tst=quadrigraph0
+ shift
+ eval 'instspc__quadrigraph0=$1'
++ instspc__quadrigraph0='@&t@'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0'
+ is_in_list fail-builddir fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0'
+ is_in_list fail-destdir fail-builddir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string quadrigraph1 '@<:@'
+ tst=quadrigraph1
+ shift
+ eval 'instspc__quadrigraph1=$1'
++ instspc__quadrigraph1='@<:@'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string quadrigraph2 '@:>@'
+ tst=quadrigraph2
+ shift
+ eval 'instspc__quadrigraph2=$1'
++ instspc__quadrigraph2='@:>@'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string quadrigraph3 '@S|@'
+ tst=quadrigraph3
+ shift
+ eval 'instspc__quadrigraph3=$1'
++ instspc__quadrigraph3='@S|@'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string quadrigraph4 @%:@
+ tst=quadrigraph4
+ shift
+ eval 'instspc__quadrigraph4=$1'
++ instspc__quadrigraph4=@%:@
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string a_b 'a b'
+ tst=a_b
+ shift
+ eval 'instspc__a_b=$1'
++ instspc__a_b='a b'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string a__b 'a  b'
+ tst=a__b
+ shift
+ eval 'instspc__a__b=$1'
++ instspc__a__b='a  b'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string a_lf_b 'a
b' fail-builddir fail-destdir
+ tst=a_lf_b
+ shift
+ eval 'instspc__a_lf_b=$1'
++ instspc__a_lf_b='a
b'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b'
+ is_in_list fail-builddir fail-builddir fail-destdir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 0
+ builddir_xfails=' squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b'
+ is_in_list fail-destdir fail-builddir fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 0
+ destdir_xfails=' squote dquote bquote sharp dollar linefeed a_lf_b'
+ define_problematic_string dotdotdot ...
+ tst=dotdotdot
+ shift
+ eval 'instspc__dotdotdot=$1'
++ instspc__dotdotdot=...
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b dotdotdot'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string dosdrive a:
+ tst=dosdrive
+ shift
+ eval 'instspc__dosdrive=$1'
++ instspc__dosdrive=a:
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b dotdotdot dosdrive'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string miscglob1 '?[a-z]*'
+ tst=miscglob1
+ shift
+ eval 'instspc__miscglob1=$1'
++ instspc__miscglob1='?[a-z]*'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b dotdotdot dosdrive miscglob1'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ define_problematic_string miscglob2 '.*?[0-9]'
+ tst=miscglob2
+ shift
+ eval 'instspc__miscglob2=$1'
++ instspc__miscglob2='.*?[0-9]'
+ shift
+ all_test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b dotdotdot dosdrive miscglob1 miscglob2'
+ is_in_list fail-builddir
+ item=fail-builddir
+ shift
+ case " $* " in
+ return 1
+ is_in_list fail-destdir
+ item=fail-destdir
+ shift
+ case " $* " in
+ return 1
+ unset def
+ test 0 -gt 0
+ test_names_list=' squote dquote bquote sharp dollar bang bslash ampersand percent leftpar rightpar pipe caret tilde qmark star plus minus comma colon semicol equal less more at lqbrack rqbrack lcbrack rcbrack space tab linefeed backspace formfeed carriageret quadrigraph0 quadrigraph1 quadrigraph2 quadrigraph3 quadrigraph4 a_b a__b a_lf_b dotdotdot dosdrive miscglob1 miscglob2'
+ plan_ 94
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x94 = xunknown
+ test x94 = xlater
+ test x94 = xlazy
+ test x94 = xnow
+ test 94 -ge 0
+ planned_=94
+ echo 1..94
1..94
++ pwd
+ ocwd=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ create_input_data
+ mkdir sub
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ :
+ :
+ :
+ :
+ :
+ :
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac:5: installing './ar-lib'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__squote}'
++ test_string=\'
+ test 'x'\''' = x
+ mkdir './'\'''
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./'\'''
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote
+ cd './'\'''
+ r=ok
+ ../configure --prefix '/'\''-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='squote in builddir'
+ expected_to_fail build squote
+ case $1 in
+ is_in_list squote squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=squote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'squote in builddir'
+ set +x
not ok 1 - squote in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 1 - squote in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-squote
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'\'''
+ mkdir build-squote
+ cd build-squote
+ r=ok
+ ../configure --prefix '/'\''-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'\'''
+ file='./'\'''
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-squote'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/'-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-squote'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-squote/'/./'-prefix/foo/sub/nobase.h'
make: *** [Makefile:1138: test-inst] Error 1
+ r='not ok'
+ description='squote in destdir'
+ expected_to_fail dest squote
+ case $1 in
+ is_in_list squote squote dquote bquote sharp dollar linefeed a_lf_b
+ item=squote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'squote in destdir'
+ set +x
not ok 2 - squote in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 2 - squote in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__dquote}'
++ test_string='"'
+ test 'x"' = x
+ mkdir './"'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./"'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dquote
+ cd './"'
+ r=ok
+ ../configure --prefix '/"-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='dquote in builddir'
+ expected_to_fail build dquote
+ case $1 in
+ is_in_list dquote squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=dquote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'dquote in builddir'
+ set +x
not ok 3 - dquote in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 3 - dquote in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-dquote
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dquote/"'
+ mkdir build-dquote
+ cd build-dquote
+ r=ok
+ ../configure --prefix '/"-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dquote/"'
+ file='./"'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dquote'
/bin/sh: syntax error at line 5 : `(' unexpected
make[1]: *** [Makefile:477: install-fooexecLIBRARIES] Error 2
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dquote'
make: *** [Makefile:995: install-am] Error 2
+ r='not ok'
+ description='dquote in destdir'
+ expected_to_fail dest dquote
+ case $1 in
+ is_in_list dquote squote dquote bquote sharp dollar linefeed a_lf_b
+ item=dquote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'dquote in destdir'
+ set +x
not ok 4 - dquote in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 4 - dquote in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__bquote}'
++ test_string='`'
+ test 'x`' = x
+ mkdir './`'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./`'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote
+ cd './`'
+ r=ok
+ ../configure --prefix '/`-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='bquote in builddir'
+ expected_to_fail build bquote
+ case $1 in
+ is_in_list bquote squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=bquote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'bquote in builddir'
+ set +x
not ok 5 - bquote in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 5 - bquote in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-bquote
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/`'
+ mkdir build-bquote
+ cd build-bquote
+ r=ok
+ ../configure --prefix '/`-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/`'
+ file='./`'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bquote'
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[23]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[24]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[8]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[9]: /: cannot execute
/bin/sh[10]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[11]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[5]: /: cannot execute
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo' && : libbase.a )
/bin/sh[6]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[23]: /: cannot execute
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[24]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[23]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub/'
/bin/sh[24]: /: cannot execute
/bin/sh[28]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub/'
/bin/sh[29]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[11]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[12]: /: cannot execute
/bin/sh[13]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[14]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[5]: /: cannot execute
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo' && : sub/libnobase.a )
/bin/sh[6]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[22]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub/'
/bin/sh[23]: /: cannot execute
/bin/sh[27]: /: cannot execute
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub/'
/bin/sh[28]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[11]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[12]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[11]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[12]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[12]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[13]: /: cannot execute
/bin/sh[14]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[15]: /: cannot execute
/bin/sh: -prefix/foo:  not found
/bin/sh[3]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo'
/bin/sh[4]: /: cannot execute
/bin/sh[12]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[13]: /: cannot execute
/bin/sh[14]: /: cannot execute
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/-prefix/foo/sub'
/bin/sh[15]: /: cannot execute
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bquote'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bquote/`/./`-prefix/foo/sub/nobase.h'
make: *** [Makefile:1138: test-inst] Error 1
+ r='not ok'
+ description='bquote in destdir'
+ expected_to_fail dest bquote
+ case $1 in
+ is_in_list bquote squote dquote bquote sharp dollar linefeed a_lf_b
+ item=bquote
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'bquote in destdir'
+ set +x
not ok 6 - bquote in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 6 - bquote in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__sharp}'
++ test_string='#'
+ test x# = x
+ mkdir ./#
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./#
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp
+ cd ./#
+ r=ok
+ ../configure --prefix /#-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='sharp in builddir'
+ expected_to_fail build sharp
+ case $1 in
+ is_in_list sharp squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=sharp
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'sharp in builddir'
+ set +x
not ok 7 - sharp in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 7 - sharp in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-sharp
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#
+ mkdir build-sharp
+ cd build-sharp
+ r=ok
+ ../configure --prefix /#-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#
+ file=./#
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-sharp'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#//foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-sharp'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-sharp/#/./#-prefix/foo/sub/nobase.h'
make: *** [Makefile:1138: test-inst] Error 1
+ r='not ok'
+ description='sharp in destdir'
+ expected_to_fail dest sharp
+ case $1 in
+ is_in_list sharp squote dquote bquote sharp dollar linefeed a_lf_b
+ item=sharp
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'sharp in destdir'
+ set +x
not ok 8 - sharp in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 8 - sharp in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__dollar}'
++ test_string='$'
+ test 'x$' = x
+ mkdir './$'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./$'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar
+ cd './$'
+ r=ok
+ ../configure --prefix '/$-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='dollar in builddir'
+ expected_to_fail build dollar
+ case $1 in
+ is_in_list dollar squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=dollar
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'dollar in builddir'
+ set +x
not ok 9 - dollar in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 9 - dollar in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-dollar
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$'
+ mkdir build-dollar
+ cd build-dollar
+ r=ok
+ ../configure --prefix '/$-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$'
+ file='./$'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dollar'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dollar'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dollar/$/./$-prefix/foo/sub/nobase.h'
make: *** [Makefile:1138: test-inst] Error 1
+ r='not ok'
+ description='dollar in destdir'
+ expected_to_fail dest dollar
+ case $1 in
+ is_in_list dollar squote dquote bquote sharp dollar linefeed a_lf_b
+ item=dollar
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'dollar in destdir'
+ set +x
not ok 10 - dollar in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 10 - dollar in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__bang}'
++ test_string='!'
+ test 'x!' = x
+ mkdir './!'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./!'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang
+ cd './!'
+ r=ok
+ ../configure --prefix '/!-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang
+ file='./!'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/!'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/!'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/./!-prefix/foo/libbase.a'
+ description='bang in builddir'
+ expected_to_fail build bang
+ case $1 in
+ is_in_list bang squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=bang
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'bang in builddir'
+ set +x
ok 11 - bang in builddir
PASS: t/instspc.tap 11 - bang in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './!' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './!' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-bang
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!'
+ mkdir build-bang
+ cd build-bang
+ r=ok
+ ../configure --prefix '/!-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!'
+ file='./!'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bang'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/!-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bang'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!/./!-prefix/foo/libbase.a'
+ description='bang in destdir'
+ expected_to_fail dest bang
+ case $1 in
+ is_in_list bang squote dquote bquote sharp dollar linefeed a_lf_b
+ item=bang
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'bang in destdir'
+ set +x
ok 12 - bang in destdir
PASS: t/instspc.tap 12 - bang in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-bang '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-bang '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bang/!'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__bslash}'
++ test_string='\'
+ test 'x\' = x
+ mkdir './\'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./\'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash
+ cd './\'
+ r=ok
+ ../configure --prefix '/\-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='bslash in builddir'
+ expected_to_fail build bslash
+ case $1 in
+ is_in_list bslash squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=bslash
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'bslash in builddir'
+ set +x
not ok 13 - bslash in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 13 - bslash in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-bslash
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\'
+ mkdir build-bslash
+ cd build-bslash
+ r=ok
+ ../configure --prefix '/\-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\'
+ file='./\'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bslash'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/\-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-bslash'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\/./\-prefix/foo/libbase.a'
+ description='bslash in destdir'
+ expected_to_fail dest bslash
+ case $1 in
+ is_in_list bslash squote dquote bquote sharp dollar linefeed a_lf_b
+ item=bslash
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'bslash in destdir'
+ set +x
ok 14 - bslash in destdir
PASS: t/instspc.tap 14 - bslash in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-bslash '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-bslash '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-bslash/\'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__ampersand}'
++ test_string='&'
+ test 'x&' = x
+ mkdir './&'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./&'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand
+ cd './&'
+ r=ok
+ ../configure --prefix '/&-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='ampersand in builddir'
+ expected_to_fail build ampersand
+ case $1 in
+ is_in_list ampersand squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=ampersand
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'ampersand in builddir'
+ set +x
not ok 15 - ampersand in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 15 - ampersand in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-ampersand
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&'
+ mkdir build-ampersand
+ cd build-ampersand
+ r=ok
+ ../configure --prefix '/&-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&'
+ file='./&'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-ampersand'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/&-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-ampersand'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&/./&-prefix/foo/libbase.a'
+ description='ampersand in destdir'
+ expected_to_fail dest ampersand
+ case $1 in
+ is_in_list ampersand squote dquote bquote sharp dollar linefeed a_lf_b
+ item=ampersand
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'ampersand in destdir'
+ set +x
ok 16 - ampersand in destdir
PASS: t/instspc.tap 16 - ampersand in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-ampersand '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-ampersand '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-ampersand/&'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__percent}'
++ test_string=%
+ test x% = x
+ mkdir ./%
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./%
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent
+ cd ./%
+ r=ok
+ ../configure --prefix /%-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent
+ file=./%
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/%'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/%'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/./%-prefix/foo/libbase.a'
+ description='percent in builddir'
+ expected_to_fail build percent
+ case $1 in
+ is_in_list percent squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=percent
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'percent in builddir'
+ set +x
ok 17 - percent in builddir
PASS: t/instspc.tap 17 - percent in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./% /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./% /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-percent
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%
+ mkdir build-percent
+ cd build-percent
+ r=ok
+ ../configure --prefix /%-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%
+ file=./%
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-percent'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/%-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-percent'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%/./%-prefix/foo/libbase.a'
+ description='percent in destdir'
+ expected_to_fail dest percent
+ case $1 in
+ is_in_list percent squote dquote bquote sharp dollar linefeed a_lf_b
+ item=percent
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'percent in destdir'
+ set +x
ok 18 - percent in destdir
PASS: t/instspc.tap 18 - percent in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-percent /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-percent /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-percent/%
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__leftpar}'
++ test_string='('
+ test 'x(' = x
+ mkdir './('
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./('
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar
+ cd './('
+ r=ok
+ ../configure --prefix '/(-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar
+ file='./('
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/('
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/('
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/./(-prefix/foo/libbase.a'
+ description='leftpar in builddir'
+ expected_to_fail build leftpar
+ case $1 in
+ is_in_list leftpar squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=leftpar
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'leftpar in builddir'
+ set +x
ok 19 - leftpar in builddir
PASS: t/instspc.tap 19 - leftpar in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './(' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './(' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-leftpar
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/('
+ mkdir build-leftpar
+ cd build-leftpar
+ r=ok
+ ../configure --prefix '/(-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/('
+ file='./('
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-leftpar'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/(-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-leftpar'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/(/./(-prefix/foo/libbase.a'
+ description='leftpar in destdir'
+ expected_to_fail dest leftpar
+ case $1 in
+ is_in_list leftpar squote dquote bquote sharp dollar linefeed a_lf_b
+ item=leftpar
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'leftpar in destdir'
+ set +x
ok 20 - leftpar in destdir
PASS: t/instspc.tap 20 - leftpar in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-leftpar '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/('
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-leftpar '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-leftpar/('
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__rightpar}'
++ test_string=')'
+ test 'x)' = x
+ mkdir './)'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./)'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar
+ cd './)'
+ r=ok
+ ../configure --prefix '/)-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar
+ file='./)'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/)'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/)'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/./)-prefix/foo/libbase.a'
+ description='rightpar in builddir'
+ expected_to_fail build rightpar
+ case $1 in
+ is_in_list rightpar squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=rightpar
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rightpar in builddir'
+ set +x
ok 21 - rightpar in builddir
PASS: t/instspc.tap 21 - rightpar in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './)' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './)' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-rightpar
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)'
+ mkdir build-rightpar
+ cd build-rightpar
+ r=ok
+ ../configure --prefix '/)-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)'
+ file='./)'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rightpar'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/)-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rightpar'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)/./)-prefix/foo/libbase.a'
+ description='rightpar in destdir'
+ expected_to_fail dest rightpar
+ case $1 in
+ is_in_list rightpar squote dquote bquote sharp dollar linefeed a_lf_b
+ item=rightpar
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rightpar in destdir'
+ set +x
ok 22 - rightpar in destdir
PASS: t/instspc.tap 22 - rightpar in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-rightpar '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-rightpar '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rightpar/)'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__pipe}'
++ test_string='|'
+ test 'x|' = x
+ mkdir './|'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./|'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe
+ cd './|'
+ r=ok
+ ../configure --prefix '/|-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe
+ file='./|'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/|'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/|'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/./|-prefix/foo/libbase.a'
+ description='pipe in builddir'
+ expected_to_fail build pipe
+ case $1 in
+ is_in_list pipe squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=pipe
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'pipe in builddir'
+ set +x
ok 23 - pipe in builddir
PASS: t/instspc.tap 23 - pipe in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './|' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './|' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-pipe
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|'
+ mkdir build-pipe
+ cd build-pipe
+ r=ok
+ ../configure --prefix '/|-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|'
+ file='./|'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-pipe'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/|-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-pipe'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|/./|-prefix/foo/libbase.a'
+ description='pipe in destdir'
+ expected_to_fail dest pipe
+ case $1 in
+ is_in_list pipe squote dquote bquote sharp dollar linefeed a_lf_b
+ item=pipe
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'pipe in destdir'
+ set +x
ok 24 - pipe in destdir
PASS: t/instspc.tap 24 - pipe in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-pipe '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-pipe '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-pipe/|'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__caret}'
++ test_string='^'
+ test 'x^' = x
+ mkdir './^'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./^'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret
+ cd './^'
+ r=ok
+ ../configure --prefix '/^-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret
+ file='./^'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/^'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/^'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/./^-prefix/foo/libbase.a'
+ description='caret in builddir'
+ expected_to_fail build caret
+ case $1 in
+ is_in_list caret squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=caret
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'caret in builddir'
+ set +x
ok 25 - caret in builddir
PASS: t/instspc.tap 25 - caret in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './^' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './^' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-caret
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^'
+ mkdir build-caret
+ cd build-caret
+ r=ok
+ ../configure --prefix '/^-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^'
+ file='./^'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-caret'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/^-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-caret'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^/./^-prefix/foo/libbase.a'
+ description='caret in destdir'
+ expected_to_fail dest caret
+ case $1 in
+ is_in_list caret squote dquote bquote sharp dollar linefeed a_lf_b
+ item=caret
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'caret in destdir'
+ set +x
ok 26 - caret in destdir
PASS: t/instspc.tap 26 - caret in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-caret '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-caret '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-caret/^'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__tilde}'
++ test_string='~'
+ test x~ = x
+ mkdir ./~
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./~
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde
+ cd ./~
+ r=ok
+ ../configure --prefix /~-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde
+ file=./~
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/~'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/~'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/./~-prefix/foo/libbase.a'
+ description='tilde in builddir'
+ expected_to_fail build tilde
+ case $1 in
+ is_in_list tilde squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=tilde
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'tilde in builddir'
+ set +x
ok 27 - tilde in builddir
PASS: t/instspc.tap 27 - tilde in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./~ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./~ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-tilde
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~
+ mkdir build-tilde
+ cd build-tilde
+ r=ok
+ ../configure --prefix /~-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~
+ file=./~
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-tilde'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/~-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-tilde'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~/./~-prefix/foo/libbase.a'
+ description='tilde in destdir'
+ expected_to_fail dest tilde
+ case $1 in
+ is_in_list tilde squote dquote bquote sharp dollar linefeed a_lf_b
+ item=tilde
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'tilde in destdir'
+ set +x
ok 28 - tilde in destdir
PASS: t/instspc.tap 28 - tilde in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-tilde /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-tilde /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tilde/~
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__qmark}'
++ test_string='?'
+ test 'x?' = x
+ mkdir './?'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./?'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark
+ cd './?'
+ r=ok
+ ../configure --prefix '/?-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark
+ file='./?'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/?'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/?'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/./?-prefix/foo/libbase.a'
+ description='qmark in builddir'
+ expected_to_fail build qmark
+ case $1 in
+ is_in_list qmark squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=qmark
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'qmark in builddir'
+ set +x
ok 29 - qmark in builddir
PASS: t/instspc.tap 29 - qmark in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './?' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './?' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-qmark
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?'
+ mkdir build-qmark
+ cd build-qmark
+ r=ok
+ ../configure --prefix '/?-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?'
+ file='./?'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-qmark'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/?-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-qmark'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?/./?-prefix/foo/libbase.a'
+ description='qmark in destdir'
+ expected_to_fail dest qmark
+ case $1 in
+ is_in_list qmark squote dquote bquote sharp dollar linefeed a_lf_b
+ item=qmark
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'qmark in destdir'
+ set +x
ok 30 - qmark in destdir
PASS: t/instspc.tap 30 - qmark in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-qmark '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-qmark '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-qmark/?'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__star}'
++ test_string='*'
+ test 'x*' = x
+ mkdir './*'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./*'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star
+ cd './*'
+ r=ok
+ ../configure --prefix '/*-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star
+ file='./*'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/*'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/*'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/./*-prefix/foo/libbase.a'
+ description='star in builddir'
+ expected_to_fail build star
+ case $1 in
+ is_in_list star squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=star
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'star in builddir'
+ set +x
ok 31 - star in builddir
PASS: t/instspc.tap 31 - star in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './*' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './*' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-star
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*'
+ mkdir build-star
+ cd build-star
+ r=ok
+ ../configure --prefix '/*-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*'
+ file='./*'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-star'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/*-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-star'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*/./*-prefix/foo/libbase.a'
+ description='star in destdir'
+ expected_to_fail dest star
+ case $1 in
+ is_in_list star squote dquote bquote sharp dollar linefeed a_lf_b
+ item=star
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'star in destdir'
+ set +x
ok 32 - star in destdir
PASS: t/instspc.tap 32 - star in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-star '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-star '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-star/*'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__plus}'
++ test_string=+
+ test x+ = x
+ mkdir ./+
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./+
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus
+ cd ./+
+ r=ok
+ ../configure --prefix /+-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus
+ file=./+
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/+'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/+'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/./+-prefix/foo/libbase.a'
+ description='plus in builddir'
+ expected_to_fail build plus
+ case $1 in
+ is_in_list plus squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=plus
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'plus in builddir'
+ set +x
ok 33 - plus in builddir
PASS: t/instspc.tap 33 - plus in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./+ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./+ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-plus
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+
+ mkdir build-plus
+ cd build-plus
+ r=ok
+ ../configure --prefix /+-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+
+ file=./+
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-plus'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/+-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-plus'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+/./+-prefix/foo/libbase.a'
+ description='plus in destdir'
+ expected_to_fail dest plus
+ case $1 in
+ is_in_list plus squote dquote bquote sharp dollar linefeed a_lf_b
+ item=plus
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'plus in destdir'
+ set +x
ok 34 - plus in destdir
PASS: t/instspc.tap 34 - plus in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-plus /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-plus /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-plus/+
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__minus}'
++ test_string=-
+ test x- = x
+ mkdir ./-
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./-
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus
+ cd ./-
+ r=ok
+ ../configure --prefix /--prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus
+ file=./-
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/-'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/--prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/-'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/./--prefix/foo/libbase.a'
+ description='minus in builddir'
+ expected_to_fail build minus
+ case $1 in
+ is_in_list minus squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=minus
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'minus in builddir'
+ set +x
ok 35 - minus in builddir
PASS: t/instspc.tap 35 - minus in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./- /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./- /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-minus
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-
+ mkdir build-minus
+ cd build-minus
+ r=ok
+ ../configure --prefix /--prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-
+ file=./-
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-minus'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/--prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-minus'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-/./--prefix/foo/libbase.a'
+ description='minus in destdir'
+ expected_to_fail dest minus
+ case $1 in
+ is_in_list minus squote dquote bquote sharp dollar linefeed a_lf_b
+ item=minus
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'minus in destdir'
+ set +x
ok 36 - minus in destdir
PASS: t/instspc.tap 36 - minus in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-minus /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-minus /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-minus/-
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__comma}'
++ test_string=,
+ test x, = x
+ mkdir ./,
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./,
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma
+ cd ./,
+ r=ok
+ ../configure --prefix /,-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma
+ file=./,
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/,'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/,'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/./,-prefix/foo/libbase.a'
+ description='comma in builddir'
+ expected_to_fail build comma
+ case $1 in
+ is_in_list comma squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=comma
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'comma in builddir'
+ set +x
ok 37 - comma in builddir
PASS: t/instspc.tap 37 - comma in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./, /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./, /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-comma
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,
+ mkdir build-comma
+ cd build-comma
+ r=ok
+ ../configure --prefix /,-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,
+ file=./,
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-comma'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/,-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-comma'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,/./,-prefix/foo/libbase.a'
+ description='comma in destdir'
+ expected_to_fail dest comma
+ case $1 in
+ is_in_list comma squote dquote bquote sharp dollar linefeed a_lf_b
+ item=comma
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'comma in destdir'
+ set +x
ok 38 - comma in destdir
PASS: t/instspc.tap 38 - comma in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-comma /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-comma /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-comma/,
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__colon}'
++ test_string=:
+ test x: = x
+ mkdir ./:
+ case $test_string in
+ cd ./:
+ for where in build dest
+ case $where in
+ build=./:
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon
+ cd ./:
+ r=ok
+ ../configure --prefix /:-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon
+ file=./:
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/:'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/:'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/./:-prefix/foo/libbase.a'
+ description='colon in builddir'
+ expected_to_fail build colon
+ case $1 in
+ is_in_list colon squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=colon
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'colon in builddir'
+ set +x
ok 39 - colon in builddir
PASS: t/instspc.tap 39 - colon in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./: /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./: /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-colon
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:
+ mkdir build-colon
+ cd build-colon
+ r=ok
+ ../configure --prefix /:-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:
+ file=./:
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-colon'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/:-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-colon'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:/./:-prefix/foo/libbase.a'
+ description='colon in destdir'
+ expected_to_fail dest colon
+ case $1 in
+ is_in_list colon squote dquote bquote sharp dollar linefeed a_lf_b
+ item=colon
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'colon in destdir'
+ set +x
ok 40 - colon in destdir
PASS: t/instspc.tap 40 - colon in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-colon /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-colon /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-colon/:
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__semicol}'
++ test_string=';'
+ test 'x;' = x
+ mkdir './;'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./;'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol
+ cd './;'
+ r=ok
+ ../configure --prefix '/;-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol
+ file='./;'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/;'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/;'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/./;-prefix/foo/libbase.a'
+ description='semicol in builddir'
+ expected_to_fail build semicol
+ case $1 in
+ is_in_list semicol squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=semicol
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'semicol in builddir'
+ set +x
ok 41 - semicol in builddir
PASS: t/instspc.tap 41 - semicol in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './;' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './;' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-semicol
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;'
+ mkdir build-semicol
+ cd build-semicol
+ r=ok
+ ../configure --prefix '/;-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;'
+ file='./;'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-semicol'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/;-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-semicol'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;/./;-prefix/foo/libbase.a'
+ description='semicol in destdir'
+ expected_to_fail dest semicol
+ case $1 in
+ is_in_list semicol squote dquote bquote sharp dollar linefeed a_lf_b
+ item=semicol
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'semicol in destdir'
+ set +x
ok 42 - semicol in destdir
PASS: t/instspc.tap 42 - semicol in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-semicol '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-semicol '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-semicol/;'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__equal}'
++ test_string==
+ test x= = x
+ mkdir ./=
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./=
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal
+ cd ./=
+ r=ok
+ ../configure --prefix /=-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal
+ file=./=
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/='
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/='
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/./=-prefix/foo/libbase.a'
+ description='equal in builddir'
+ expected_to_fail build equal
+ case $1 in
+ is_in_list equal squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=equal
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'equal in builddir'
+ set +x
ok 43 - equal in builddir
PASS: t/instspc.tap 43 - equal in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./= /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./= /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-equal
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=
+ mkdir build-equal
+ cd build-equal
+ r=ok
+ ../configure --prefix /=-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=
+ file=./=
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-equal'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/=-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-equal'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=/./=-prefix/foo/libbase.a'
+ description='equal in destdir'
+ expected_to_fail dest equal
+ case $1 in
+ is_in_list equal squote dquote bquote sharp dollar linefeed a_lf_b
+ item=equal
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'equal in destdir'
+ set +x
ok 44 - equal in destdir
PASS: t/instspc.tap 44 - equal in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-equal /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-equal /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-equal/=
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__less}'
++ test_string='<'
+ test 'x<' = x
+ mkdir './<'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./<'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less
+ cd './<'
+ r=ok
+ ../configure --prefix '/<-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less
+ file='./<'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/<'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/<'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/./<-prefix/foo/libbase.a'
+ description='less in builddir'
+ expected_to_fail build less
+ case $1 in
+ is_in_list less squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=less
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'less in builddir'
+ set +x
ok 45 - less in builddir
PASS: t/instspc.tap 45 - less in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './<' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './<' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-less
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<'
+ mkdir build-less
+ cd build-less
+ r=ok
+ ../configure --prefix '/<-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<'
+ file='./<'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-less'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</<-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-less'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/</./<-prefix/foo/libbase.a'
+ description='less in destdir'
+ expected_to_fail dest less
+ case $1 in
+ is_in_list less squote dquote bquote sharp dollar linefeed a_lf_b
+ item=less
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'less in destdir'
+ set +x
ok 46 - less in destdir
PASS: t/instspc.tap 46 - less in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-less '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-less '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-less/<'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__more}'
++ test_string='>'
+ test 'x>' = x
+ mkdir './>'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./>'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more
+ cd './>'
+ r=ok
+ ../configure --prefix '/>-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more
+ file='./>'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/>'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/>'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/./>-prefix/foo/libbase.a'
+ description='more in builddir'
+ expected_to_fail build more
+ case $1 in
+ is_in_list more squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=more
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'more in builddir'
+ set +x
ok 47 - more in builddir
PASS: t/instspc.tap 47 - more in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './>' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './>' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-more
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>'
+ mkdir build-more
+ cd build-more
+ r=ok
+ ../configure --prefix '/>-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>'
+ file='./>'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-more'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/>-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-more'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>/./>-prefix/foo/libbase.a'
+ description='more in destdir'
+ expected_to_fail dest more
+ case $1 in
+ is_in_list more squote dquote bquote sharp dollar linefeed a_lf_b
+ item=more
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'more in destdir'
+ set +x
ok 48 - more in destdir
PASS: t/instspc.tap 48 - more in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-more '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-more '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-more/>'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__at}'
++ test_string=@
+ test x@ = x
+ mkdir ./@
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./@
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at
+ cd ./@
+ r=ok
+ ../configure --prefix /@-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at
+ file=./@
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/./@-prefix/foo/libbase.a'
+ description='at in builddir'
+ expected_to_fail build at
+ case $1 in
+ is_in_list at squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=at
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'at in builddir'
+ set +x
ok 49 - at in builddir
PASS: t/instspc.tap 49 - at in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./@ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./@ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-at
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@
+ mkdir build-at
+ cd build-at
+ r=ok
+ ../configure --prefix /@-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@
+ file=./@
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-at'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-at'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@/./@-prefix/foo/libbase.a'
+ description='at in destdir'
+ expected_to_fail dest at
+ case $1 in
+ is_in_list at squote dquote bquote sharp dollar linefeed a_lf_b
+ item=at
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'at in destdir'
+ set +x
ok 50 - at in destdir
PASS: t/instspc.tap 50 - at in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-at /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-at/@
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__lqbrack}'
++ test_string='['
+ test 'x[' = x
+ mkdir './['
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./['
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack
+ cd './['
+ r=ok
+ ../configure --prefix '/[-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack
+ file='./['
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/['
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/['
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/./[-prefix/foo/libbase.a'
+ description='lqbrack in builddir'
+ expected_to_fail build lqbrack
+ case $1 in
+ is_in_list lqbrack squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=lqbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'lqbrack in builddir'
+ set +x
ok 51 - lqbrack in builddir
PASS: t/instspc.tap 51 - lqbrack in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './[' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './[' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-lqbrack
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/['
+ mkdir build-lqbrack
+ cd build-lqbrack
+ r=ok
+ ../configure --prefix '/[-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/['
+ file='./['
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-lqbrack'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/[-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-lqbrack'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/[/./[-prefix/foo/libbase.a'
+ description='lqbrack in destdir'
+ expected_to_fail dest lqbrack
+ case $1 in
+ is_in_list lqbrack squote dquote bquote sharp dollar linefeed a_lf_b
+ item=lqbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'lqbrack in destdir'
+ set +x
ok 52 - lqbrack in destdir
PASS: t/instspc.tap 52 - lqbrack in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-lqbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/['
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-lqbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lqbrack/['
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__rqbrack}'
++ test_string=']'
+ test 'x]' = x
+ mkdir './]'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./]'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack
+ cd './]'
+ r=ok
+ ../configure --prefix '/]-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack
+ file='./]'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/]'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/]'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/./]-prefix/foo/libbase.a'
+ description='rqbrack in builddir'
+ expected_to_fail build rqbrack
+ case $1 in
+ is_in_list rqbrack squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=rqbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rqbrack in builddir'
+ set +x
ok 53 - rqbrack in builddir
PASS: t/instspc.tap 53 - rqbrack in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './]' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './]' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-rqbrack
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]'
+ mkdir build-rqbrack
+ cd build-rqbrack
+ r=ok
+ ../configure --prefix '/]-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]'
+ file='./]'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rqbrack'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/]-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rqbrack'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]/./]-prefix/foo/libbase.a'
+ description='rqbrack in destdir'
+ expected_to_fail dest rqbrack
+ case $1 in
+ is_in_list rqbrack squote dquote bquote sharp dollar linefeed a_lf_b
+ item=rqbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rqbrack in destdir'
+ set +x
ok 54 - rqbrack in destdir
PASS: t/instspc.tap 54 - rqbrack in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-rqbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-rqbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rqbrack/]'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__lcbrack}'
++ test_string='{'
+ test 'x{' = x
+ mkdir './{'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./{'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack
+ cd './{'
+ r=ok
+ ../configure --prefix '/{-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack
+ file='./{'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/{'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/{'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/./{-prefix/foo/libbase.a'
+ description='lcbrack in builddir'
+ expected_to_fail build lcbrack
+ case $1 in
+ is_in_list lcbrack squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=lcbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'lcbrack in builddir'
+ set +x
ok 55 - lcbrack in builddir
PASS: t/instspc.tap 55 - lcbrack in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './{' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './{' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-lcbrack
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{'
+ mkdir build-lcbrack
+ cd build-lcbrack
+ r=ok
+ ../configure --prefix '/{-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{'
+ file='./{'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-lcbrack'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/{-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-lcbrack'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{/./{-prefix/foo/libbase.a'
+ description='lcbrack in destdir'
+ expected_to_fail dest lcbrack
+ case $1 in
+ is_in_list lcbrack squote dquote bquote sharp dollar linefeed a_lf_b
+ item=lcbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'lcbrack in destdir'
+ set +x
ok 56 - lcbrack in destdir
PASS: t/instspc.tap 56 - lcbrack in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-lcbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-lcbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-lcbrack/{'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__rcbrack}'
++ test_string='}'
+ test 'x}' = x
+ mkdir './}'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./}'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack
+ cd './}'
+ r=ok
+ ../configure --prefix '/}-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack
+ file='./}'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/}'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/}'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/./}-prefix/foo/libbase.a'
+ description='rcbrack in builddir'
+ expected_to_fail build rcbrack
+ case $1 in
+ is_in_list rcbrack squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=rcbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rcbrack in builddir'
+ set +x
ok 57 - rcbrack in builddir
PASS: t/instspc.tap 57 - rcbrack in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './}' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './}' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-rcbrack
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}'
+ mkdir build-rcbrack
+ cd build-rcbrack
+ r=ok
+ ../configure --prefix '/}-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}'
+ file='./}'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rcbrack'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/}-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-rcbrack'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}/./}-prefix/foo/libbase.a'
+ description='rcbrack in destdir'
+ expected_to_fail dest rcbrack
+ case $1 in
+ is_in_list rcbrack squote dquote bquote sharp dollar linefeed a_lf_b
+ item=rcbrack
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'rcbrack in destdir'
+ set +x
ok 58 - rcbrack in destdir
PASS: t/instspc.tap 58 - rcbrack in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-rcbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-rcbrack '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-rcbrack/}'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__space}'
++ test_string=' '
+ test 'x ' = x
+ mkdir './ '
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./ '
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space
+ cd './ '
+ r=ok
+ ../configure --prefix '/ -prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space
+ file='./ '
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/ '
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ -prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/ '
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/./ -prefix/foo/libbase.a'
+ description='space in builddir'
+ expected_to_fail build space
+ case $1 in
+ is_in_list space squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=space
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'space in builddir'
+ set +x
ok 59 - space in builddir
PASS: t/instspc.tap 59 - space in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './ ' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './ ' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-space
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ '
+ mkdir build-space
+ cd build-space
+ r=ok
+ ../configure --prefix '/ -prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ '
+ file='./ '
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-space'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ / -prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-space'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ /./ -prefix/foo/libbase.a'
+ description='space in destdir'
+ expected_to_fail dest space
+ case $1 in
+ is_in_list space squote dquote bquote sharp dollar linefeed a_lf_b
+ item=space
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'space in destdir'
+ set +x
ok 60 - space in destdir
PASS: t/instspc.tap 60 - space in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-space '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ '
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-space '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-space/ '
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__tab}'
++ test_string='	'
+ test 'x	' = x
+ mkdir './	'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./	'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab
+ cd './	'
+ r=ok
+ ../configure --prefix '/	-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab
+ file='./	'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/	'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/	'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/./	-prefix/foo/libbase.a'
+ description='tab in builddir'
+ expected_to_fail build tab
+ case $1 in
+ is_in_list tab squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=tab
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'tab in builddir'
+ set +x
ok 61 - tab in builddir
PASS: t/instspc.tap 61 - tab in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './	' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './	' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-tab
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	'
+ mkdir build-tab
+ cd build-tab
+ r=ok
+ ../configure --prefix '/	-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	'
+ file='./	'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-tab'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/	-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-tab'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	/./	-prefix/foo/libbase.a'
+ description='tab in destdir'
+ expected_to_fail dest tab
+ case $1 in
+ is_in_list tab squote dquote bquote sharp dollar linefeed a_lf_b
+ item=tab
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'tab in destdir'
+ set +x
ok 62 - tab in destdir
PASS: t/instspc.tap 62 - tab in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-tab '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-tab '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-tab/	'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__linefeed}'
++ test_string='
'
+ test 'x
' = x
+ mkdir './
'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./
'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-linefeed
+ cd './
'
+ r=ok
+ ../configure --prefix '/
-prefix'
configure: error: pwd does not report name of working directory
+ r='not ok'
+ description='linefeed in builddir'
+ expected_to_fail build linefeed
+ case $1 in
+ is_in_list linefeed squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=linefeed
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'linefeed in builddir'
+ set +x
not ok 63 - linefeed in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 63 - linefeed in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-linefeed
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-linefeed/
'
+ mkdir build-linefeed
+ cd build-linefeed
+ r=ok
+ ../configure --prefix '/
-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
config.status: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-linefeed':
config.status: error: Something went wrong bootstrapping makefile fragments
    for automatic dependency tracking.  Try re-running configure with the
    '--disable-dependency-tracking' option to at least be able to build
    the package (albeit without support for automatic dependency tracking).
See `config.log' for more details
+ r='not ok'
+ description='linefeed in destdir'
+ expected_to_fail dest linefeed
+ case $1 in
+ is_in_list linefeed squote dquote bquote sharp dollar linefeed a_lf_b
+ item=linefeed
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'linefeed in destdir'
+ set +x
not ok 64 - linefeed in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 64 - linefeed in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__backspace}'
++ test_string=$'\b'
+ test $'x\b' = x
+ mkdir $'./\b'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=$'./\b'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace
+ cd $'./\b'
+ r=ok
+ ../configure --prefix $'/\b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace
+ file=$'./\b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/./-prefix/foo/libbase.a'
+ description='backspace in builddir'
+ expected_to_fail build backspace
+ case $1 in
+ is_in_list backspace squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=backspace
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'backspace in builddir'
+ set +x
ok 65 - backspace in builddir
PASS: t/instspc.tap 65 - backspace in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ $'./\b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl $'./\b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-backspace
+ dest=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/\b'
+ mkdir build-backspace
+ cd build-backspace
+ r=ok
+ ../configure --prefix $'/\b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/\b'
+ file=$'./\b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-backspace'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-backspace'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace//./-prefix/foo/libbase.a'
+ description='backspace in destdir'
+ expected_to_fail dest backspace
+ case $1 in
+ is_in_list backspace squote dquote bquote sharp dollar linefeed a_lf_b
+ item=backspace
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'backspace in destdir'
+ set +x
ok 66 - backspace in destdir
PASS: t/instspc.tap 66 - backspace in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-backspace $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/\b'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-backspace $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-backspace/\b'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__formfeed}'
++ test_string=$'\f'
+ test $'x\f' = x
+ mkdir $'./\f'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=$'./\f'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed
+ cd $'./\f'
+ r=ok
+ ../configure --prefix $'/\f-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed
+ file=$'./\f'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/./-prefix/foo/libbase.a'
+ description='formfeed in builddir'
+ expected_to_fail build formfeed
+ case $1 in
+ is_in_list formfeed squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=formfeed
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'formfeed in builddir'
+ set +x
ok 67 - formfeed in builddir
PASS: t/instspc.tap 67 - formfeed in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ $'./\f' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl $'./\f' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-formfeed
+ dest=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/\f'
+ mkdir build-formfeed
+ cd build-formfeed
+ r=ok
+ ../configure --prefix $'/\f-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/\f'
+ file=$'./\f'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-formfeed'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-formfeed'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed//./-prefix/foo/libbase.a'
+ description='formfeed in destdir'
+ expected_to_fail dest formfeed
+ case $1 in
+ is_in_list formfeed squote dquote bquote sharp dollar linefeed a_lf_b
+ item=formfeed
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'formfeed in destdir'
+ set +x
ok 68 - formfeed in destdir
PASS: t/instspc.tap 68 - formfeed in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-formfeed $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/\f'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-formfeed $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-formfeed/\f'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__carriageret}'
++ test_string=$'\r'
+ test $'x\r' = x
+ mkdir $'./\r'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=$'./\r'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret
+ cd $'./\r'
+ r=ok
+ ../configure --prefix $'/\r-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret
+ file=$'./\r'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/./-prefix/foo/libbase.a'
+ description='carriageret in builddir'
+ expected_to_fail build carriageret
+ case $1 in
+ is_in_list carriageret squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=carriageret
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'carriageret in builddir'
+ set +x
ok 69 - carriageret in builddir
PASS: t/instspc.tap 69 - carriageret in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ $'./\r' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl $'./\r' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-carriageret
+ dest=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/\r'
+ mkdir build-carriageret
+ cd build-carriageret
+ r=ok
+ ../configure --prefix $'/\r-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=$'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/\r'
+ file=$'./\r'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-carriageret'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-carriageret'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret//./-prefix/foo/libbase.a'
+ description='carriageret in destdir'
+ expected_to_fail dest carriageret
+ case $1 in
+ is_in_list carriageret squote dquote bquote sharp dollar linefeed a_lf_b
+ item=carriageret
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'carriageret in destdir'
+ set +x
ok 70 - carriageret in destdir
PASS: t/instspc.tap 70 - carriageret in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-carriageret $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/\r'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-carriageret $'/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-carriageret/\r'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__quadrigraph0}'
++ test_string='@&t@'
+ test 'x@&t@' = x
+ mkdir './@&t@'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./@&t@'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0
+ cd './@&t@'
+ r=ok
+ ../configure --prefix '/@&t@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='quadrigraph0 in builddir'
+ expected_to_fail build quadrigraph0
+ case $1 in
+ is_in_list quadrigraph0 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=quadrigraph0
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'quadrigraph0 in builddir'
+ set +x
not ok 71 - quadrigraph0 in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 71 - quadrigraph0 in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-quadrigraph0
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@'
+ mkdir build-quadrigraph0
+ cd build-quadrigraph0
+ r=ok
+ ../configure --prefix '/@&t@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@'
+ file='./@&t@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph0'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/@&t@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph0'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@/./@&t@-prefix/foo/libbase.a'
+ description='quadrigraph0 in destdir'
+ expected_to_fail dest quadrigraph0
+ case $1 in
+ is_in_list quadrigraph0 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=quadrigraph0
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph0 in destdir'
+ set +x
ok 72 - quadrigraph0 in destdir
PASS: t/instspc.tap 72 - quadrigraph0 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-quadrigraph0 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-quadrigraph0 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph0/@&t@'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__quadrigraph1}'
++ test_string='@<:@'
+ test 'x@<:@' = x
+ mkdir './@<:@'
+ case $test_string in
+ cd './@<:@'
+ for where in build dest
+ case $where in
+ build='./@<:@'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1
+ cd './@<:@'
+ r=ok
+ ../configure --prefix '/@<:@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1
+ file='./@<:@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@<:@'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@<:@'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/./@<:@-prefix/foo/libbase.a'
+ description='quadrigraph1 in builddir'
+ expected_to_fail build quadrigraph1
+ case $1 in
+ is_in_list quadrigraph1 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=quadrigraph1
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph1 in builddir'
+ set +x
ok 73 - quadrigraph1 in builddir
PASS: t/instspc.tap 73 - quadrigraph1 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './@<:@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './@<:@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-quadrigraph1
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@'
+ mkdir build-quadrigraph1
+ cd build-quadrigraph1
+ r=ok
+ ../configure --prefix '/@<:@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@'
+ file='./@<:@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph1'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/@<:@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph1'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@/./@<:@-prefix/foo/libbase.a'
+ description='quadrigraph1 in destdir'
+ expected_to_fail dest quadrigraph1
+ case $1 in
+ is_in_list quadrigraph1 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=quadrigraph1
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph1 in destdir'
+ set +x
ok 74 - quadrigraph1 in destdir
PASS: t/instspc.tap 74 - quadrigraph1 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-quadrigraph1 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-quadrigraph1 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph1/@<:@'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__quadrigraph2}'
++ test_string='@:>@'
+ test 'x@:>@' = x
+ mkdir './@:>@'
+ case $test_string in
+ cd './@:>@'
+ for where in build dest
+ case $where in
+ build='./@:>@'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2
+ cd './@:>@'
+ r=ok
+ ../configure --prefix '/@:>@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2
+ file='./@:>@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@:>@'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@:>@'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/./@:>@-prefix/foo/libbase.a'
+ description='quadrigraph2 in builddir'
+ expected_to_fail build quadrigraph2
+ case $1 in
+ is_in_list quadrigraph2 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=quadrigraph2
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph2 in builddir'
+ set +x
ok 75 - quadrigraph2 in builddir
PASS: t/instspc.tap 75 - quadrigraph2 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './@:>@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './@:>@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-quadrigraph2
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@'
+ mkdir build-quadrigraph2
+ cd build-quadrigraph2
+ r=ok
+ ../configure --prefix '/@:>@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@'
+ file='./@:>@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph2'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/@:>@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph2'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@/./@:>@-prefix/foo/libbase.a'
+ description='quadrigraph2 in destdir'
+ expected_to_fail dest quadrigraph2
+ case $1 in
+ is_in_list quadrigraph2 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=quadrigraph2
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph2 in destdir'
+ set +x
ok 76 - quadrigraph2 in destdir
PASS: t/instspc.tap 76 - quadrigraph2 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-quadrigraph2 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-quadrigraph2 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph2/@:>@'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__quadrigraph3}'
++ test_string='@S|@'
+ test 'x@S|@' = x
+ mkdir './@S|@'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./@S|@'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3
+ cd './@S|@'
+ r=ok
+ ../configure --prefix '/@S|@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3
+ file='./@S|@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@S|@'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@S|@'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/./@S|@-prefix/foo/libbase.a'
+ description='quadrigraph3 in builddir'
+ expected_to_fail build quadrigraph3
+ case $1 in
+ is_in_list quadrigraph3 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=quadrigraph3
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph3 in builddir'
+ set +x
ok 77 - quadrigraph3 in builddir
PASS: t/instspc.tap 77 - quadrigraph3 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './@S|@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './@S|@' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-quadrigraph3
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@'
+ mkdir build-quadrigraph3
+ cd build-quadrigraph3
+ r=ok
+ ../configure --prefix '/@S|@-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@'
+ file='./@S|@'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph3'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/@S|@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph3'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@/./@S|@-prefix/foo/libbase.a'
+ description='quadrigraph3 in destdir'
+ expected_to_fail dest quadrigraph3
+ case $1 in
+ is_in_list quadrigraph3 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=quadrigraph3
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph3 in destdir'
+ set +x
ok 78 - quadrigraph3 in destdir
PASS: t/instspc.tap 78 - quadrigraph3 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-quadrigraph3 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-quadrigraph3 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph3/@S|@'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__quadrigraph4}'
++ test_string=@%:@
+ test x@%:@ = x
+ mkdir ./@%:@
+ case $test_string in
+ cd ./@%:@
+ for where in build dest
+ case $where in
+ build=./@%:@
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4
+ cd ./@%:@
+ r=ok
+ ../configure --prefix /@%:@-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4
+ file=./@%:@
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@%:@'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/@%:@'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/./@%:@-prefix/foo/libbase.a'
+ description='quadrigraph4 in builddir'
+ expected_to_fail build quadrigraph4
+ case $1 in
+ is_in_list quadrigraph4 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=quadrigraph4
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph4 in builddir'
+ set +x
ok 79 - quadrigraph4 in builddir
PASS: t/instspc.tap 79 - quadrigraph4 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./@%:@ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./@%:@ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-quadrigraph4
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@
+ mkdir build-quadrigraph4
+ cd build-quadrigraph4
+ r=ok
+ ../configure --prefix /@%:@-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@
+ file=./@%:@
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph4'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/@%:@-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-quadrigraph4'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@/./@%:@-prefix/foo/libbase.a'
+ description='quadrigraph4 in destdir'
+ expected_to_fail dest quadrigraph4
+ case $1 in
+ is_in_list quadrigraph4 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=quadrigraph4
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'quadrigraph4 in destdir'
+ set +x
ok 80 - quadrigraph4 in destdir
PASS: t/instspc.tap 80 - quadrigraph4 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-quadrigraph4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-quadrigraph4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-quadrigraph4/@%:@
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__a_b}'
++ test_string='a b'
+ test 'xa b' = x
+ mkdir './a b'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./a b'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b
+ cd './a b'
+ r=ok
+ ../configure --prefix '/a b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b
+ file='./a b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a b'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a b'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/./a b-prefix/foo/libbase.a'
+ description='a_b in builddir'
+ expected_to_fail build a_b
+ case $1 in
+ is_in_list a_b squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=a_b
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'a_b in builddir'
+ set +x
ok 81 - a_b in builddir
PASS: t/instspc.tap 81 - a_b in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './a b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './a b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-a_b
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b'
+ mkdir build-a_b
+ cd build-a_b
+ r=ok
+ ../configure --prefix '/a b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b'
+ file='./a b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-a_b'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/a b-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-a_b'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b/./a b-prefix/foo/libbase.a'
+ description='a_b in destdir'
+ expected_to_fail dest a_b
+ case $1 in
+ is_in_list a_b squote dquote bquote sharp dollar linefeed a_lf_b
+ item=a_b
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'a_b in destdir'
+ set +x
ok 82 - a_b in destdir
PASS: t/instspc.tap 82 - a_b in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-a_b '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-a_b '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_b/a b'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__a__b}'
++ test_string='a  b'
+ test 'xa  b' = x
+ mkdir './a  b'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./a  b'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b
+ cd './a  b'
+ r=ok
+ ../configure --prefix '/a  b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b
+ file='./a  b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a  b'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a  b'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/./a  b-prefix/foo/libbase.a'
+ description='a__b in builddir'
+ expected_to_fail build a__b
+ case $1 in
+ is_in_list a__b squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=a__b
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'a__b in builddir'
+ set +x
ok 83 - a__b in builddir
PASS: t/instspc.tap 83 - a__b in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './a  b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './a  b' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-a__b
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b'
+ mkdir build-a__b
+ cd build-a__b
+ r=ok
+ ../configure --prefix '/a  b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b'
+ file='./a  b'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-a__b'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/a  b-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-a__b'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b/./a  b-prefix/foo/libbase.a'
+ description='a__b in destdir'
+ expected_to_fail dest a__b
+ case $1 in
+ is_in_list a__b squote dquote bquote sharp dollar linefeed a_lf_b
+ item=a__b
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'a__b in destdir'
+ set +x
ok 84 - a__b in destdir
PASS: t/instspc.tap 84 - a__b in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-a__b '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-a__b '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a__b/a  b'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__a_lf_b}'
++ test_string='a
b'
+ test 'xa
b' = x
+ mkdir './a
b'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./a
b'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_lf_b
+ cd './a
b'
+ r=ok
+ ../configure --prefix '/a
b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... configure: error: unsafe absolute working directory name
+ r='not ok'
+ description='a_lf_b in builddir'
+ expected_to_fail build a_lf_b
+ case $1 in
+ is_in_list a_lf_b squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=a_lf_b
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'a_lf_b in builddir'
+ set +x
not ok 85 - a_lf_b in builddir # TODO long-standing limitation
XFAIL: t/instspc.tap 85 - a_lf_b in builddir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-a_lf_b
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-a_lf_b/a
b'
+ mkdir build-a_lf_b
+ cd build-a_lf_b
+ r=ok
+ ../configure --prefix '/a
b-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
config.status: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-a_lf_b':
config.status: error: Something went wrong bootstrapping makefile fragments
    for automatic dependency tracking.  Try re-running configure with the
    '--disable-dependency-tracking' option to at least be able to build
    the package (albeit without support for automatic dependency tracking).
See `config.log' for more details
+ r='not ok'
+ description='a_lf_b in destdir'
+ expected_to_fail dest a_lf_b
+ case $1 in
+ is_in_list a_lf_b squote dquote bquote sharp dollar linefeed a_lf_b
+ item=a_lf_b
+ shift
+ case " $* " in
+ return 0
+ directive=TODO
+ reason='long-standing limitation'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'a_lf_b in destdir'
+ set +x
not ok 86 - a_lf_b in destdir # TODO long-standing limitation
XFAIL: t/instspc.tap 86 - a_lf_b in destdir # TODO long-standing limitation
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test 'not ok' = ok
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__dotdotdot}'
++ test_string=...
+ test x... = x
+ mkdir ./...
+ case $test_string in
+ for where in build dest
+ case $where in
+ build=./...
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot
+ cd ./...
+ r=ok
+ ../configure --prefix /...-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot
+ file=./...
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/...'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/...'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/./...-prefix/foo/libbase.a'
+ description='dotdotdot in builddir'
+ expected_to_fail build dotdotdot
+ case $1 in
+ is_in_list dotdotdot squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=dotdotdot
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'dotdotdot in builddir'
+ set +x
ok 87 - dotdotdot in builddir
PASS: t/instspc.tap 87 - dotdotdot in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./... /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./... /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-dotdotdot
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...
+ mkdir build-dotdotdot
+ cd build-dotdotdot
+ r=ok
+ ../configure --prefix /...-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...
+ file=./...
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dotdotdot'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/.../...-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dotdotdot'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/..././...-prefix/foo/libbase.a'
+ description='dotdotdot in destdir'
+ expected_to_fail dest dotdotdot
+ case $1 in
+ is_in_list dotdotdot squote dquote bquote sharp dollar linefeed a_lf_b
+ item=dotdotdot
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'dotdotdot in destdir'
+ set +x
ok 88 - dotdotdot in destdir
PASS: t/instspc.tap 88 - dotdotdot in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-dotdotdot /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-dotdotdot /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dotdotdot/...
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__dosdrive}'
++ test_string=a:
+ test xa: = x
+ mkdir ./a:
+ case $test_string in
+ cd ./a:
+ for where in build dest
+ case $where in
+ build=./a:
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive
+ cd ./a:
+ r=ok
+ ../configure --prefix /a:-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive
+ file=./a:
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a:'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/a:'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/./a:-prefix/foo/libbase.a'
+ description='dosdrive in builddir'
+ expected_to_fail build dosdrive
+ case $1 in
+ is_in_list dosdrive squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=dosdrive
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'dosdrive in builddir'
+ set +x
ok 89 - dosdrive in builddir
PASS: t/instspc.tap 89 - dosdrive in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ ./a: /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl ./a: /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-dosdrive
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:
+ mkdir build-dosdrive
+ cd build-dosdrive
+ r=ok
+ ../configure --prefix /a:-prefix
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:
+ file=./a:
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dosdrive'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/a:-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-dosdrive'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:/./a:-prefix/foo/libbase.a'
+ description='dosdrive in destdir'
+ expected_to_fail dest dosdrive
+ case $1 in
+ is_in_list dosdrive squote dquote bquote sharp dollar linefeed a_lf_b
+ item=dosdrive
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'dosdrive in destdir'
+ set +x
ok 90 - dosdrive in destdir
PASS: t/instspc.tap 90 - dosdrive in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-dosdrive /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-dosdrive /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-dosdrive/a:
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__miscglob1}'
++ test_string='?[a-z]*'
+ test 'x?[a-z]*' = x
+ mkdir './?[a-z]*'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./?[a-z]*'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1
+ cd './?[a-z]*'
+ r=ok
+ ../configure --prefix '/?[a-z]*-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1
+ file='./?[a-z]*'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/?[a-z]*'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/?[a-z]*'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/./?[a-z]*-prefix/foo/libbase.a'
+ description='miscglob1 in builddir'
+ expected_to_fail build miscglob1
+ case $1 in
+ is_in_list miscglob1 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=miscglob1
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'miscglob1 in builddir'
+ set +x
ok 91 - miscglob1 in builddir
PASS: t/instspc.tap 91 - miscglob1 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './?[a-z]*' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './?[a-z]*' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-miscglob1
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*'
+ mkdir build-miscglob1
+ cd build-miscglob1
+ r=ok
+ ../configure --prefix '/?[a-z]*-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*'
+ file='./?[a-z]*'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-miscglob1'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/?[a-z]*-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-miscglob1'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*/./?[a-z]*-prefix/foo/libbase.a'
+ description='miscglob1 in destdir'
+ expected_to_fail dest miscglob1
+ case $1 in
+ is_in_list miscglob1 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=miscglob1
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'miscglob1 in destdir'
+ set +x
ok 92 - miscglob1 in destdir
PASS: t/instspc.tap 92 - miscglob1 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-miscglob1 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-miscglob1 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob1/?[a-z]*'
+ : For shells with busted 'set -e.'
+ for test_name in $test_names_list
+ eval 'test_string=${instspc__miscglob2}'
++ test_string='.*?[0-9]'
+ test 'x.*?[0-9]' = x
+ mkdir './.*?[0-9]'
+ case $test_string in
+ for where in build dest
+ case $where in
+ build='./.*?[0-9]'
+ dest=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2
+ cd './.*?[0-9]'
+ r=ok
+ ../configure --prefix '/.*?[0-9]-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2
+ file='./.*?[0-9]'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/.*?[0-9]'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/.*?[0-9]'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/./.*?[0-9]-prefix/foo/libbase.a'
+ description='miscglob2 in builddir'
+ expected_to_fail build miscglob2
+ case $1 in
+ is_in_list miscglob2 squote dquote bquote sharp dollar bslash ampersand linefeed quadrigraph0 a_lf_b
+ item=miscglob2
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'miscglob2 in builddir'
+ set +x
ok 93 - miscglob2 in builddir
PASS: t/instspc.tap 93 - miscglob2 in builddir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ './.*?[0-9]' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl './.*?[0-9]' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2
+ : For shells with busted 'set -e.'
+ for where in build dest
+ case $where in
+ build=build-miscglob2
+ dest='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]'
+ mkdir build-miscglob2
+ cd build-miscglob2
+ r=ok
+ ../configure --prefix '/.*?[0-9]-prefix'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for ar... ar
checking the archiver (ar) interface... ar
checking for ranlib... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make all
source='../source.c' object='source.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
cc -DPACKAGE_NAME=\"instspc\" -DPACKAGE_TARNAME=\"instspc\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"instspc\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"instspc\" -DVERSION=\"1.0\" -I. -I..     -g -c -o source.o ../source.c
cc  -g   -o sub/base source.o  
cc  -g   -o sub/nobase source.o  
rm -f sub/libbase.a
ar cru sub/libbase.a source.o 
: sub/libbase.a
rm -f sub/libnobase.a
ar cru sub/libnobase.a source.o 
: sub/libnobase.a
+ DESTDIR='/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]'
+ file='./.*?[0-9]'
+ make test-inst
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-miscglob2'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/base.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libbase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo' && : libbase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
  /builds/dan/bootstrapinstall/bin/install -c sub/base '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/install -c ../sub/nobase.sh '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  sub/libnobase.a '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo' && : sub/libnobase.a )
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub/'
  /builds/dan/bootstrapinstall/bin/install -c sub/nobase '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub/'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/install -c -m 644 ../sub/base.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.dat '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
 /builds/dan/bootstrapinstall/bin/install -c -m 644  ../sub/nobase.h '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/.*?[0-9]-prefix/foo/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/build-miscglob2'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/sub/nobase.h'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/nobase.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/base.h'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/sub/nobase.dat'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/nobase.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/base.dat'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/sub/nobase.sh'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/nobase.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/base.sh'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/sub/nobase'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/nobase'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/base'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/sub/libnobase.a'
test ! -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/libnobase.a'
test   -f '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]/./.*?[0-9]-prefix/foo/libbase.a'
+ description='miscglob2 in destdir'
+ expected_to_fail dest miscglob2
+ case $1 in
+ is_in_list miscglob2 squote dquote bquote sharp dollar linefeed a_lf_b
+ item=miscglob2
+ shift
+ case " $* " in
+ return 1
+ directive=
+ reason=
+ result_ ok -D '' -r '' -- 'miscglob2 in destdir'
+ set +x
ok 94 - miscglob2 in destdir
PASS: t/instspc.tap 94 - miscglob2 in destdir
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir
+ not am_keeping_testdirs
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 1
+ test ok = ok
+ rm_rf_ build-miscglob2 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]'
+ test 2 -gt 0
+ /builds/dan/bootstrapinstall/bin/perl /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/deltree.pl build-miscglob2 '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instspc.dir/dest-miscglob2/.*?[0-9]'
+ : For shells with busted 'set -e.'
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 94 = later
+ test 0 -eq 0
+ test 77 -eq 94
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

PASS: t/aclocal-macrodir
========================

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ plan_ 7
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x7 = xunknown
+ test x7 = xlater
+ test x7 = xlazy
+ test x7 = xnow
+ test 7 -ge 0
+ planned_=7
+ echo 1..7
1..7
++ pwd
+ ocwd=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ unset ACLOCAL_PATH
+ tcount=0
+ r=invalid
+ description=
+ directive=
+ test_begin 'AC_CONFIG_MACRO_DIR is honored'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIR is honored'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIR is honored'
+ shift
+ tcount=1
+ test 1 -gt 0
+ mkdir 1.d
+ cd 1.d
+ cat
+ mkdir macro-dir
+ echo 'AC_DEFUN([MY_FOO], [::my::foo::])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([macro-dir/foo.m4])' aclocal.m4
m4_include([macro-dir/foo.m4])
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -F MY_FOO configure
+ /builds/dan/bootstrapinstall/bin/grep -F MY_FOO configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::my::foo:: configure
::my::foo::
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIR is honored'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIR is honored'
+ set +x
ok 1 - AC_CONFIG_MACRO_DIR is honored
PASS: t/aclocal-macrodir.tap 1 - AC_CONFIG_MACRO_DIR is honored
+ test -z ''
+ test ok = ok
+ rm -rf 1.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIR([foo]) interaction with --install'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIR([foo]) interaction with --install'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIR([foo]) interaction with --install'
+ shift
+ tcount=2
+ test 2 -gt 0
+ mkdir 2.d
+ cd 2.d
+ cat
+ mkdir sys-dir the-dir
+ echo 'AC_DEFUN([THE_MACRO], [:])'
+ test '!' -r the-dir/my.m4
+ aclocal-1.16 -Werror --install --system-acdir ./sys-dir
aclocal-1.16: installing 'the-dir/my.m4' from 'sys-dir/my.m4'
+ diff sys-dir/my.m4 the-dir/my.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIR([foo]) interaction with --install'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIR([foo]) interaction with --install'
+ set +x
ok 2 - AC_CONFIG_MACRO_DIR([foo]) interaction with --install
PASS: t/aclocal-macrodir.tap 2 - AC_CONFIG_MACRO_DIR([foo]) interaction with --install
+ test -z ''
+ test ok = ok
+ rm -rf 2.d
+ r=invalid
+ directive=
+ description=
+ test_begin ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIR'
+ test -n ''
+ r=ok
+ description=''\''-I'\'' option wins over AC_CONFIG_MACRO_DIR'
+ directive=
+ echo ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIR'
+ shift
+ tcount=3
+ test 3 -gt 0
+ mkdir 3.d
+ cd 3.d
+ cat
+ mkdir dir1 dir2
+ echo 'AC_DEFUN([MY_FOO], [::ko::ko::])'
+ echo 'AC_DEFUN([MY_FOO], [::ok::ok::])'
+ aclocal-1.16 -Werror -I dir2
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/2.m4])' aclocal.m4
m4_include([dir2/2.m4])
+ not /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/1.m4])' aclocal.m4
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/1.m4])' aclocal.m4
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -F ::ko::ko:: configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::ko::ko:: configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::ok::ok:: configure
::ok::ok::
+ test_end
+ test -z ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIR'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIR'
+ set +x
ok 3 - '-I' option wins over AC_CONFIG_MACRO_DIR
PASS: t/aclocal-macrodir.tap 3 - '-I' option wins over AC_CONFIG_MACRO_DIR
+ test -z ''
+ test ok = ok
+ rm -rf 3.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIR([foo]) can create directory '\''foo'\'''
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIR([foo]) can create directory '\''foo'\'''
+ directive=
+ echo 'AC_CONFIG_MACRO_DIR([foo]) can create directory '\''foo'\'''
+ shift
+ tcount=4
+ test 4 -gt 0
+ mkdir 4.d
+ cd 4.d
+ cat
+ mkdir acdir
+ echo 'AC_DEFUN([MY_MACRO], [:])'
+ test '!' -d foo
+ aclocal-1.16 -Werror --install --system-acdir ./acdir
aclocal-1.16: installing 'foo/bar.m4' from 'acdir/bar.m4'
+ diff acdir/bar.m4 foo/bar.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIR([foo]) can create directory '\''foo'\'''
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIR([foo]) can create directory '\''foo'\'''
+ set +x
ok 4 - AC_CONFIG_MACRO_DIR([foo]) can create directory 'foo'
PASS: t/aclocal-macrodir.tap 4 - AC_CONFIG_MACRO_DIR([foo]) can create directory 'foo'
+ test -z ''
+ test ok = ok
+ rm -rf 4.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported'
+ shift
+ tcount=5
+ test 5 -gt 0
+ mkdir 5.d
+ cd 5.d
+ cat
+ aclocal-1.16 -Werror -Wno-error
+ cat stderr
aclocal-1.16: warning: couldn't open directory 'non-existent': No such file or directory
+ grep 'couldn'\''t open directory '\''non-existent'\''' stderr
aclocal-1.16: warning: couldn't open directory 'non-existent': No such file or directory
+ test -f aclocal.m4
+ rm -rf aclocal.m4 autom4te.cache
+ aclocal-1.16 -Werror -Werror -Wno-unsupported
+ test -f aclocal.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported'
+ set +x
ok 5 - AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported
PASS: t/aclocal-macrodir.tap 5 - AC_CONFIG_MACRO_DIR([non-existent]) warns with -Wunsupported
+ test -z ''
+ test ok = ok
+ rm -rf 5.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ shift
+ tcount=6
+ test 6 -gt 0
+ mkdir 6.d
+ cd 6.d
+ cat
+ cat
+ aclocal-1.16 -Werror -Wno-error
+ cat stderr
aclocal-1.16: warning: couldn't open directory 'not-exist': No such file or directory
++ grep -c 'couldn'\''t open directory '\''not-exist'\''' stderr
+ test 1 -eq 1
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodir.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ set +x
ok 6 - AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist
PASS: t/aclocal-macrodir.tap 6 - AC_CONFIG_MACRO_DIR([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist
+ test -z ''
+ test ok = ok
+ rm -rf 6.d
+ r=invalid
+ directive=
+ description=
+ echo 'AC_INIT AC_CONFIG_MACRO_DIRS'
+ autoconf -o/dev/null -
/dev/null:1659: error: possibly undefined macro: AC_CONFIG_MACRO_DIRS
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
+ skip_ -r 'autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)'
+ result_ ok -D SKIP -r 'autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)'
+ set +x
ok 7 # SKIP autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)
SKIP: t/aclocal-macrodir.tap 7 # SKIP autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 7 = later
+ test 0 -eq 0
+ test 6 -eq 7
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

PASS: t/aclocal-macrodirs
=========================

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ plan_ 15
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x15 = xunknown
+ test x15 = xlater
+ test x15 = xlazy
+ test x15 = xnow
+ test 15 -ge 0
+ planned_=15
+ echo 1..15
1..15
++ pwd
+ ocwd=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ unset ACLOCAL_PATH
+ tcount=0
+ r=invalid
+ description=
+ directive=
+ test_begin 'AC_CONFIG_MACRO_DIRS is honored'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS is honored'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS is honored'
+ shift
+ tcount=1
+ test 1 -gt 0
+ mkdir 1.d
+ cd 1.d
+ cat
+ mkdir macro-dir
+ echo 'AC_DEFUN([MY_FOO], [::my::foo::])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([macro-dir/foo.m4])' aclocal.m4
m4_include([macro-dir/foo.m4])
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -F MY_FOO configure
+ /builds/dan/bootstrapinstall/bin/grep -F MY_FOO configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::my::foo:: configure
::my::foo::
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS is honored'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS is honored'
+ set +x
ok 1 - AC_CONFIG_MACRO_DIRS is honored
PASS: t/aclocal-macrodirs.tap 1 - AC_CONFIG_MACRO_DIRS is honored
+ test -z ''
+ test ok = ok
+ rm -rf 1.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS several arguments'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS several arguments'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS several arguments'
+ shift
+ tcount=2
+ test 2 -gt 0
+ mkdir 2.d
+ cd 2.d
+ cat
+ three_dirs_check
+ mkdir dir1 dir2 dir3
+ echo 'AC_DEFUN([MY_FOO], [::my::foo::])'
+ echo 'AC_DEFUN([MY_BAR], [!!my!!bar!!])'
+ echo 'AC_DEFUN([MY_BAZ], [==my==baz==])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/foo.m4])' aclocal.m4
m4_include([dir1/foo.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/zap.m4])' aclocal.m4
m4_include([dir2/zap.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir3/0.m4])' aclocal.m4
m4_include([dir3/0.m4])
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::my::foo:: configure
::my::foo::
+ /builds/dan/bootstrapinstall/bin/grep -F '!!my!!bar!!' configure
!!my!!bar!!
+ /builds/dan/bootstrapinstall/bin/grep -F ==my==baz== configure
==my==baz==
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS several arguments'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS several arguments'
+ set +x
ok 2 - AC_CONFIG_MACRO_DIRS several arguments
PASS: t/aclocal-macrodirs.tap 2 - AC_CONFIG_MACRO_DIRS several arguments
+ test -z ''
+ test ok = ok
+ rm -rf 2.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS several calls'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS several calls'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS several calls'
+ shift
+ tcount=3
+ test 3 -gt 0
+ mkdir 3.d
+ cd 3.d
+ cat
+ three_dirs_check
+ mkdir dir1 dir2 dir3
+ echo 'AC_DEFUN([MY_FOO], [::my::foo::])'
+ echo 'AC_DEFUN([MY_BAR], [!!my!!bar!!])'
+ echo 'AC_DEFUN([MY_BAZ], [==my==baz==])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/foo.m4])' aclocal.m4
m4_include([dir1/foo.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/zap.m4])' aclocal.m4
m4_include([dir2/zap.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir3/0.m4])' aclocal.m4
m4_include([dir3/0.m4])
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::my::foo:: configure
::my::foo::
+ /builds/dan/bootstrapinstall/bin/grep -F '!!my!!bar!!' configure
!!my!!bar!!
+ /builds/dan/bootstrapinstall/bin/grep -F ==my==baz== configure
==my==baz==
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS several calls'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS several calls'
+ set +x
ok 3 - AC_CONFIG_MACRO_DIRS several calls
PASS: t/aclocal-macrodirs.tap 3 - AC_CONFIG_MACRO_DIRS several calls
+ test -z ''
+ test ok = ok
+ rm -rf 3.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS extra whitespace'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS extra whitespace'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS extra whitespace'
+ shift
+ tcount=4
+ test 4 -gt 0
+ mkdir 4.d
+ cd 4.d
+ bslash='\'
+ cat
+ three_dirs_check
+ mkdir dir1 dir2 dir3
+ echo 'AC_DEFUN([MY_FOO], [::my::foo::])'
+ echo 'AC_DEFUN([MY_BAR], [!!my!!bar!!])'
+ echo 'AC_DEFUN([MY_BAZ], [==my==baz==])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/foo.m4])' aclocal.m4
m4_include([dir1/foo.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/zap.m4])' aclocal.m4
m4_include([dir2/zap.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir3/0.m4])' aclocal.m4
m4_include([dir3/0.m4])
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::my::foo:: configure
::my::foo::
+ /builds/dan/bootstrapinstall/bin/grep -F '!!my!!bar!!' configure
!!my!!bar!!
+ /builds/dan/bootstrapinstall/bin/grep -F ==my==baz== configure
==my==baz==
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS extra whitespace'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS extra whitespace'
+ set +x
ok 4 - AC_CONFIG_MACRO_DIRS extra whitespace
PASS: t/aclocal-macrodirs.tap 4 - AC_CONFIG_MACRO_DIRS extra whitespace
+ test -z ''
+ test ok = ok
+ rm -rf 4.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS precedence'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS precedence'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS precedence'
+ shift
+ tcount=5
+ test 5 -gt 0
+ mkdir 5.d
+ cd 5.d
+ cat
+ mkdir dir1 dir2 dir3
+ echo 'AC_DEFUN([MY_FOO], [OK-Foo])'
+ echo 'AC_DEFUN([MY_FOO], [KO-Foo])'
+ echo 'AC_DEFUN([MY_BAR], [OK-Bar])'
+ echo 'AC_DEFUN([MY_BAR], [KO-Bar])'
+ echo 'AC_DEFUN([MY_BAZ], [OK-Baz])'
+ aclocal-1.16 -Werror
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/b.m4])' aclocal.m4
m4_include([dir1/b.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/1.m4])' aclocal.m4
m4_include([dir2/1.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir3/x.m4])' aclocal.m4
m4_include([dir3/x.m4])
++ /builds/dan/bootstrapinstall/bin/grep -F -c 'm4_include([dir1' aclocal.m4
+ test 1 -eq 1
++ /builds/dan/bootstrapinstall/bin/grep -F -c 'm4_include([dir2' aclocal.m4
+ test 1 -eq 1
++ /builds/dan/bootstrapinstall/bin/grep -F -c 'm4_include([dir3' aclocal.m4
+ test 1 -eq 1
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -E 'MY_(FOO|BAR|BAZ)' configure
+ /builds/dan/bootstrapinstall/bin/grep -F OK-Foo configure
OK-Foo
+ /builds/dan/bootstrapinstall/bin/grep -F OK-Bar configure
OK-Bar
+ /builds/dan/bootstrapinstall/bin/grep -F OK-Baz configure
OK-Baz
+ not /builds/dan/bootstrapinstall/bin/grep -F KO- configure
+ /builds/dan/bootstrapinstall/bin/grep -F KO- configure
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS precedence'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS precedence'
+ set +x
ok 5 - AC_CONFIG_MACRO_DIRS precedence
PASS: t/aclocal-macrodirs.tap 5 - AC_CONFIG_MACRO_DIRS precedence
+ test -z ''
+ test ok = ok
+ rm -rf 5.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS interaction with --install'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS interaction with --install'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS interaction with --install'
+ shift
+ tcount=6
+ test 6 -gt 0
+ mkdir 6.d
+ cd 6.d
+ cat
+ mkdir sys-dir the-dir
+ echo 'AC_DEFUN([THE_MACRO], [:])'
+ test '!' -r the-dir/my.m4
+ aclocal-1.16 -Werror --install --system-acdir ./sys-dir
aclocal-1.16: installing 'the-dir/my.m4' from 'sys-dir/my.m4'
+ diff sys-dir/my.m4 the-dir/my.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS interaction with --install'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS interaction with --install'
+ set +x
ok 6 - AC_CONFIG_MACRO_DIRS interaction with --install
PASS: t/aclocal-macrodirs.tap 6 - AC_CONFIG_MACRO_DIRS interaction with --install
+ test -z ''
+ test ok = ok
+ rm -rf 6.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'several AC_CONFIG_MACRO_DIRS arguments and --install'
+ test -n ''
+ r=ok
+ description='several AC_CONFIG_MACRO_DIRS arguments and --install'
+ directive=
+ echo 'several AC_CONFIG_MACRO_DIRS arguments and --install'
+ shift
+ tcount=7
+ test 7 -gt 0
+ mkdir 7.d
+ cd 7.d
+ cat
+ two_dirs_install_check
+ mkdir sys-dir dir1 dir2
+ echo 'AC_DEFUN([THE_MACRO], [:])'
+ echo 'AC_DEFUN([AX_FOO], [:])'
+ test '!' -r dir1/my.m4
+ aclocal-1.16 -Werror --install --system-acdir ./sys-dir
aclocal-1.16: installing 'dir1/my.m4' from 'sys-dir/my.m4'
+ diff sys-dir/my.m4 dir1/my.m4
+ test '!' -e dir2/my.m4
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/my.m4])' aclocal.m4
m4_include([dir1/my.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/zap.m4])' aclocal.m4
m4_include([dir2/zap.m4])
+ test_end
+ test -z 'several AC_CONFIG_MACRO_DIRS arguments and --install'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'several AC_CONFIG_MACRO_DIRS arguments and --install'
+ set +x
ok 7 - several AC_CONFIG_MACRO_DIRS arguments and --install
PASS: t/aclocal-macrodirs.tap 7 - several AC_CONFIG_MACRO_DIRS arguments and --install
+ test -z ''
+ test ok = ok
+ rm -rf 7.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'several AC_CONFIG_MACRO_DIRS calls and --install'
+ test -n ''
+ r=ok
+ description='several AC_CONFIG_MACRO_DIRS calls and --install'
+ directive=
+ echo 'several AC_CONFIG_MACRO_DIRS calls and --install'
+ shift
+ tcount=8
+ test 8 -gt 0
+ mkdir 8.d
+ cd 8.d
+ cat
+ two_dirs_install_check
+ mkdir sys-dir dir1 dir2
+ echo 'AC_DEFUN([THE_MACRO], [:])'
+ echo 'AC_DEFUN([AX_FOO], [:])'
+ test '!' -r dir1/my.m4
+ aclocal-1.16 -Werror --install --system-acdir ./sys-dir
aclocal-1.16: installing 'dir1/my.m4' from 'sys-dir/my.m4'
+ diff sys-dir/my.m4 dir1/my.m4
+ test '!' -e dir2/my.m4
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/my.m4])' aclocal.m4
m4_include([dir1/my.m4])
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/zap.m4])' aclocal.m4
m4_include([dir2/zap.m4])
+ test_end
+ test -z 'several AC_CONFIG_MACRO_DIRS calls and --install'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'several AC_CONFIG_MACRO_DIRS calls and --install'
+ set +x
ok 8 - several AC_CONFIG_MACRO_DIRS calls and --install
PASS: t/aclocal-macrodirs.tap 8 - several AC_CONFIG_MACRO_DIRS calls and --install
+ test -z ''
+ test ok = ok
+ rm -rf 8.d
+ r=invalid
+ directive=
+ description=
+ test_begin ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIRS'
+ test -n ''
+ r=ok
+ description=''\''-I'\'' option wins over AC_CONFIG_MACRO_DIRS'
+ directive=
+ echo ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIRS'
+ shift
+ tcount=9
+ test 9 -gt 0
+ mkdir 9.d
+ cd 9.d
+ cat
+ mkdir dir1 dir2
+ echo 'AC_DEFUN([MY_FOO], [::ko::ko::])'
+ echo 'AC_DEFUN([MY_FOO], [::ok::ok::])'
+ aclocal-1.16 -Werror -I dir2
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir2/2.m4])' aclocal.m4
m4_include([dir2/2.m4])
+ not /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/1.m4])' aclocal.m4
+ /builds/dan/bootstrapinstall/bin/grep -F 'm4_include([dir1/1.m4])' aclocal.m4
+ autoconf
+ not /builds/dan/bootstrapinstall/bin/grep -F ::ko::ko:: configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::ko::ko:: configure
+ /builds/dan/bootstrapinstall/bin/grep -F ::ok::ok:: configure
::ok::ok::
+ test_end
+ test -z ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIRS'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- ''\''-I'\'' option wins over AC_CONFIG_MACRO_DIRS'
+ set +x
ok 9 - '-I' option wins over AC_CONFIG_MACRO_DIRS
PASS: t/aclocal-macrodirs.tap 9 - '-I' option wins over AC_CONFIG_MACRO_DIRS
+ test -z ''
+ test ok = ok
+ rm -rf 9.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS([foo]) can create directory '\''foo'\'''
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS([foo]) can create directory '\''foo'\'''
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS([foo]) can create directory '\''foo'\'''
+ shift
+ tcount=10
+ test 10 -gt 0
+ mkdir 10.d
+ cd 10.d
+ cat
+ mkdir acdir
+ echo 'AC_DEFUN([MY_MACRO], [:])'
+ test '!' -d foo
+ aclocal-1.16 -Werror --install --system-acdir ./acdir
aclocal-1.16: installing 'foo/bar.m4' from 'acdir/bar.m4'
+ diff acdir/bar.m4 foo/bar.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS([foo]) can create directory '\''foo'\'''
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS([foo]) can create directory '\''foo'\'''
+ set +x
ok 10 - AC_CONFIG_MACRO_DIRS([foo]) can create directory 'foo'
PASS: t/aclocal-macrodirs.tap 10 - AC_CONFIG_MACRO_DIRS([foo]) can create directory 'foo'
+ test -z ''
+ test ok = ok
+ rm -rf 10.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)'
+ shift
+ tcount=11
+ test 11 -gt 0
+ mkdir 11.d
+ cd 11.d
+ cat
+ aclocal-1.16 -Werror -Wno-error
+ cat stderr
aclocal-1.16: warning: couldn't open directory 'non-existent': No such file or directory
+ grep 'couldn'\''t open directory '\''non-existent'\''' stderr
aclocal-1.16: warning: couldn't open directory 'non-existent': No such file or directory
+ test -f aclocal.m4
+ rm -rf aclocal.m4 autom4te.cache
+ aclocal-1.16 -Werror -Werror -Wno-unsupported
+ test -f aclocal.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)'
+ set +x
ok 11 - AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)
PASS: t/aclocal-macrodirs.tap 11 - AC_CONFIG_MACRO_DIRS([non-existent]) warns (1)
+ test -z ''
+ test ok = ok
+ rm -rf 11.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)'
+ shift
+ tcount=12
+ test 12 -gt 0
+ mkdir 12.d
+ cd 12.d
+ cat
+ mkdir dir-ok
+ not aclocal-1.16 -Werror
+ cat stderr
+ aclocal-1.16 -Werror
aclocal-1.16: error: couldn't open directory 'dir-ko': No such file or directory
+ grep 'couldn'\''t open directory '\''dir-ko'\''' stderr
aclocal-1.16: error: couldn't open directory 'dir-ko': No such file or directory
+ not grep dir-ok stderr
+ grep dir-ok stderr
+ test '!' -e aclocal.m4
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)'
+ set +x
ok 12 - AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)
PASS: t/aclocal-macrodirs.tap 12 - AC_CONFIG_MACRO_DIRS([non-existent]) warns (2)
+ test -z ''
+ test ok = ok
+ rm -rf 12.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out'
+ shift
+ tcount=13
+ test 13 -gt 0
+ mkdir 13.d
+ cd 13.d
+ cat
+ mkdir dir-ok
+ not aclocal-1.16 -Werror -Wnone --install
+ cat stderr
+ aclocal-1.16 -Werror -Wnone --install
aclocal-1.16: error: couldn't open directory 'dir-ko': No such file or directory
+ grep 'couldn'\''t open directory '\''dir-ko'\''' stderr
aclocal-1.16: error: couldn't open directory 'dir-ko': No such file or directory
+ test '!' -e dir-ko
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out'
+ set +x
ok 13 - AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out
PASS: t/aclocal-macrodirs.tap 13 - AC_CONFIG_MACRO_DIRS([existent non-existent]) errors out
+ test -z ''
+ test ok = ok
+ rm -rf 13.d
+ r=invalid
+ directive=
+ description=
+ test_begin 'AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ test -n ''
+ r=ok
+ description='AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ directive=
+ echo 'AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ shift
+ tcount=14
+ test 14 -gt 0
+ mkdir 14.d
+ cd 14.d
+ cat
+ cat
+ aclocal-1.16 -Werror -Wno-error
+ cat stderr
aclocal-1.16: warning: couldn't open directory 'not-exist': No such file or directory
++ grep -c 'couldn'\''t open directory '\''not-exist'\''' stderr
+ test 1 -eq 1
+ test_end
+ test -z 'AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/aclocal-macrodirs.dir
+ result_ ok -D '' -- 'AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist'
+ set +x
ok 14 - AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist
PASS: t/aclocal-macrodirs.tap 14 - AC_CONFIG_MACRO_DIRS([not-exist]) and ACLOCAL_AMFLAGS = -I not-exist
+ test -z ''
+ test ok = ok
+ rm -rf 14.d
+ r=invalid
+ directive=
+ description=
+ echo 'AC_INIT AC_CONFIG_MACRO_DIRS'
+ autoconf -o/dev/null -
/dev/null:1659: error: possibly undefined macro: AC_CONFIG_MACRO_DIRS
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
+ skip_ -r 'autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)'
+ result_ ok -D SKIP -r 'autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)'
+ set +x
ok 15 # SKIP autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)
SKIP: t/aclocal-macrodirs.tap 15 # SKIP autoconf is too old (AC_CONFIG_MACRO_DIRS not defined)
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 15 = later
+ test 0 -eq 0
+ test 14 -eq 15
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

XFAIL: t/all
============

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/all.dir
+ targets='all install-exec install-data uninstall'
+ echo 'all install-exec install-data uninstall:'
+ sed -e 's/[ :]/-local&/g'
+ cat Makefile.am
all-local install-exec-local install-data-local uninstall-local:
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ for target in $targets
+ grep all-local Makefile.in
all-local install-exec-local install-data-local uninstall-local:
+ grep 'all-am:.*all-local' Makefile.in
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/all.sh (exit status: 1)

SKIP: t/amhello-cflags
======================

SKIP t/amhello-cflags.sh (exit status: 77)

SKIP: t/amhello-cross-compile
=============================

amhello-cross-compile: running i586-mingw32msvc-gcc --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: i586-mingw32msvc-gcc: command not found
SKIP t/amhello-cross-compile.sh (exit status: 77)

SKIP: t/am-prog-cc-stdc
=======================

SKIP t/am-prog-cc-stdc.sh (exit status: 77)

SKIP: t/am-prog-cc-c-o
======================

SKIP t/am-prog-cc-c-o.sh (exit status: 77)

SKIP: t/ar-lib
==============

ar-lib: trying some XSI constructs with /bin/sh
/bin/sh[5]: 1: unknown test operator
SKIP t/ar-lib.sh (exit status: 77)

SKIP: t/ar-lib4
===============

ar-lib4: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ar-lib4.sh (exit status: 77)

SKIP: t/ar-lib5a
================

ar-lib5a: running lib -out:defstest.lib
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 873: lib: command not found
SKIP t/ar-lib5a.sh (exit status: 77)

SKIP: t/ar-lib6a
================

ar-lib6a: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ar-lib6a.sh (exit status: 77)

SKIP: t/ar-lib6b
================

ar-lib6b: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ar-lib6b.sh (exit status: 77)

SKIP: t/autodist-stamp-vti
==========================

autodist-stamp-vti: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/autodist-stamp-vti.sh (exit status: 77)

PASS: t/auxdir-computed
=======================

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/auxdir-computed.dir
+ plan_ 3
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x3 = xunknown
+ test x3 = xlater
+ test x3 = xlazy
+ test x3 = xnow
+ test 3 -ge 0
+ planned_=3
+ echo 1..3
1..3
+ cat
+ :
+ command_ok_ aclocal aclocal-1.16 -Werror
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=aclocal
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ aclocal-1.16 -Werror
+ result_ ok -D '' -r '' -- aclocal
+ set +x
ok 1 - aclocal
PASS: t/auxdir-computed.tap 1 - aclocal
+ command_ok_ 'automake -a' -D TODO -r 'long-standing limitation' automake-1.16 --foreign -Werror -Wall -a
+ tap_directive_=
+ tap_reason_=
+ test 10 -gt 0
+ tap_description_='automake -a'
+ shift
+ test 9 -gt 0
+ case $1 in
+ tap_directive_=TODO
+ shift
+ shift
+ test 7 -gt 0
+ case $1 in
+ tap_reason_='long-standing limitation'
+ shift
+ shift
+ test 5 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac:2: error: required directory ./$foo does not exist
configure.ac:3: error: installing '$foo/install-sh'; error while making link: No such file or directory
configure.ac:3: error: installing '$foo/missing'; error while making link: No such file or directory
+ tap_result_='not ok'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- 'automake -a'
+ set +x
not ok 2 - automake -a # TODO long-standing limitation
XFAIL: t/auxdir-computed.tap 2 - automake -a # TODO long-standing limitation
+ command_ok_ automake -D TODO -r 'long-standing limitation' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 9 -gt 0
+ tap_description_=automake
+ shift
+ test 8 -gt 0
+ case $1 in
+ tap_directive_=TODO
+ shift
+ shift
+ test 6 -gt 0
+ case $1 in
+ tap_reason_='long-standing limitation'
+ shift
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
configure.ac:2: error: required directory ./$foo does not exist
configure.ac:3: error: required file '$foo/install-sh' not found
configure.ac:3:   'automake --add-missing' can install 'install-sh'
configure.ac:3: error: required file '$foo/missing' not found
configure.ac:3:   'automake --add-missing' can install 'missing'
+ tap_result_='not ok'
+ result_ 'not ok' -D TODO -r 'long-standing limitation' -- automake
+ set +x
not ok 3 - automake # TODO long-standing limitation
XFAIL: t/auxdir-computed.tap 3 - automake # TODO long-standing limitation
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 3 = later
+ test 0 -eq 0
+ test 1 -eq 3
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

XFAIL: t/auxdir-pr19311
=======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/auxdir-pr19311.dir
+ cat
+ :
+ mkdir build-aux
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac:2: installing 'build-aux/compile'
configure.ac:4: installing 'build-aux/install-sh'
configure.ac:4: installing 'build-aux/missing'
+ autoconf
+ test -f build-aux/compile
+ test -f build-aux/install-sh
+ ./configure
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
configure: error: cannot find install-sh, install.sh, or shtool in "." "./.." "./../.."
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/auxdir-pr19311.sh (exit status: 1)

SKIP: t/canon6
==============

canon6: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/canon6.sh (exit status: 77)

SKIP: t/canon7
==============

canon7: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/canon7.sh (exit status: 77)

SKIP: t/ccnoco
==============

SKIP t/ccnoco.sh (exit status: 77)

SKIP: t/ccnoco-lib
==================

SKIP t/ccnoco-lib.sh (exit status: 77)

SKIP: t/ccnoco-lt
=================

SKIP t/ccnoco-lt.sh (exit status: 77)

SKIP: t/ccnoco3
===============

SKIP t/ccnoco3.sh (exit status: 77)

SKIP: t/ccnoco4
===============

SKIP t/ccnoco4.sh (exit status: 77)

SKIP: t/ccnoco-deps
===================

SKIP t/ccnoco-deps.sh (exit status: 77)

SKIP: t/check12
===============

check12: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/check12.sh (exit status: 77)

SKIP: t/compile3
================

compile3: trying some XSI constructs with /bin/sh
/bin/sh[5]: 1: unknown test operator
SKIP t/compile3.sh (exit status: 77)

SKIP: t/compile4
================

compile4: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
SKIP t/compile4.sh (exit status: 77)

SKIP: t/compile5
================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/compile5.dir
+ get_shell_script compile
+ am_source=compile
+ am_target=compile
+ test '!' -f compile
+ rm -f compile
+ test x = xyes
+ cp -f /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/compile compile
+ sed 10q compile
#! /bin/sh
# Wrapper for compilers which do not understand '-c -o'.

scriptversion=2018-03-07.03; # UTC

# Copyright (C) 1999-2018 Free Software Foundation, Inc.
# Written by Tom Tromey <tromey@cygnus.com>.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
+ unset am_target am_source
+ cat
+ chmod +x ./cl
+ cat
+ :
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac:4: installing './config.guess'
configure.ac:4: installing './config.sub'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking build system type... mips-sgi-irix6.5
checking host system type... mips-sgi-irix6.5
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating check_host
+ . ./check_host
++ case 'irix6.5' in
++ skip_ 'target OS is not MinGW'
++ warn_ 'compile5: skipped test: target OS is not MinGW'
++ echo 'compile5: skipped test: target OS is not MinGW'
++ _am_exit 77
++ set +e
++ test 77 = 77
++ am__test_skipped=yes
++ exit 77
++ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/compile5.sh (exit status: 77)

SKIP: t/compile6
================

compile6: trying some XSI constructs with /bin/sh
/bin/sh[5]: 1: unknown test operator
SKIP t/compile6.sh (exit status: 77)

SKIP: t/compile7
================

compile7: running icl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 790: icl: command not found
SKIP t/compile7.sh (exit status: 77)

XFAIL: t/cond17
===============

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cond17.dir
+ cat
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall -a
Makefile.am: error: object 'foo.$(OBJEXT)' created by 'foo.cc' and 'foo.c'
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/cond17.sh (exit status: 1)

PASS: t/cscope
==============

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ plan_ 18
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x18 = xunknown
+ test x18 = xlater
+ test x18 = xlazy
+ test x18 = xnow
+ test 18 -ge 0
+ planned_=18
+ echo 1..18
1..18
++ pwd
+ ocwd=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ cat
+ mkdir sub sub/subsub
+ cat
+ cat
+ echo 'int foo_func () { return 0; }'
+ echo 'int main () { return 0; }'
+ cat
+ :
+ echo 'int main () { return 0; }'
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -i -a
+ cscope -q --version
./t/cscope.tap: line 72: cscope: command not found
+ have_cscope=no
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ pfx='relative VPATH'
+ mkdir build
+ cd build
+ my_configure ..
+ command_ok_ '[relative VPATH] configure' ../configure EMACS=no --with-lispdir=/who/cares
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='[relative VPATH] configure'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ../configure EMACS=no --with-lispdir=/who/cares
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for emacs... no
checking where .elc files should go... /who/cares
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
+ result_ ok -D '' -r '' -- '[relative VPATH] configure'
+ set +x
ok 1 - [relative VPATH] configure
PASS: t/cscope.tap 1 - [relative VPATH] configure
+ test_cscope
+ r=ok
+ make -n cscope
rm -f cscope.files
fail=; \
if (target_option=k; case ${target_option-} in ?) ;; *) echo "am__make_running_with_option: internal error: invalid" "target option '${target_option-}' specified" >&2; exit 1;; esac; has_opt=no; sane_makeflags=$MAKEFLAGS; if { if test -z '0'; then false; elif test -n 'mips-sgi-irix6.5'; then true; elif test -n '4.2.1' && test -n '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build'; then true; else false; fi; }; then sane_makeflags=$MFLAGS; else case $MAKEFLAGS in *\\[\ \	]*) bs=\\; sane_makeflags=`printf '%s\n' "$MAKEFLAGS" | sed "s/$bs$bs[$bs $bs	]*//g"`;; esac; fi; skip_next=no; strip_trailopt () { flg=`printf '%s\n' "$flg" | sed "s/$1.*$//"`; }; for flg in $sane_makeflags; do test $skip_next = yes && { skip_next=no; continue; }; case $flg in *=*|--*) continue;; -*I) strip_trailopt 'I'; skip_next=yes;; -*I?*) strip_trailopt 'I';; -*O) strip_trailopt 'O'; skip_next=yes;; -*O?*) strip_trailopt 'O';; -*l) strip_trailopt 'l'; skip_next=yes;; -*l?*) strip_trailopt 'l';; -[dEDm]) skip_next=yes;; -[JT]) skip_next=yes;; esac; case $flg in *$target_option*) has_opt=yes; break;; esac; done; test $has_opt = yes); then \
  failcom='fail=yes'; \
else \
  failcom='exit 1'; \
fi; \
dot_seen=no; \
target=`echo cscopelist-recursive | sed s/-recursive//`; \
case "cscopelist-recursive" in \
  distclean-* | maintainer-clean-*) list='sub' ;; \
  *) list='sub' ;; \
esac; \
for subdir in $list; do \
  echo "Making $target in $subdir"; \
  if test "$subdir" = "."; then \
    dot_seen=yes; \
    local_target="$target-am"; \
  else \
    local_target="$target"; \
  fi; \
  (CDPATH="${ZSH_VERSION+.}:" && cd $subdir && make  $local_target) \
  || eval $failcom; \
done; \
if test "$dot_seen" = "no"; then \
  make  "$target-am" || exit 1; \
fi; test -z "$fail"
Making cscopelist in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build/sub'
/builds/dan/bootstrapinstall/bin/mkdir -p subsub
echo 'int generated_subsub () { return 0; }' > subsub/gen.c
list=' subsub/dist.c subsub/gen.c  '; \
case "../../sub" in \
  [\\/]* | ?:[\\/]*) sdir="../../sub" ;; \
  *) sdir=sub/../../sub ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "sub/$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ../cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build'
list=' foo.c bar.cpp baz.f90  foo.el'; \
case ".." in \
  [\\/]* | ?:[\\/]*) sdir=".." ;; \
  *) sdir=./.. ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "./$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ./cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build'
test ! -s cscope.files \
  || cscope -b -q   -i cscope.files 
+ result_ ok '[relative VPATH] make -n cscope'
+ set +x
ok 2 - [relative VPATH] make -n cscope
PASS: t/cscope.tap 2 - [relative VPATH] make -n cscope
+ test no = no
+ touch cscope.files cscope.out cscope.in.out cscope.po.out
+ skip_row_ 3 -r 'no proper cscope program available'
+ skip_count_=3
+ shift
++ seq_ 3
++ case $# in
++ seq_first=1
++ seq_incr=1
++ seq_last=3
++ i=1
++ test 1 -le 3
++ echo 1
++ i=2
++ test 2 -le 3
++ echo 2
++ i=3
++ test 3 -le 3
++ echo 3
++ i=4
++ test 4 -le 3
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 3 # SKIP no proper cscope program available
SKIP: t/cscope.tap 3 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 4 # SKIP no proper cscope program available
SKIP: t/cscope.tap 4 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 5 # SKIP no proper cscope program available
SKIP: t/cscope.tap 5 # SKIP no proper cscope program available
+ return 0
+ test_cleanup
+ r=ok
+ test -f configure
+ make distcleancheck
Making distclean in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build/sub'
test -z "bar" || rm -f bar
test -z "subsub/gen.c" || rm -f subsub/gen.c
rm -f *.
rm -f subsub/*.
rm -f *.tab.c
test -z "" || rm -f 
test . = "../../sub" || test -z "" || rm -f 
rm -f subsub/.dirstamp
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build'
test -z "foo" || rm -f foo
rm -f foo.elc
rm -f *.
rm -f *.tab.c
test -z "" || rm -f 
test . = ".." || test -z "" || rm -f 
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build'
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
+ test '!' -e cscope.files
+ test '!' -e cscope.out
+ test '!' -e cscope.in.out
+ test '!' -e cscope.po.out
+ result_ ok '[relative VPATH] make distcheck'
+ set +x
ok 6 - [relative VPATH] make distcheck
PASS: t/cscope.tap 6 - [relative VPATH] make distcheck
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ pfx='absolute VPATH'
+ mkdir build2
+ cd build2
+ my_configure /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ command_ok_ '[absolute VPATH] configure' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/configure EMACS=no --with-lispdir=/who/cares
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='[absolute VPATH] configure'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/configure EMACS=no --with-lispdir=/who/cares
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for emacs... no
checking where .elc files should go... /who/cares
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
+ result_ ok -D '' -r '' -- '[absolute VPATH] configure'
+ set +x
ok 7 - [absolute VPATH] configure
PASS: t/cscope.tap 7 - [absolute VPATH] configure
+ test_cscope
+ r=ok
+ make -n cscope
rm -f cscope.files
fail=; \
if (target_option=k; case ${target_option-} in ?) ;; *) echo "am__make_running_with_option: internal error: invalid" "target option '${target_option-}' specified" >&2; exit 1;; esac; has_opt=no; sane_makeflags=$MAKEFLAGS; if { if test -z '0'; then false; elif test -n 'mips-sgi-irix6.5'; then true; elif test -n '4.2.1' && test -n '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2'; then true; else false; fi; }; then sane_makeflags=$MFLAGS; else case $MAKEFLAGS in *\\[\ \	]*) bs=\\; sane_makeflags=`printf '%s\n' "$MAKEFLAGS" | sed "s/$bs$bs[$bs $bs	]*//g"`;; esac; fi; skip_next=no; strip_trailopt () { flg=`printf '%s\n' "$flg" | sed "s/$1.*$//"`; }; for flg in $sane_makeflags; do test $skip_next = yes && { skip_next=no; continue; }; case $flg in *=*|--*) continue;; -*I) strip_trailopt 'I'; skip_next=yes;; -*I?*) strip_trailopt 'I';; -*O) strip_trailopt 'O'; skip_next=yes;; -*O?*) strip_trailopt 'O';; -*l) strip_trailopt 'l'; skip_next=yes;; -*l?*) strip_trailopt 'l';; -[dEDm]) skip_next=yes;; -[JT]) skip_next=yes;; esac; case $flg in *$target_option*) has_opt=yes; break;; esac; done; test $has_opt = yes); then \
  failcom='fail=yes'; \
else \
  failcom='exit 1'; \
fi; \
dot_seen=no; \
target=`echo cscopelist-recursive | sed s/-recursive//`; \
case "cscopelist-recursive" in \
  distclean-* | maintainer-clean-*) list='sub' ;; \
  *) list='sub' ;; \
esac; \
for subdir in $list; do \
  echo "Making $target in $subdir"; \
  if test "$subdir" = "."; then \
    dot_seen=yes; \
    local_target="$target-am"; \
  else \
    local_target="$target"; \
  fi; \
  (CDPATH="${ZSH_VERSION+.}:" && cd $subdir && make  $local_target) \
  || eval $failcom; \
done; \
if test "$dot_seen" = "no"; then \
  make  "$target-am" || exit 1; \
fi; test -z "$fail"
Making cscopelist in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2/sub'
/builds/dan/bootstrapinstall/bin/mkdir -p subsub
echo 'int generated_subsub () { return 0; }' > subsub/gen.c
list=' subsub/dist.c subsub/gen.c  '; \
case "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub" in \
  [\\/]* | ?:[\\/]*) sdir="/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub" ;; \
  *) sdir=sub//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "sub/$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ../cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2'
list=' foo.c bar.cpp baz.f90  foo.el'; \
case "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir" in \
  [\\/]* | ?:[\\/]*) sdir="/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir" ;; \
  *) sdir=.//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "./$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ./cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2'
test ! -s cscope.files \
  || cscope -b -q   -i cscope.files 
+ result_ ok '[absolute VPATH] make -n cscope'
+ set +x
ok 8 - [absolute VPATH] make -n cscope
PASS: t/cscope.tap 8 - [absolute VPATH] make -n cscope
+ test no = no
+ touch cscope.files cscope.out cscope.in.out cscope.po.out
+ skip_row_ 3 -r 'no proper cscope program available'
+ skip_count_=3
+ shift
++ seq_ 3
++ case $# in
++ seq_first=1
++ seq_incr=1
++ seq_last=3
++ i=1
++ test 1 -le 3
++ echo 1
++ i=2
++ test 2 -le 3
++ echo 2
++ i=3
++ test 3 -le 3
++ echo 3
++ i=4
++ test 4 -le 3
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 9 # SKIP no proper cscope program available
SKIP: t/cscope.tap 9 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 10 # SKIP no proper cscope program available
SKIP: t/cscope.tap 10 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 11 # SKIP no proper cscope program available
SKIP: t/cscope.tap 11 # SKIP no proper cscope program available
+ return 0
+ test_cleanup
+ r=ok
+ test -f configure
+ make distcleancheck
Making distclean in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2/sub'
test -z "bar" || rm -f bar
test -z "subsub/gen.c" || rm -f subsub/gen.c
rm -f *.
rm -f subsub/*.
rm -f *.tab.c
test -z "" || rm -f 
test . = "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub" || test -z "" || rm -f 
rm -f subsub/.dirstamp
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2'
test -z "foo" || rm -f foo
rm -f foo.elc
rm -f *.
rm -f *.tab.c
test -z "" || rm -f 
test . = "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir" || test -z "" || rm -f 
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/build2'
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
+ test '!' -e cscope.files
+ test '!' -e cscope.out
+ test '!' -e cscope.in.out
+ test '!' -e cscope.po.out
+ result_ ok '[absolute VPATH] make distcheck'
+ set +x
ok 12 - [absolute VPATH] make distcheck
PASS: t/cscope.tap 12 - [absolute VPATH] make distcheck
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir
+ pfx='in-tree build'
+ my_configure .
+ command_ok_ '[in-tree build] configure' ./configure EMACS=no --with-lispdir=/who/cares
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='[in-tree build] configure'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure EMACS=no --with-lispdir=/who/cares
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for emacs... no
checking where .elc files should go... /who/cares
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
+ result_ ok -D '' -r '' -- '[in-tree build] configure'
+ set +x
ok 13 - [in-tree build] configure
PASS: t/cscope.tap 13 - [in-tree build] configure
+ test_cscope
+ r=ok
+ make -n cscope
rm -f cscope.files
fail=; \
if (target_option=k; case ${target_option-} in ?) ;; *) echo "am__make_running_with_option: internal error: invalid" "target option '${target_option-}' specified" >&2; exit 1;; esac; has_opt=no; sane_makeflags=$MAKEFLAGS; if { if test -z '0'; then false; elif test -n 'mips-sgi-irix6.5'; then true; elif test -n '4.2.1' && test -n '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir'; then true; else false; fi; }; then sane_makeflags=$MFLAGS; else case $MAKEFLAGS in *\\[\ \	]*) bs=\\; sane_makeflags=`printf '%s\n' "$MAKEFLAGS" | sed "s/$bs$bs[$bs $bs	]*//g"`;; esac; fi; skip_next=no; strip_trailopt () { flg=`printf '%s\n' "$flg" | sed "s/$1.*$//"`; }; for flg in $sane_makeflags; do test $skip_next = yes && { skip_next=no; continue; }; case $flg in *=*|--*) continue;; -*I) strip_trailopt 'I'; skip_next=yes;; -*I?*) strip_trailopt 'I';; -*O) strip_trailopt 'O'; skip_next=yes;; -*O?*) strip_trailopt 'O';; -*l) strip_trailopt 'l'; skip_next=yes;; -*l?*) strip_trailopt 'l';; -[dEDm]) skip_next=yes;; -[JT]) skip_next=yes;; esac; case $flg in *$target_option*) has_opt=yes; break;; esac; done; test $has_opt = yes); then \
  failcom='fail=yes'; \
else \
  failcom='exit 1'; \
fi; \
dot_seen=no; \
target=`echo cscopelist-recursive | sed s/-recursive//`; \
case "cscopelist-recursive" in \
  distclean-* | maintainer-clean-*) list='sub' ;; \
  *) list='sub' ;; \
esac; \
for subdir in $list; do \
  echo "Making $target in $subdir"; \
  if test "$subdir" = "."; then \
    dot_seen=yes; \
    local_target="$target-am"; \
  else \
    local_target="$target"; \
  fi; \
  (CDPATH="${ZSH_VERSION+.}:" && cd $subdir && make  $local_target) \
  || eval $failcom; \
done; \
if test "$dot_seen" = "no"; then \
  make  "$target-am" || exit 1; \
fi; test -z "$fail"
Making cscopelist in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub'
/builds/dan/bootstrapinstall/bin/mkdir -p subsub
echo 'int generated_subsub () { return 0; }' > subsub/gen.c
list=' subsub/dist.c subsub/gen.c  '; \
case "." in \
  [\\/]* | ?:[\\/]*) sdir="." ;; \
  *) sdir=sub/. ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "sub/$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ../cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir'
list=' foo.c bar.cpp baz.f90  foo.el'; \
case "." in \
  [\\/]* | ?:[\\/]*) sdir="." ;; \
  *) sdir=./. ;; \
esac; \
for i in $list; do \
  if test -f "$i"; then \
    echo "./$i"; \
  else \
    echo "$sdir/$i"; \
  fi; \
done >> ./cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir'
test ! -s cscope.files \
  || cscope -b -q   -i cscope.files 
+ result_ ok '[in-tree build] make -n cscope'
+ set +x
ok 14 - [in-tree build] make -n cscope
PASS: t/cscope.tap 14 - [in-tree build] make -n cscope
+ test no = no
+ touch cscope.files cscope.out cscope.in.out cscope.po.out
+ skip_row_ 3 -r 'no proper cscope program available'
+ skip_count_=3
+ shift
++ seq_ 3
++ case $# in
++ seq_first=1
++ seq_incr=1
++ seq_last=3
++ i=1
++ test 1 -le 3
++ echo 1
++ i=2
++ test 2 -le 3
++ echo 2
++ i=3
++ test 3 -le 3
++ echo 3
++ i=4
++ test 4 -le 3
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 15 # SKIP no proper cscope program available
SKIP: t/cscope.tap 15 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 16 # SKIP no proper cscope program available
SKIP: t/cscope.tap 16 # SKIP no proper cscope program available
+ for i_ in $(seq_ $skip_count_)
+ skip_ -r 'no proper cscope program available'
+ result_ ok -D SKIP -r 'no proper cscope program available'
+ set +x
ok 17 # SKIP no proper cscope program available
SKIP: t/cscope.tap 17 # SKIP no proper cscope program available
+ return 0
+ test_cleanup
+ r=ok
+ test -f configure
+ make distclean
Making distclean in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub'
test -z "bar" || rm -f bar
test -z "subsub/gen.c" || rm -f subsub/gen.c
rm -f *.
rm -f subsub/*.
rm -f *.tab.c
test -z "" || rm -f 
test . = "." || test -z "" || rm -f 
rm -f subsub/.dirstamp
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir'
test -z "foo" || rm -f foo
rm -f foo.elc
rm -f *.
rm -f *.tab.c
test -z "" || rm -f 
test . = "." || test -z "" || rm -f 
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cscope.dir'
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
+ test '!' -e cscope.files
+ test '!' -e cscope.out
+ test '!' -e cscope.in.out
+ test '!' -e cscope.po.out
+ result_ ok '[in-tree build] make distcheck'
+ set +x
ok 18 - [in-tree build] make distcheck
PASS: t/cscope.tap 18 - [in-tree build] make distcheck
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 18 = later
+ test 0 -eq 0
+ test 9 -eq 18
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

SKIP: t/cscope3
===============

cscope3: running cscope --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: cscope: command not found
SKIP t/cscope3.sh (exit status: 77)

FAIL: t/cxx-demo
================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir
+ cat
+ cat
+ mkdir sub build-aux
+ aclocal-1.16 -Werror
+ autoheader
+ test -f config.hxx.in
+ autoconf
+ automake-1.16 --foreign -Werror -Wall --add-missing
configure.ac:4: installing 'build-aux/install-sh'
configure.ac:4: installing 'build-aux/missing'
Makefile.am: installing 'build-aux/depcomp'
+ test -f build-aux/depcomp
+ test '!' -e build-aux/compile
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating config.hxx
config.status: executing depfiles commands
+ make
make  all-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
source='work.cxx' object='work-work.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o work-work.o `test -f 'work.cxx' || echo './'`work.cxx
source='foo.cpp' object='work-foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o work-foo.o `test -f 'foo.cpp' || echo './'`foo.cpp
source='sub/bar.cc' object='sub/work-bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o sub/work-bar.o `test -f 'sub/bar.cc' || echo './'`sub/bar.cc
CC -D'GREETINGS="Good morning"' -g   -o work work-work.o work-foo.o sub/work-bar.o  
source='play.c++' object='play.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1   -g -c -o play.o play.c++
source='foo.cpp' object='foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1   -g -c -o foo.o foo.cpp
source='sub/bar.cc' object='sub/bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./build-aux/depcomp \
CC -DHAVE_CONFIG_H -I.  -DOK_AM=1   -g -c -o sub/bar.o sub/bar.cc
CC  -g   -o play play.o foo.o sub/bar.o  
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
+ make test-objs
test -f play.o
test -f foo.o
test -f sub/bar.o
test -f work-foo.o
test -f sub/work-bar.o
test -f work-work.o
+ cross_compiling
+ test x '!=' x
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ for p in play work
+ ./play
We are playing :-)
Howdy, play!
+ ./play
+ tr -d '\015'
+ cat exp.play
We are playing :-)
Howdy, play!
+ cat got.play
We are playing :-)
Howdy, play!
+ diff exp.play got.play
+ for p in play work
+ ./work
We are working :-(
Good morning, work.
+ ./work
+ tr -d '\015'
+ cat exp.work
We are working :-(
Good morning, work.
+ cat got.work
We are working :-(
Good morning, work.
+ diff exp.work got.work
+ make distcheck
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
if test -d "c---demo-1.3"; then find "c---demo-1.3" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "c---demo-1.3" || { sleep 5 && rm -rf "c---demo-1.3"; }; else :; fi
test -d "c---demo-1.3" || mkdir "c---demo-1.3"
test -n "" \
|| find "c---demo-1.3" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/build-aux/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "c---demo-1.3"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
tardir=c---demo-1.3 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >c---demo-1.3.tar.gz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir'
if test -d "c---demo-1.3"; then find "c---demo-1.3" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "c---demo-1.3" || { sleep 5 && rm -rf "c---demo-1.3"; }; else :; fi
case 'c---demo-1.3.tar.gz' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc c---demo-1.3.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc c---demo-1.3.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc c---demo-1.3.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc c---demo-1.3.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c c---demo-1.3.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc c---demo-1.3.shar.gz | unshar ;;\
*.zip*) \
  unzip c---demo-1.3.zip ;;\
esac
chmod -R a-w c---demo-1.3
chmod u+w c---demo-1.3
mkdir c---demo-1.3/_build c---demo-1.3/_build/sub c---demo-1.3/_inst
chmod a-w c---demo-1.3
test -d c---demo-1.3/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd c---demo-1.3/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd c---demo-1.3/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf c---demo-1.3.tar.gz \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating config.hxx
config.status: executing depfiles commands
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make  all-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
source='work.cxx' object='work-work.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o work-work.o `test -f 'work.cxx' || echo '../../'`work.cxx
source='foo.cpp' object='work-foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o work-foo.o `test -f 'foo.cpp' || echo '../../'`foo.cpp
source='sub/bar.cc' object='sub/work-bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1  -D'GREETINGS="Good morning"' -g -c -o sub/work-bar.o `test -f 'sub/bar.cc' || echo '../../'`sub/bar.cc
CC -D'GREETINGS="Good morning"' -g   -o work work-work.o work-foo.o sub/work-bar.o  
source='../../play.c++' object='play.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1   -g -c -o play.o ../../play.c++
source='../../foo.cpp' object='foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1   -g -c -o foo.o ../../foo.cpp
source='../../sub/bar.cc' object='sub/bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../build-aux/depcomp \
CC -DHAVE_CONFIG_H -I. -I../..  -DOK_AM=1   -g -c -o sub/bar.o ../../sub/bar.cc
CC  -g   -o play play.o foo.o sub/bar.o  
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Nothing to be done for 'dvi'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make  check-local
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
test -f play.o
test -f foo.o
test -f sub/bar.o
test -f work-foo.o
test -f sub/work-bar.o
test -f work-work.o
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin'
  /builds/dan/bootstrapinstall/bin/install -c work play '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin'
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Nothing to be done for 'installcheck'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin' && rm -f work play )
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/tmp/am-dc-478641//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin'
  /builds/dan/bootstrapinstall/bin/install -c work play '/tmp/am-dc-478641//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin'
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
 ( cd '/tmp/am-dc-478641//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_inst/bin' && rm -f work play )
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make  dist-gzip am__post_remove_distdir='@:'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make  distdir-am
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
if test -d "c---demo-1.3"; then find "c---demo-1.3" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "c---demo-1.3" || { sleep 5 && rm -rf "c---demo-1.3"; }; else :; fi
test -d "c---demo-1.3" || mkdir "c---demo-1.3"
test -n "" \
|| find "c---demo-1.3" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/build-aux/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "c---demo-1.3"
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
tardir=c---demo-1.3 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >c---demo-1.3.tar.gz
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
if test -d "c---demo-1.3"; then find "c---demo-1.3" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "c---demo-1.3" || { sleep 5 && rm -rf "c---demo-1.3"; }; else :; fi
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
test -z "work play" || rm -f work play
rm -f *.o
rm -f sub/*.o
rm -f *.tab.c
test -z "" || rm -f 
test . = "../.." || test -z "" || rm -f 
rm -f sub/.deps/.dirstamp
rm -f sub/.dirstamp
rm -f config.hxx stamp-h1
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f ./.deps/foo.Po
rm -f ./.deps/play.Po
rm -f ./.deps/work-foo.Po
rm -f ./.deps/work-work.Po
rm -f sub/.deps/bar.Po
rm -f sub/.deps/work-bar.Po
rm -f Makefile
ERROR: files left in build directory after distclean:
./ii_files/work-work.ii
./ii_files/work-foo.ii
./ii_files/play.ii
./ii_files/foo.ii
make[1]: *** [Makefile:763: distcleancheck] Error 1
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/cxx-demo.dir/c---demo-1.3/_build/sub'
make: *** [Makefile:694: distcheck] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/cxx-demo.sh (exit status: 2)

SKIP: t/cxx-lt-demo
===================

cxx-lt-demo: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/cxx-lt-demo.sh (exit status: 77)

SKIP: t/dejagnu3
================

dejagnu3: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu3.sh (exit status: 77)

SKIP: t/dejagnu4
================

dejagnu4: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu4.sh (exit status: 77)

SKIP: t/dejagnu5
================

dejagnu5: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu5.sh (exit status: 77)

SKIP: t/dejagnu6
================

dejagnu6: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu6.sh (exit status: 77)

SKIP: t/dejagnu7
================

dejagnu7: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu7.sh (exit status: 77)

SKIP: t/dejagnu-absolute-builddir
=================================

dejagnu-absolute-builddir: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu-absolute-builddir.sh (exit status: 77)

SKIP: t/dejagnu-relative-srcdir
===============================

dejagnu-relative-srcdir: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu-relative-srcdir.sh (exit status: 77)

SKIP: t/dejagnu-siteexp-extend
==============================

dejagnu-siteexp-extend: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/dejagnu-siteexp-extend.sh (exit status: 77)

SKIP: t/depcomp8b
=================

depcomp8b: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/depcomp8b.sh (exit status: 77)

PASS: t/dist-formats
====================

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ plan_ 66
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x66 = xunknown
+ test x66 = xlater
+ test x66 = xlazy
+ test x66 = xnow
+ test 66 -ge 0
+ planned_=66
+ echo 1..66
1..66
++ pwd
+ ocwd=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ unset TAR
+ mkdir setup
+ cd setup
+ echo 'AC_INIT([x], [0]) AM_INIT_AUTOMAKE'
+ aclocal-1.16 -Werror
+ mv aclocal.m4 ..
+ cd ..
+ rm -rf setup
+ for MAKE_j4 in "$MAKE -j4" "$MAKE -j 4" false
+ echo all:
+ make -j4 -f -
make: Nothing to be done for 'all'.
+ break
+ all_compression_formats='gzip lzip xz bzip2 zip'
++ for x in $all_compression_formats
++ setup_vars_for_compression_format gzip
++ suffix=NONE
++ compressor=NONE
++ case $1 in
++ suffix=tar.gz
++ compressor=gzip
++ echo gzip
++ for x in $all_compression_formats
++ setup_vars_for_compression_format lzip
++ suffix=NONE
++ compressor=NONE
++ case $1 in
++ suffix=tar.lz
++ compressor=lzip
++ echo lzip
++ for x in $all_compression_formats
++ setup_vars_for_compression_format xz
++ suffix=NONE
++ compressor=NONE
++ case $1 in
++ suffix=tar.xz
++ compressor=xz
++ echo xz
++ for x in $all_compression_formats
++ setup_vars_for_compression_format bzip2
++ suffix=NONE
++ compressor=NONE
++ case $1 in
++ suffix=tar.bz2
++ compressor=bzip2
++ echo bzip2
++ for x in $all_compression_formats
++ setup_vars_for_compression_format zip
++ suffix=NONE
++ compressor=NONE
++ case $1 in
++ suffix=zip
++ compressor=zip
++ echo zip
++ tr '
' ' '
+ all_compressors='gzip lzip xz bzip2 zip '
+ echo All compressors: gzip lzip xz bzip2 zip
All compressors: gzip lzip xz bzip2 zip
++ for c in $all_compressors
++ have_compressor gzip
++ test 1 -eq 1
++ test gzip = gzip
++ return 0
++ for c in $all_compressors
++ have_compressor lzip
++ test 1 -eq 1
++ test lzip = gzip
++ needed_programs=lzip
++ checker_option=--version
++ case $1 in
++ for p in $needed_programs
++ lzip --version
++ tr '
' ' '
./t/dist-formats.tap: line 99: lzip: command not found
++ return 1
++ echo lzip
++ for c in $all_compressors
++ have_compressor xz
++ test 1 -eq 1
++ test xz = gzip
++ needed_programs=xz
++ checker_option=--version
++ case $1 in
++ for p in $needed_programs
++ xz --version
xz (XZ Utils) 5.2.4
liblzma 5.2.4
++ return 0
++ for c in $all_compressors
++ have_compressor bzip2
++ test 1 -eq 1
++ test bzip2 = gzip
++ needed_programs=bzip2
++ checker_option=--version
++ case $1 in
++ checker_option=--help
++ for p in $needed_programs
++ bzip2 --help
bzip2, a block-sorting file compressor.  Version 1.0.6, 6-Sept-2010.

   usage: bzip2 [flags and input files in any order]

   -h --help           print this message
   -d --decompress     force decompression
   -z --compress       force compression
   -k --keep           keep (don't delete) input files
   -f --force          overwrite existing output files
   -t --test           test compressed file integrity
   -c --stdout         output to standard out
   -q --quiet          suppress noncritical error messages
   -v --verbose        be verbose (a 2nd -v gives more)
   -L --license        display software version & license
   -V --version        display software version & license
   -s --small          use less memory (at most 2500k)
   -1 .. -9            set block size to 100k .. 900k
   --fast              alias for -1
   --best              alias for -9

   If invoked as `bzip2', default action is to compress.
              as `bunzip2',  default action is to decompress.
              as `bzcat', default action is to decompress to stdout.

   If no file names are given, bzip2 compresses or decompresses
   from standard input to standard output.  You can combine
   short flags, so `-v -4' means the same as -v4 or -4v, &c.

++ return 0
++ for c in $all_compressors
++ have_compressor zip
++ test 1 -eq 1
++ test zip = gzip
++ needed_programs=zip
++ checker_option=--version
++ case $1 in
++ checker_option=-v
++ needed_programs='zip unzip'
++ for p in $needed_programs
++ zip -v
./t/dist-formats.tap: line 99: zip: command not found
++ return 1
++ echo zip
+ missing_compressors='lzip zip '
+ echo Missing compressors: lzip zip
Missing compressors: lzip zip
+ start_subtest defaults
+ name=defaults
+ shift
+ test -n defaults
+ test 0 -gt 0
++ echo
++ tr , ' '
+ ac_opts=
++ echo
++ tr , ' '
+ am_opts=
+ mkdir defaults
+ cd defaults
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = '
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ command_ok_ 'default [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='default [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'default [automake]'
+ set +x
ok 1 - default [automake]
PASS: t/dist-formats.tap 1 - default [automake]
+ command_ok_ 'default [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='default [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'default [autoconf]'
+ set +x
ok 2 - default [autoconf]
PASS: t/dist-formats.tap 2 - default [autoconf]
+ command_ok_ 'default [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='default [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'default [configure]'
+ set +x
ok 3 - default [configure]
PASS: t/dist-formats.tap 3 - default [configure]
+ command_ok_ 'default [make distcheck]' make distcheck
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='default [make distcheck]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make distcheck
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >defaults-1.0.tar.gz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
case 'defaults-1.0.tar.gz' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc defaults-1.0.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc defaults-1.0.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc defaults-1.0.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc defaults-1.0.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c defaults-1.0.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc defaults-1.0.shar.gz | unshar ;;\
*.zip*) \
  unzip defaults-1.0.zip ;;\
esac
chmod -R a-w defaults-1.0
chmod u+w defaults-1.0
mkdir defaults-1.0/_build defaults-1.0/_build/sub defaults-1.0/_inst
chmod a-w defaults-1.0
test -d defaults-1.0/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd defaults-1.0/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd defaults-1.0/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf defaults-1.0.tar.gz \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'dvi'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'check'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'installcheck'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make  dist-gzip am__post_remove_distdir='@:'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make  distdir-am
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >defaults-1.0.tar.gz
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
test -z "" || rm -f 
test . = "../.." || test -z "" || rm -f 
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/defaults-1.0/_build/sub'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
==============================================
defaults-1.0 archives ready for distribution: 
defaults-1.0.tar.gz
==============================================
+ result_ ok -D '' -r '' -- 'default [make distcheck]'
+ set +x
ok 4 - default [make distcheck]
PASS: t/dist-formats.tap 4 - default [make distcheck]
++ ls defaults-1.0.tar.gz
+ command_ok_ ''\''make dist'\'' only builds *.tar.gz by default' test defaults-1.0.tar.gz = defaults-1.0.tar.gz
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_=''\''make dist'\'' only builds *.tar.gz by default'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ test defaults-1.0.tar.gz = defaults-1.0.tar.gz
+ result_ ok -D '' -r '' -- ''\''make dist'\'' only builds *.tar.gz by default'
+ set +x
ok 5 - 'make dist' only builds *.tar.gz by default
PASS: t/dist-formats.tap 5 - 'make dist' only builds *.tar.gz by default
+ rm -rf defaults-1.0.tar.gz
+ for fmt in $all_compression_formats
+ can_compress defaults gzip
+ test 2 -eq 2
+ tarname=defaults
+ format=gzip
+ setup_vars_for_compression_format gzip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.gz
+ compressor=gzip
+ command_ok_ ''\''dist-gzip'\'' target always created' make -n dist-gzip
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-gzip'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-gzip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|defaults-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "defaults-1.0/$file"; then \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "defaults-1.0$dir" || exit 1; \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "defaults-1.0$dir" || exit 1; \
  else \
    test -f "defaults-1.0/$file" \
    || cp -p $d/$file "defaults-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >defaults-1.0.tar.gz
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-gzip'\'' target always created'
+ set +x
ok 6 - 'dist-gzip' target always created
PASS: t/dist-formats.tap 6 - 'dist-gzip' target always created
+ command_ok_if_have_compressor ''\''make dist-gzip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor gzip
+ case " $missing_compressors " in
+ :
+ command_ok_ ''\''make dist-gzip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=''\''make dist-gzip'\'' work by default'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
++ rm -rf '*defaults*'
++ make dist-gzip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >defaults-1.0.tar.gz
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
++ test -f defaults-1.0.tar.gz
++ ls -l defaults-1.0.tar.gz
-rw-r--r-- 1 dan user 51289 Jul  7 00:38 defaults-1.0.tar.gz
+++ echo defaults-1.0.tar.gz
++ test defaults-1.0.tar.gz = defaults-1.0.tar.gz
+ result_ ok -D '' -r '' -- ''\''make dist-gzip'\'' work by default'
+ set +x
ok 7 - 'make dist-gzip' work by default
PASS: t/dist-formats.tap 7 - 'make dist-gzip' work by default
+ unset suffix compressor format tarname
+ for fmt in $all_compression_formats
+ can_compress defaults lzip
+ test 2 -eq 2
+ tarname=defaults
+ format=lzip
+ setup_vars_for_compression_format lzip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.lz
+ compressor=lzip
+ command_ok_ ''\''dist-lzip'\'' target always created' make -n dist-lzip
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-lzip'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-lzip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|defaults-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "defaults-1.0/$file"; then \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "defaults-1.0$dir" || exit 1; \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "defaults-1.0$dir" || exit 1; \
  else \
    test -f "defaults-1.0/$file" \
    || cp -p $d/$file "defaults-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | lzip -c ${LZIP_OPT--9} >defaults-1.0.tar.lz
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-lzip'\'' target always created'
+ set +x
ok 8 - 'dist-lzip' target always created
PASS: t/dist-formats.tap 8 - 'dist-lzip' target always created
+ command_ok_if_have_compressor ''\''make dist-lzip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor lzip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''lzip'\'' not available' ''\''make dist-lzip'\'' work by default'
+ result_ ok -D SKIP -r ''\''lzip'\'' not available' ''\''make dist-lzip'\'' work by default'
+ set +x
ok 9 - 'make dist-lzip' work by default # SKIP 'lzip' not available
SKIP: t/dist-formats.tap 9 - 'make dist-lzip' work by default # SKIP 'lzip' not available
+ unset suffix compressor format tarname
+ for fmt in $all_compression_formats
+ can_compress defaults xz
+ test 2 -eq 2
+ tarname=defaults
+ format=xz
+ setup_vars_for_compression_format xz
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.xz
+ compressor=xz
+ command_ok_ ''\''dist-xz'\'' target always created' make -n dist-xz
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-xz'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-xz
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|defaults-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "defaults-1.0/$file"; then \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "defaults-1.0$dir" || exit 1; \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "defaults-1.0$dir" || exit 1; \
  else \
    test -f "defaults-1.0/$file" \
    || cp -p $d/$file "defaults-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >defaults-1.0.tar.xz
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-xz'\'' target always created'
+ set +x
ok 10 - 'dist-xz' target always created
PASS: t/dist-formats.tap 10 - 'dist-xz' target always created
+ command_ok_if_have_compressor ''\''make dist-xz'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor xz
+ case " $missing_compressors " in
+ :
+ command_ok_ ''\''make dist-xz'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=''\''make dist-xz'\'' work by default'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
++ rm -rf defaults-1.0.tar.gz
++ make dist-xz
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >defaults-1.0.tar.xz
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
++ test -f defaults-1.0.tar.xz
++ ls -l defaults-1.0.tar.xz
-rw-r--r-- 1 dan user 40800 Jul  7 00:38 defaults-1.0.tar.xz
+++ echo defaults-1.0.tar.xz
++ test defaults-1.0.tar.xz = defaults-1.0.tar.xz
+ result_ ok -D '' -r '' -- ''\''make dist-xz'\'' work by default'
+ set +x
ok 11 - 'make dist-xz' work by default
PASS: t/dist-formats.tap 11 - 'make dist-xz' work by default
+ unset suffix compressor format tarname
+ for fmt in $all_compression_formats
+ can_compress defaults bzip2
+ test 2 -eq 2
+ tarname=defaults
+ format=bzip2
+ setup_vars_for_compression_format bzip2
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.bz2
+ compressor=bzip2
+ command_ok_ ''\''dist-bzip2'\'' target always created' make -n dist-bzip2
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-bzip2'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-bzip2
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|defaults-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "defaults-1.0/$file"; then \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "defaults-1.0$dir" || exit 1; \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "defaults-1.0$dir" || exit 1; \
  else \
    test -f "defaults-1.0/$file" \
    || cp -p $d/$file "defaults-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >defaults-1.0.tar.bz2
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-bzip2'\'' target always created'
+ set +x
ok 12 - 'dist-bzip2' target always created
PASS: t/dist-formats.tap 12 - 'dist-bzip2' target always created
+ command_ok_if_have_compressor ''\''make dist-bzip2'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor bzip2
+ case " $missing_compressors " in
+ :
+ command_ok_ ''\''make dist-bzip2'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=''\''make dist-bzip2'\'' work by default'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
++ rm -rf defaults-1.0.tar.xz
++ make dist-bzip2
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
tardir=defaults-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >defaults-1.0.tar.bz2
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
++ test -f defaults-1.0.tar.bz2
++ ls -l defaults-1.0.tar.bz2
-rw-r--r-- 1 dan user 43246 Jul  7 00:38 defaults-1.0.tar.bz2
+++ echo defaults-1.0.tar.bz2
++ test defaults-1.0.tar.bz2 = defaults-1.0.tar.bz2
+ result_ ok -D '' -r '' -- ''\''make dist-bzip2'\'' work by default'
+ set +x
ok 13 - 'make dist-bzip2' work by default
PASS: t/dist-formats.tap 13 - 'make dist-bzip2' work by default
+ unset suffix compressor format tarname
+ for fmt in $all_compression_formats
+ can_compress defaults zip
+ test 2 -eq 2
+ tarname=defaults
+ format=zip
+ setup_vars_for_compression_format zip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=zip
+ compressor=zip
+ command_ok_ ''\''dist-zip'\'' target always created' make -n dist-zip
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-zip'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-zip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
test -d "defaults-1.0" || mkdir "defaults-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|defaults-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "defaults-1.0/$file"; then \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "defaults-1.0$dir" || exit 1; \
      find "defaults-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "defaults-1.0$dir" || exit 1; \
  else \
    test -f "defaults-1.0/$file" \
    || cp -p $d/$file "defaults-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "defaults-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "defaults-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/defaults'
rm -f defaults-1.0.zip
zip -rq defaults-1.0.zip defaults-1.0
if test -d "defaults-1.0"; then find "defaults-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "defaults-1.0" || { sleep 5 && rm -rf "defaults-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-zip'\'' target always created'
+ set +x
ok 14 - 'dist-zip' target always created
PASS: t/dist-formats.tap 14 - 'dist-zip' target always created
+ command_ok_if_have_compressor ''\''make dist-zip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor zip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''zip'\'' not available' ''\''make dist-zip'\'' work by default'
+ result_ ok -D SKIP -r ''\''zip'\'' not available' ''\''make dist-zip'\'' work by default'
+ set +x
ok 15 - 'make dist-zip' work by default # SKIP 'zip' not available
SKIP: t/dist-formats.tap 15 - 'make dist-zip' work by default # SKIP 'zip' not available
+ unset suffix compressor format tarname
+ unset fmt
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ start_subtest am-nogz-only am_opts=no-dist-gzip ac_opts=
+ name=am-nogz-only
+ shift
+ test -n am-nogz-only
+ test 2 -gt 0
+ eval am_opts=no-dist-gzip ac_opts=
++ am_opts=no-dist-gzip
++ ac_opts=
++ echo
++ tr , ' '
+ ac_opts=
++ echo no-dist-gzip
++ tr , ' '
+ am_opts=no-dist-gzip
+ mkdir am-nogz-only
+ cd am-nogz-only
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = no-dist-gzip'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ nogzip_automake_failure am 'Makefile\.am:1'
+ AUTOMAKE_fails -d 'no-dist-gzip (am) without other formats is an error'
+ AUTOMAKE_run -e 1 -d 'no-dist-gzip (am) without other formats is an error'
+ am__desc=
+ am__exp_rc=0
+ test 4 -gt 0
+ case $1 in
+ am__exp_rc=1
+ shift
+ shift
+ test 2 -gt 0
+ case $1 in
+ am__desc='no-dist-gzip (am) without other formats is an error'
+ shift
+ shift
+ test 0 -gt 0
+ am__got_rc=0
+ automake-1.16 --foreign -Werror -Wall
+ am__got_rc=1
+ cat stderr
Makefile.am:1: error: no-dist-gzip specified but no dist-* specified,
Makefile.am:1: at least one archive format must be enabled
+ cat stdout
+ test tap = none
+ test -z 'no-dist-gzip (am) without other formats is an error'
+ command_ok_ 'no-dist-gzip (am) without other formats is an error' test 1 -eq 1
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='no-dist-gzip (am) without other formats is an error'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ test 1 -eq 1
+ result_ ok -D '' -r '' -- 'no-dist-gzip (am) without other formats is an error'
+ set +x
ok 16 - no-dist-gzip (am) without other formats is an error
PASS: t/dist-formats.tap 16 - no-dist-gzip (am) without other formats is an error
+ command_ok_ 'no-dist-gzip (am) without other formats gives diagnostic' nogzip_stderr 'Makefile\.am:1'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='no-dist-gzip (am) without other formats gives diagnostic'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ nogzip_stderr 'Makefile\.am:1'
+ grep 'Makefile\.am:1:.*no-dist-gzip' stderr
Makefile.am:1: error: no-dist-gzip specified but no dist-* specified,
+ grep 'Makefile\.am:1:.* at least one archive format must be enabled' stderr
Makefile.am:1: at least one archive format must be enabled
+ result_ ok -D '' -r '' -- 'no-dist-gzip (am) without other formats gives diagnostic'
+ set +x
ok 17 - no-dist-gzip (am) without other formats gives diagnostic
PASS: t/dist-formats.tap 17 - no-dist-gzip (am) without other formats gives diagnostic
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ start_subtest ac-nogz-only am_opts= ac_opts=no-dist-gzip
+ name=ac-nogz-only
+ shift
+ test -n ac-nogz-only
+ test 2 -gt 0
+ eval am_opts= ac_opts=no-dist-gzip
++ am_opts=
++ ac_opts=no-dist-gzip
++ echo no-dist-gzip
++ tr , ' '
+ ac_opts=no-dist-gzip
++ echo
++ tr , ' '
+ am_opts=
+ mkdir ac-nogz-only
+ cd ac-nogz-only
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = '
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ nogzip_automake_failure ac 'configure\.ac:2'
+ AUTOMAKE_fails -d 'no-dist-gzip (ac) without other formats is an error'
+ AUTOMAKE_run -e 1 -d 'no-dist-gzip (ac) without other formats is an error'
+ am__desc=
+ am__exp_rc=0
+ test 4 -gt 0
+ case $1 in
+ am__exp_rc=1
+ shift
+ shift
+ test 2 -gt 0
+ case $1 in
+ am__desc='no-dist-gzip (ac) without other formats is an error'
+ shift
+ shift
+ test 0 -gt 0
+ am__got_rc=0
+ automake-1.16 --foreign -Werror -Wall
+ am__got_rc=1
+ cat stderr
configure.ac:2: error: no-dist-gzip specified but no dist-* specified,
configure.ac:2: at least one archive format must be enabled
+ cat stdout
+ test tap = none
+ test -z 'no-dist-gzip (ac) without other formats is an error'
+ command_ok_ 'no-dist-gzip (ac) without other formats is an error' test 1 -eq 1
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='no-dist-gzip (ac) without other formats is an error'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ test 1 -eq 1
+ result_ ok -D '' -r '' -- 'no-dist-gzip (ac) without other formats is an error'
+ set +x
ok 18 - no-dist-gzip (ac) without other formats is an error
PASS: t/dist-formats.tap 18 - no-dist-gzip (ac) without other formats is an error
+ command_ok_ 'no-dist-gzip (ac) without other formats gives diagnostic' nogzip_stderr 'configure\.ac:2'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='no-dist-gzip (ac) without other formats gives diagnostic'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ nogzip_stderr 'configure\.ac:2'
+ grep 'configure\.ac:2:.*no-dist-gzip' stderr
configure.ac:2: error: no-dist-gzip specified but no dist-* specified,
+ grep 'configure\.ac:2:.* at least one archive format must be enabled' stderr
configure.ac:2: at least one archive format must be enabled
+ result_ ok -D '' -r '' -- 'no-dist-gzip (ac) without other formats gives diagnostic'
+ set +x
ok 19 - no-dist-gzip (ac) without other formats gives diagnostic
PASS: t/dist-formats.tap 19 - no-dist-gzip (ac) without other formats gives diagnostic
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ nogzip in am and bzip2 in am
+ test 6,in,and,in = 6,in,and,in
+ case $2,$6 in
+ :
+ format=bzip2
+ where_dist_nogzip=am
+ where_dist_format=am
+ shift 6
+ am_opts=
+ ac_opts=
+ append_to_opt am dist-bzip2
+ var=am_opts
+ val=dist-bzip2
+ eval 'am_opts=${am_opts:+"$am_opts,"}$val'
++ am_opts=dist-bzip2
+ unset var val
+ append_to_opt am no-dist-gzip
+ var=am_opts
+ val=no-dist-gzip
+ eval 'am_opts=${am_opts:+"$am_opts,"}$val'
++ am_opts=dist-bzip2,no-dist-gzip
+ unset var val
+ setup_vars_for_compression_format bzip2
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.bz2
+ compressor=bzip2
+ desc=
+ test -n dist-bzip2,no-dist-gzip
+ desc=am=dist-bzip2,no-dist-gzip
+ test -n ''
+ start_subtest nogzip-bzip2 am_opts=dist-bzip2,no-dist-gzip ac_opts=
+ name=nogzip-bzip2
+ shift
+ test -n nogzip-bzip2
+ test 2 -gt 0
+ eval am_opts=dist-bzip2,no-dist-gzip ac_opts=
++ am_opts=dist-bzip2,no-dist-gzip
++ ac_opts=
++ echo
++ tr , ' '
+ ac_opts=
++ echo dist-bzip2,no-dist-gzip
++ tr , ' '
+ am_opts='dist-bzip2 no-dist-gzip'
+ mkdir nogzip-bzip2
+ cd nogzip-bzip2
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = dist-bzip2 no-dist-gzip'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [automake]'
+ set +x
ok 20 - am=dist-bzip2,no-dist-gzip [automake]
PASS: t/dist-formats.tap 20 - am=dist-bzip2,no-dist-gzip [automake]
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [autoconf]'
+ set +x
ok 21 - am=dist-bzip2,no-dist-gzip [autoconf]
PASS: t/dist-formats.tap 21 - am=dist-bzip2,no-dist-gzip [autoconf]
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [configure]'
+ set +x
ok 22 - am=dist-bzip2,no-dist-gzip [configure]
PASS: t/dist-formats.tap 22 - am=dist-bzip2,no-dist-gzip [configure]
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [ark-name]' make check-ark-name
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [ark-name]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-name
test nogzip-bzip2-1.0.tar.bz2 = nogzip-bzip2-1.0.tar.bz2
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [ark-name]'
+ set +x
ok 23 - am=dist-bzip2,no-dist-gzip [ark-name]
PASS: t/dist-formats.tap 23 - am=dist-bzip2,no-dist-gzip [ark-name]
+ command_ok_if_have_compressor 'am=dist-bzip2,no-dist-gzip [distcheck]' make distcheck
+ have_compressor bzip2
+ case " $missing_compressors " in
+ :
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [distcheck]' make distcheck
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [distcheck]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make distcheck
make  dist-bzip2 am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2'
if test -d "nogzip-bzip2-1.0"; then find "nogzip-bzip2-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-bzip2-1.0" || { sleep 5 && rm -rf "nogzip-bzip2-1.0"; }; else :; fi
test -d "nogzip-bzip2-1.0" || mkdir "nogzip-bzip2-1.0"
test -n "" \
|| find "nogzip-bzip2-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "nogzip-bzip2-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2'
tardir=nogzip-bzip2-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >nogzip-bzip2-1.0.tar.bz2
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2'
if test -d "nogzip-bzip2-1.0"; then find "nogzip-bzip2-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-bzip2-1.0" || { sleep 5 && rm -rf "nogzip-bzip2-1.0"; }; else :; fi
case 'nogzip-bzip2-1.0.tar.bz2' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc nogzip-bzip2-1.0.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc nogzip-bzip2-1.0.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc nogzip-bzip2-1.0.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc nogzip-bzip2-1.0.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c nogzip-bzip2-1.0.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc nogzip-bzip2-1.0.shar.gz | unshar ;;\
*.zip*) \
  unzip nogzip-bzip2-1.0.zip ;;\
esac
chmod -R a-w nogzip-bzip2-1.0
chmod u+w nogzip-bzip2-1.0
mkdir nogzip-bzip2-1.0/_build nogzip-bzip2-1.0/_build/sub nogzip-bzip2-1.0/_inst
chmod a-w nogzip-bzip2-1.0
test -d nogzip-bzip2-1.0/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd nogzip-bzip2-1.0/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd nogzip-bzip2-1.0/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf nogzip-bzip2-1.0.tar.bz2 \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'dvi'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'check'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'installcheck'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make  dist-bzip2 am__post_remove_distdir='@:'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make  distdir-am
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
if test -d "nogzip-bzip2-1.0"; then find "nogzip-bzip2-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-bzip2-1.0" || { sleep 5 && rm -rf "nogzip-bzip2-1.0"; }; else :; fi
test -d "nogzip-bzip2-1.0" || mkdir "nogzip-bzip2-1.0"
test -n "" \
|| find "nogzip-bzip2-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "nogzip-bzip2-1.0"
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
tardir=nogzip-bzip2-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >nogzip-bzip2-1.0.tar.bz2
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
if test -d "nogzip-bzip2-1.0"; then find "nogzip-bzip2-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-bzip2-1.0" || { sleep 5 && rm -rf "nogzip-bzip2-1.0"; }; else :; fi
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
test -z "" || rm -f 
test . = "../.." || test -z "" || rm -f 
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-bzip2/nogzip-bzip2-1.0/_build/sub'
if test -d "nogzip-bzip2-1.0"; then find "nogzip-bzip2-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-bzip2-1.0" || { sleep 5 && rm -rf "nogzip-bzip2-1.0"; }; else :; fi
==================================================
nogzip-bzip2-1.0 archives ready for distribution: 
nogzip-bzip2-1.0.tar.bz2
==================================================
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [distcheck]'
+ set +x
ok 24 - am=dist-bzip2,no-dist-gzip [distcheck]
PASS: t/dist-formats.tap 24 - am=dist-bzip2,no-dist-gzip [distcheck]
+ command_ok_if_have_compressor 'am=dist-bzip2,no-dist-gzip [ark-exists]' make check-ark-exists
+ have_compressor bzip2
+ case " $missing_compressors " in
+ :
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [ark-exists]' make check-ark-exists
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [ark-exists]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-exists
test -f nogzip-bzip2-1.0.tar.bz2
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [ark-exists]'
+ set +x
ok 25 - am=dist-bzip2,no-dist-gzip [ark-exists]
PASS: t/dist-formats.tap 25 - am=dist-bzip2,no-dist-gzip [ark-exists]
+ command_ok_ 'am=dist-bzip2,no-dist-gzip [no .tar.gz]' make check-no-tar-gz
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-bzip2,no-dist-gzip [no .tar.gz]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-no-tar-gz
test ! -f nogzip-bzip2-1.0.tar.gz
+ result_ ok -D '' -r '' -- 'am=dist-bzip2,no-dist-gzip [no .tar.gz]'
+ set +x
ok 26 - am=dist-bzip2,no-dist-gzip [no .tar.gz]
PASS: t/dist-formats.tap 26 - am=dist-bzip2,no-dist-gzip [no .tar.gz]
+ unset desc
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ nogzip in ac and xz in am
+ test 6,in,and,in = 6,in,and,in
+ case $2,$6 in
+ :
+ format=xz
+ where_dist_nogzip=ac
+ where_dist_format=am
+ shift 6
+ am_opts=
+ ac_opts=
+ append_to_opt am dist-xz
+ var=am_opts
+ val=dist-xz
+ eval 'am_opts=${am_opts:+"$am_opts,"}$val'
++ am_opts=dist-xz
+ unset var val
+ append_to_opt ac no-dist-gzip
+ var=ac_opts
+ val=no-dist-gzip
+ eval 'ac_opts=${ac_opts:+"$ac_opts,"}$val'
++ ac_opts=no-dist-gzip
+ unset var val
+ setup_vars_for_compression_format xz
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.xz
+ compressor=xz
+ desc=
+ test -n dist-xz
+ desc=am=dist-xz
+ test -n no-dist-gzip
+ desc='am=dist-xz ac=no-dist-gzip'
+ start_subtest nogzip-xz am_opts=dist-xz ac_opts=no-dist-gzip
+ name=nogzip-xz
+ shift
+ test -n nogzip-xz
+ test 2 -gt 0
+ eval am_opts=dist-xz ac_opts=no-dist-gzip
++ am_opts=dist-xz
++ ac_opts=no-dist-gzip
++ echo no-dist-gzip
++ tr , ' '
+ ac_opts=no-dist-gzip
++ echo dist-xz
++ tr , ' '
+ am_opts=dist-xz
+ mkdir nogzip-xz
+ cd nogzip-xz
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = dist-xz'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [automake]'
+ set +x
ok 27 - am=dist-xz ac=no-dist-gzip [automake]
PASS: t/dist-formats.tap 27 - am=dist-xz ac=no-dist-gzip [automake]
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [autoconf]'
+ set +x
ok 28 - am=dist-xz ac=no-dist-gzip [autoconf]
PASS: t/dist-formats.tap 28 - am=dist-xz ac=no-dist-gzip [autoconf]
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [configure]'
+ set +x
ok 29 - am=dist-xz ac=no-dist-gzip [configure]
PASS: t/dist-formats.tap 29 - am=dist-xz ac=no-dist-gzip [configure]
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [ark-name]' make check-ark-name
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [ark-name]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-name
test nogzip-xz-1.0.tar.xz = nogzip-xz-1.0.tar.xz
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [ark-name]'
+ set +x
ok 30 - am=dist-xz ac=no-dist-gzip [ark-name]
PASS: t/dist-formats.tap 30 - am=dist-xz ac=no-dist-gzip [ark-name]
+ command_ok_if_have_compressor 'am=dist-xz ac=no-dist-gzip [distcheck]' make distcheck
+ have_compressor xz
+ case " $missing_compressors " in
+ :
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [distcheck]' make distcheck
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [distcheck]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make distcheck
make  dist-xz am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz'
if test -d "nogzip-xz-1.0"; then find "nogzip-xz-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-xz-1.0" || { sleep 5 && rm -rf "nogzip-xz-1.0"; }; else :; fi
test -d "nogzip-xz-1.0" || mkdir "nogzip-xz-1.0"
test -n "" \
|| find "nogzip-xz-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "nogzip-xz-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz'
tardir=nogzip-xz-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >nogzip-xz-1.0.tar.xz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz'
if test -d "nogzip-xz-1.0"; then find "nogzip-xz-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-xz-1.0" || { sleep 5 && rm -rf "nogzip-xz-1.0"; }; else :; fi
case 'nogzip-xz-1.0.tar.xz' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc nogzip-xz-1.0.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc nogzip-xz-1.0.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc nogzip-xz-1.0.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc nogzip-xz-1.0.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c nogzip-xz-1.0.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc nogzip-xz-1.0.shar.gz | unshar ;;\
*.zip*) \
  unzip nogzip-xz-1.0.zip ;;\
esac
chmod -R a-w nogzip-xz-1.0
chmod u+w nogzip-xz-1.0
mkdir nogzip-xz-1.0/_build nogzip-xz-1.0/_build/sub nogzip-xz-1.0/_inst
chmod a-w nogzip-xz-1.0
test -d nogzip-xz-1.0/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd nogzip-xz-1.0/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd nogzip-xz-1.0/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf nogzip-xz-1.0.tar.xz \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'dvi'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'check'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'installcheck'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[2]: Nothing to be done for 'install-exec-am'.
make[2]: Nothing to be done for 'install-data-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Nothing to be done for 'uninstall'.
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make  dist-xz am__post_remove_distdir='@:'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make  distdir-am
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
if test -d "nogzip-xz-1.0"; then find "nogzip-xz-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-xz-1.0" || { sleep 5 && rm -rf "nogzip-xz-1.0"; }; else :; fi
test -d "nogzip-xz-1.0" || mkdir "nogzip-xz-1.0"
test -n "" \
|| find "nogzip-xz-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "nogzip-xz-1.0"
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
tardir=nogzip-xz-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >nogzip-xz-1.0.tar.xz
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
if test -d "nogzip-xz-1.0"; then find "nogzip-xz-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-xz-1.0" || { sleep 5 && rm -rf "nogzip-xz-1.0"; }; else :; fi
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
test -z "" || rm -f 
test . = "../.." || test -z "" || rm -f 
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/nogzip-xz/nogzip-xz-1.0/_build/sub'
if test -d "nogzip-xz-1.0"; then find "nogzip-xz-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "nogzip-xz-1.0" || { sleep 5 && rm -rf "nogzip-xz-1.0"; }; else :; fi
===============================================
nogzip-xz-1.0 archives ready for distribution: 
nogzip-xz-1.0.tar.xz
===============================================
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [distcheck]'
+ set +x
ok 31 - am=dist-xz ac=no-dist-gzip [distcheck]
PASS: t/dist-formats.tap 31 - am=dist-xz ac=no-dist-gzip [distcheck]
+ command_ok_if_have_compressor 'am=dist-xz ac=no-dist-gzip [ark-exists]' make check-ark-exists
+ have_compressor xz
+ case " $missing_compressors " in
+ :
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [ark-exists]' make check-ark-exists
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [ark-exists]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-exists
test -f nogzip-xz-1.0.tar.xz
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [ark-exists]'
+ set +x
ok 32 - am=dist-xz ac=no-dist-gzip [ark-exists]
PASS: t/dist-formats.tap 32 - am=dist-xz ac=no-dist-gzip [ark-exists]
+ command_ok_ 'am=dist-xz ac=no-dist-gzip [no .tar.gz]' make check-no-tar-gz
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=dist-xz ac=no-dist-gzip [no .tar.gz]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-no-tar-gz
test ! -f nogzip-xz-1.0.tar.gz
+ result_ ok -D '' -r '' -- 'am=dist-xz ac=no-dist-gzip [no .tar.gz]'
+ set +x
ok 33 - am=dist-xz ac=no-dist-gzip [no .tar.gz]
PASS: t/dist-formats.tap 33 - am=dist-xz ac=no-dist-gzip [no .tar.gz]
+ unset desc
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ nogzip in am and lzip in ac
+ test 6,in,and,in = 6,in,and,in
+ case $2,$6 in
+ :
+ format=lzip
+ where_dist_nogzip=am
+ where_dist_format=ac
+ shift 6
+ am_opts=
+ ac_opts=
+ append_to_opt ac dist-lzip
+ var=ac_opts
+ val=dist-lzip
+ eval 'ac_opts=${ac_opts:+"$ac_opts,"}$val'
++ ac_opts=dist-lzip
+ unset var val
+ append_to_opt am no-dist-gzip
+ var=am_opts
+ val=no-dist-gzip
+ eval 'am_opts=${am_opts:+"$am_opts,"}$val'
++ am_opts=no-dist-gzip
+ unset var val
+ setup_vars_for_compression_format lzip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.lz
+ compressor=lzip
+ desc=
+ test -n no-dist-gzip
+ desc=am=no-dist-gzip
+ test -n dist-lzip
+ desc='am=no-dist-gzip ac=dist-lzip'
+ start_subtest nogzip-lzip am_opts=no-dist-gzip ac_opts=dist-lzip
+ name=nogzip-lzip
+ shift
+ test -n nogzip-lzip
+ test 2 -gt 0
+ eval am_opts=no-dist-gzip ac_opts=dist-lzip
++ am_opts=no-dist-gzip
++ ac_opts=dist-lzip
++ echo dist-lzip
++ tr , ' '
+ ac_opts=dist-lzip
++ echo no-dist-gzip
++ tr , ' '
+ am_opts=no-dist-gzip
+ mkdir nogzip-lzip
+ cd nogzip-lzip
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = no-dist-gzip'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ command_ok_ 'am=no-dist-gzip ac=dist-lzip [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='am=no-dist-gzip ac=dist-lzip [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'am=no-dist-gzip ac=dist-lzip [automake]'
+ set +x
ok 34 - am=no-dist-gzip ac=dist-lzip [automake]
PASS: t/dist-formats.tap 34 - am=no-dist-gzip ac=dist-lzip [automake]
+ command_ok_ 'am=no-dist-gzip ac=dist-lzip [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=no-dist-gzip ac=dist-lzip [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'am=no-dist-gzip ac=dist-lzip [autoconf]'
+ set +x
ok 35 - am=no-dist-gzip ac=dist-lzip [autoconf]
PASS: t/dist-formats.tap 35 - am=no-dist-gzip ac=dist-lzip [autoconf]
+ command_ok_ 'am=no-dist-gzip ac=dist-lzip [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='am=no-dist-gzip ac=dist-lzip [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'am=no-dist-gzip ac=dist-lzip [configure]'
+ set +x
ok 36 - am=no-dist-gzip ac=dist-lzip [configure]
PASS: t/dist-formats.tap 36 - am=no-dist-gzip ac=dist-lzip [configure]
+ command_ok_ 'am=no-dist-gzip ac=dist-lzip [ark-name]' make check-ark-name
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=no-dist-gzip ac=dist-lzip [ark-name]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-name
test nogzip-lzip-1.0.tar.lz = nogzip-lzip-1.0.tar.lz
+ result_ ok -D '' -r '' -- 'am=no-dist-gzip ac=dist-lzip [ark-name]'
+ set +x
ok 37 - am=no-dist-gzip ac=dist-lzip [ark-name]
PASS: t/dist-formats.tap 37 - am=no-dist-gzip ac=dist-lzip [ark-name]
+ command_ok_if_have_compressor 'am=no-dist-gzip ac=dist-lzip [distcheck]' make distcheck
+ have_compressor lzip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''lzip'\'' not available' 'am=no-dist-gzip ac=dist-lzip [distcheck]'
+ result_ ok -D SKIP -r ''\''lzip'\'' not available' 'am=no-dist-gzip ac=dist-lzip [distcheck]'
+ set +x
ok 38 - am=no-dist-gzip ac=dist-lzip [distcheck] # SKIP 'lzip' not available
SKIP: t/dist-formats.tap 38 - am=no-dist-gzip ac=dist-lzip [distcheck] # SKIP 'lzip' not available
+ command_ok_if_have_compressor 'am=no-dist-gzip ac=dist-lzip [ark-exists]' make check-ark-exists
+ have_compressor lzip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''lzip'\'' not available' 'am=no-dist-gzip ac=dist-lzip [ark-exists]'
+ result_ ok -D SKIP -r ''\''lzip'\'' not available' 'am=no-dist-gzip ac=dist-lzip [ark-exists]'
+ set +x
ok 39 - am=no-dist-gzip ac=dist-lzip [ark-exists] # SKIP 'lzip' not available
SKIP: t/dist-formats.tap 39 - am=no-dist-gzip ac=dist-lzip [ark-exists] # SKIP 'lzip' not available
+ command_ok_ 'am=no-dist-gzip ac=dist-lzip [no .tar.gz]' make check-no-tar-gz
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='am=no-dist-gzip ac=dist-lzip [no .tar.gz]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-no-tar-gz
test ! -f nogzip-lzip-1.0.tar.gz
+ result_ ok -D '' -r '' -- 'am=no-dist-gzip ac=dist-lzip [no .tar.gz]'
+ set +x
ok 40 - am=no-dist-gzip ac=dist-lzip [no .tar.gz]
PASS: t/dist-formats.tap 40 - am=no-dist-gzip ac=dist-lzip [no .tar.gz]
+ unset desc
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ nogzip in ac and zip in ac
+ test 6,in,and,in = 6,in,and,in
+ case $2,$6 in
+ :
+ format=zip
+ where_dist_nogzip=ac
+ where_dist_format=ac
+ shift 6
+ am_opts=
+ ac_opts=
+ append_to_opt ac dist-zip
+ var=ac_opts
+ val=dist-zip
+ eval 'ac_opts=${ac_opts:+"$ac_opts,"}$val'
++ ac_opts=dist-zip
+ unset var val
+ append_to_opt ac no-dist-gzip
+ var=ac_opts
+ val=no-dist-gzip
+ eval 'ac_opts=${ac_opts:+"$ac_opts,"}$val'
++ ac_opts=dist-zip,no-dist-gzip
+ unset var val
+ setup_vars_for_compression_format zip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=zip
+ compressor=zip
+ desc=
+ test -n ''
+ test -n dist-zip,no-dist-gzip
+ desc=ac=dist-zip,no-dist-gzip
+ start_subtest nogzip-zip am_opts= ac_opts=dist-zip,no-dist-gzip
+ name=nogzip-zip
+ shift
+ test -n nogzip-zip
+ test 2 -gt 0
+ eval am_opts= ac_opts=dist-zip,no-dist-gzip
++ am_opts=
++ ac_opts=dist-zip,no-dist-gzip
++ echo dist-zip,no-dist-gzip
++ tr , ' '
+ ac_opts='dist-zip no-dist-gzip'
++ echo
++ tr , ' '
+ am_opts=
+ mkdir nogzip-zip
+ cd nogzip-zip
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = '
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ command_ok_ 'ac=dist-zip,no-dist-gzip [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='ac=dist-zip,no-dist-gzip [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'ac=dist-zip,no-dist-gzip [automake]'
+ set +x
ok 41 - ac=dist-zip,no-dist-gzip [automake]
PASS: t/dist-formats.tap 41 - ac=dist-zip,no-dist-gzip [automake]
+ command_ok_ 'ac=dist-zip,no-dist-gzip [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='ac=dist-zip,no-dist-gzip [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'ac=dist-zip,no-dist-gzip [autoconf]'
+ set +x
ok 42 - ac=dist-zip,no-dist-gzip [autoconf]
PASS: t/dist-formats.tap 42 - ac=dist-zip,no-dist-gzip [autoconf]
+ command_ok_ 'ac=dist-zip,no-dist-gzip [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='ac=dist-zip,no-dist-gzip [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'ac=dist-zip,no-dist-gzip [configure]'
+ set +x
ok 43 - ac=dist-zip,no-dist-gzip [configure]
PASS: t/dist-formats.tap 43 - ac=dist-zip,no-dist-gzip [configure]
+ command_ok_ 'ac=dist-zip,no-dist-gzip [ark-name]' make check-ark-name
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='ac=dist-zip,no-dist-gzip [ark-name]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-ark-name
test nogzip-zip-1.0.zip = nogzip-zip-1.0.zip
+ result_ ok -D '' -r '' -- 'ac=dist-zip,no-dist-gzip [ark-name]'
+ set +x
ok 44 - ac=dist-zip,no-dist-gzip [ark-name]
PASS: t/dist-formats.tap 44 - ac=dist-zip,no-dist-gzip [ark-name]
+ command_ok_if_have_compressor 'ac=dist-zip,no-dist-gzip [distcheck]' make distcheck
+ have_compressor zip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''zip'\'' not available' 'ac=dist-zip,no-dist-gzip [distcheck]'
+ result_ ok -D SKIP -r ''\''zip'\'' not available' 'ac=dist-zip,no-dist-gzip [distcheck]'
+ set +x
ok 45 - ac=dist-zip,no-dist-gzip [distcheck] # SKIP 'zip' not available
SKIP: t/dist-formats.tap 45 - ac=dist-zip,no-dist-gzip [distcheck] # SKIP 'zip' not available
+ command_ok_if_have_compressor 'ac=dist-zip,no-dist-gzip [ark-exists]' make check-ark-exists
+ have_compressor zip
+ case " $missing_compressors " in
+ false
+ skip_ -r ''\''zip'\'' not available' 'ac=dist-zip,no-dist-gzip [ark-exists]'
+ result_ ok -D SKIP -r ''\''zip'\'' not available' 'ac=dist-zip,no-dist-gzip [ark-exists]'
+ set +x
ok 46 - ac=dist-zip,no-dist-gzip [ark-exists] # SKIP 'zip' not available
SKIP: t/dist-formats.tap 46 - ac=dist-zip,no-dist-gzip [ark-exists] # SKIP 'zip' not available
+ command_ok_ 'ac=dist-zip,no-dist-gzip [no .tar.gz]' make check-no-tar-gz
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='ac=dist-zip,no-dist-gzip [no .tar.gz]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make check-no-tar-gz
test ! -f nogzip-zip-1.0.tar.gz
+ result_ ok -D '' -r '' -- 'ac=dist-zip,no-dist-gzip [no .tar.gz]'
+ set +x
ok 47 - ac=dist-zip,no-dist-gzip [no .tar.gz]
PASS: t/dist-formats.tap 47 - ac=dist-zip,no-dist-gzip [no .tar.gz]
+ unset desc
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ start_subtest dist-gzip-persistence am_opts=no-dist-gzip,dist-xz
+ name=dist-gzip-persistence
+ shift
+ test -n dist-gzip-persistence
+ test 1 -gt 0
+ eval am_opts=no-dist-gzip,dist-xz
++ am_opts=no-dist-gzip,dist-xz
++ echo
++ tr , ' '
+ ac_opts=
++ echo no-dist-gzip,dist-xz
++ tr , ' '
+ am_opts='no-dist-gzip dist-xz'
+ mkdir dist-gzip-persistence
+ cd dist-gzip-persistence
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = no-dist-gzip dist-xz'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ command_ok_ 'dist-gzip persistence [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='dist-gzip persistence [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'dist-gzip persistence [automake]'
+ set +x
ok 48 - dist-gzip persistence [automake]
PASS: t/dist-formats.tap 48 - dist-gzip persistence [automake]
+ command_ok_ 'dist-gzip persistence [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='dist-gzip persistence [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'dist-gzip persistence [autoconf]'
+ set +x
ok 49 - dist-gzip persistence [autoconf]
PASS: t/dist-formats.tap 49 - dist-gzip persistence [autoconf]
+ command_ok_ 'dist-gzip persistence [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='dist-gzip persistence [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'dist-gzip persistence [configure]'
+ set +x
ok 50 - dist-gzip persistence [configure]
PASS: t/dist-formats.tap 50 - dist-gzip persistence [configure]
+ can_compress dist-gzip-persistence gzip
+ test 2 -eq 2
+ tarname=dist-gzip-persistence
+ format=gzip
+ setup_vars_for_compression_format gzip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.gz
+ compressor=gzip
+ command_ok_ ''\''dist-gzip'\'' target always created' make -n dist-gzip
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_=''\''dist-gzip'\'' target always created'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -n dist-gzip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence'
if test -d "dist-gzip-persistence-1.0"; then find "dist-gzip-persistence-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-gzip-persistence-1.0" || { sleep 5 && rm -rf "dist-gzip-persistence-1.0"; }; else :; fi
test -d "dist-gzip-persistence-1.0" || mkdir "dist-gzip-persistence-1.0"
srcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
topsrcdirstrip=`echo "." | sed 's/[].[^$\\*]/\\\\&/g'`; \
list='./Makefile.am ./configure ./configure.ac  ./aclocal.m4 ./Makefile.in install-sh missing   '; \
  dist_files=`for file in $list; do echo $file; done | \
  sed -e "s|^$srcdirstrip/||;t" \
      -e "s|^$topsrcdirstrip/|./|;t"`; \
case $dist_files in \
  */*) /builds/dan/bootstrapinstall/bin/mkdir -p `echo "$dist_files" | \
		   sed '/\//!d;s|^|dist-gzip-persistence-1.0/|;s,/[^/]*$,,' | \
		   sort -u` ;; \
esac; \
for file in $dist_files; do \
  if test -f $file || test -d $file; then d=.; else d=.; fi; \
  if test -d $d/$file; then \
    dir=`echo "/$file" | sed -e 's,/[^/]*$,,'`; \
    if test -d "dist-gzip-persistence-1.0/$file"; then \
      find "dist-gzip-persistence-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    if test -d ./$file && test $d != .; then \
      cp -fpR ./$file "dist-gzip-persistence-1.0$dir" || exit 1; \
      find "dist-gzip-persistence-1.0/$file" -type d ! -perm -700 -exec chmod u+rwx {} \;; \
    fi; \
    cp -fpR $d/$file "dist-gzip-persistence-1.0$dir" || exit 1; \
  else \
    test -f "dist-gzip-persistence-1.0/$file" \
    || cp -p $d/$file "dist-gzip-persistence-1.0/$file" \
    || exit 1; \
  fi; \
done
test -n "" \
|| find "dist-gzip-persistence-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "dist-gzip-persistence-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence'
tardir=dist-gzip-persistence-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >dist-gzip-persistence-1.0.tar.gz
if test -d "dist-gzip-persistence-1.0"; then find "dist-gzip-persistence-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-gzip-persistence-1.0" || { sleep 5 && rm -rf "dist-gzip-persistence-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- ''\''dist-gzip'\'' target always created'
+ set +x
ok 51 - 'dist-gzip' target always created
PASS: t/dist-formats.tap 51 - 'dist-gzip' target always created
+ command_ok_if_have_compressor ''\''make dist-gzip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ have_compressor gzip
+ case " $missing_compressors " in
+ :
+ command_ok_ ''\''make dist-gzip'\'' work by default' eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=''\''make dist-gzip'\'' work by default'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ eval '
      rm -rf *$tarname* \
        && $MAKE dist-$format \
        && test -f $tarname-1.0.$suffix \
        && ls -l *$tarname* \
        && test "$(echo *$tarname*)" = $tarname-1.0.$suffix'
++ rm -rf '*dist-gzip-persistence*'
++ make dist-gzip
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence'
if test -d "dist-gzip-persistence-1.0"; then find "dist-gzip-persistence-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-gzip-persistence-1.0" || { sleep 5 && rm -rf "dist-gzip-persistence-1.0"; }; else :; fi
test -d "dist-gzip-persistence-1.0" || mkdir "dist-gzip-persistence-1.0"
test -n "" \
|| find "dist-gzip-persistence-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "dist-gzip-persistence-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/dist-gzip-persistence'
tardir=dist-gzip-persistence-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >dist-gzip-persistence-1.0.tar.gz
if test -d "dist-gzip-persistence-1.0"; then find "dist-gzip-persistence-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-gzip-persistence-1.0" || { sleep 5 && rm -rf "dist-gzip-persistence-1.0"; }; else :; fi
++ test -f dist-gzip-persistence-1.0.tar.gz
++ ls -l dist-gzip-persistence-1.0.tar.gz
-rw-r--r-- 1 dan user 51318 Jul  7 00:39 dist-gzip-persistence-1.0.tar.gz
+++ echo dist-gzip-persistence-1.0.tar.gz
++ test dist-gzip-persistence-1.0.tar.gz = dist-gzip-persistence-1.0.tar.gz
+ result_ ok -D '' -r '' -- ''\''make dist-gzip'\'' work by default'
+ set +x
ok 52 - 'make dist-gzip' work by default
PASS: t/dist-formats.tap 52 - 'make dist-gzip' work by default
+ unset suffix compressor format tarname
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ start_subtest parallel-compression ac_opts=dist-bzip2 am_opts=dist-xz
+ name=parallel-compression
+ shift
+ test -n parallel-compression
+ test 2 -gt 0
+ eval ac_opts=dist-bzip2 am_opts=dist-xz
++ ac_opts=dist-bzip2
++ am_opts=dist-xz
++ echo dist-bzip2
++ tr , ' '
+ ac_opts=dist-bzip2
++ echo dist-xz
++ tr , ' '
+ am_opts=dist-xz
+ mkdir parallel-compression
+ cd parallel-compression
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = dist-xz'
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ desc=gzip+bzip2+xz
+ tarname=parallel-compression-1.0
+ command_ok_ 'gzip+bzip2+xz [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='gzip+bzip2+xz [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [automake]'
+ set +x
ok 53 - gzip+bzip2+xz [automake]
PASS: t/dist-formats.tap 53 - gzip+bzip2+xz [automake]
+ have_compressor xz
+ case " $missing_compressors " in
+ :
+ have_compressor xz
+ case " $missing_compressors " in
+ :
+ have_compressor bzip2
+ case " $missing_compressors " in
+ :
+ skip_reason=
+ test 'make -j4' = false
+ test -n ''
+ command_ok_ 'gzip+bzip2+xz [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='gzip+bzip2+xz [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [autoconf]'
+ set +x
ok 54 - gzip+bzip2+xz [autoconf]
PASS: t/dist-formats.tap 54 - gzip+bzip2+xz [autoconf]
+ command_ok_ 'gzip+bzip2+xz [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='gzip+bzip2+xz [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [configure]'
+ set +x
ok 55 - gzip+bzip2+xz [configure]
PASS: t/dist-formats.tap 55 - gzip+bzip2+xz [configure]
+ command_ok_ 'gzip+bzip2+xz [make -j4 dist-all]' make -j4 dist
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='gzip+bzip2+xz [make -j4 dist-all]'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -j4 dist
make  dist-xz dist-bzip2 dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/parallel-compression'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/parallel-compression'
if test -d "parallel-compression-1.0"; then find "parallel-compression-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "parallel-compression-1.0" || { sleep 5 && rm -rf "parallel-compression-1.0"; }; else :; fi
test -d "parallel-compression-1.0" || mkdir "parallel-compression-1.0"
test -n "" \
|| find "parallel-compression-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/parallel-compression/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "parallel-compression-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/parallel-compression'
tardir=parallel-compression-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >parallel-compression-1.0.tar.xz
tardir=parallel-compression-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >parallel-compression-1.0.tar.bz2
tardir=parallel-compression-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >parallel-compression-1.0.tar.gz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/parallel-compression'
if test -d "parallel-compression-1.0"; then find "parallel-compression-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "parallel-compression-1.0" || { sleep 5 && rm -rf "parallel-compression-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [make -j4 dist-all]'
+ set +x
ok 56 - gzip+bzip2+xz [make -j4 dist-all]
PASS: t/dist-formats.tap 56 - gzip+bzip2+xz [make -j4 dist-all]
+ ls -l
total 376
-rw-r--r-- 1 dan user  18029 Jul  7 00:39 Makefile
-rw-r--r-- 1 dan user     27 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16828 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
drwxr-xr-x 2 dan user     51 Jul  7 00:39 autom4te.cache
-rw-r--r-- 1 dan user   5607 Jul  7 00:39 config.log
-rwxr-xr-x 1 dan user  25910 Jul  7 00:39 config.status
-rwxr-xr-x 1 dan user 104244 Jul  7 00:39 configure
-rw-r--r-- 1 dan user    108 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
-rw-r--r-- 1 dan user  43205 Jul  7 00:39 parallel-compression-1.0.tar.bz2
-rw-r--r-- 1 dan user  51331 Jul  7 00:39 parallel-compression-1.0.tar.gz
-rw-r--r-- 1 dan user  40860 Jul  7 00:39 parallel-compression-1.0.tar.xz
+ command_ok_ 'gzip+bzip2+xz [check .tar.gz tarball]' check_tarball gzip
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='gzip+bzip2+xz [check .tar.gz tarball]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ check_tarball gzip
+ format=gzip
+ setup_vars_for_compression_format gzip
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.gz
+ compressor=gzip
+ tarball=parallel-compression-1.0.tar.gz
+ test -f parallel-compression-1.0.tar.gz
+ mkdir check-gzip
+ cp parallel-compression-1.0.tar.gz check-gzip
+ cd check-gzip
+ gzip -d parallel-compression-1.0.tar.gz
+ tar xvf parallel-compression-1.0.tar
parallel-compression-1.0/
parallel-compression-1.0/Makefile.am
parallel-compression-1.0/configure
parallel-compression-1.0/configure.ac
parallel-compression-1.0/aclocal.m4
parallel-compression-1.0/Makefile.in
parallel-compression-1.0/install-sh
parallel-compression-1.0/missing
+ diff ../Makefile.in parallel-compression-1.0/Makefile.in
+ cd ..
+ rm -rf check-gzip
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [check .tar.gz tarball]'
+ set +x
ok 57 - gzip+bzip2+xz [check .tar.gz tarball]
PASS: t/dist-formats.tap 57 - gzip+bzip2+xz [check .tar.gz tarball]
+ command_ok_ 'gzip+bzip2+xz [check .tar.bz2 tarball]' check_tarball bzip2
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='gzip+bzip2+xz [check .tar.bz2 tarball]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ check_tarball bzip2
+ format=bzip2
+ setup_vars_for_compression_format bzip2
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.bz2
+ compressor=bzip2
+ tarball=parallel-compression-1.0.tar.bz2
+ test -f parallel-compression-1.0.tar.bz2
+ mkdir check-bzip2
+ cp parallel-compression-1.0.tar.bz2 check-bzip2
+ cd check-bzip2
+ bzip2 -d parallel-compression-1.0.tar.bz2
+ tar xvf parallel-compression-1.0.tar
parallel-compression-1.0/
parallel-compression-1.0/Makefile.am
parallel-compression-1.0/configure
parallel-compression-1.0/configure.ac
parallel-compression-1.0/aclocal.m4
parallel-compression-1.0/Makefile.in
parallel-compression-1.0/install-sh
parallel-compression-1.0/missing
+ diff ../Makefile.in parallel-compression-1.0/Makefile.in
+ cd ..
+ rm -rf check-bzip2
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [check .tar.bz2 tarball]'
+ set +x
ok 58 - gzip+bzip2+xz [check .tar.bz2 tarball]
PASS: t/dist-formats.tap 58 - gzip+bzip2+xz [check .tar.bz2 tarball]
+ command_ok_ 'gzip+bzip2+xz [check .tar.xz tarball]' check_tarball xz
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='gzip+bzip2+xz [check .tar.xz tarball]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ check_tarball xz
+ format=xz
+ setup_vars_for_compression_format xz
+ suffix=NONE
+ compressor=NONE
+ case $1 in
+ suffix=tar.xz
+ compressor=xz
+ tarball=parallel-compression-1.0.tar.xz
+ test -f parallel-compression-1.0.tar.xz
+ mkdir check-xz
+ cp parallel-compression-1.0.tar.xz check-xz
+ cd check-xz
+ xz -d parallel-compression-1.0.tar.xz
+ tar xvf parallel-compression-1.0.tar
parallel-compression-1.0/
parallel-compression-1.0/Makefile.am
parallel-compression-1.0/configure
parallel-compression-1.0/configure.ac
parallel-compression-1.0/aclocal.m4
parallel-compression-1.0/Makefile.in
parallel-compression-1.0/install-sh
parallel-compression-1.0/missing
+ diff ../Makefile.in parallel-compression-1.0/Makefile.in
+ cd ..
+ rm -rf check-xz
+ result_ ok -D '' -r '' -- 'gzip+bzip2+xz [check .tar.xz tarball]'
+ set +x
ok 59 - gzip+bzip2+xz [check .tar.xz tarball]
PASS: t/dist-formats.tap 59 - gzip+bzip2+xz [check .tar.xz tarball]
+ unset tarname desc skip_reason
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ start_subtest all-together
+ name=all-together
+ shift
+ test -n all-together
+ test 0 -gt 0
++ echo
++ tr , ' '
+ ac_opts=
++ echo
++ tr , ' '
+ am_opts=
+ mkdir all-together
+ cd all-together
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ echo 'AUTOMAKE_OPTIONS = '
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/aclocal.m4 /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/missing /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/install-sh .
+ desc='all compressors together'
+ tarname=all-together-1.0
+ echo 'AM_INIT_AUTOMAKE(['
+ echo 'AUTOMAKE_OPTIONS ='
+ flip=:
+ for fmt in $all_compression_formats
+ test gzip = gzip
+ continue
+ for fmt in $all_compression_formats
+ test lzip = gzip
+ :
+ echo '  dist-lzip'
+ flip=false
+ for fmt in $all_compression_formats
+ test xz = gzip
+ false
+ echo 'AUTOMAKE_OPTIONS += dist-xz'
+ flip=:
+ for fmt in $all_compression_formats
+ test bzip2 = gzip
+ :
+ echo '  dist-bzip2'
+ flip=false
+ for fmt in $all_compression_formats
+ test zip = gzip
+ false
+ echo 'AUTOMAKE_OPTIONS += dist-zip'
+ flip=:
+ unset flip fmt
+ echo '])'
+ sed 's/AM_INIT_AUTOMAKE.*/m4_include([am-init.m4])/' configure.ac
+ mv -f t configure.ac
+ cat Makefile.am
AUTOMAKE_OPTIONS =
AUTOMAKE_OPTIONS += dist-xz
AUTOMAKE_OPTIONS += dist-zip
+ cat configure.ac
AC_INIT([all-together], [1.0])
m4_include([am-init.m4])
AC_CONFIG_FILES([Makefile])
AC_OUTPUT
+ cat am-init.m4
AM_INIT_AUTOMAKE([
  dist-lzip
  dist-bzip2
])
+ command_ok_ 'all compressors together [aclocal]' aclocal-1.16 -Werror --force
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='all compressors together [aclocal]'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ aclocal-1.16 -Werror --force
+ result_ ok -D '' -r '' -- 'all compressors together [aclocal]'
+ set +x
ok 60 - all compressors together [aclocal]
PASS: t/dist-formats.tap 60 - all compressors together [aclocal]
+ command_ok_ 'all compressors together [automake]' automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='all compressors together [automake]'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- 'all compressors together [automake]'
+ set +x
ok 61 - all compressors together [automake]
PASS: t/dist-formats.tap 61 - all compressors together [automake]
+ command_ok_ 'all compressors together [autoconf]' autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='all compressors together [autoconf]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- 'all compressors together [autoconf]'
+ set +x
ok 62 - all compressors together [autoconf]
PASS: t/dist-formats.tap 62 - all compressors together [autoconf]
+ command_ok_ 'all compressors together [configure]' ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_='all compressors together [configure]'
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ result_ ok -D '' -r '' -- 'all compressors together [configure]'
+ set +x
ok 63 - all compressors together [configure]
PASS: t/dist-formats.tap 63 - all compressors together [configure]
+ have_all_compressors
+ test -z 'lzip zip '
+ skip_ -r 'not all compressors available' 'all compressors together [make distcheck, real]'
+ result_ ok -D SKIP -r 'not all compressors available' 'all compressors together [make distcheck, real]'
+ set +x
ok 64 - all compressors together [make distcheck, real] # SKIP not all compressors available
SKIP: t/dist-formats.tap 64 - all compressors together [make distcheck, real] # SKIP not all compressors available
+ mkdir bin
+ cd bin
+ cat
+ cat
+ chmod a+x check-distdir grep-distdir-error
+ for prog in tar $all_compressors
+ case $prog in
+ cp check-distdir tar
+ for prog in tar $all_compressors
+ case $prog in
+ cp grep-distdir-error gzip
+ for prog in tar $all_compressors
+ case $prog in
+ cp grep-distdir-error lzip
+ for prog in tar $all_compressors
+ case $prog in
+ cp grep-distdir-error xz
+ for prog in tar $all_compressors
+ case $prog in
+ cp grep-distdir-error bzip2
+ for prog in tar $all_compressors
+ case $prog in
+ cp check-distdir zip
+ unset prog
+ ls -l
total 32
-rwxr-xr-x 1 dan user  42 Jul  7 00:40 bzip2
-rwxr-xr-x 1 dan user 139 Jul  7 00:40 check-distdir
-rwxr-xr-x 1 dan user  42 Jul  7 00:40 grep-distdir-error
-rwxr-xr-x 1 dan user  42 Jul  7 00:40 gzip
-rwxr-xr-x 1 dan user  42 Jul  7 00:40 lzip
-rwxr-xr-x 1 dan user 139 Jul  7 00:40 tar
-rwxr-xr-x 1 dan user  42 Jul  7 00:40 xz
-rwxr-xr-x 1 dan user 139 Jul  7 00:40 zip
+ cd ..
+ oPATH=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
+ PATH=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
+ export PATH
+ command_ok_ 'all compressors together ['\''make dist-all'\'', stubbed]' make dist-all
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='all compressors together ['\''make dist-all'\'', stubbed]'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make dist-all
make  dist-lzip dist-xz dist-bzip2 dist-gzip dist-zip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
if test -d "all-together-1.0"; then find "all-together-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "all-together-1.0" || { sleep 5 && rm -rf "all-together-1.0"; }; else :; fi
test -d "all-together-1.0" || mkdir "all-together-1.0"
test -n "" \
|| find "all-together-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "all-together-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | lzip -c ${LZIP_OPT--9} >all-together-1.0.tar.lz
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >all-together-1.0.tar.xz
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >all-together-1.0.tar.bz2
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >all-together-1.0.tar.gz
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
rm -f all-together-1.0.zip
zip -rq all-together-1.0.zip all-together-1.0
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
if test -d "all-together-1.0"; then find "all-together-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "all-together-1.0" || { sleep 5 && rm -rf "all-together-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- 'all compressors together ['\''make dist-all'\'', stubbed]'
+ set +x
ok 65 - all compressors together ['make dist-all', stubbed]
PASS: t/dist-formats.tap 65 - all compressors together ['make dist-all', stubbed]
+ subdesc='all compressors together ['\''make dist -j4'\'', stubbed]'
+ test 'make -j4' = false
+ command_ok_ 'all compressors together ['\''make dist -j4'\'', stubbed]' make -j4 dist
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='all compressors together ['\''make dist -j4'\'', stubbed]'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make -j4 dist
make  dist-lzip dist-xz dist-bzip2 dist-gzip dist-zip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
if test -d "all-together-1.0"; then find "all-together-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "all-together-1.0" || { sleep 5 && rm -rf "all-together-1.0"; }; else :; fi
test -d "all-together-1.0" || mkdir "all-together-1.0"
test -n "" \
|| find "all-together-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "all-together-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | lzip -c ${LZIP_OPT--9} >all-together-1.0.tar.lz
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | XZ_OPT=${XZ_OPT--e} xz -c >all-together-1.0.tar.xz
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >all-together-1.0.tar.bz2
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
tardir=all-together-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >all-together-1.0.tar.gz
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
rm -f all-together-1.0.zip
zip -rq all-together-1.0.zip all-together-1.0
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
total 188
-rw-r--r-- 1 dan user     76 Jul  7 00:39 Makefile.am
-rw-r--r-- 1 dan user  16918 Jul  7 00:39 Makefile.in
-rw-r--r-- 1 dan user  27316 Jul  7 00:39 aclocal.m4
-rw-r--r-- 1 dan user     47 Jul  7 00:39 am-init.m4
-rwxr-xr-x 1 dan user 104123 Jul  7 00:40 configure
-rw-r--r-- 1 dan user     94 Jul  7 00:39 configure.ac
-rwxr-xr-x 1 dan user  15368 Jul  7 00:39 install-sh
-rwxr-xr-x 1 dan user   6878 Jul  7 00:39 missing
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir/all-together'
if test -d "all-together-1.0"; then find "all-together-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "all-together-1.0" || { sleep 5 && rm -rf "all-together-1.0"; }; else :; fi
+ result_ ok -D '' -r '' -- 'all compressors together ['\''make dist -j4'\'', stubbed]'
+ set +x
ok 66 - all compressors together ['make dist -j4', stubbed]
PASS: t/dist-formats.tap 66 - all compressors together ['make dist -j4', stubbed]
+ unset subdesc
+ PATH=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
+ export PATH
+ end_subtest
+ unset name
+ unset ac_opts
+ unset am_opts
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-formats.dir
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 66 = later
+ test 0 -eq 0
+ test 59 -eq 66
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

SKIP: t/dist-shar
=================

dist-shar: running shar --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: shar: command not found
SKIP t/dist-shar.sh (exit status: 77)

XFAIL: t/dist-pr109765
======================

dist-pr109765: running bzip2 --help
bzip2, a block-sorting file compressor.  Version 1.0.6, 6-Sept-2010.

   usage: bzip2 [flags and input files in any order]

   -h --help           print this message
   -d --decompress     force decompression
   -z --compress       force compression
   -k --keep           keep (don't delete) input files
   -f --force          overwrite existing output files
   -t --test           test compressed file integrity
   -c --stdout         output to standard out
   -q --quiet          suppress noncritical error messages
   -v --verbose        be verbose (a 2nd -v gives more)
   -L --license        display software version & license
   -V --version        display software version & license
   -s --small          use less memory (at most 2500k)
   -1 .. -9            set block size to 100k .. 900k
   --fast              alias for -1
   --best              alias for -9

   If invoked as `bzip2', default action is to compress.
              as `bunzip2',  default action is to decompress.
              as `bzcat', default action is to decompress to stdout.

   If no file names are given, bzip2 compresses or decompresses
   from standard input to standard output.  You can combine
   short flags, so `-v -4' means the same as -v4 or -4v, &c.

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-pr109765.dir
+ echo AC_OUTPUT
+ :
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make dist-gzip dist-bzip2
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-pr109765.dir'
if test -d "dist-pr109765-1.0"; then find "dist-pr109765-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-pr109765-1.0" || { sleep 5 && rm -rf "dist-pr109765-1.0"; }; else :; fi
test -d "dist-pr109765-1.0" || mkdir "dist-pr109765-1.0"
test -n "" \
|| find "dist-pr109765-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-pr109765.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "dist-pr109765-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/dist-pr109765.dir'
tardir=dist-pr109765-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >dist-pr109765-1.0.tar.gz
if test -d "dist-pr109765-1.0"; then find "dist-pr109765-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-pr109765-1.0" || { sleep 5 && rm -rf "dist-pr109765-1.0"; }; else :; fi
tardir=dist-pr109765-1.0 && ${TAR-tar} chof - "$tardir" | BZIP2=${BZIP2--9} bzip2 -c >dist-pr109765-1.0.tar.bz2
tar: dist-pr109765-1.0: Cannot stat: No such file or directory
tar: Exiting with failure status due to previous errors
if test -d "dist-pr109765-1.0"; then find "dist-pr109765-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "dist-pr109765-1.0" || { sleep 5 && rm -rf "dist-pr109765-1.0"; }; else :; fi
+ gzip -dc dist-pr109765-1.0.tar.gz
+ tar tf -
+ cat one
dist-pr109765-1.0/
dist-pr109765-1.0/Makefile.am
dist-pr109765-1.0/configure
dist-pr109765-1.0/configure.ac
dist-pr109765-1.0/aclocal.m4
dist-pr109765-1.0/Makefile.in
dist-pr109765-1.0/compile
dist-pr109765-1.0/depcomp
dist-pr109765-1.0/install-sh
dist-pr109765-1.0/missing
+ bzip2 -dc dist-pr109765-1.0.tar.gz
bzip2: dist-pr109765-1.0.tar.gz is not a bzip2 file.
+ tar tf -
tar: This does not look like a tar archive
tar: Exiting with failure status due to previous errors
+ cat two
+ _am_exit 1
+ set +e
+ test 77 = 1
+ exit 1
+ exit 1
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/dist-pr109765.sh (exit status: 1)

SKIP: t/distcheck-override-infodir
==================================

distcheck-override-infodir: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/distcheck-override-infodir.sh (exit status: 77)

SKIP: t/distcheck-pr10470
=========================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/distcheck-pr10470.dir
+ mkdir foo.d
+ sh -c 'cd foo.d && sleep '\''4'\'''
+ sleep 1
+ rm -rf foo.d
+ skip_ 'system is able to remove "in use" directories'
+ warn_ 'distcheck-pr10470: skipped test: system is able to remove "in use" directories'
+ echo 'distcheck-pr10470: skipped test: system is able to remove "in use" directories'
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/distcheck-pr10470.sh (exit status: 77)

SKIP: t/extra-deps-lt
=====================

extra-deps-lt: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/extra-deps-lt.sh (exit status: 77)

SKIP: t/fort2
=============

SKIP t/fort2.sh (exit status: 77)

SKIP: t/fort4
=============

SKIP t/fort4.sh (exit status: 77)

SKIP: t/fort5
=============

fort5: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/fort5.sh (exit status: 77)

SKIP: t/gcj4
============

SKIP t/gcj4.sh (exit status: 77)

SKIP: t/gcj6
============

SKIP t/gcj6.sh (exit status: 77)

SKIP: t/gettext-basics
======================

gettext-basics: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/gettext-basics.sh (exit status: 77)

SKIP: t/gettext-config-rpath
============================

gettext-config-rpath: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/gettext-config-rpath.sh (exit status: 77)

SKIP: t/gettext-external-pr338
==============================

gettext-external-pr338: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/gettext-external-pr338.sh (exit status: 77)

SKIP: t/gettext-intl-subdir
===========================

gettext-intl-subdir: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/gettext-intl-subdir.sh (exit status: 77)

SKIP: t/gettext-pr381
=====================

gettext-pr381: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/gettext-pr381.sh (exit status: 77)

XFAIL: t/instdir-cond2
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instdir-cond2.dir
+ cat
+ :
+ :
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
++ pwd
+ ./configure --prefix=/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instdir-cond2.dir/inst
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make installdirs
for dir in "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instdir-cond2.dir/inst/libexec/instdir-cond2" "/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/instdir-cond2.dir/inst/share/instdir-cond2"; do \
  test -z "$dir" || /builds/dan/bootstrapinstall/bin/mkdir -p "$dir"; \
done
+ test '!' -e inst
+ find inst
inst
inst/libexec
inst/libexec/instdir-cond2
inst/share
inst/share/instdir-cond2
+ _am_exit 1
+ set +e
+ test 77 = 1
+ exit 1
+ exit 1
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/instdir-cond2.sh (exit status: 1)

SKIP: t/instdir-java
====================

instdir-java: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/instdir-java.sh (exit status: 77)

SKIP: t/instdir-ltlib
=====================

instdir-ltlib: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/instdir-ltlib.sh (exit status: 77)

SKIP: t/instdir-python
======================

instdir-python: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/instdir-python.sh (exit status: 77)

SKIP: t/instdir-texi
====================

instdir-texi: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/instdir-texi.sh (exit status: 77)

SKIP: t/instfail-info
=====================

instfail-info: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/instfail-info.sh (exit status: 77)

SKIP: t/instfail-java
=====================

instfail-java: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/instfail-java.sh (exit status: 77)

SKIP: t/instfail-libtool
========================

instfail-libtool: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/instfail-libtool.sh (exit status: 77)

SKIP: t/instmany-python
=======================

instmany-python: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/instmany-python.sh (exit status: 77)

SKIP: t/install-info-dir
========================

install-info-dir: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/install-info-dir.sh (exit status: 77)

SKIP: t/java
============

java: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java.sh (exit status: 77)

SKIP: t/java-check
==================

java-check: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-check.sh (exit status: 77)

SKIP: t/java-clean
==================

java-clean: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-clean.sh (exit status: 77)

SKIP: t/java-compile-install
============================

java-compile-install: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-compile-install.sh (exit status: 77)

SKIP: t/java-compile-run-flat
=============================

java-compile-run-flat: running java -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 866: java: command not found
SKIP t/java-compile-run-flat.sh (exit status: 77)

SKIP: t/java-compile-run-nested
===============================

java-compile-run-nested: running java -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 866: java: command not found
SKIP t/java-compile-run-nested.sh (exit status: 77)

SKIP: t/java-empty-classpath
============================

java-empty-classpath: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-empty-classpath.sh (exit status: 77)

SKIP: t/java-extra
==================

java-extra: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-extra.sh (exit status: 77)

SKIP: t/java-nobase
===================

java-nobase: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-nobase.sh (exit status: 77)

SKIP: t/java-noinst
===================

java-noinst: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-noinst.sh (exit status: 77)

SKIP: t/java-rebuild
====================

java-rebuild: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-rebuild.sh (exit status: 77)

SKIP: t/java-uninstall
======================

java-uninstall: running javac -version -help
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 861: javac: command not found
SKIP t/java-uninstall.sh (exit status: 77)

SKIP: t/ldadd
=============

ldadd: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/ldadd.sh (exit status: 77)

SKIP: t/ldflags
===============

ldflags: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/ldflags.sh (exit status: 77)

XFAIL: t/lex-subobj-nodep
=========================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/lex-subobj-nodep.dir
+ cat
+ cat
+ mkdir sub1 sub2
+ cat
+ cp sub1/s1.l sub2/s2.l
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ mkdir build
+ cd build
+ ../configure --disable-dependency-tracking
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking for flex... lex
checking lex output file root... lex.yy
checking lex library... -ll
checking whether yytext is a pointer... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make sub1/s1.c
/bin/sh ../ylwrap ../sub1/s1.l lex.yy.c sub1/s1.c -- lex  
../ylwrap[206]: ../sub1/s1.c: cannot create: No such file or directory
make: *** [Makefile:439: sub1/s1.c] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/lex-subobj-nodep.sh (exit status: 2)

SKIP: t/lex-header
==================

lex-header: running flex --version
flex version 2.5.4
Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/lex-header.dir
+ flex --help
+ grep '.*--header-file'
+ skip_ 'flex doesn'\''t support the '\''--header-file'\'' option'
+ warn_ 'lex-header: skipped test: flex doesn'\''t support the '\''--header-file'\'' option'
+ echo 'lex-header: skipped test: flex doesn'\''t support the '\''--header-file'\'' option'
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/lex-header.sh (exit status: 77)

FAIL: t/lex-clean-cxx
=====================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/lex-clean-cxx.dir
+ cat
+ cat
+ cat
+ cp parsefoo.lxx parsebar.ll
+ cat
+ cp mainfoo.cc mainbar.cpp
+ cp mainfoo.cc mainbaz.c++
+ cp mainfoo.cc mainqux.cxx
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking for gcc... no
checking for cc... cc
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking dependency style of cc... none
checking for flex... lex
checking lex output file root... lex.yy
checking lex library... -ll
checking whether yytext is a pointer... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ cp config.status config.sav
+ make
source='mainfoo.cc' object='mainfoo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./depcomp \
CC -DPACKAGE_NAME=\"lex-clean-cxx\" -DPACKAGE_TARNAME=\"lex-clean-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"lex-clean-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"lex-clean-cxx\" -DVERSION=\"1.0\" -I.     -g -c -o mainfoo.o mainfoo.cc
cc-3173 CC: ERROR File = mainfoo.cc, Line = 3
  The name must be a namespace name.

  using namespace std;
                  ^

1 error detected in the compilation of "mainfoo.cc".
make: *** [Makefile:463: mainfoo.o] Error 2
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/lex-clean-cxx.sh (exit status: 2)

FAIL: t/lex-depend-cxx
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/lex-depend-cxx.dir
+ cat
+ cat
+ cat
+ cp joe.ll moe.l++
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ /builds/dan/bootstrapinstall/bin/grep -F joe.Po Makefile.in
am__depfiles_remade = ./$(DEPDIR)/joe.Po ./$(DEPDIR)/moe.Po
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/joe.Po@am__quote@ # am--include-marker
		-rm -f ./$(DEPDIR)/joe.Po
		-rm -f ./$(DEPDIR)/joe.Po
	test -f $(DEPDIR)/joe.Po
+ /builds/dan/bootstrapinstall/bin/grep -F moe.Po Makefile.in
am__depfiles_remade = ./$(DEPDIR)/joe.Po ./$(DEPDIR)/moe.Po
@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/moe.Po@am__quote@ # am--include-marker
	-rm -f ./$(DEPDIR)/moe.Po
	-rm -f ./$(DEPDIR)/moe.Po
	test -f $(DEPDIR)/moe.Po
+ autoconf
+ ./configure --enable-dependency-tracking
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... dashmstdout
checking for gcc... no
checking for cc... cc
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking dependency style of cc... dashmstdout
checking for flex... lex
checking lex output file root... lex.yy
checking lex library... -ll
checking whether yytext is a pointer... no
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
++ find . -name '*.Po'
+ for f in $(find . -name '*.Po')
+ cat ./.deps/joe.Po
# dummy
+ for f in $(find . -name '*.Po')
+ cat ./.deps/moe.Po
# dummy
+ make test-deps-exist
ls -l .deps ;: For debugging.
total 8
-rw-r--r-- 1 dan user 8 Jul  7 01:48 joe.Po
-rw-r--r-- 1 dan user 8 Jul  7 01:48 moe.Po
test -f .deps/joe.Po
test -f .deps/moe.Po
+ make
/bin/sh ./ylwrap joe.ll lex.yy.c joe.cc -- lex  
source='joe.cc' object='joe.o' libtool=no \
DEPDIR=.deps depmode=dashmstdout /bin/sh ./depcomp \
CC -DPACKAGE_NAME=\"lex-depend-cxx\" -DPACKAGE_TARNAME=\"lex-depend-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"lex-depend-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"lex-depend-cxx\" -DVERSION=\"1.0\" -I.     -g -c -o joe.o joe.cc
cc-3322 CC: WARNING File = joe.ll, Line = 7
  Omission of an explicit type is nonstandard ("int" is assumed).

  yylex(void){
  ^

cc-1167 CC: WARNING File = joe.ll, Line = 66
  Pointer points outside of underlying object.

  yycrank+-1,	0,		0,	
         ^

cc-1167 CC: WARNING File = joe.ll, Line = 67
  Pointer points outside of underlying object.

  yycrank+-2,	yysvec+1,	0,	
         ^

cc-1020 CC: ERROR File = joe.ll, Line = 168
  The identifier "exit" is undefined.

  				exit(1);
  				^

cc-1020 CC: ERROR File = joe.ll, Line = 190
  The identifier "exit" is undefined.

  						exit(1);
  						^

cc-1020 CC: ERROR File = joe.ll, Line = 210
  The identifier "exit" is undefined.

  						exit(1);
  						^

cc-1020 CC: ERROR File = joe.ll, Line = 230
  The identifier "exit" is undefined.

  						exit(1);
  						^

4 errors detected in the compilation of "joe.cc".
make: *** [Makefile:382: joe.o] Error 2
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/lex-depend-cxx.sh (exit status: 2)

SKIP: t/libobj13
================

libobj13: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libobj13.sh (exit status: 77)

SKIP: t/libtool
===============

libtool: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/libtool.sh (exit status: 77)

SKIP: t/libtool2
================

libtool2: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool2.sh (exit status: 77)

SKIP: t/libtool3
================

libtool3: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool3.sh (exit status: 77)

SKIP: t/libtool5
================

libtool5: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool5.sh (exit status: 77)

SKIP: t/libtool6
================

libtool6: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool6.sh (exit status: 77)

SKIP: t/libtool7
================

libtool7: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool7.sh (exit status: 77)

SKIP: t/libtool8
================

libtool8: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool8.sh (exit status: 77)

SKIP: t/libtool9
================

libtool9: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtool9.sh (exit status: 77)

SKIP: t/libtoo10
================

libtoo10: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtoo10.sh (exit status: 77)

SKIP: t/libtoo11
================

libtoo11: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/libtoo11.sh (exit status: 77)

FAIL: t/link_cond
=================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/link_cond.dir
+ cat
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
+ rm -f '*.c++'
+ cat
+ ./configure have_cxx=no
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ run_make CXX=false
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 1 -gt 0
+ case $1 in
+ break
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ :
+ test x '!=' x
+ : exec make CXX=false
+ set +x
source='less.c' object='less.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./depcomp \
c99 -DPACKAGE_NAME=\"link_cond\" -DPACKAGE_TARNAME=\"link_cond\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"link_cond\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"link_cond\" -DVERSION=\"1.0\" -I.     -mips4 -O1 -c -o less.o less.c
c99  -mips4 -O1   -o foo less.o  
+ test 0 -eq 253
+ test no = yes
+ test no = yes
+ test no = yes
+ case $am__make_rc_exp in
+ test 0 -ge 0
+ test 0 -le 255
+ test 0 -eq 0
+ rm -f foo foo.exe
+ run_make CC=false
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 1 -gt 0
+ case $1 in
+ break
+ using_gmake
+ case $am__using_gmake in
+ return 0
+ :
+ test x '!=' x
+ : exec make CC=false
+ set +x
false  -mips4 -O1   -o foo less.o  
make: *** [Makefile:372: foo] Error 1
+ am_make_rc=2
+ test 2 -eq 253
+ test no = yes
+ test no = yes
+ test no = yes
+ case $am__make_rc_exp in
+ test 0 -ge 0
+ test 0 -le 255
+ test 2 -eq 0
+ return 1
+ make distclean
test -z "foo" || rm -f foo
rm -f *.o
rm -f *.tab.c
test -z "" || rm -f 
test . = "." || test -z "" || rm -f 
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f ./.deps/less.Po
rm -f ./.deps/more.Po
rm -f Makefile
+ rm -f less.c
+ cat
+ ./configure have_cxx=yes
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ run_make CC=false
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 1 -gt 0
+ case $1 in
+ break
+ using_gmake
+ case $am__using_gmake in
+ return 0
+ :
+ test x '!=' x
+ : exec make CC=false
+ set +x
source='more.c++' object='more.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./depcomp \
CC -DPACKAGE_NAME=\"link_cond\" -DPACKAGE_TARNAME=\"link_cond\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"link_cond\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"link_cond\" -DVERSION=\"1.0\" -I.     -g -c -o more.o more.c++
cc-3173 CC: ERROR File = more.c++, Line = 2
  The name must be a namespace name.

  using namespace std;
                  ^

1 error detected in the compilation of "more.c++".
make: *** [Makefile:406: more.o] Error 2
+ am_make_rc=2
+ test 2 -eq 253
+ test no = yes
+ test no = yes
+ test no = yes
+ case $am__make_rc_exp in
+ test 0 -ge 0
+ test 0 -le 255
+ test 2 -eq 0
+ return 1
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/link_cond.sh (exit status: 1)

SKIP: t/listval
===============

listval: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/listval.sh (exit status: 77)

SKIP: t/ltcond
==============

ltcond: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltcond.sh (exit status: 77)

SKIP: t/ltcond2
===============

ltcond2: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltcond2.sh (exit status: 77)

SKIP: t/ltconv
==============

ltconv: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltconv.sh (exit status: 77)

SKIP: t/ltdeps
==============

ltdeps: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/ltdeps.sh (exit status: 77)

SKIP: t/ltinit
==============

ltinit: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltinit.sh (exit status: 77)

SKIP: t/ltinstloc
=================

ltinstloc: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltinstloc.sh (exit status: 77)

SKIP: t/ltlibobjs
=================

ltlibobjs: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/ltlibobjs.sh (exit status: 77)

SKIP: t/ltlibsrc
================

ltlibsrc: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/ltlibsrc.sh (exit status: 77)

SKIP: t/ltorder
===============

ltorder: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/ltorder.sh (exit status: 77)

SKIP: t/man6
============

man6: running help2man --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: help2man: command not found
SKIP t/man6.sh (exit status: 77)

SKIP: t/nobase-libtool
======================

nobase-libtool: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/nobase-libtool.sh (exit status: 77)

SKIP: t/nobase-python
=====================

nobase-python: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/nobase-python.sh (exit status: 77)

SKIP: t/objc-minidemo
=====================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-minidemo.dir
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ : We have a modern enough autoconf, go ahead.
+ aclocal-1.16 -Werror
+ autoconf
+ autoheader
+ automake-1.16 --foreign -Werror -Wall --add-missing
parallel-tests: installing './test-driver'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for objcc... no
checking for objc... no
checking for cc... cc
checking whether the Objective C compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-minidemo.dir':
configure: error: Objective C compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objc-minidemo.sh (exit status: 77)

SKIP: t/objc-flags
==================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-flags.dir
+ cat
+ cat
+ for i in 2 4
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ for i in 2 4
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
+ /builds/dan/bootstrapinstall/bin/grep -F OBJCFLAGS Makefile.in
foo4_LINK = $(OBJCLD) $(foo4_OBJCFLAGS) $(OBJCFLAGS) $(AM_LDFLAGS) \
	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_OBJCFLAGS) $(OBJCFLAGS)
OBJCLINK = $(OBJCLD) $(AM_OBJCFLAGS) $(OBJCFLAGS) $(AM_LDFLAGS) \
OBJCFLAGS = @OBJCFLAGS@
AM_OBJCFLAGS = -DVALUE=2 -DERROR=1
foo4_OBJCFLAGS = -DVALUE=4 -DERROR=1
@am__fastdepOBJC_TRUE@	$(AM_V_OBJC)$(OBJC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCFLAGS) $(OBJCFLAGS) -MT foo4-foo4.o -MD -MP -MF $(DEPDIR)/foo4-foo4.Tpo -c -o foo4-foo4.o `test -f 'foo4.m' || echo '$(srcdir)/'`foo4.m
@am__fastdepOBJC_FALSE@	$(AM_V_OBJC@am__nodep@)$(OBJC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCFLAGS) $(OBJCFLAGS) -c -o foo4-foo4.o `test -f 'foo4.m' || echo '$(srcdir)/'`foo4.m
@am__fastdepOBJC_TRUE@	$(AM_V_OBJC)$(OBJC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCFLAGS) $(OBJCFLAGS) -MT foo4-foo4.obj -MD -MP -MF $(DEPDIR)/foo4-foo4.Tpo -c -o foo4-foo4.obj `if test -f 'foo4.m'; then $(CYGPATH_W) 'foo4.m'; else $(CYGPATH_W) '$(srcdir)/foo4.m'; fi`
@am__fastdepOBJC_FALSE@	$(AM_V_OBJC@am__nodep@)$(OBJC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCFLAGS) $(OBJCFLAGS) -c -o foo4-foo4.obj `if test -f 'foo4.m'; then $(CYGPATH_W) 'foo4.m'; else $(CYGPATH_W) '$(srcdir)/foo4.m'; fi`
+ grep '\$(OBJCFLAGS).*\$(AM_OBJCFLAGS)' Makefile.in
+ grep '\$(OBJCFLAGS).*\$(foo.*_OBJCFLAGS)' Makefile.in
+ grep '\$(foo.*_OBJCFLAGS).*\$(AM_OBJCFLAGS)' Makefile.in
+ ./configure OBJCFLAGS=-UERROR
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for objcc... no
checking for objc... no
checking for cc... cc
checking whether the Objective C compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-flags.dir':
configure: error: Objective C compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objc-flags.sh (exit status: 77)

SKIP: t/objc-deps
=================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-deps.dir
+ cat
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall --add-missing
+ ./configure --enable-dependency-tracking
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for objcc... no
checking for objc... no
checking for cc... cc
checking whether the Objective C compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objc-deps.dir':
configure: error: Objective C compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objc-deps.sh (exit status: 77)

SKIP: t/objcxx-minidemo
=======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-minidemo.dir
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ autoheader
+ automake-1.16 --foreign -Werror -Wall --add-missing
parallel-tests: installing './test-driver'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for g++... no
checking for objc++... no
checking for objcxx... no
checking for c++... no
checking for CXX... no
checking whether the Objective C++ compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-minidemo.dir':
configure: error: Objective C++ compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objcxx-minidemo.sh (exit status: 77)

SKIP: t/objcxx-flags
====================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-flags.dir
+ cat
+ cat
+ for i in 2 4
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ for i in 2 4
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
+ /builds/dan/bootstrapinstall/bin/grep -F OBJCXXFLAGS Makefile.in
foo4_LINK = $(OBJCXXLD) $(foo4_OBJCXXFLAGS) $(OBJCXXFLAGS) \
	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_OBJCXXFLAGS) $(OBJCXXFLAGS)
OBJCXXLINK = $(OBJCXXLD) $(AM_OBJCXXFLAGS) $(OBJCXXFLAGS) \
OBJCXXFLAGS = @OBJCXXFLAGS@
AM_OBJCXXFLAGS = -DVALUE=2 -DERROR=1
foo4_OBJCXXFLAGS = -DVALUE=4 -DERROR=1
@am__fastdepOBJCXX_TRUE@	$(AM_V_OBJCXX)$(OBJCXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCXXFLAGS) $(OBJCXXFLAGS) -MT foo4-foo4.o -MD -MP -MF $(DEPDIR)/foo4-foo4.Tpo -c -o foo4-foo4.o `test -f 'foo4.mm' || echo '$(srcdir)/'`foo4.mm
@am__fastdepOBJCXX_FALSE@	$(AM_V_OBJCXX@am__nodep@)$(OBJCXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCXXFLAGS) $(OBJCXXFLAGS) -c -o foo4-foo4.o `test -f 'foo4.mm' || echo '$(srcdir)/'`foo4.mm
@am__fastdepOBJCXX_TRUE@	$(AM_V_OBJCXX)$(OBJCXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCXXFLAGS) $(OBJCXXFLAGS) -MT foo4-foo4.obj -MD -MP -MF $(DEPDIR)/foo4-foo4.Tpo -c -o foo4-foo4.obj `if test -f 'foo4.mm'; then $(CYGPATH_W) 'foo4.mm'; else $(CYGPATH_W) '$(srcdir)/foo4.mm'; fi`
@am__fastdepOBJCXX_FALSE@	$(AM_V_OBJCXX@am__nodep@)$(OBJCXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(foo4_OBJCXXFLAGS) $(OBJCXXFLAGS) -c -o foo4-foo4.obj `if test -f 'foo4.mm'; then $(CYGPATH_W) 'foo4.mm'; else $(CYGPATH_W) '$(srcdir)/foo4.mm'; fi`
+ grep '\$(OBJCXXFLAGS).*\$(AM_OBJCXXFLAGS)' Makefile.in
+ grep '\$(OBJCXXFLAGS).*\$(foo.*_OBJCXXFLAGS)' Makefile.in
+ grep '\$(foo.*_OBJCXXFLAGS).*\$(AM_OBJCXXFLAGS)' Makefile.in
+ ./configure OBJCXXFLAGS=-UERROR
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for g++... no
checking for objc++... no
checking for objcxx... no
checking for c++... no
checking for CXX... no
checking whether the Objective C++ compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-flags.dir':
configure: error: Objective C++ compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objcxx-flags.sh (exit status: 77)

SKIP: t/objcxx-deps
===================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-deps.dir
+ cat
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall --add-missing
+ ./configure --enable-dependency-tracking
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for g++... no
checking for objc++... no
checking for objcxx... no
checking for c++... no
checking for CXX... no
checking whether the Objective C++ compiler works... no
configure: error: in `/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objcxx-deps.dir':
configure: error: Objective C++ compiler cannot create executables
See `config.log' for more details
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/objcxx-deps.sh (exit status: 77)

SKIP: t/objc-megademo
=====================

objc-megademo: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/objc-megademo.sh (exit status: 77)

XFAIL: t/objext-pr10128
=======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/objext-pr10128.dir
+ echo AC_OUTPUT
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make test
is  == foo.fasl
make: *** [Makefile:668: test] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/objext-pr10128.sh (exit status: 2)

XFAIL: t/override-conditional-2
===============================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/override-conditional-2.dir
+ cat
+ cat
+ aclocal-1.16 -Werror
+ AUTOMAKE_fails
+ AUTOMAKE_run -e 1
+ am__desc=
+ am__exp_rc=0
+ test 2 -gt 0
+ case $1 in
+ am__exp_rc=1
+ shift
+ shift
+ test 0 -gt 0
+ am__got_rc=0
+ automake-1.16 --foreign -Werror -Wall
+ cat stderr
+ cat stdout
+ test none = none
+ test 0 -eq 1
+ _am_exit 1
+ set +e
+ test 77 = 1
+ exit 1
+ exit 1
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/override-conditional-2.sh (exit status: 1)

XFAIL: t/override-conditional-pr13940
=====================================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/override-conditional-pr13940.dir
+ cat
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall -a
automake-1.16: warnings are treated as errors
Makefile.am:8: warning: all-local was already defined in condition FOO, which is included in condition TRUE ...
Makefile.am:5: ... 'all-local' previously defined here
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/override-conditional-pr13940.sh (exit status: 1)

SKIP: t/parallel-tests-log-compiler-example
===========================================

parallel-tests-log-compiler-example: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/parallel-tests-log-compiler-example.sh (exit status: 77)

SKIP: t/posixsubst-ltlibraries
==============================

posixsubst-ltlibraries: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/posixsubst-ltlibraries.sh (exit status: 77)

SKIP: t/pr72
============

pr72: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/pr72.sh (exit status: 77)

SKIP: t/pr211
=============

pr211: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/pr211.sh (exit status: 77)

SKIP: t/pr300-ltlib
===================

pr300-ltlib: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/pr300-ltlib.sh (exit status: 77)

SKIP: t/pr307
=============

pr307: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/pr307.sh (exit status: 77)

SKIP: t/pr401b
==============

pr401b: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/pr401b.sh (exit status: 77)

SKIP: t/py-compile-basic
========================

py-compile-basic: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/py-compile-basic.sh (exit status: 77)

SKIP: t/py-compile-basedir
==========================

py-compile-basedir: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/py-compile-basedir.sh (exit status: 77)

SKIP: t/py-compile-destdir
==========================

py-compile-destdir: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/py-compile-destdir.sh (exit status: 77)

SKIP: t/py-compile-option-terminate
===================================

py-compile-option-terminate: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/py-compile-option-terminate.sh (exit status: 77)

SKIP: t/python3
===============

python3: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python3.sh (exit status: 77)

SKIP: t/python10
================

python10: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python10.sh (exit status: 77)

SKIP: t/python12
================

python12: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python12.sh (exit status: 77)

SKIP: t/python-am-path-iftrue
=============================

python-am-path-iftrue: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python-am-path-iftrue.sh (exit status: 77)

SKIP: t/python-too-old
======================

python-too-old: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python-too-old.sh (exit status: 77)

SKIP: t/python-vars
===================

python-vars: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python-vars.sh (exit status: 77)

SKIP: t/python-virtualenv
=========================

python-virtualenv: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python-virtualenv.sh (exit status: 77)

SKIP: t/python-pr10995
======================

python-pr10995: running python -V
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 922: python: command not found
SKIP t/python-pr10995.sh (exit status: 77)

XFAIL: t/remake-am-pr10111
==========================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-am-pr10111.dir
+ cat
+ :
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make distdir
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-am-pr10111.dir'
if test -d "remake-am-pr10111-1.0"; then find "remake-am-pr10111-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "remake-am-pr10111-1.0" || { sleep 5 && rm -rf "remake-am-pr10111-1.0"; }; else :; fi
test -d "remake-am-pr10111-1.0" || mkdir "remake-am-pr10111-1.0"
test -n "" \
|| find "remake-am-pr10111-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-am-pr10111.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "remake-am-pr10111-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-am-pr10111.dir'
+ cd remake-am-pr10111-1.0
+ mkdir build
+ cd build
+ ../configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ rm -f ../foobar.am
+ make
make: Nothing to be done for 'all'.
+ grep '= foobar was here =' ../Makefile.in
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/remake-am-pr10111.sh (exit status: 1)

XFAIL: t/remake-m4-pr10111
==========================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-m4-pr10111.dir
+ cat
+ :
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make distdir
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-m4-pr10111.dir'
if test -d "remake-m4-pr10111-1.0"; then find "remake-m4-pr10111-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "remake-m4-pr10111-1.0" || { sleep 5 && rm -rf "remake-m4-pr10111-1.0"; }; else :; fi
test -d "remake-m4-pr10111-1.0" || mkdir "remake-m4-pr10111-1.0"
test -n "" \
|| find "remake-m4-pr10111-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-m4-pr10111.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "remake-m4-pr10111-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-m4-pr10111.dir'
+ cd remake-m4-pr10111-1.0
+ mkdir build
+ cd build
+ ../configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ rm -f ../foobar.m4
+ make
make: Nothing to be done for 'all'.
+ grep ': foobar was here :' ../configure
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/remake-m4-pr10111.sh (exit status: 1)

XFAIL: t/remake-timing-bug-pr8365
=================================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/remake-timing-bug-pr8365.dir
+ stat /dev/null
  File: /dev/null
  Size: 0         	Blocks: 0          IO Block: 16384  character special file
Device: 88h/136d	Inode: 134286480   Links: 1     Device type: 1,2
Access: (0666/crw-rw-rw-)  Uid: (    0/    root)   Gid: (    0/     sys)
Access: 2018-07-07 05:02:55.000000000 +0100
Modify: 2018-07-07 05:02:55.000000000 +0100
Change: 2018-07-07 05:02:55.000000000 +0100
 Birth: -
+ stat=stat
+ cat
+ :
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ make Makefile
make: 'Makefile' is up to date.
+ /builds/dan/bootstrapinstall/bin/grep -E 'FOOBAR|zardoz' Makefile
+ echo 'AC_SUBST([FOOBAR])'
+ stat config.status Makefile configure.ac
  File: config.status
  Size: 25887     	Blocks: 56         IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244953   Links: 1
Access: (0755/-rwxr-xr-x)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:14.553720080 +0100
Modify: 2018-07-07 05:03:14.284868720 +0100
Change: 2018-07-07 05:03:14.284868720 +0100
 Birth: -
  File: Makefile
  Size: 17925     	Blocks: 40         IO Block: 65536  regular file
Device: 88h/136d	Inode: 84759267    Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:14.936101760 +0100
Modify: 2018-07-07 05:03:14.675884240 +0100
Change: 2018-07-07 05:03:14.700297200 +0100
 Birth: -
  File: configure.ac
  Size: 131       	Blocks: 8          IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244946   Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:08.461549920 +0100
Modify: 2018-07-07 05:03:14.938038240 +0100
Change: 2018-07-07 05:03:14.938038240 +0100
 Birth: -
+ sleep 2
+ touch config.status
+ touch -r config.status config.status Makefile configure.ac
+ stat config.status Makefile configure.ac
  File: config.status
  Size: 25887     	Blocks: 56         IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244953   Links: 1
Access: (0755/-rwxr-xr-x)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:16.996134960 +0100
 Birth: -
  File: Makefile
  Size: 17925     	Blocks: 40         IO Block: 65536  regular file
Device: 88h/136d	Inode: 84759267    Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:16.996276480 +0100
 Birth: -
  File: configure.ac
  Size: 131       	Blocks: 8          IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244946   Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:16.996397280 +0100
 Birth: -
+ cat
+ cat
+ cat
+ chmod a+x aclocal-wrap automake-wrap autoconf-wrap
+ run_make Makefile ACLOCAL=./aclocal-wrap AUTOMAKE=./automake-wrap AUTOCONF=./autoconf-wrap
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 4 -gt 0
+ case $1 in
+ break
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ :
+ test x '!=' x
+ : exec make Makefile ACLOCAL=./aclocal-wrap AUTOMAKE=./automake-wrap AUTOCONF=./autoconf-wrap
+ set +x
CDPATH="${ZSH_VERSION+.}:" && cd . && ./aclocal-wrap 
+ AUTOCONF=autoconf
+ export AUTOCONF
+ aclocal-1.16 -Werror
+ touch -r config.status aclocal.m4
+ stat aclocal.m4
  File: aclocal.m4
  Size: 27316     	Blocks: 56         IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244948   Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:21.788463680 +0100
 Birth: -
 cd . && ./automake-wrap --foreign
+ AUTOCONF=autoconf
+ export AUTOCONF
+ automake-1.16 --foreign -Werror -Wall --foreign
+ touch -r config.status Makefile.in
+ stat Makefile.in
  File: Makefile.in
  Size: 16784     	Blocks: 40         IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244949   Links: 1
Access: (0644/-rw-r--r--)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:28.326077920 +0100
 Birth: -
CDPATH="${ZSH_VERSION+.}:" && cd . && ./autoconf-wrap
+ autoconf
+ touch -r config.status configure
+ stat configure
  File: configure
  Size: 104314    	Blocks: 208        IO Block: 65536  regular file
Device: 88h/136d	Inode: 236244950   Links: 1
Access: (0755/-rwxr-xr-x)  Uid: (55695/     dan)   Gid: (   20/    user)
Access: 2018-07-07 05:03:16.987442000 +0100
Modify: 2018-07-07 05:03:16.987442000 +0100
Change: 2018-07-07 05:03:30.963451200 +0100
 Birth: -
make: 'Makefile' is up to date.
+ test 0 -eq 253
+ test no = yes
+ test no = yes
+ test no = yes
+ case $am__make_rc_exp in
+ test 0 -ge 0
+ test 0 -le 255
+ test 0 -eq 0
+ grep '^FOOBAR =' Makefile.in
FOOBAR = @FOOBAR@
+ grep '^FOOBAR *= *zardoz *$' Makefile
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
XFAIL t/remake-timing-bug-pr8365.sh (exit status: 1)

SKIP: t/reqd2
=============

reqd2: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/reqd2.sh (exit status: 77)

SKIP: t/self-check-cc-no-c-o
============================

SKIP t/self-check-cc-no-c-o.sh (exit status: 77)

FAIL: t/silent-cxx
==================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/silent-cxx.dir
+ mkdir sub
+ cat
+ cat
+ cat
+ cat
+ echo 'class Baz  { public: int i;  };'
+ echo 'class Quux { public: bool b; };'
+ cp foo.cpp sub/bar.cpp
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall --add-missing
+ autoconf
+ /builds/dan/bootstrapinstall/bin/grep -F am_cv_CXX_dependencies_compiler_type configure
if ${am_cv_CXX_dependencies_compiler_type+:} false; then :
  am_cv_CXX_dependencies_compiler_type=none
        am_cv_CXX_dependencies_compiler_type=$depmode
  am_cv_CXX_dependencies_compiler_type=none
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_CXX_dependencies_compiler_type" >&5
$as_echo "$am_cv_CXX_dependencies_compiler_type" >&6; }
CXXDEPMODE=depmode=$am_cv_CXX_dependencies_compiler_type
  && test "$am_cv_CXX_dependencies_compiler_type" = gcc3; then
+ for config_args in --enable-dependency-tracking --disable-dependency-tracking
+ ./configure --enable-dependency-tracking --enable-silent-rules
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... dashmstdout
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
config.status: executing depfiles commands
+ run_make -O
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 1 -gt 0
+ case $1 in
+ am__make_redirect_stdout=yes
+ shift
+ test 0 -gt 0
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ :
+ test x '!=' x
+ : exec make
+ set +x
cc-3173 CC: ERROR File = bar.cpp, Line = 1
  The name must be a namespace name.

  using namespace std; /* C compilers fail on this. */
                  ^

1 error detected in the compilation of "bar.cpp".
make[1]: *** [Makefile:363: bar.o] Error 2
make: *** [Makefile:524: all-recursive] Error 1
+ am_make_rc=2
+ test 2 -eq 253
+ test no = yes
+ test yes = yes
+ cat stdout
Making all in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/silent-cxx.dir/sub'
  CXX      bar.o
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/silent-cxx.dir/sub'
+ test no = yes
+ case $am__make_rc_exp in
+ test 0 -ge 0
+ test 0 -le 255
+ test 2 -eq 0
+ return 1
+ am_exit_trap 1
+ exit_status=1
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 1 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/silent-cxx.sh (exit status: 1)

SKIP: t/silent-lt
=================

silent-lt: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/silent-lt.sh (exit status: 77)

SKIP: t/silent-texi
===================

silent-texi: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/silent-texi.sh (exit status: 77)

SKIP: t/stdlib2
===============

stdlib2: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/stdlib2.sh (exit status: 77)

SKIP: t/strip2
==============

strip2: running strip --version
Illegal option -- -
Illegal option -- v
Illegal option -- e
strip: Warning: the -r option has no effect and will be removed in the next release.
Illegal option -- i
	-f:   Force stripping of dso or relocatable-object.
	-h:   Remove names from STO_HIDDEN and STO_INTERNAL symbols.
	-k:   Add .debug_frame to what -s strips (-s required with -k)
	-l:   Strip line number information only.
	-o outputfile: Strip input file leaving the result in the output file.
	-s:   Strip nearly everything, as for standalone programs.
	-u:   When combined with -o, the new output file has the current user
 ID and group ID.
	-x:   Do Not strip the .symtab symbol table.  Debugging and line number info are stripped.
	-S:   Silent execution: exit status same as without -S.
	-V:   Print, on stderr, the version number of strip.
SKIP t/strip2.sh (exit status: 77)

SKIP: t/strip3
==============

strip3: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/strip3.sh (exit status: 77)

SKIP: t/subdir-cond-gettext
===========================

subdir-cond-gettext: running gettext --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: gettext: command not found
SKIP t/subdir-cond-gettext.sh (exit status: 77)

SKIP: t/subobj9
===============

subobj9: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/subobj9.sh (exit status: 77)

SKIP: t/subobj10
================

SKIP t/subobj10.sh (exit status: 77)

SKIP: t/subobj-clean-lt-pr10697
===============================

subobj-clean-lt-pr10697: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/subobj-clean-lt-pr10697.sh (exit status: 77)

FAIL: t/subobj-pr13928-more-langs
=================================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir
+ cat
+ cat
+ mkdir sub
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
+ mkfiles='Makefile.in sub/Makefile.in'
+ /builds/dan/bootstrapinstall/bin/grep -E '(test|ba[rz])\.|DEPDIR|dirstamp|srcdir' Makefile.in sub/Makefile.in
Makefile.in:VPATH = @srcdir@
Makefile.in:@OBVIOUS_TRUE@am__append_1 = ${srcdir}/$(LESS)///test.f
Makefile.in:ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
Makefile.in:am__aclocal_m4_deps = $(top_srcdir)/configure.ac
Makefile.in:DIST_COMMON = $(srcdir)/Makefile.am $(top_srcdir)/configure \
Makefile.in:am_test_OBJECTS = test.$(OBJEXT)
Makefile.in:am__test2_SOURCES_DIST = ${srcdir}/$(LESS)///test.f
Makefile.in:am__dirstamp = $(am__leading_dot)dirstamp
Makefile.in:@OBVIOUS_TRUE@am__objects_1 = $(LESS)/test.$(OBJEXT)
Makefile.in:    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
Makefile.in:am__DIST_COMMON = $(srcdir)/Makefile.in compile depcomp install-sh \
Makefile.in:DEPDIR = @DEPDIR@
Makefile.in:abs_srcdir = @abs_srcdir@
Makefile.in:abs_top_srcdir = @abs_top_srcdir@
Makefile.in:srcdir = @srcdir@
Makefile.in:top_srcdir = @top_srcdir@
Makefile.in:test_SOURCES = $(srcdir)/test.f90
Makefile.in:$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
Makefile.in:	      echo ' cd $(srcdir) && $(AUTOMAKE) --foreign'; \
Makefile.in:	      $(am__cd) $(srcdir) && $(AUTOMAKE) --foreign \
Makefile.in:	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign Makefile'; \
Makefile.in:	$(am__cd) $(top_srcdir) && \
Makefile.in:Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
Makefile.in:$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
Makefile.in:$(top_srcdir)/configure:  $(am__configure_deps)
Makefile.in:	$(am__cd) $(srcdir) && $(AUTOCONF)
Makefile.in:	$(am__cd) $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
Makefile.in:$(LESS)/$(am__dirstamp):
Makefile.in:	@: > $(LESS)/$(am__dirstamp)
Makefile.in:$(LESS)/$(DEPDIR)/$(am__dirstamp):
Makefile.in:	@$(MKDIR_P) $(LESS)/$(DEPDIR)
Makefile.in:	@: > $(LESS)/$(DEPDIR)/$(am__dirstamp)
Makefile.in:$(LESS)/test.$(OBJEXT): $(LESS)/$(am__dirstamp) \
Makefile.in:	$(LESS)/$(DEPDIR)/$(am__dirstamp)
Makefile.in:	  && $(am__cd) $(top_srcdir) \
Makefile.in:	case "$(srcdir)" in \
Makefile.in:	  [\\/]* | ?:[\\/]*) sdir="$(srcdir)" ;; \
Makefile.in:	  *) sdir=$(subdir)/$(srcdir) ;; \
Makefile.in:	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
Makefile.in:	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
Makefile.in:	  sed -e "s|^$$srcdirstrip/||;t" \
Makefile.in:	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
Makefile.in:	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
Makefile.in:	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
Makefile.in:	      cp -fpR $(srcdir)/$$file "$(distdir)$$dir" || exit 1; \
Makefile.in:	    --srcdir=../.. --prefix="$$dc_install_base" \
Makefile.in:	@if test '$(srcdir)' = . ; then \
Makefile.in:	-test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)
Makefile.in:	-test -z "$(LESS)/$(DEPDIR)/$(am__dirstamp)" || rm -f $(LESS)/$(DEPDIR)/$(am__dirstamp)
Makefile.in:	-test -z "$(LESS)/$(am__dirstamp)" || rm -f $(LESS)/$(am__dirstamp)
Makefile.in:	-rm -rf $(top_srcdir)/autom4te.cache
Makefile.in:	ls -la @srcdir@ .
Makefile.in:	test ! -f @srcdir@/test.$(OBJEXT)
Makefile.in:	test -f test.$(OBJEXT)
Makefile.in:	test ! -f @srcdir@/m/o/r/e/test.$(OBJEXT)
Makefile.in:	test -f m/o/r/e/test.$(OBJEXT)
Makefile.in:	test ! -f @srcdir@/bar.$(OBJEXT)
Makefile.in:	test -f bar.$(OBJEXT)
Makefile.in:	test ! -f @srcdir@/baz.$(OBJEXT)
Makefile.in:	test -f baz.$(OBJEXT)
Makefile.in:	test ! -d @srcdir@/$(DEPDIR)
Makefile.in:	test ! -d @srcdir@/m/o/r/e/$(DEPDIR)
Makefile.in:	test -d $(DEPDIR)
Makefile.in:	test -d m/o/r/e/$(DEPDIR)
sub/Makefile.in:VPATH = @srcdir@
sub/Makefile.in:ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
sub/Makefile.in:am__aclocal_m4_deps = $(top_srcdir)/configure.ac
sub/Makefile.in:DIST_COMMON = $(srcdir)/Makefile.am $(am__DIST_COMMON)
sub/Makefile.in:am__dirstamp = $(am__leading_dot)dirstamp
sub/Makefile.in:am_foo_OBJECTS = $(top_builddir)/bar.$(OBJEXT) \
sub/Makefile.in:depcomp = $(SHELL) $(top_srcdir)/depcomp
sub/Makefile.in:am__depfiles_remade = $(top_builddir)/$(DEPDIR)/$(foo).Po \
sub/Makefile.in:	$(top_builddir)/$(DEPDIR)/bar.Po
sub/Makefile.in:    if test -f "$$i"; then echo $$i; else echo $(srcdir)/$$i; fi; \
sub/Makefile.in:am__DIST_COMMON = $(srcdir)/Makefile.in $(top_srcdir)/depcomp
sub/Makefile.in:DEPDIR = @DEPDIR@
sub/Makefile.in:abs_srcdir = @abs_srcdir@
sub/Makefile.in:abs_top_srcdir = @abs_top_srcdir@
sub/Makefile.in:srcdir = @srcdir@
sub/Makefile.in:top_srcdir = @top_srcdir@
sub/Makefile.in:	      $(top_srcdir)/bar.cc \
sub/Makefile.in:              ${top_srcdir}/$(foo).c
sub/Makefile.in:$(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
sub/Makefile.in:	echo ' cd $(top_srcdir) && $(AUTOMAKE) --foreign sub/Makefile'; \
sub/Makefile.in:	$(am__cd) $(top_srcdir) && \
sub/Makefile.in:Makefile: $(srcdir)/Makefile.in $(top_builddir)/config.status
sub/Makefile.in:$(top_builddir)/config.status: $(top_srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
sub/Makefile.in:$(top_srcdir)/configure:  $(am__configure_deps)
sub/Makefile.in:$(top_builddir)/$(am__dirstamp):
sub/Makefile.in:	@: > $(top_builddir)/$(am__dirstamp)
sub/Makefile.in:$(top_builddir)/$(DEPDIR)/$(am__dirstamp):
sub/Makefile.in:	@$(MKDIR_P) $(top_builddir)/$(DEPDIR)
sub/Makefile.in:	@: > $(top_builddir)/$(DEPDIR)/$(am__dirstamp)
sub/Makefile.in:$(top_builddir)/bar.$(OBJEXT): $(top_builddir)/$(am__dirstamp) \
sub/Makefile.in:	$(top_builddir)/$(DEPDIR)/$(am__dirstamp)
sub/Makefile.in:$(top_builddir)/$(foo).$(OBJEXT): $(top_builddir)/$(am__dirstamp) \
sub/Makefile.in:	$(top_builddir)/$(DEPDIR)/$(am__dirstamp)
sub/Makefile.in:@AMDEP_TRUE@@am__include@ @am__quote@$(top_builddir)/$(DEPDIR)/$(foo).Po@am__quote@ # am--include-marker
sub/Makefile.in:@AMDEP_TRUE@@am__include@ @am__quote@$(top_builddir)/$(DEPDIR)/bar.Po@am__quote@ # am--include-marker
sub/Makefile.in:@am__fastdepCC_TRUE@	$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.o$$||'`;\
sub/Makefile.in:@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
sub/Makefile.in:@am__fastdepCC_TRUE@	$(AM_V_CC)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.obj$$||'`;\
sub/Makefile.in:@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
sub/Makefile.in:@am__fastdepCXX_TRUE@	$(AM_V_CXX)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.o$$||'`;\
sub/Makefile.in:@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
sub/Makefile.in:@am__fastdepCXX_TRUE@	$(AM_V_CXX)depbase=`echo $@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.obj$$||'`;\
sub/Makefile.in:@AMDEP_TRUE@@am__fastdepCXX_FALSE@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @AMDEPBACKSLASH@
sub/Makefile.in:	  && $(am__cd) $(top_srcdir) \
sub/Makefile.in:	case "$(srcdir)" in \
sub/Makefile.in:	  [\\/]* | ?:[\\/]*) sdir="$(srcdir)" ;; \
sub/Makefile.in:	  *) sdir=$(subdir)/$(srcdir) ;; \
sub/Makefile.in:	@srcdirstrip=`echo "$(srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
sub/Makefile.in:	topsrcdirstrip=`echo "$(top_srcdir)" | sed 's/[].[^$$\\*]/\\\\&/g'`; \
sub/Makefile.in:	  sed -e "s|^$$srcdirstrip/||;t" \
sub/Makefile.in:	      -e "s|^$$topsrcdirstrip/|$(top_builddir)/|;t"`; \
sub/Makefile.in:	  if test -f $$file || test -d $$file; then d=.; else d=$(srcdir); fi; \
sub/Makefile.in:	    if test -d $(srcdir)/$$file && test $$d != $(srcdir); then \
sub/Makefile.in:	      cp -fpR $(srcdir)/$$file "$(distdir)$$dir" || exit 1; \
sub/Makefile.in:	-test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)
sub/Makefile.in:	-test -z "$(top_builddir)/$(DEPDIR)/$(am__dirstamp)" || rm -f $(top_builddir)/$(DEPDIR)/$(am__dirstamp)
sub/Makefile.in:	-test -z "$(top_builddir)/$(am__dirstamp)" || rm -f $(top_builddir)/$(am__dirstamp)
sub/Makefile.in:		-rm -f $(top_builddir)/$(DEPDIR)/$(foo).Po
sub/Makefile.in:	-rm -f $(top_builddir)/$(DEPDIR)/bar.Po
sub/Makefile.in:		-rm -f $(top_builddir)/$(DEPDIR)/$(foo).Po
sub/Makefile.in:	-rm -f $(top_builddir)/$(DEPDIR)/bar.Po
+ /builds/dan/bootstrapinstall/bin/grep -E '\$.(top_)?srcdir./(test|ba[rz]|\$.foo.)\.[o$]' Makefile.in sub/Makefile.in
+ /builds/dan/bootstrapinstall/bin/grep -F '\$.(top_)?srcdir./.*$(am__dirstamp)' Makefile.in sub/Makefile.in
+ /builds/dan/bootstrapinstall/bin/grep -F '\$.(top_)?srcdir./.*$(DEPDIR)' Makefile.in sub/Makefile.in
+ cat
+ mkdir -p m/o/r/e
+ cp test.f90 m/o/r/e/test.f
+ cat
+ cat
+ cat
+ mkdir build
+ cd build
+ ../configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking dependency style of CC... none
checking whether we are using the GNU Fortran 77 compiler... no
checking whether f77 accepts -g... yes
checking whether we are using the GNU Fortran compiler... no
checking whether f90 accepts -g... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
config.status: executing depfiles commands
+ make
Making all in sub
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
source='../../sub/../bar.cc' object='../bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../depcomp \
CC -DPACKAGE_NAME=\"subobj-pr13928-more-langs\" -DPACKAGE_TARNAME=\"subobj-pr13928-more-langs\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"subobj-pr13928-more-langs\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"subobj-pr13928-more-langs\" -DVERSION=\"1.0\" -I. -I../../sub     -g -c -o ../bar.o ../../sub/../bar.cc
source='../../sub/../baz.c' object='../baz.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../depcomp \
c99 -DPACKAGE_NAME=\"subobj-pr13928-more-langs\" -DPACKAGE_TARNAME=\"subobj-pr13928-more-langs\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"subobj-pr13928-more-langs\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"subobj-pr13928-more-langs\" -DVERSION=\"1.0\" -I. -I../../sub     -mips4 -O1 -c -o ../baz.o ../../sub/../baz.c
CC  -g   -o foo ../bar.o ../baz.o  
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
f90  -g -c -o test.o ../test.f90
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

f90  -g   -o test test.o  
f77  -g -c -o m/o/r/e/test.o ../m/o/r/e/test.f
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

f77  -g   -o test2 m/o/r/e/test.o  
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
+ make test-objs
ls -la .. .
.:
total 236
drwxr-xr-x 6 dan user  4096 Jul  7 05:34 .
drwxr-xr-x 6 dan user  4096 Jul  7 05:34 ..
drwxr-xr-x 2 dan user    48 Jul  7 05:34 .deps
-rw-r--r-- 1 dan user     0 Jul  7 05:34 .dirstamp
-rw-r--r-- 1 dan user 28847 Jul  7 05:34 Makefile
-rw-r--r-- 1 dan user 90064 Jul  7 05:34 bar.o
-rw-r--r-- 1 dan user  2160 Jul  7 05:34 baz.o
-rw-r--r-- 1 dan user 18691 Jul  7 05:34 config.log
-rwxr-xr-x 1 dan user 30025 Jul  7 05:34 config.status
drwxr-xr-x 2 dan user    19 Jul  7 05:34 ii_files
drwxr-xr-x 3 dan user    14 Jul  7 05:34 m
drwxr-xr-x 2 dan user    31 Jul  7 05:34 sub
-rwxr-xr-x 1 dan user 21328 Jul  7 05:34 test
-rw-r--r-- 1 dan user  3032 Jul  7 05:34 test.o
-rwxr-xr-x 1 dan user 21484 Jul  7 05:34 test2

..:
total 472
drwxr-xr-x  6 dan user   4096 Jul  7 05:34 .
drwxr-xr-x 42 dan user 106496 Jul  7 05:34 ..
-rw-r--r--  1 dan user    697 Jul  7 05:34 Makefile.am
-rw-r--r--  1 dan user  27768 Jul  7 05:34 Makefile.in
-rw-r--r--  1 dan user  41888 Jul  7 05:34 aclocal.m4
drwxr-xr-x  2 dan user     81 Jul  7 05:34 autom4te.cache
-rw-r--r--  1 dan user    104 Jul  7 05:34 bar.cc
-rw-r--r--  1 dan user     48 Jul  7 05:34 baz.c
drwxr-xr-x  6 dan user   4096 Jul  7 05:34 build
-rwxr-xr-x  1 dan user   7383 Jul  7 05:34 compile
-rwxr-xr-x  1 dan user 169194 Jul  7 05:34 configure
-rw-r--r--  1 dan user    208 Jul  7 05:34 configure.ac
-rwxr-xr-x  1 dan user  23568 Jul  7 05:34 depcomp
-rwxr-xr-x  1 dan user  15368 Jul  7 05:34 install-sh
drwxr-xr-x  3 dan user     14 Jul  7 05:34 m
-rwxr-xr-x  1 dan user   6878 Jul  7 05:34 missing
drwxr-xr-x  2 dan user     54 Jul  7 05:34 sub
-rw-r--r--  1 dan user     39 Jul  7 05:34 test.f90
+ make distcheck
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
if test -d "subobj-pr13928-more-langs-1.0"; then find "subobj-pr13928-more-langs-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "subobj-pr13928-more-langs-1.0" || { sleep 5 && rm -rf "subobj-pr13928-more-langs-1.0"; }; else :; fi
test -d "subobj-pr13928-more-langs-1.0" || mkdir "subobj-pr13928-more-langs-1.0"
 (cd sub && make  top_distdir=../subobj-pr13928-more-langs-1.0 distdir=../subobj-pr13928-more-langs-1.0/sub \
     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
make  distdir-am
make[4]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
make[4]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/sub'
test -n "" \
|| find "subobj-pr13928-more-langs-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "subobj-pr13928-more-langs-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
tardir=subobj-pr13928-more-langs-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >subobj-pr13928-more-langs-1.0.tar.gz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build'
if test -d "subobj-pr13928-more-langs-1.0"; then find "subobj-pr13928-more-langs-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "subobj-pr13928-more-langs-1.0" || { sleep 5 && rm -rf "subobj-pr13928-more-langs-1.0"; }; else :; fi
case 'subobj-pr13928-more-langs-1.0.tar.gz' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc subobj-pr13928-more-langs-1.0.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc subobj-pr13928-more-langs-1.0.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc subobj-pr13928-more-langs-1.0.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc subobj-pr13928-more-langs-1.0.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c subobj-pr13928-more-langs-1.0.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc subobj-pr13928-more-langs-1.0.shar.gz | unshar ;;\
*.zip*) \
  unzip subobj-pr13928-more-langs-1.0.zip ;;\
esac
chmod -R a-w subobj-pr13928-more-langs-1.0
chmod u+w subobj-pr13928-more-langs-1.0
mkdir subobj-pr13928-more-langs-1.0/_build subobj-pr13928-more-langs-1.0/_build/sub subobj-pr13928-more-langs-1.0/_inst
chmod a-w subobj-pr13928-more-langs-1.0
test -d subobj-pr13928-more-langs-1.0/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd subobj-pr13928-more-langs-1.0/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd subobj-pr13928-more-langs-1.0/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf subobj-pr13928-more-langs-1.0.tar.gz \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking dependency style of CC... none
checking whether we are using the GNU Fortran 77 compiler... no
checking whether f77 accepts -g... yes
checking whether we are using the GNU Fortran compiler... no
checking whether f90 accepts -g... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub/Makefile
config.status: executing depfiles commands
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making all in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
source='../../../sub/../bar.cc' object='../bar.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../../depcomp \
CC -DPACKAGE_NAME=\"subobj-pr13928-more-langs\" -DPACKAGE_TARNAME=\"subobj-pr13928-more-langs\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"subobj-pr13928-more-langs\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"subobj-pr13928-more-langs\" -DVERSION=\"1.0\" -I. -I../../../sub     -g -c -o ../bar.o ../../../sub/../bar.cc
source='../../../sub/../baz.c' object='../baz.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../../depcomp \
c99 -DPACKAGE_NAME=\"subobj-pr13928-more-langs\" -DPACKAGE_TARNAME=\"subobj-pr13928-more-langs\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"subobj-pr13928-more-langs\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"subobj-pr13928-more-langs\" -DVERSION=\"1.0\" -I. -I../../../sub     -mips4 -O1 -c -o ../baz.o ../../../sub/../baz.c
CC  -g   -o foo ../bar.o ../baz.o  
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
f90  -g -c -o test.o ../../test.f90
No such feature exists (-5,116)

 The MIPSpro Fortran 90 Compiler 
 (license FEATURE string = f90) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

f90  -g   -o test test.o  
f77  -g -c -o m/o/r/e/test.o ../../m/o/r/e/test.f
No such feature exists (-5,116)

 The MIPSpro Fortran 77 Compiler 
 (license FEATURE string = f77) 
 requires a license password. 

 For license installation and trouble shooting 
 information visit the web page: 

         http://www.sgi.com/Support/Licensing/install_docs.html 

 To obtain a Permanent license (proof of purchase
 required) or an Evaluation license please
 visit our license request web page: 

         http://www.sgi.com/support/licensing/

         or send a blank email message to: 

         license@sgi.com 

 In North America, Silicon Graphics' customers may request 
 Permanent licenses by sending a facsimile to: 

         (650) 932-0537 

         or by calling our technical support hotline 

         1-800-800-4SGI 

 If you are Outside of North America or you are not a Silicon 
 Graphics support customer then contact your local support provider. 

f77  -g   -o test2 m/o/r/e/test.o  
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making dvi in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Nothing to be done for 'dvi'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Nothing to be done for 'dvi-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making check in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Nothing to be done for 'check'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make  check-local
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
ls -la ../.. .
.:
total 236
drwxr-xr-x 6 dan user  4096 Jul  7 05:34 .
drwxr-xr-x 3 dan user    16 Jul  7 05:34 ..
drwxr-xr-x 2 dan user    48 Jul  7 05:34 .deps
-rw-r--r-- 1 dan user     0 Jul  7 05:34 .dirstamp
-rw-r--r-- 1 dan user 29379 Jul  7 05:34 Makefile
-rw-r--r-- 1 dan user 90152 Jul  7 05:34 bar.o
-rw-r--r-- 1 dan user  2200 Jul  7 05:34 baz.o
-rw-r--r-- 1 dan user 19830 Jul  7 05:34 config.log
-rwxr-xr-x 1 dan user 30725 Jul  7 05:34 config.status
drwxr-xr-x 2 dan user    19 Jul  7 05:34 ii_files
drwxr-xr-x 3 dan user    14 Jul  7 05:34 m
drwxr-xr-x 2 dan user    31 Jul  7 05:34 sub
-rwxr-xr-x 1 dan user 21368 Jul  7 05:34 test
-rw-r--r-- 1 dan user  3072 Jul  7 05:34 test.o
-rwxr-xr-x 1 dan user 21568 Jul  7 05:34 test2

../..:
total 324
dr-xr-xr-x 6 dan user   4096 Jul  7 05:34 .
drwxr-xr-x 7 dan user   4096 Jul  7 05:34 ..
-r--r--r-- 1 dan user    697 Jul  7 05:34 Makefile.am
-r--r--r-- 1 dan user  27768 Jul  7 05:34 Makefile.in
drwxr-xr-x 3 dan user     16 Jul  7 05:34 _build
drwxr-xr-x 2 dan user      6 Jul  7 05:34 _inst
-r--r--r-- 1 dan user  41888 Jul  7 05:34 aclocal.m4
-r--r--r-- 1 dan user    104 Jul  7 05:34 bar.cc
-r--r--r-- 1 dan user     48 Jul  7 05:34 baz.c
-r-xr-xr-x 1 dan user   7383 Jul  7 05:34 compile
-r-xr-xr-x 1 dan user 169194 Jul  7 05:34 configure
-r--r--r-- 1 dan user    208 Jul  7 05:34 configure.ac
-r-xr-xr-x 1 dan user  23568 Jul  7 05:34 depcomp
-r-xr-xr-x 1 dan user  15368 Jul  7 05:34 install-sh
dr-xr-xr-x 3 dan user     14 Jul  7 05:34 m
-r-xr-xr-x 1 dan user   6878 Jul  7 05:34 missing
dr-xr-xr-x 2 dan user     54 Jul  7 05:34 sub
-r--r--r-- 1 dan user     39 Jul  7 05:34 test.f90
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making install in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin'
  /builds/dan/bootstrapinstall/bin/install -c foo '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin'
make[3]: Nothing to be done for 'install-data-am'.
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[3]: Nothing to be done for 'install-exec-am'.
make[3]: Nothing to be done for 'install-data-am'.
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making installcheck in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Nothing to be done for 'installcheck'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Nothing to be done for 'installcheck-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making uninstall in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
 ( cd '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin' && rm -f foo )
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Nothing to be done for 'uninstall-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making install in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
 /builds/dan/bootstrapinstall/bin/mkdir -p '/tmp/am-dc-1002867//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin'
  /builds/dan/bootstrapinstall/bin/install -c foo '/tmp/am-dc-1002867//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin'
make[3]: Nothing to be done for 'install-data-am'.
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[3]: Nothing to be done for 'install-exec-am'.
make[3]: Nothing to be done for 'install-data-am'.
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making uninstall in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
 ( cd '/tmp/am-dc-1002867//builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_inst/bin' && rm -f foo )
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[2]: Nothing to be done for 'uninstall-am'.
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make  dist-gzip am__post_remove_distdir='@:'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make  distdir-am
make[3]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
if test -d "subobj-pr13928-more-langs-1.0"; then find "subobj-pr13928-more-langs-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "subobj-pr13928-more-langs-1.0" || { sleep 5 && rm -rf "subobj-pr13928-more-langs-1.0"; }; else :; fi
test -d "subobj-pr13928-more-langs-1.0" || mkdir "subobj-pr13928-more-langs-1.0"
 (cd sub && make  top_distdir=../subobj-pr13928-more-langs-1.0 distdir=../subobj-pr13928-more-langs-1.0/sub \
     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)
make[4]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make  distdir-am
make[5]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[5]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[4]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
test -n "" \
|| find "subobj-pr13928-more-langs-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "subobj-pr13928-more-langs-1.0"
make[3]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
tardir=subobj-pr13928-more-langs-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >subobj-pr13928-more-langs-1.0.tar.gz
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
if test -d "subobj-pr13928-more-langs-1.0"; then find "subobj-pr13928-more-langs-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "subobj-pr13928-more-langs-1.0" || { sleep 5 && rm -rf "subobj-pr13928-more-langs-1.0"; }; else :; fi
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
Making distclean in sub
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
test -z "foo" || rm -f foo
rm -f *.o
rm -f ../*.o
rm -f *.tab.c
test -z "" || rm -f 
test . = "../../../sub" || test -z "" || rm -f 
test -z "../.deps/.dirstamp" || rm -f ../.deps/.dirstamp
test -z "../.dirstamp" || rm -f ../.dirstamp
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f ../.deps/baz.Po
rm -f ../.deps/bar.Po
rm -f Makefile
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub/sub'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
test -z "test test2" || rm -f test test2
rm -f *.o
rm -f m/o/r/e/*.o
rm -f *.tab.c
test -z "" || rm -f 
test . = "../.." || test -z "" || rm -f 
test -z "m/o/r/e/.deps/.dirstamp" || rm -f m/o/r/e/.deps/.dirstamp
test -z "m/o/r/e/.dirstamp" || rm -f m/o/r/e/.dirstamp
rm -f TAGS ID GTAGS GRTAGS GSYMS GPATH tags
rm -f cscope.out cscope.in.out cscope.po.out cscope.files
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
rm -f config.status config.cache config.log configure.lineno config.status.lineno
rm -f Makefile
ERROR: files left in build directory after distclean:
./ii_files/bar.ii
make[1]: *** [Makefile:719: distcleancheck] Error 1
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/subobj-pr13928-more-langs.dir/build/subobj-pr13928-more-langs-1.0/_build/sub'
make: *** [Makefile:650: distcheck] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/subobj-pr13928-more-langs.sh (exit status: 2)

SKIP: t/suffix2
===============

suffix2: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/suffix2.sh (exit status: 77)

FAIL: t/suffix3
===============

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir
+ plan_ 10
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x10 = xunknown
+ test x10 = xlater
+ test x10 = xlazy
+ test x10 = xnow
+ test 10 -ge 0
+ planned_=10
+ echo 1..10
1..10
+ cat
+ cat
+ command_ok_ aclocal aclocal-1.16 -Werror
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_=aclocal
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ aclocal-1.16 -Werror
+ result_ ok -D '' -r '' -- aclocal
+ set +x
ok 1 - aclocal
PASS: t/suffix3.tap 1 - aclocal
+ command_ok_ automake automake-1.16 --foreign -Werror -Wall
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_=automake
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ automake-1.16 --foreign -Werror -Wall
+ result_ ok -D '' -r '' -- automake
+ set +x
ok 2 - automake
PASS: t/suffix3.tap 2 - automake
+ command_ok_ 'intermediate files not mentioned' not /builds/dan/bootstrapinstall/bin/grep -F foo.c Makefile.in
+ tap_directive_=
+ tap_reason_=
+ test 6 -gt 0
+ tap_description_='intermediate files not mentioned'
+ shift
+ test 5 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ not /builds/dan/bootstrapinstall/bin/grep -F foo.c Makefile.in
+ /builds/dan/bootstrapinstall/bin/grep -F foo.c Makefile.in
+ result_ ok -D '' -r '' -- 'intermediate files not mentioned'
+ set +x
ok 3 - intermediate files not mentioned
PASS: t/suffix3.tap 3 - intermediate files not mentioned
+ command_ok_ 'final object file figured out' /builds/dan/bootstrapinstall/bin/grep -F 'foo.$(OBJEXT)' Makefile.in
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='final object file figured out'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ /builds/dan/bootstrapinstall/bin/grep -F 'foo.$(OBJEXT)' Makefile.in
am_foo_OBJECTS = foo.$(OBJEXT)
+ result_ ok -D '' -r '' -- 'final object file figured out'
+ set +x
ok 4 - final object file figured out
PASS: t/suffix3.tap 4 - final object file figured out
+ command_ok_ autoconf autoconf
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_=autoconf
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ autoconf
+ result_ ok -D '' -r '' -- autoconf
+ set +x
ok 5 - autoconf
PASS: t/suffix3.tap 5 - autoconf
+ command_ok_ configure ./configure
+ tap_directive_=
+ tap_reason_=
+ test 2 -gt 0
+ tap_description_=configure
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ result_ ok -D '' -r '' -- configure
+ set +x
ok 6 - configure
PASS: t/suffix3.tap 6 - configure
+ cat
+ directive=
+ make_can_chain_suffix_rules
+ test -z ''
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ am__can_chain_suffix_rules=yes
+ return 0
+ for target in all distcheck
+ command_ok_ 'make all' -D '' -r 'suffix rules not chained' make all
+ tap_directive_=
+ tap_reason_=
+ test 7 -gt 0
+ tap_description_='make all'
+ shift
+ test 6 -gt 0
+ case $1 in
+ tap_directive_=
+ shift
+ shift
+ test 4 -gt 0
+ case $1 in
+ tap_reason_='suffix rules not chained'
+ shift
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make all
sed 's/INTEGER/int/g' `test -f 'foo.zoo' || echo ./`foo.zoo >foo.cc
source='foo.cc' object='foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./depcomp \
CC -DPACKAGE_NAME=\"suffix3\" -DPACKAGE_TARNAME=\"suffix3\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"suffix3\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"suffix3\" -DVERSION=\"1.0\" -I.     -g -c -o foo.o foo.cc
cc-3173 CC: ERROR File = foo.cc, Line = 1
  The name must be a namespace name.

  using namespace std;
                  ^

1 error detected in the compilation of "foo.cc".
make: *** [Makefile:375: foo.o] Error 2
rm foo.cc
+ tap_result_='not ok'
+ result_ 'not ok' -D '' -r 'suffix rules not chained' -- 'make all'
+ set +x
not ok 7 - make all
FAIL: t/suffix3.tap 7 - make all
+ for target in all distcheck
+ command_ok_ 'make distcheck' -D '' -r 'suffix rules not chained' make distcheck
+ tap_directive_=
+ tap_reason_=
+ test 7 -gt 0
+ tap_description_='make distcheck'
+ shift
+ test 6 -gt 0
+ case $1 in
+ tap_directive_=
+ shift
+ shift
+ test 4 -gt 0
+ case $1 in
+ tap_reason_='suffix rules not chained'
+ shift
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make distcheck
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
make  distdir-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
if test -d "suffix3-1.0"; then find "suffix3-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "suffix3-1.0" || { sleep 5 && rm -rf "suffix3-1.0"; }; else :; fi
test -d "suffix3-1.0" || mkdir "suffix3-1.0"
test -n "" \
|| find "suffix3-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "suffix3-1.0"
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
tardir=suffix3-1.0 && ${TAR-tar} chof - "$tardir" | eval GZIP= gzip --best -c >suffix3-1.0.tar.gz
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
if test -d "suffix3-1.0"; then find "suffix3-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "suffix3-1.0" || { sleep 5 && rm -rf "suffix3-1.0"; }; else :; fi
case 'suffix3-1.0.tar.gz' in \
*.tar.gz*) \
  eval GZIP= gzip --best -dc suffix3-1.0.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc suffix3-1.0.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc suffix3-1.0.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc suffix3-1.0.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c suffix3-1.0.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  eval GZIP= gzip --best -dc suffix3-1.0.shar.gz | unshar ;;\
*.zip*) \
  unzip suffix3-1.0.zip ;;\
esac
chmod -R a-w suffix3-1.0
chmod u+w suffix3-1.0
mkdir suffix3-1.0/_build suffix3-1.0/_build/sub suffix3-1.0/_inst
chmod a-w suffix3-1.0
test -d suffix3-1.0/_build || exit 0; \
dc_install_base=`CDPATH="${ZSH_VERSION+.}:" && cd suffix3-1.0/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
  && dc_destdir="${TMPDIR-/tmp}/am-dc-$$/" \
  && am__cwd=`pwd` \
  && CDPATH="${ZSH_VERSION+.}:" && cd suffix3-1.0/_build/sub \
  && ../../configure \
     \
     \
    --srcdir=../.. --prefix="$dc_install_base" \
  && make  \
  && make  dvi \
  && make  check \
  && make  install \
  && make  installcheck \
  && make  uninstall \
  && make  distuninstallcheck_dir="$dc_install_base" \
        distuninstallcheck \
  && chmod -R a-w "$dc_install_base" \
  && ({ \
       (cd ../.. && umask 077 && mkdir "$dc_destdir") \
       && make  DESTDIR="$dc_destdir" install \
       && make  DESTDIR="$dc_destdir" uninstall \
       && make  DESTDIR="$dc_destdir" \
            distuninstallcheck_dir="$dc_destdir" distuninstallcheck; \
      } || { rm -rf "$dc_destdir"; exit 1; }) \
  && rm -rf "$dc_destdir" \
  && make  dist \
  && rm -rf suffix3-1.0.tar.gz \
  && make  distcleancheck \
  && cd "$am__cwd" \
  || exit 1
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir/suffix3-1.0/_build/sub'
sed 's/INTEGER/int/g' `test -f '../../foo.zoo' || echo ../../`../../foo.zoo >foo.cc
source='foo.cc' object='foo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../../depcomp \
CC -DPACKAGE_NAME=\"suffix3\" -DPACKAGE_TARNAME=\"suffix3\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"suffix3\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"suffix3\" -DVERSION=\"1.0\" -I. -I../..     -g -c -o foo.o foo.cc
cc-3173 CC: ERROR File = foo.cc, Line = 1
  The name must be a namespace name.

  using namespace std;
                  ^

1 error detected in the compilation of "foo.cc".
make[1]: *** [Makefile:375: foo.o] Error 2
rm foo.cc
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir/suffix3-1.0/_build/sub'
make: *** [Makefile:535: distcheck] Error 1
+ tap_result_='not ok'
+ result_ 'not ok' -D '' -r 'suffix rules not chained' -- 'make distcheck'
+ set +x
not ok 8 - make distcheck
FAIL: t/suffix3.tap 8 - make distcheck
+ command_ok_ 'make distdir' make distdir
+ tap_directive_=
+ tap_reason_=
+ test 3 -gt 0
+ tap_description_='make distdir'
+ shift
+ test 2 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ make distdir
make  distdir-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
if test -d "suffix3-1.0"; then find "suffix3-1.0" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "suffix3-1.0" || { sleep 5 && rm -rf "suffix3-1.0"; }; else :; fi
test -d "suffix3-1.0" || mkdir "suffix3-1.0"
test -n "" \
|| find "suffix3-1.0" -type d ! -perm -755 \
	-exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/sh /builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir/install-sh -c -m a+r {} {} \; \
|| chmod -R a+r "suffix3-1.0"
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/suffix3.dir'
+ result_ ok -D '' -r '' -- 'make distdir'
+ set +x
ok 9 - make distdir
PASS: t/suffix3.tap 9 - make distdir
+ command_ok_ 'intermediate file not distributed' test '!' -e suffix3-1.0/foo.cc
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='intermediate file not distributed'
+ shift
+ test 4 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ test '!' -e suffix3-1.0/foo.cc
+ result_ ok -D '' -r '' -- 'intermediate file not distributed'
+ set +x
ok 10 - intermediate file not distributed
PASS: t/suffix3.tap 10 - intermediate file not distributed
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 10 = later
+ test 0 -eq 0
+ test 8 -eq 10
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

SKIP: t/suffix5
===============

suffix5: running libtool --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtool: command not found
SKIP t/suffix5.sh (exit status: 77)

SKIP: t/suffix8
===============

suffix8: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
1..0 # SKIP required program 'libtoolize' not available
SKIP: t/suffix8.tap - required program 'libtoolize' not available

SKIP: t/suffix10
================

suffix10: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
1..0 # SKIP required program 'libtoolize' not available
SKIP: t/suffix10.tap - required program 'libtoolize' not available

PASS: t/tap-bad-prog
====================

Running from installcheck: no
Test Protocol: tap
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/tap-bad-prog.dir
+ fetch_tap_driver
+ AM_TAP_AWK=gawk
+ export AM_TAP_AWK
+ get_shell_script tap-driver.sh tap-driver
+ am_source=tap-driver.sh
+ am_target=tap-driver
+ test '!' -f tap-driver
+ test x = xyes
+ cp -f /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/tap-driver.sh tap-driver
+ sed 10q tap-driver
#! /bin/sh
# Copyright (C) 2011-2018 Free Software Foundation, Inc.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
+ unset am_target am_source
+ plan_ 6
+ test 1 -eq 0
+ test 1 -ge 2
+ test xnone '!=' xnone
+ test x6 = xunknown
+ test x6 = xlater
+ test x6 = xlazy
+ test x6 = xnow
+ test 6 -ge 0
+ planned_=6
+ echo 1..6
1..6
+ cat
+ cat
+ cat
+ cp noexec.test noread.test
+ chmod a-r noread.test
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
+ command_ok_ '"make check" returns non-zero exit status' run_make -O -e FAIL check
+ tap_directive_=
+ tap_reason_=
+ test 6 -gt 0
+ tap_description_='"make check" returns non-zero exit status'
+ shift
+ test 5 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ run_make -O -e FAIL check
+ am__make_redirect_stdout=no
+ am__make_redirect_stderr=no
+ am__make_redirect_stdall=no
+ am__make_flags=
+ am__make_rc_exp=0
+ am_make_rc=0
+ test 4 -gt 0
+ case $1 in
+ am__make_redirect_stdout=yes
+ shift
+ test 3 -gt 0
+ case $1 in
+ am__make_rc_exp=FAIL
+ shift
+ shift
+ test 1 -gt 0
+ case $1 in
+ break
+ using_gmake
+ case $am__using_gmake in
+ make --version -v
+ grep GNU
GNU Make 4.2.1
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
+ am__using_gmake=yes
+ return 0
+ :
+ test x '!=' x
+ : exec make check
+ set +x
make[2]: *** [Makefile:474: test-suite.log] Error 1
make[1]: *** [Makefile:582: check-TESTS] Error 2
make: *** [Makefile:774: check-am] Error 2
+ am_make_rc=2
+ test 2 -eq 253
+ test no = yes
+ test yes = yes
+ cat stdout
make  check-TESTS
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/tap-bad-prog.dir'
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/tap-bad-prog.dir'
ERROR: none.test - missing test plan
ERROR: none.test - exited with status 127 (command not found?)
ERROR: noread.test - missing test plan
ERROR: noread.test - exited with status 126
ERROR: noexec.test - missing test plan
ERROR: noexec.test - exited with status 126
============================================================================
Testsuite summary for tap-bad-prog 1.0
============================================================================
# TOTAL: 6
# PASS:  0
# SKIP:  0
# XFAIL: 0
# FAIL:  0
# XPASS: 0
# ERROR: 6
============================================================================
See ./test-suite.log
============================================================================
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/tap-bad-prog.dir'
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/tap-bad-prog.dir'
+ test no = yes
+ case $am__make_rc_exp in
+ test 2 -gt 0
+ result_ ok -D '' -r '' -- '"make check" returns non-zero exit status'
+ set +x
ok 1 - "make check" returns non-zero exit status
PASS: t/tap-bad-prog.tap 1 - "make check" returns non-zero exit status
+ command_ok_ 'non-existent test is reported' grep '^ERROR: none\.test' stdout
+ tap_directive_=
+ tap_reason_=
+ test 4 -gt 0
+ tap_description_='non-existent test is reported'
+ shift
+ test 3 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ grep '^ERROR: none\.test' stdout
ERROR: none.test - missing test plan
ERROR: none.test - exited with status 127 (command not found?)
+ result_ ok -D '' -r '' -- 'non-existent test is reported'
+ set +x
ok 2 - non-existent test is reported
PASS: t/tap-bad-prog.tap 2 - non-existent test is reported
+ desc='non-executable test is reported'
+ ./noexec.test
./t/tap-bad-prog.tap: line 62: ./noexec.test: Permission denied
+ command_ok_ 'non-executable test is reported' -- grep '^ERROR: noexec\.test' stdout
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='non-executable test is reported'
+ shift
+ test 4 -gt 0
+ case $1 in
+ shift
+ break
+ tap_result_=ok
+ grep '^ERROR: noexec\.test' stdout
ERROR: noexec.test - missing test plan
ERROR: noexec.test - exited with status 126
+ result_ ok -D '' -r '' -- 'non-executable test is reported'
+ set +x
ok 3 - non-executable test is reported
PASS: t/tap-bad-prog.tap 3 - non-executable test is reported
+ desc='non-readable test is reported'
+ test -r noread.test
+ command_ok_ 'non-readable test is reported' -- grep '^ERROR: noread\.test' stdout
+ tap_directive_=
+ tap_reason_=
+ test 5 -gt 0
+ tap_description_='non-readable test is reported'
+ shift
+ test 4 -gt 0
+ case $1 in
+ shift
+ break
+ tap_result_=ok
+ grep '^ERROR: noread\.test' stdout
ERROR: noread.test - missing test plan
ERROR: noread.test - exited with status 126
+ result_ ok -D '' -r '' -- 'non-readable test is reported'
+ set +x
ok 4 - non-readable test is reported
PASS: t/tap-bad-prog.tap 4 - non-readable test is reported
+ command_ok_ 'no spurious "missing plan" message' -D TODO -- not grep 'missing.* plan' stdout
+ tap_directive_=
+ tap_reason_=
+ test 8 -gt 0
+ tap_description_='no spurious "missing plan" message'
+ shift
+ test 7 -gt 0
+ case $1 in
+ tap_directive_=TODO
+ shift
+ shift
+ test 5 -gt 0
+ case $1 in
+ shift
+ break
+ tap_result_=ok
+ not grep 'missing.* plan' stdout
+ grep 'missing.* plan' stdout
ERROR: none.test - missing test plan
ERROR: noread.test - missing test plan
ERROR: noexec.test - missing test plan
+ tap_result_='not ok'
+ result_ 'not ok' -D TODO -r '' -- 'no spurious "missing plan" message'
+ set +x
not ok 5 - no spurious "missing plan" message # TODO
XFAIL: t/tap-bad-prog.tap 5 - no spurious "missing plan" message # TODO
+ command_ok_ 'no spurious results' -D TODO -r 'still get "missing plan"' count_test_results total=3 pass=0 fail=0 xpass=0 xfail=0 skip=0 error=3
+ tap_directive_=
+ tap_reason_=
+ test 13 -gt 0
+ tap_description_='no spurious results'
+ shift
+ test 12 -gt 0
+ case $1 in
+ tap_directive_=TODO
+ shift
+ shift
+ test 10 -gt 0
+ case $1 in
+ tap_reason_='still get "missing plan"'
+ shift
+ shift
+ test 8 -gt 0
+ case $1 in
+ break
+ tap_result_=ok
+ count_test_results total=3 pass=0 fail=0 xpass=0 xfail=0 skip=0 error=3
+ total=ERR
+ pass=ERR
+ fail=ERR
+ xpass=ERR
+ xfail=ERR
+ skip=ERR
+ error=ERR
+ eval total=3 pass=0 fail=0 xpass=0 xfail=0 skip=0 error=3
++ total=3
++ pass=0
++ fail=0
++ xpass=0
++ xfail=0
++ skip=0
++ error=3
+ /builds/dan/bootstrapinstall/bin/grep -E -i '(total|x?pass|x?fail|skip|error)' stdout
ERROR: none.test - missing test plan
ERROR: none.test - exited with status 127 (command not found?)
ERROR: noread.test - missing test plan
ERROR: noread.test - exited with status 126
ERROR: noexec.test - missing test plan
ERROR: noexec.test - exited with status 126
# TOTAL: 6
# PASS:  0
# SKIP:  0
# XFAIL: 0
# FAIL:  0
# XPASS: 0
# ERROR: 6
+ rc=0
+ set +e
++ grep -c '^PASS:' stdout
+ test 0 -eq 0
++ grep -c '^XFAIL:' stdout
+ test 0 -eq 0
++ grep -c '^SKIP:' stdout
+ test 0 -eq 0
++ grep -c '^FAIL:' stdout
+ test 0 -eq 0
++ grep -c '^XPASS:' stdout
+ test 0 -eq 0
++ grep -c '^ERROR:' stdout
+ test 6 -eq 3
+ rc=1
+ grep '^# TOTAL:  *3$' stdout
+ rc=1
+ grep '^# PASS:  *0$' stdout
# PASS:  0
+ grep '^# XFAIL:  *0$' stdout
# XFAIL: 0
+ grep '^# SKIP:  *0$' stdout
# SKIP:  0
+ grep '^# FAIL:  *0$' stdout
# FAIL:  0
+ grep '^# XPASS:  *0$' stdout
# XPASS: 0
+ grep '^# ERROR:  *3$' stdout
+ rc=1
+ test 1 -eq 0
+ tap_result_='not ok'
+ result_ 'not ok' -D TODO -r 'still get "missing plan"' -- 'no spurious results'
+ set +x
not ok 6 - no spurious results # TODO still get "missing plan"
XFAIL: t/tap-bad-prog.tap 6 - no spurious results # TODO still get "missing plan"
+ :
+ am_exit_trap 0
+ exit_status=0
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test tap = tap
+ test 6 = later
+ test 0 -eq 0
+ test 4 -eq 6
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x

SKIP: t/txinfo-absolute-srcdir-pr408
====================================

txinfo-absolute-srcdir-pr408: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-absolute-srcdir-pr408.sh (exit status: 77)

SKIP: t/txinfo-builddir
=======================

txinfo-builddir: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-builddir.sh (exit status: 77)

SKIP: t/txinfo-clean
====================

txinfo-clean: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-clean.sh (exit status: 77)

SKIP: t/txinfo-info-in-srcdir
=============================

txinfo-info-in-srcdir: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-info-in-srcdir.sh (exit status: 77)

SKIP: t/txinfo-include
======================

txinfo-include: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-include.sh (exit status: 77)

SKIP: t/txinfo-makeinfo-error-no-clobber
========================================

txinfo-makeinfo-error-no-clobber: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-makeinfo-error-no-clobber.sh (exit status: 77)

SKIP: t/txinfo-many-output-formats
==================================

txinfo-many-output-formats: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-many-output-formats.sh (exit status: 77)

SKIP: t/txinfo-many-output-formats-vpath
========================================

txinfo-many-output-formats-vpath: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-many-output-formats-vpath.sh (exit status: 77)

SKIP: t/txinfo-nodist-info
==========================

txinfo-nodist-info: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-nodist-info.sh (exit status: 77)

SKIP: t/txinfo-no-clutter
=========================

txinfo-no-clutter: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-no-clutter.sh (exit status: 77)

SKIP: t/txinfo-no-installinfo
=============================

txinfo-no-installinfo: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-no-installinfo.sh (exit status: 77)

SKIP: t/txinfo-override-texinfo-tex
===================================

txinfo-override-texinfo-tex: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-override-texinfo-tex.sh (exit status: 77)

SKIP: t/txinfo-subdir-pr343
===========================

txinfo-subdir-pr343: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-subdir-pr343.sh (exit status: 77)

SKIP: t/txinfo-tex-dist
=======================

txinfo-tex-dist: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-tex-dist.sh (exit status: 77)

SKIP: t/txinfo-vtexi4
=====================

txinfo-vtexi4: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-vtexi4.sh (exit status: 77)

SKIP: t/txinfo-without-info-suffix
==================================

txinfo-without-info-suffix: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo-without-info-suffix.sh (exit status: 77)

SKIP: t/txinfo19
================

txinfo19: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo19.sh (exit status: 77)

SKIP: t/txinfo23
================

txinfo23: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo23.sh (exit status: 77)

SKIP: t/txinfo24
================

txinfo24: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo24.sh (exit status: 77)

SKIP: t/txinfo25
================

txinfo25: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo25.sh (exit status: 77)

SKIP: t/txinfo28
================

txinfo28: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/txinfo28.sh (exit status: 77)

SKIP: t/upc
===========

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/upc.dir
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether make supports the include directive... yes (GNU style)
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking dependency style of cc... none
checking for upcc... no
checking for upc... no
configure: error: no Unified Parallel C compiler was found
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/upc.sh (exit status: 77)

SKIP: t/upc3
============

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/upc3.dir
+ cat
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ automake-1.16 --foreign -Werror -Wall
+ autoconf
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... no
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking whether cc understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of cc... none
checking for upcc... no
checking for upc... no
configure: error: no Unified Parallel C compiler was found
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/upc3.sh (exit status: 77)

SKIP: t/vala-headers
====================

vala-headers: running pkg-config --version
0.29.2
vala-headers: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-headers.sh (exit status: 77)

SKIP: t/vala-libs
=================

vala-libs: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-libs.sh (exit status: 77)

SKIP: t/vala-mix
================

vala-mix: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-mix.sh (exit status: 77)

SKIP: t/vala-mix2
=================

vala-mix2: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-mix2.sh (exit status: 77)

SKIP: t/vala-non-recursive-setup
================================

vala-non-recursive-setup: running pkg-config --version
0.29.2
vala-non-recursive-setup: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-non-recursive-setup.sh (exit status: 77)

SKIP: t/vala-parallel
=====================

vala-parallel: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-parallel.sh (exit status: 77)

SKIP: t/vala-per-target-flags
=============================

vala-per-target-flags: running pkg-config --version
0.29.2
vala-per-target-flags: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-per-target-flags.sh (exit status: 77)

SKIP: t/vala-recursive-setup
============================

vala-recursive-setup: running pkg-config --version
0.29.2
vala-recursive-setup: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-recursive-setup.sh (exit status: 77)

SKIP: t/vala-vapi
=================

vala-vapi: running pkg-config --version
0.29.2
vala-vapi: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-vapi.sh (exit status: 77)

SKIP: t/vala-vpath
==================

vala-vpath: running valac --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 975: valac: command not found
SKIP t/vala-vpath.sh (exit status: 77)

SKIP: t/vartypo2
================

vartypo2: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
SKIP t/vartypo2.sh (exit status: 77)

SKIP: t/version7
================

version7: running makeinfo --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: makeinfo: command not found
SKIP t/version7.sh (exit status: 77)

FAIL: t/yacc-cxx
================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-cxx.dir
+ cat
+ cat
+ cat
+ cp parse1.yy parse2.y++
+ cp parse1.yy parse3.yxx
+ cp parse1.yy parse4.ypp
+ cat
+ cp foo.cc bar.c++
+ cp foo.cc bar2.cxx
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking for bison... yacc
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make
/bin/sh ./ylwrap parse1.yy y.tab.c parse1.cc y.tab.h `echo parse1.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output parse1.output -- yacc  
source='parse1.cc' object='parse1.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ./depcomp \
CC -DPACKAGE_NAME=\"yacc-cxx\" -DPACKAGE_TARNAME=\"yacc-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-cxx\" -DVERSION=\"1.0\" -I.     -g -c -o parse1.o parse1.cc
cc-1040 CC: ERROR File = parse1.yy, Line = 6
  An identifier is expected.

  int yylex (void) { return std::getchar (); }
                                 ^

cc-1311 CC: ERROR File = parse1.yy, Line = 19
  The indicated linkage specification is incompatible with previous "yylex"
          (declared at line 6).

  	extern int yylex(void);
  	           ^

cc-1020 CC: ERROR File = parse1.yy, Line = 10
  The identifier "exit" is undefined.

  { exit(0); } break;
    ^

3 errors detected in the compilation of "parse1.cc".
make: *** [Makefile:448: parse1.o] Error 2
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-cxx.sh (exit status: 2)

FAIL: t/yacc-bison-skeleton-cxx
===============================

yacc-bison-skeleton-cxx: running bison --version
GNU Bison version 1.25
Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ mkdir build
+ cd build
+ ../configure 'YACC=bison -y'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking for bison... bison -y
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make
/bin/sh ../ylwrap ../zardoz.yy y.tab.c zardoz.cc y.tab.h `echo zardoz.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output zardoz.output -- bison -y -d 
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 1) error: unrecognized: %skeleton
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 1) error:    Skipping to next %
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 2) error: unrecognized: %defines
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 2) error:    Skipping to next %
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 3) error: unrecognized: %locations
("/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton-cxx.dir/build/../zardoz.yy", line 3) error:    Skipping to next %
make: *** [Makefile:414: zardoz.cc] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-bison-skeleton-cxx.sh (exit status: 2)

FAIL: t/yacc-bison-skeleton
===========================

yacc-bison-skeleton: running bison --version
GNU Bison version 1.25
Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-bison-skeleton.dir
+ cat
+ cat
+ cat
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ mkdir build
+ cd build
+ ../configure 'YACC=bison -y'
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking for inline... inline
checking for bison... bison -y
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make
/bin/sh ../ylwrap ../zardoz.y y.tab.c zardoz.c y.tab.h `echo zardoz.c | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output zardoz.output -- bison -y -d --skeleton glr.c 
bison: unrecognized option `--skeleton'
Usage: bison [-dhklntvyV] [-b file-prefix] [-o outfile] [-p name-prefix]
       [--debug] [--defines] [--fixed-output-files] [--no-lines]
       [--verbose] [--version] [--help] [--yacc]
       [--no-parser] [--token-table]
       [--file-prefix=prefix] [--name-prefix=prefix]
       [--output=outfile] grammar-file
make: *** [Makefile:398: zardoz.c] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-bison-skeleton.sh (exit status: 2)

FAIL: t/yacc-clean-cxx
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-clean-cxx.dir
+ cat
+ cat
+ mkdir sub1 sub2
+ cat
+ cat
+ cat
+ cp sub1/parsefoo.yxx sub1/parsebar.yy
+ cp sub1/parsefoo.yxx sub2/parsefoo.yxx
+ cp sub1/parsefoo.yxx sub2/parsebar.yy
+ cat
+ cp sub1/mainfoo.cc sub1/mainbar.cpp
+ cp sub1/mainfoo.cc sub1/mainbaz.c++
+ cp sub1/mainfoo.cc sub1/mainqux.cxx
+ cp sub1/mainbar.cpp sub1/mainbaz.c++ sub1/mainfoo.cc sub1/mainqux.cxx sub2
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking for bison... yacc
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating sub1/Makefile
config.status: creating sub2/Makefile
config.status: executing depfiles commands
+ cp config.status config.sav
+ make
Making all in sub1
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-clean-cxx.dir/sub1'
source='mainfoo.cc' object='mainfoo.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
CC -DPACKAGE_NAME=\"yacc-clean-cxx\" -DPACKAGE_TARNAME=\"yacc-clean-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-clean-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-clean-cxx\" -DVERSION=\"1.0\" -I.     -g -c -o mainfoo.o mainfoo.cc
cc-3173 CC: ERROR File = mainfoo.cc, Line = 2
  The name must be a namespace name.

  using namespace std;
                  ^

1 error detected in the compilation of "mainfoo.cc".
make[1]: *** [Makefile:429: mainfoo.o] Error 2
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-clean-cxx.dir/sub1'
make: *** [Makefile:334: all-recursive] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-clean-cxx.sh (exit status: 2)

FAIL: t/yacc-d-cxx
==================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-d-cxx.dir
+ cat
+ mkdir foo bar baz qux baz/sub
+ cat
+ cp Makefile.am foo/Makefile.am
+ cp Makefile.am bar/Makefile.am
+ cp Makefile.am baz/Makefile.am
+ cp Makefile.am qux/Makefile.am
+ cat
+ aclocal-1.16 -Werror
+ autoconf
+ cp /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/ylwrap .
+ automake-1.16 --foreign -Werror -Wall Makefile
+ cat
+ automake-1.16 --foreign -Werror -Wall -Wno-gnu foo/Makefile
+ write_parse parse.hh
+ header=parse.hh
+ unindent
+ test x = x
++ printf '%s\n' '
  /^$/b                    # Nothing to do for empty lines.
  x                        # Get x<indent> into pattern space.
  /^$/{                    # No prior x<indent>, go prepare it.
    g                      # Copy this 1st non-blank line into pattern space.
    s/^\([	 ]*\).*/x\1/   # Prepare x<indent> in pattern space.
  }                        # Now: x<indent> in pattern and <line> in hold.
  G                        # Build x<indent>\n<line> in pattern space, and
  h                        # duplicate it into hold space.
  s/\n.*$//                # Restore x<indent> in pattern space, and
  x                        # exchange with the above duplicate in hold space.
  s/^x\(.*\)\n\1//         # Remove leading <indent> from <line>.
  s/^x.*\n//               # Restore <line> when there is no leading <indent>.
'
++ sed -e 's/  *# .*//'
+ sed_unindent_prog='
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ write_main parse.hh
+ header=parse.hh
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ cat
+ automake-1.16 --foreign -Werror -Wall bar/Makefile
+ write_parse parse.hpp
+ header=parse.hpp
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ write_main parse.hpp
+ header=parse.hpp
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ cat
+ automake-1.16 --foreign -Werror -Wall baz/Makefile
+ write_parse sub/parse.h++
+ header=sub/parse.h++
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ write_main sub/parse.h++
+ header=sub/parse.h++
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ cat
+ automake-1.16 --foreign -Werror -Wall qux/Makefile
+ write_parse maude-parse.hxx
+ header=maude-parse.hxx
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ write_main maude-parse.hxx
+ header=maude-parse.hxx
+ unindent
+ test 'x
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//' = x
+ sed '
  /^$/b
  x
  /^$/{
    g
    s/^\([	 ]*\).*/x\1/
  }
  G
  h
  s/\n.*$//
  x
  s/^x\(.*\)\n\1//
  s/^x.*\n//'
+ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of CC... none
checking for bison... yacc
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating foo/Makefile
config.status: creating bar/Makefile
config.status: creating baz/Makefile
config.status: creating qux/Makefile
config.status: executing depfiles commands
+ make
Making all in foo
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-d-cxx.dir/foo'
/bin/sh ../ylwrap parse.yy y.tab.c parse.cc y.tab.h `echo parse.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output parse.output -- yacc  -d
updating parse.hh
make  all-am
make[2]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-d-cxx.dir/foo'
source='parse.cc' object='parse.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
CC -DPACKAGE_NAME=\"yacc-d-cxx\" -DPACKAGE_TARNAME=\"yacc-d-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-d-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-d-cxx\" -DVERSION=\"1.0\" -I.     -g -c -o parse.o parse.cc
cc-1311 CC: ERROR File = parse.yy, Line = 18
  The indicated linkage specification is incompatible with previous "yylex"
          (declared at line 5).

  	extern int yylex(void);
  	           ^

1 error detected in the compilation of "parse.cc".
make[2]: *** [Makefile:373: parse.o] Error 2
make[2]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-d-cxx.dir/foo'
make[1]: *** [Makefile:272: all] Error 2
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-d-cxx.dir/foo'
make: *** [Makefile:331: all-recursive] Error 1
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-d-cxx.sh (exit status: 2)

FAIL: t/yacc-mix-c-cxx
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-mix-c-cxx.dir
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ cat
+ edit
+ sed -e s/FOOBAR/BAZQUUX/ -e 's/"parse\.hh"/"parse3.hxx"/'
+ edit
+ sed -e s/FOOBAR/BAZQUUX/ -e 's/"parse\.hh"/"parse3.hxx"/'
+ aclocal-1.16 -Werror
+ autoconf
+ automake-1.16 --foreign -Werror -Wall -a
configure.ac: installing './ylwrap'
+ for try in 0 1
+ test 0 -eq 0
+ mkdir build
+ cd build
+ srcdir=..
+ debug_info='ls -l . ..'
+ run_make=make
+ ../configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking for gcc... c99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... no
checking whether c99 accepts -g... yes
checking for c99 option to accept ISO C89... none needed
checking whether c99 understands -c and -o together... yes
checking whether make supports the include directive... yes (GNU style)
checking dependency style of c99... none
checking whether we are using the GNU C++ compiler... no
checking whether CC accepts -g... yes
checking dependency style of CC... none
checking for bison... yacc
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: executing depfiles commands
+ make
/bin/sh ../ylwrap ../p.y y.tab.c p.c y.tab.h `echo p.c | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output p.output -- yacc -d 
updating p.h
/bin/sh ../ylwrap ../parse.yy y.tab.c parse.cc y.tab.h `echo parse.cc | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output parse.output -- yacc -d 
updating parse.hh
/bin/sh ../ylwrap ../parse3.yxx y.tab.c parse3.cxx y.tab.h `echo parse3.cxx | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output parse3.output -- yacc -d 
updating parse3.hxx
make  all-am
make[1]: Entering directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-mix-c-cxx.dir/build'
source='p.c' object='p.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
c99 -DPACKAGE_NAME=\"yacc-mix-c-cxx\" -DPACKAGE_TARNAME=\"yacc-mix-c-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-mix-c-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-mix-c-cxx\" -DVERSION=\"1.0\" -I. -I..     -mips4 -O1 -c -o p.o p.c
source='../1.c' object='1.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
c99 -DPACKAGE_NAME=\"yacc-mix-c-cxx\" -DPACKAGE_TARNAME=\"yacc-mix-c-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-mix-c-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-mix-c-cxx\" -DVERSION=\"1.0\" -I. -I..     -mips4 -O1 -c -o 1.o ../1.c
cc-1196 c99: WARNING File = ../1.c, Line = 5
  The indicated function is declared implicitly.

      return yyparse () + new;
             ^

c99  -mips4 -O1   -o c1 p.o 1.o  
\
 \
/bin/sh ../ylwrap `test -f 'p.y' || echo '../'`p.y y.tab.c c2-p.c y.tab.h `echo c2-p.c | sed -e s/cc$/hh/ -e s/cpp$/hpp/ -e s/cxx$/hxx/ -e s/c++$/h++/ -e s/c$/h/` y.output c2-p.output -- yacc  
source='c2-p.c' object='c2-p.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
c99 -DPACKAGE_NAME=\"yacc-mix-c-cxx\" -DPACKAGE_TARNAME=\"yacc-mix-c-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-mix-c-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-mix-c-cxx\" -DVERSION=\"1.0\" -I. -I..     -mips4 -O1 -c -o c2-p.o c2-p.c
source='../2.c' object='2.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
c99 -DPACKAGE_NAME=\"yacc-mix-c-cxx\" -DPACKAGE_TARNAME=\"yacc-mix-c-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-mix-c-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-mix-c-cxx\" -DVERSION=\"1.0\" -I. -I..     -mips4 -O1 -c -o 2.o ../2.c
c99  -mips4 -O1   -o c2 c2-p.o 2.o  
source='parse.cc' object='parse.o' libtool=no \
DEPDIR=.deps depmode=none /bin/sh ../depcomp \
CC -DPACKAGE_NAME=\"yacc-mix-c-cxx\" -DPACKAGE_TARNAME=\"yacc-mix-c-cxx\" -DPACKAGE_VERSION=\"1.0\" -DPACKAGE_STRING=\"yacc-mix-c-cxx\ 1.0\" -DPACKAGE_BUGREPORT=\"\" -DPACKAGE_URL=\"\" -DPACKAGE=\"yacc-mix-c-cxx\" -DVERSION=\"1.0\" -I. -I..     -g -c -o parse.o parse.cc
cc-1311 CC: ERROR File = ../parse.yy, Line = 18
  The indicated linkage specification is incompatible with previous "yylex"
          (declared at line 4).

  	extern int yylex(void);
  	           ^

1 error detected in the compilation of "parse.cc".
make[1]: *** [Makefile:490: parse.o] Error 2
make[1]: Leaving directory '/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/yacc-mix-c-cxx.dir/build'
make: *** [Makefile:327: all] Error 2
+ am_exit_trap 2
+ exit_status=2
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 2 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
FAIL t/yacc-mix-c-cxx.sh (exit status: 2)

SKIP: t/libtool-macros
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/libtool-macros.dir
+ echo '# Automatically generated by libtool-macros.'
+ echo :
+ echo ACLOCAL_AMFLAGS = -I m4
+ libtoolize --copy --install
./t/libtool-macros.sh: line 29: libtoolize: command not found
+ rm -rf m4
+ mkdir m4
+ echo AC_PROG_LIBTOOL
+ aclocal-1.16 -Werror -Wno-syntax -I m4 --install
+ test -f m4/libtool.m4
+ echo 'skip_all_ "couldn'\''t find or get libtool macros"'
+ . ./get.sh
++ :
++ skip_all_ 'couldn'\''t find or get libtool macros'
++ skip_ 'couldn'\''t find or get libtool macros'
++ warn_ 'libtool-macros: skipped test: couldn'\''t find or get libtool macros'
++ echo 'libtool-macros: skipped test: couldn'\''t find or get libtool macros'
++ _am_exit 77
++ set +e
++ test 77 = 77
++ am__test_skipped=yes
++ exit 77
++ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/libtool-macros.sh (exit status: 77)

SKIP: t/gettext-macros
======================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/gettext-macros.dir
+ echo '# Automatically generated by gettext-macros.'
+ echo :
+ echo ACLOCAL_AMFLAGS = -I m4
++ extract_program_version autopoint
++ autopoint --version
./t/gettext-macros.sh: line 25: autopoint: command not found
++ sed 1q
++ /builds/dan/bootstrapinstall/bin/perl -ne '/(\d(?:\.\d+)+)/ and print "$1\n"'
+ autopoint_version=
+ test -n ''
+ autopoint_version=0.10.35
+ cat
+ autopoint --force
./t/gettext-macros.sh: line 55: autopoint: command not found
+ rm -rf m4
+ mkdir m4
+ aclocal-1.16 -Werror -Wno-syntax -I m4 --install
aclocal-1.16: warnings are treated as errors
configure.ac:4: warning: macro 'AM_GNU_GETTEXT' not found in library
configure.ac:5: warning: macro 'AM_GNU_GETTEXT_VERSION' not found in library
+ echo 'skip_all_ "couldn'\''t find or get gettext macros"'
+ cat
+ . ./get.sh
++ :
++ skip_all_ 'couldn'\''t find or get gettext macros'
++ skip_ 'couldn'\''t find or get gettext macros'
++ warn_ 'gettext-macros: skipped test: couldn'\''t find or get gettext macros'
++ echo 'gettext-macros: skipped test: couldn'\''t find or get gettext macros'
++ _am_exit 77
++ set +e
++ test 77 = 77
++ am__test_skipped=yes
++ exit 77
++ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/gettext-macros.sh (exit status: 77)

SKIP: t/check12-w
=================

./t/check12-w.sh: will source ./t/check12.sh
check12-w: running runtest SOMEPROGRAM=someprogram --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 945: runtest: command not found
SKIP t/check12-w.sh (exit status: 77)

SKIP: t/compile4-w
==================

./t/compile4-w.sh: will source ./t/compile4.sh
compile4-w: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
SKIP t/compile4-w.sh (exit status: 77)

SKIP: t/compile5-w
==================

./t/compile5-w.sh: will source ./t/compile5.sh
Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
+++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/compile5-w.dir
++ get_shell_script compile
++ am_source=compile
++ am_target=compile
++ test '!' -f compile
++ rm -f compile
++ test xyes = xyes
++ sed '1s|#!.*|#! /bin/ksh|' /builds/dan/bootstrapbuilds/automake/automake-1.16.1/lib/compile
++ chmod a+x compile
++ sed 10q compile
#! /bin/ksh
# Wrapper for compilers which do not understand '-c -o'.

scriptversion=2018-03-07.03; # UTC

# Copyright (C) 1999-2018 Free Software Foundation, Inc.
# Written by Tom Tromey <tromey@cygnus.com>.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
++ unset am_target am_source
++ cat
++ chmod +x ./cl
++ cat
++ :
++ cat
++ aclocal-1.16 -Werror
++ autoconf
++ automake-1.16 --foreign -Werror -Wall -a
configure.ac:4: installing './config.guess'
configure.ac:4: installing './config.sub'
++ ./configure
checking for a BSD-compatible install... /builds/dan/bootstrapinstall/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /builds/dan/bootstrapinstall/bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether make supports nested variables... yes
checking build system type... mips-sgi-irix6.5
checking host system type... mips-sgi-irix6.5
checking that generated files are newer than configure... done
configure: creating ./config.status
config.status: creating Makefile
config.status: creating check_host
++ . ./check_host
+++ case 'irix6.5' in
+++ skip_ 'target OS is not MinGW'
+++ warn_ 'compile5-w: skipped test: target OS is not MinGW'
+++ echo 'compile5-w: skipped test: target OS is not MinGW'
+++ _am_exit 77
+++ set +e
+++ test 77 = 77
+++ am__test_skipped=yes
+++ exit 77
+++ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP t/compile5-w.sh (exit status: 77)

SKIP: t/compile7-w
==================

./t/compile7-w.sh: will source ./t/compile7.sh
compile7-w: running icl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 790: icl: command not found
SKIP t/compile7-w.sh (exit status: 77)

SKIP: t/depcomp-lt-auto
=======================

depcomp-lt-auto: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
1..0 # SKIP required program 'libtoolize' not available
SKIP: t/depcomp-lt-auto.tap - required program 'libtoolize' not available

SKIP: t/depcomp-lt-cpp
======================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-lt-cpp.tap - GNU C compiler unavailable

SKIP: t/depcomp-lt-dashmstdout
==============================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-lt-dashmstdout.tap - GNU C compiler unavailable

SKIP: t/depcomp-lt-disabled
===========================

depcomp-lt-disabled: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
1..0 # SKIP required program 'libtoolize' not available
SKIP: t/depcomp-lt-disabled.tap - required program 'libtoolize' not available

SKIP: t/depcomp-lt-gcc
======================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-lt-gcc.tap - GNU C compiler unavailable

SKIP: t/depcomp-lt-makedepend
=============================

depcomp-lt-makedepend: running makedepend -f-
# DO NOT DELETE
depcomp-lt-makedepend: running libtoolize --version
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 993: libtoolize: command not found
1..0 # SKIP required program 'libtoolize' not available
SKIP: t/depcomp-lt-makedepend.tap - required program 'libtoolize' not available

SKIP: t/depcomp-lt-msvcmsys
===========================

depcomp-lt-msvcmsys: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
1..0 # SKIP Microsoft C compiler 'cl' not available
SKIP: t/depcomp-lt-msvcmsys.tap - Microsoft C compiler 'cl' not available

SKIP: t/depcomp-lt-msvisualcpp
==============================

depcomp-lt-msvisualcpp: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
1..0 # SKIP Microsoft C compiler 'cl' not available
SKIP: t/depcomp-lt-msvisualcpp.tap - Microsoft C compiler 'cl' not available

SKIP: t/depcomp-cpp
===================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-cpp.tap - GNU C compiler unavailable

SKIP: t/depcomp-dashmstdout
===========================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-dashmstdout.tap - GNU C compiler unavailable

SKIP: t/depcomp-gcc
===================

1..0 # SKIP GNU C compiler unavailable
SKIP: t/depcomp-gcc.tap - GNU C compiler unavailable

SKIP: t/depcomp-msvcmsys
========================

depcomp-msvcmsys: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
1..0 # SKIP Microsoft C compiler 'cl' not available
SKIP: t/depcomp-msvcmsys.tap - Microsoft C compiler 'cl' not available

SKIP: t/depcomp-msvisualcpp
===========================

depcomp-msvisualcpp: running cl -?
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax/am-test-lib.sh: line 779: cl: command not found
1..0 # SKIP Microsoft C compiler 'cl' not available
SKIP: t/depcomp-msvisualcpp.tap - Microsoft C compiler 'cl' not available

SKIP: contrib/t/parallel-tests-html
===================================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/contrib/t/parallel-tests-html.dir
+ :
+ for r2h in $RST2HTML rst2html rst2html.py
+ echo 'parallel-tests-html: running rst2html --version'
parallel-tests-html: running rst2html --version
+ rst2html --version
./contrib/t/parallel-tests-html.sh: line 27: rst2html: command not found
+ : For shells with busted 'set -e.'
+ for r2h in $RST2HTML rst2html rst2html.py
+ echo 'parallel-tests-html: running rst2html.py --version'
parallel-tests-html: running rst2html.py --version
+ rst2html.py --version
./contrib/t/parallel-tests-html.sh: line 27: rst2html.py: command not found
+ : For shells with busted 'set -e.'
+ skip_all_ 'no proper rst2html program found'
+ skip_ 'no proper rst2html program found'
+ warn_ 'parallel-tests-html: skipped test: no proper rst2html program found'
+ echo 'parallel-tests-html: skipped test: no proper rst2html program found'
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP contrib/t/parallel-tests-html.sh (exit status: 77)

SKIP: contrib/t/parallel-tests-html-recursive
=============================================

Running from installcheck: no
Test Protocol: none
PATH = /builds/dan/bootstrapbuilds/automake/automake-1.16.1/bin:/builds/dan/bootstrapbuilds/automake/automake-1.16.1/t/ax:/optdangit/bin:/builds/dan/bootstrapinstall/bin:/usr/sbin:/usr/bsd:/sbin:/usr/bin:/usr/bin/X11
++ pwd
/builds/dan/bootstrapbuilds/automake/automake-1.16.1/contrib/t/parallel-tests-html-recursive.dir
+ :
+ for r2h in $RST2HTML rst2html rst2html.py
+ echo 'parallel-tests-html-recursive: running rst2html --version'
parallel-tests-html-recursive: running rst2html --version
+ rst2html --version
./contrib/t/parallel-tests-html-recursive.sh: line 25: rst2html: command not found
+ : For shells with busted 'set -e.'
+ for r2h in $RST2HTML rst2html rst2html.py
+ echo 'parallel-tests-html-recursive: running rst2html.py --version'
parallel-tests-html-recursive: running rst2html.py --version
+ rst2html.py --version
./contrib/t/parallel-tests-html-recursive.sh: line 25: rst2html.py: command not found
+ : For shells with busted 'set -e.'
+ skip_all_ 'no proper rst2html program found'
+ skip_ 'no proper rst2html program found'
+ warn_ 'parallel-tests-html-recursive: skipped test: no proper rst2html program found'
+ echo 'parallel-tests-html-recursive: skipped test: no proper rst2html program found'
+ _am_exit 77
+ set +e
+ test 77 = 77
+ am__test_skipped=yes
+ exit 77
+ exit 77
+ am_exit_trap 77
+ exit_status=77
+ set +e
+ cd /builds/dan/bootstrapbuilds/automake/automake-1.16.1
+ test none = tap
+ case $am_explicit_skips in
+ test 77 -eq 0
+ keep_testdirs=yes
+ am_keeping_testdirs
+ case $keep_testdirs in
+ return 0
+ set +x
SKIP contrib/t/parallel-tests-html-recursive.sh (exit status: 77)

SKIP: contrib/t/multilib
========================

SKIP contrib/t/multilib.sh (exit status: 77)

